function lR(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function cS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xp={exports:{}},Kc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function cR(){if(pE)return Kc;pE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return Kc.Fragment=e,Kc.jsx=t,Kc.jsxs=t,Kc}var gE;function uR(){return gE||(gE=1,Xp.exports=cR()),Xp.exports}var T=uR(),Jp={exports:{}},Yc={},Zp={exports:{}},eg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function hR(){return _E||(_E=1,(function(n){function e(z,ie){var ne=z.length;z.push(ie);e:for(;0<ne;){var Ne=ne-1>>>1,ke=z[Ne];if(0<a(ke,ie))z[Ne]=ie,z[ne]=ke,ne=Ne;else break e}}function t(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var ie=z[0],ne=z.pop();if(ne!==ie){z[0]=ne;e:for(var Ne=0,ke=z.length,D=ke>>>1;Ne<D;){var X=2*(Ne+1)-1,Q=z[X],se=X+1,he=z[se];if(0>a(Q,ne))se<ke&&0>a(he,Q)?(z[Ne]=he,z[se]=ne,Ne=se):(z[Ne]=Q,z[X]=ne,Ne=X);else if(se<ke&&0>a(he,ne))z[Ne]=he,z[se]=ne,Ne=se;else break e}}return ie}function a(z,ie){var ne=z.sortIndex-ie.sortIndex;return ne!==0?ne:z.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var p=[],g=[],v=1,_=null,w=3,I=!1,V=!1,G=!1,H=!1,Y=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function me(z){for(var ie=t(g);ie!==null;){if(ie.callback===null)i(g);else if(ie.startTime<=z)i(g),ie.sortIndex=ie.expirationTime,e(p,ie);else break;ie=t(g)}}function Me(z){if(G=!1,me(z),!V)if(t(p)!==null)V=!0,Ee||(Ee=!0,L());else{var ie=t(g);ie!==null&&Ze(Me,ie.startTime-z)}}var Ee=!1,N=-1,x=5,R=-1;function P(){return H?!0:!(n.unstable_now()-R<x)}function O(){if(H=!1,Ee){var z=n.unstable_now();R=z;var ie=!0;try{e:{V=!1,G&&(G=!1,ce(N),N=-1),I=!0;var ne=w;try{t:{for(me(z),_=t(p);_!==null&&!(_.expirationTime>z&&P());){var Ne=_.callback;if(typeof Ne=="function"){_.callback=null,w=_.priorityLevel;var ke=Ne(_.expirationTime<=z);if(z=n.unstable_now(),typeof ke=="function"){_.callback=ke,me(z),ie=!0;break t}_===t(p)&&i(p),me(z)}else i(p);_=t(p)}if(_!==null)ie=!0;else{var D=t(g);D!==null&&Ze(Me,D.startTime-z),ie=!1}}break e}finally{_=null,w=ne,I=!1}ie=void 0}}finally{ie?L():Ee=!1}}}var L;if(typeof re=="function")L=function(){re(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Je=C.port2;C.port1.onmessage=O,L=function(){Je.postMessage(null)}}else L=function(){Y(O,0)};function Ze(z,ie){N=Y(function(){z(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(z){switch(w){case 1:case 2:case 3:var ie=3;break;default:ie=w}var ne=w;w=ie;try{return z()}finally{w=ne}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(z,ie){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ne=w;w=z;try{return ie()}finally{w=ne}},n.unstable_scheduleCallback=function(z,ie,ne){var Ne=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Ne+ne:Ne):ne=Ne,z){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=ne+ke,z={id:v++,callback:ie,priorityLevel:z,startTime:ne,expirationTime:ke,sortIndex:-1},ne>Ne?(z.sortIndex=ne,e(g,z),t(p)===null&&z===t(g)&&(G?(ce(N),N=-1):G=!0,Ze(Me,ne-Ne))):(z.sortIndex=ke,e(p,z),V||I||(V=!0,Ee||(Ee=!0,L()))),z},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(z){var ie=w;return function(){var ne=w;w=ie;try{return z.apply(this,arguments)}finally{w=ne}}}})(eg)),eg}var yE;function dR(){return yE||(yE=1,Zp.exports=hR()),Zp.exports}var tg={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE;function fR(){if(vE)return De;vE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),w=Symbol.iterator;function I(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,H={};function Y(D,X,Q){this.props=D,this.context=X,this.refs=H,this.updater=Q||V}Y.prototype.isReactComponent={},Y.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},Y.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ce(){}ce.prototype=Y.prototype;function re(D,X,Q){this.props=D,this.context=X,this.refs=H,this.updater=Q||V}var me=re.prototype=new ce;me.constructor=re,G(me,Y.prototype),me.isPureReactComponent=!0;var Me=Array.isArray;function Ee(){}var N={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(D,X,Q){var se=Q.ref;return{$$typeof:n,type:D,key:X,ref:se!==void 0?se:null,props:Q}}function P(D,X){return R(D.type,X,D.props)}function O(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function L(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Q){return X[Q]})}var C=/\/+/g;function Je(D,X){return typeof D=="object"&&D!==null&&D.key!=null?L(""+D.key):X.toString(36)}function Ze(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Ee,Ee):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function z(D,X,Q,se,he){var be=typeof D;(be==="undefined"||be==="boolean")&&(D=null);var ve=!1;if(D===null)ve=!0;else switch(be){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(D.$$typeof){case n:case e:ve=!0;break;case v:return ve=D._init,z(ve(D._payload),X,Q,se,he)}}if(ve)return he=he(D),ve=se===""?"."+Je(D,0):se,Me(he)?(Q="",ve!=null&&(Q=ve.replace(C,"$&/")+"/"),z(he,X,Q,"",function(hn){return hn})):he!=null&&(O(he)&&(he=P(he,Q+(he.key==null||D&&D.key===he.key?"":(""+he.key).replace(C,"$&/")+"/")+ve)),X.push(he)),1;ve=0;var Ie=se===""?".":se+":";if(Me(D))for(var Fe=0;Fe<D.length;Fe++)se=D[Fe],be=Ie+Je(se,Fe),ve+=z(se,X,Q,be,he);else if(Fe=I(D),typeof Fe=="function")for(D=Fe.call(D),Fe=0;!(se=D.next()).done;)se=se.value,be=Ie+Je(se,Fe++),ve+=z(se,X,Q,be,he);else if(be==="object"){if(typeof D.then=="function")return z(Ze(D),X,Q,se,he);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ve}function ie(D,X,Q){if(D==null)return D;var se=[],he=0;return z(D,se,"","",function(be){return X.call(Q,be,he++)}),se}function ne(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(Q){(D._status===0||D._status===-1)&&(D._status=1,D._result=Q)},function(Q){(D._status===0||D._status===-1)&&(D._status=2,D._result=Q)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var Ne=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},ke={map:ie,forEach:function(D,X,Q){ie(D,function(){X.apply(this,arguments)},Q)},count:function(D){var X=0;return ie(D,function(){X++}),X},toArray:function(D){return ie(D,function(X){return X})||[]},only:function(D){if(!O(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return De.Activity=_,De.Children=ke,De.Component=Y,De.Fragment=t,De.Profiler=a,De.PureComponent=re,De.StrictMode=i,De.Suspense=p,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,De.__COMPILER_RUNTIME={__proto__:null,c:function(D){return N.H.useMemoCache(D)}},De.cache=function(D){return function(){return D.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(D,X,Q){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var se=G({},D.props),he=D.key;if(X!=null)for(be in X.key!==void 0&&(he=""+X.key),X)!x.call(X,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&X.ref===void 0||(se[be]=X[be]);var be=arguments.length-2;if(be===1)se.children=Q;else if(1<be){for(var ve=Array(be),Ie=0;Ie<be;Ie++)ve[Ie]=arguments[Ie+2];se.children=ve}return R(D.type,he,se)},De.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},De.createElement=function(D,X,Q){var se,he={},be=null;if(X!=null)for(se in X.key!==void 0&&(be=""+X.key),X)x.call(X,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(he[se]=X[se]);var ve=arguments.length-2;if(ve===1)he.children=Q;else if(1<ve){for(var Ie=Array(ve),Fe=0;Fe<ve;Fe++)Ie[Fe]=arguments[Fe+2];he.children=Ie}if(D&&D.defaultProps)for(se in ve=D.defaultProps,ve)he[se]===void 0&&(he[se]=ve[se]);return R(D,be,he)},De.createRef=function(){return{current:null}},De.forwardRef=function(D){return{$$typeof:f,render:D}},De.isValidElement=O,De.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:ne}},De.memo=function(D,X){return{$$typeof:g,type:D,compare:X===void 0?null:X}},De.startTransition=function(D){var X=N.T,Q={};N.T=Q;try{var se=D(),he=N.S;he!==null&&he(Q,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Ee,Ne)}catch(be){Ne(be)}finally{X!==null&&Q.types!==null&&(X.types=Q.types),N.T=X}},De.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},De.use=function(D){return N.H.use(D)},De.useActionState=function(D,X,Q){return N.H.useActionState(D,X,Q)},De.useCallback=function(D,X){return N.H.useCallback(D,X)},De.useContext=function(D){return N.H.useContext(D)},De.useDebugValue=function(){},De.useDeferredValue=function(D,X){return N.H.useDeferredValue(D,X)},De.useEffect=function(D,X){return N.H.useEffect(D,X)},De.useEffectEvent=function(D){return N.H.useEffectEvent(D)},De.useId=function(){return N.H.useId()},De.useImperativeHandle=function(D,X,Q){return N.H.useImperativeHandle(D,X,Q)},De.useInsertionEffect=function(D,X){return N.H.useInsertionEffect(D,X)},De.useLayoutEffect=function(D,X){return N.H.useLayoutEffect(D,X)},De.useMemo=function(D,X){return N.H.useMemo(D,X)},De.useOptimistic=function(D,X){return N.H.useOptimistic(D,X)},De.useReducer=function(D,X,Q){return N.H.useReducer(D,X,Q)},De.useRef=function(D){return N.H.useRef(D)},De.useState=function(D){return N.H.useState(D)},De.useSyncExternalStore=function(D,X,Q){return N.H.useSyncExternalStore(D,X,Q)},De.useTransition=function(){return N.H.useTransition()},De.version="19.2.0",De}var bE;function Sf(){return bE||(bE=1,tg.exports=fR()),tg.exports}var ng={exports:{}},xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function mR(){if(EE)return xn;EE=1;var n=Sf();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:g,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,xn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},xn.flushSync=function(p){var g=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=g,i.p=v,i.d.f()}},xn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},xn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},xn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,_=f(v,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:w,fetchPriority:I}):v==="script"&&i.d.X(p,{crossOrigin:_,integrity:w,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},xn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=f(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},xn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,_=f(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},xn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=f(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},xn.requestFormReset=function(p){i.d.r(p)},xn.unstable_batchedUpdates=function(p,g){return p(g)},xn.useFormState=function(p,g,v){return u.H.useFormState(p,g,v)},xn.useFormStatus=function(){return u.H.useHostTransitionStatus()},xn.version="19.2.0",xn}var TE;function uS(){if(TE)return ng.exports;TE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ng.exports=mR(),ng.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function pR(){if(wE)return Yc;wE=1;var n=dR(),e=Sf(),t=uS();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,o=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(o=r.return),s=r.return;while(s)}return r.tag===3?o:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(l(s)!==s)throw Error(i(188))}function g(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var o=s,c=r;;){var d=o.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===o)return p(d),s;if(m===c)return p(d),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=d,c=m;else{for(var b=!1,S=d.child;S;){if(S===o){b=!0,o=d,c=m;break}if(S===c){b=!0,c=d,o=m;break}S=S.sibling}if(!b){for(S=m.child;S;){if(S===o){b=!0,o=m,c=d;break}if(S===c){b=!0,c=m,o=d;break}S=S.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var _=Object.assign,w=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),re=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var C=Symbol.for("react.client.reference");function Je(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===C?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case G:return"Fragment";case Y:return"Profiler";case H:return"StrictMode";case Me:return"Suspense";case Ee:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case V:return"Portal";case re:return s.displayName||"Context";case ce:return(s._context.displayName||"Context")+".Consumer";case me:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return r=s.displayName||null,r!==null?r:Je(s.type)||"Memo";case x:r=s._payload,s=s._init;try{return Je(s(r))}catch{}}return null}var Ze=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},Ne=[],ke=-1;function D(s){return{current:s}}function X(s){0>ke||(s.current=Ne[ke],Ne[ke]=null,ke--)}function Q(s,r){ke++,Ne[ke]=s.current,s.current=r}var se=D(null),he=D(null),be=D(null),ve=D(null);function Ie(s,r){switch(Q(be,r),Q(he,s),Q(se,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?Ub(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=Ub(r),s=jb(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}X(se),Q(se,s)}function Fe(){X(se),X(he),X(be)}function hn(s){s.memoizedState!==null&&Q(ve,s);var r=se.current,o=jb(r,s.type);r!==o&&(Q(he,s),Q(se,o))}function Mn(s){he.current===s&&(X(se),X(he)),ve.current===s&&(X(ve),qc._currentValue=ne)}var tn,wr;function zn(s){if(tn===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);tn=r&&r[1]||"",wr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tn+s+wr}var Da=!1;function ti(s,r){if(!s||Da)return"";Da=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(K){var q=K}Reflect.construct(s,[],Z)}else{try{Z.call()}catch(K){q=K}s.call(Z.prototype)}}else{try{throw Error()}catch(K){q=K}(Z=s())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(K){if(K&&q&&typeof K.stack=="string")return[K.stack,q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],S=m[1];if(b&&S){var k=b.split(`
`),F=S.split(`
`);for(d=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(c===k.length||d===F.length)for(c=k.length-1,d=F.length-1;1<=c&&0<=d&&k[c]!==F[d];)d--;for(;1<=c&&0<=d;c--,d--)if(k[c]!==F[d]){if(c!==1||d!==1)do if(c--,d--,0>d||k[c]!==F[d]){var W=`
`+k[c].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=c&&0<=d);break}}}finally{Da=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?zn(o):""}function ks(s,r){switch(s.tag){case 26:case 27:case 5:return zn(s.type);case 16:return zn("Lazy");case 13:return s.child!==r&&r!==null?zn("Suspense Fallback"):zn("Suspense");case 19:return zn("SuspenseList");case 0:case 15:return ti(s.type,!1);case 11:return ti(s.type.render,!1);case 1:return ti(s.type,!0);case 31:return zn("Activity");default:return""}}function Sr(s){try{var r="",o=null;do r+=ks(s,o),o=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var it=Object.prototype.hasOwnProperty,kt=n.unstable_scheduleCallback,ni=n.unstable_cancelCallback,dn=n.unstable_shouldYield,Ds=n.unstable_requestPaint,fn=n.unstable_now,Li=n.unstable_getCurrentPriorityLevel,si=n.unstable_ImmediatePriority,Oa=n.unstable_UserBlockingPriority,Os=n.unstable_NormalPriority,Ma=n.unstable_LowPriority,Ms=n.unstable_IdlePriority,Pa=n.log,Ps=n.unstable_setDisableYieldValue,Jn=null,Wt=null;function Pn(s){if(typeof Pa=="function"&&Ps(s),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Jn,s)}catch{}}var At=Math.clz32?Math.clz32:Zn,Ao=Math.log,ii=Math.LN2;function Zn(s){return s>>>=0,s===0?32:31-(Ao(s)/ii|0)|0}var ds=256,Ui=262144,It=4194304;function es(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Se(s,r,o){var c=s.pendingLanes;if(c===0)return 0;var d=0,m=s.suspendedLanes,b=s.pingedLanes;s=s.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?d=es(c):(b&=S,b!==0?d=es(b):o||(o=S&~s,o!==0&&(d=es(o))))):(S=c&~m,S!==0?d=es(S):b!==0?d=es(b):o||(o=c&~s,o!==0&&(d=es(o)))),d===0?0:r!==0&&r!==d&&(r&m)===0&&(m=d&-d,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:d}function rt(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Ut(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nn(){var s=It;return It<<=1,(It&62914560)===0&&(It=4194304),s}function Vn(s){for(var r=[],o=0;31>o;o++)r.push(s);return r}function vt(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function An(s,r,o,c,d,m){var b=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var S=s.entanglements,k=s.expirationTimes,F=s.hiddenUpdates;for(o=b&~o;0<o;){var W=31-At(o),Z=1<<W;S[W]=0,k[W]=-1;var q=F[W];if(q!==null)for(F[W]=null,W=0;W<q.length;W++){var K=q[W];K!==null&&(K.lane&=-536870913)}o&=~Z}c!==0&&fs(s,c,0),m!==0&&d===0&&s.tag!==0&&(s.suspendedLanes|=m&~(b&~r))}function fs(s,r,o){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-At(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|o&261930}function mn(s,r){var o=s.entangledLanes|=r;for(s=s.entanglements;o;){var c=31-At(o),d=1<<c;d&r|s[c]&r&&(s[c]|=r),o&=~d}}function pn(s,r){var o=r&-r;return o=(o&42)!==0?1:ri(o),(o&(s.suspendedLanes|r))!==0?0:o}function ri(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function gn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ql(){var s=ie.p;return s!==0?s:(s=window.event,s===void 0?32:lE(s.type))}function Vs(s,r){var o=ie.p;try{return ie.p=s,r()}finally{ie.p=o}}var Ls=Math.random().toString(36).slice(2),jt="__reactFiber$"+Ls,sn="__reactProps$"+Ls,ai="__reactContainer$"+Ls,xo="__reactEvents$"+Ls,sm="__reactListeners$"+Ls,Xu="__reactHandles$"+Ls,Ju="__reactResources$"+Ls,oi="__reactMarker$"+Ls;function Co(s){delete s[jt],delete s[sn],delete s[xo],delete s[sm],delete s[Xu]}function li(s){var r=s[jt];if(r)return r;for(var o=s.parentNode;o;){if(r=o[ai]||o[jt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(s=$b(s);s!==null;){if(o=s[jt])return o;s=$b(s)}return r}s=o,o=s.parentNode}return null}function ms(s){if(s=s[jt]||s[ai]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function ts(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function ci(s){var r=s[Ju];return r||(r=s[Ju]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function zt(s){s[oi]=!0}var Wl=new Set,Xl={};function ui(s,r){hi(s,r),hi(s+"Capture",r)}function hi(s,r){for(Xl[s]=r,s=0;s<r.length;s++)Wl.add(r[s])}var Jl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zl={},ec={};function Zu(s){return it.call(ec,s)?!0:it.call(Zl,s)?!1:Jl.test(s)?ec[s]=!0:(Zl[s]=!0,!1)}function Io(s,r,o){if(Zu(r))if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+o)}}function ns(s,r,o){if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+o)}}function Bt(s,r,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(r,o,""+c)}}function rn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ar(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function tc(s,r,o){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var d=c.get,m=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return d.call(this)},set:function(b){o=""+b,m.call(this,b)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function lt(s){if(!s._valueTracker){var r=Ar(s)?"checked":"value";s._valueTracker=tc(s,r,""+s[r])}}function Va(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return s&&(c=Ar(s)?s.checked?"true":"false":s.value),s=c,s!==o?(r.setValue(s),!0):!1}function di(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var La=/[\n"\\]/g;function Bn(s){return s.replace(La,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ro(s,r,o,c,d,m,b,S){s.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.type=b:s.removeAttribute("type"),r!=null?b==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+rn(r)):s.value!==""+rn(r)&&(s.value=""+rn(r)):b!=="submit"&&b!=="reset"||s.removeAttribute("value"),r!=null?nc(s,b,rn(r)):o!=null?nc(s,b,rn(o)):c!=null&&s.removeAttribute("value"),d==null&&m!=null&&(s.defaultChecked=!!m),d!=null&&(s.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.name=""+rn(S):s.removeAttribute("name")}function eh(s,r,o,c,d,m,b,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(s.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){lt(s);return}o=o!=null?""+rn(o):"",r=r!=null?""+rn(r):o,S||r===s.value||(s.value=r),s.defaultValue=r}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=S?s.checked:!!c,s.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.name=b),lt(s)}function nc(s,r,o){r==="number"&&di(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function xr(s,r,o,c){if(s=s.options,r){r={};for(var d=0;d<o.length;d++)r["$"+o[d]]=!0;for(o=0;o<s.length;o++)d=r.hasOwnProperty("$"+s[o].value),s[o].selected!==d&&(s[o].selected=d),d&&c&&(s[o].defaultSelected=!0)}else{for(o=""+rn(o),r=null,d=0;d<s.length;d++){if(s[d].value===o){s[d].selected=!0,c&&(s[d].defaultSelected=!0);return}r!==null||s[d].disabled||(r=s[d])}r!==null&&(r.selected=!0)}}function th(s,r,o){if(r!=null&&(r=""+rn(r),r!==s.value&&(s.value=r),o==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=o!=null?""+rn(o):""}function Cr(s,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(Ze(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=rn(r),s.defaultValue=o,c=s.textContent,c===o&&c!==""&&c!==null&&(s.value=c),lt(s)}function Fn(s,r){if(r){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=r;return}}s.textContent=r}var nh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sc(s,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,o):typeof o!="number"||o===0||nh.has(r)?r==="float"?s.cssFloat=o:s[r]=(""+o).trim():s[r]=o+"px"}function ic(s,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var d in r)c=r[d],r.hasOwnProperty(d)&&o[d]!==c&&sc(s,d,c)}else for(var m in r)r.hasOwnProperty(m)&&sc(s,m,r[m])}function No(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ir=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(s){return Ir.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Us(){}var rc=null;function ps(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Rr=null,fi=null;function Ua(s){var r=ms(s);if(r&&(s=r.stateNode)){var o=s[sn]||null;e:switch(s=r.stateNode,r.type){case"input":if(Ro(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==s&&c.form===s.form){var d=c[sn]||null;if(!d)throw Error(i(90));Ro(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===s.form&&Va(c)}break e;case"textarea":th(s,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&xr(s,!!o.multiple,r,!1)}}}var Do=!1;function Nr(s,r,o){if(Do)return s(r,o);Do=!0;try{var c=s(r);return c}finally{if(Do=!1,(Rr!==null||fi!==null)&&(Wh(),Rr&&(r=Rr,s=fi,fi=Rr=null,Ua(r),s)))for(r=0;r<s.length;r++)Ua(s[r])}}function js(s,r){var o=s.stateNode;if(o===null)return null;var c=o[sn]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=!1;if(gs)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){ja=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{ja=!1}var mi=null,ac=null,za=null;function oc(){if(za)return za;var s,r=ac,o=r.length,c,d="value"in mi?mi.value:mi.textContent,m=d.length;for(s=0;s<o&&r[s]===d[s];s++);var b=o-s;for(c=1;c<=b&&r[o-c]===d[m-c];c++);return za=d.slice(s,1<c?1-c:void 0)}function Ba(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function ji(){return!0}function zs(){return!1}function _n(s){function r(o,c,d,m,b){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var S in s)s.hasOwnProperty(S)&&(o=s[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ji:zs,this.isPropagationStopped=zs,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),r}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=_n(zi),kr=_({},zi,{view:0,detail:0}),lc=_n(kr),Dr,Oo,gi,Mo=_({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Or,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gi&&(gi&&s.type==="mousemove"?(Dr=s.screenX-gi.screenX,Oo=s.screenY-gi.screenY):Oo=Dr=0,gi=s),Dr)},movementY:function(s){return"movementY"in s?s.movementY:Oo}}),cc=_n(Mo),Fa=_({},Mo,{dataTransfer:0}),ih=_n(Fa),rh=_({},kr,{relatedTarget:0}),qa=_n(rh),uc=_({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),ah=_n(uc),Po=_({},zi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),oh=_n(Po),lh=_({},zi,{data:0}),_i=_n(lh),ch={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dh(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=hh[s])?!!r[s]:!1}function Or(){return dh}var Ln=_({},kr,{key:function(s){if(s.key){var r=ch[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Ba(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?uh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Or,charCode:function(s){return s.type==="keypress"?Ba(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ba(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),fh=_n(Ln),mh=_({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bi=_n(mh),h=_({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Or}),y=_n(h),E=_({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=_n(E),j=_({},Mo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$=_n(j),le=_({},zi,{newState:0,oldState:0}),Pe=_n(le),Dt=[9,13,27,32],nt=gs&&"CompositionEvent"in window,xt=null;gs&&"documentMode"in document&&(xt=document.documentMode);var _s=gs&&"TextEvent"in window&&!xt,yi=gs&&(!nt||xt&&8<xt&&11>=xt),Bs=" ",Fs=!1;function Ha(s,r){switch(s){case"keyup":return Dt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lo=!1;function DC(s,r){switch(s){case"compositionend":return Vo(r);case"keypress":return r.which!==32?null:(Fs=!0,Bs);case"textInput":return s=r.data,s===Bs&&Fs?null:s;default:return null}}function OC(s,r){if(Lo)return s==="compositionend"||!nt&&Ha(s,r)?(s=oc(),za=ac=mi=null,Lo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yi&&r.locale!=="ko"?null:r.data;default:return null}}var MC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!MC[s.type]:r==="textarea"}function Wy(s,r,o,c){Rr?fi?fi.push(c):fi=[c]:Rr=c,r=sd(r,"onChange"),0<r.length&&(o=new pi("onChange","change",null,o,c),s.push({event:o,listeners:r}))}var hc=null,dc=null;function PC(s){Db(s,0)}function ph(s){var r=ts(s);if(Va(r))return s}function Xy(s,r){if(s==="change")return r}var Jy=!1;if(gs){var im;if(gs){var rm="oninput"in document;if(!rm){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),rm=typeof Zy.oninput=="function"}im=rm}else im=!1;Jy=im&&(!document.documentMode||9<document.documentMode)}function ev(){hc&&(hc.detachEvent("onpropertychange",tv),dc=hc=null)}function tv(s){if(s.propertyName==="value"&&ph(dc)){var r=[];Wy(r,dc,s,ps(s)),Nr(PC,r)}}function VC(s,r,o){s==="focusin"?(ev(),hc=r,dc=o,hc.attachEvent("onpropertychange",tv)):s==="focusout"&&ev()}function LC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ph(dc)}function UC(s,r){if(s==="click")return ph(r)}function jC(s,r){if(s==="input"||s==="change")return ph(r)}function zC(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var ss=typeof Object.is=="function"?Object.is:zC;function fc(s,r){if(ss(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var o=Object.keys(s),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!it.call(r,d)||!ss(s[d],r[d]))return!1}return!0}function nv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function sv(s,r){var o=nv(s);s=0;for(var c;o;){if(o.nodeType===3){if(c=s+o.textContent.length,s<=r&&c>=r)return{node:o,offset:r-s};s=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=nv(o)}}function iv(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?iv(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function rv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=di(s.document);r instanceof s.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)s=r.contentWindow;else break;r=di(s.document)}return r}function am(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var BC=gs&&"documentMode"in document&&11>=document.documentMode,Uo=null,om=null,mc=null,lm=!1;function av(s,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;lm||Uo==null||Uo!==di(c)||(c=Uo,"selectionStart"in c&&am(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),mc&&fc(mc,c)||(mc=c,c=sd(om,"onSelect"),0<c.length&&(r=new pi("onSelect","select",null,r,o),s.push({event:r,listeners:c}),r.target=Uo)))}function Ga(s,r){var o={};return o[s.toLowerCase()]=r.toLowerCase(),o["Webkit"+s]="webkit"+r,o["Moz"+s]="moz"+r,o}var jo={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},cm={},ov={};gs&&(ov=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function $a(s){if(cm[s])return cm[s];if(!jo[s])return s;var r=jo[s],o;for(o in r)if(r.hasOwnProperty(o)&&o in ov)return cm[s]=r[o];return s}var lv=$a("animationend"),cv=$a("animationiteration"),uv=$a("animationstart"),FC=$a("transitionrun"),qC=$a("transitionstart"),HC=$a("transitioncancel"),hv=$a("transitionend"),dv=new Map,um="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");um.push("scrollEnd");function qs(s,r){dv.set(s,r),ui(r,[s])}var gh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ys=[],zo=0,hm=0;function _h(){for(var s=zo,r=hm=zo=0;r<s;){var o=ys[r];ys[r++]=null;var c=ys[r];ys[r++]=null;var d=ys[r];ys[r++]=null;var m=ys[r];if(ys[r++]=null,c!==null&&d!==null){var b=c.pending;b===null?d.next=d:(d.next=b.next,b.next=d),c.pending=d}m!==0&&fv(o,d,m)}}function yh(s,r,o,c){ys[zo++]=s,ys[zo++]=r,ys[zo++]=o,ys[zo++]=c,hm|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function dm(s,r,o,c){return yh(s,r,o,c),vh(s)}function Ka(s,r){return yh(s,null,null,r),vh(s)}function fv(s,r,o){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o);for(var d=!1,m=s.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(s=m.stateNode,s===null||s._visibility&1||(d=!0)),s=m,m=m.return;return s.tag===3?(m=s.stateNode,d&&r!==null&&(d=31-At(o),s=m.hiddenUpdates,c=s[d],c===null?s[d]=[r]:c.push(r),r.lane=o|536870912),m):null}function vh(s){if(50<Vc)throw Vc=0,Ep=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Bo={};function GC(s,r,o,c){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(s,r,o,c){return new GC(s,r,o,c)}function fm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Fi(s,r){var o=s.alternate;return o===null?(o=is(s.tag,r,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=r,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,r=s.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function mv(s,r){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function bh(s,r,o,c,d,m){var b=0;if(c=s,typeof s=="function")fm(s)&&(b=1);else if(typeof s=="string")b=WI(s,o,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=is(31,o,r,d),s.elementType=R,s.lanes=m,s;case G:return Ya(o.children,d,m,r);case H:b=8,d|=24;break;case Y:return s=is(12,o,r,d|2),s.elementType=Y,s.lanes=m,s;case Me:return s=is(13,o,r,d),s.elementType=Me,s.lanes=m,s;case Ee:return s=is(19,o,r,d),s.elementType=Ee,s.lanes=m,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case re:b=10;break e;case ce:b=9;break e;case me:b=11;break e;case N:b=14;break e;case x:b=16,c=null;break e}b=29,o=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=is(b,o,r,d),r.elementType=s,r.type=c,r.lanes=m,r}function Ya(s,r,o,c){return s=is(7,s,c,r),s.lanes=o,s}function mm(s,r,o){return s=is(6,s,null,r),s.lanes=o,s}function pv(s){var r=is(18,null,null,0);return r.stateNode=s,r}function pm(s,r,o){return r=is(4,s.children!==null?s.children:[],s.key,r),r.lanes=o,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var gv=new WeakMap;function vs(s,r){if(typeof s=="object"&&s!==null){var o=gv.get(s);return o!==void 0?o:(r={value:s,source:r,stack:Sr(r)},gv.set(s,r),r)}return{value:s,source:r,stack:Sr(r)}}var Fo=[],qo=0,Eh=null,pc=0,bs=[],Es=0,Mr=null,vi=1,bi="";function qi(s,r){Fo[qo++]=pc,Fo[qo++]=Eh,Eh=s,pc=r}function _v(s,r,o){bs[Es++]=vi,bs[Es++]=bi,bs[Es++]=Mr,Mr=s;var c=vi;s=bi;var d=32-At(c)-1;c&=~(1<<d),o+=1;var m=32-At(r)+d;if(30<m){var b=d-d%5;m=(c&(1<<b)-1).toString(32),c>>=b,d-=b,vi=1<<32-At(r)+d|o<<d|c,bi=m+s}else vi=1<<m|o<<d|c,bi=s}function gm(s){s.return!==null&&(qi(s,1),_v(s,1,0))}function _m(s){for(;s===Eh;)Eh=Fo[--qo],Fo[qo]=null,pc=Fo[--qo],Fo[qo]=null;for(;s===Mr;)Mr=bs[--Es],bs[Es]=null,bi=bs[--Es],bs[Es]=null,vi=bs[--Es],bs[Es]=null}function yv(s,r){bs[Es++]=vi,bs[Es++]=bi,bs[Es++]=Mr,vi=r.id,bi=r.overflow,Mr=s}var yn=null,bt=null,Ke=!1,Pr=null,Ts=!1,ym=Error(i(519));function Vr(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gc(vs(r,s)),ym}function vv(s){var r=s.stateNode,o=s.type,c=s.memoizedProps;switch(r[jt]=s,r[sn]=c,o){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(o=0;o<Uc.length;o++)ze(Uc[o],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":ze("invalid",r),eh(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ze("invalid",r);break;case"textarea":ze("invalid",r),Cr(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||Vb(r.textContent,o)?(c.popover!=null&&(ze("beforetoggle",r),ze("toggle",r)),c.onScroll!=null&&ze("scroll",r),c.onScrollEnd!=null&&ze("scrollend",r),c.onClick!=null&&(r.onclick=Us),r=!0):r=!1,r||Vr(s,!0)}function bv(s){for(yn=s.return;yn;)switch(yn.tag){case 5:case 31:case 13:Ts=!1;return;case 27:case 3:Ts=!0;return;default:yn=yn.return}}function Ho(s){if(s!==yn)return!1;if(!Ke)return bv(s),Ke=!0,!1;var r=s.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Vp(s.type,s.memoizedProps)),o=!o),o&&bt&&Vr(s),bv(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));bt=Gb(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));bt=Gb(s)}else r===27?(r=bt,Wr(s.type)?(s=Bp,Bp=null,bt=s):bt=r):bt=yn?Ss(s.stateNode.nextSibling):null;return!0}function Qa(){bt=yn=null,Ke=!1}function vm(){var s=Pr;return s!==null&&($n===null?$n=s:$n.push.apply($n,s),Pr=null),s}function gc(s){Pr===null?Pr=[s]:Pr.push(s)}var bm=D(null),Wa=null,Hi=null;function Lr(s,r,o){Q(bm,r._currentValue),r._currentValue=o}function Gi(s){s._currentValue=bm.current,X(bm)}function Em(s,r,o){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===o)break;s=s.return}}function Tm(s,r,o,c){var d=s.child;for(d!==null&&(d.return=s);d!==null;){var m=d.dependencies;if(m!==null){var b=d.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=d;for(var k=0;k<r.length;k++)if(S.context===r[k]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),Em(m.return,o,s),c||(b=null);break e}m=S.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(i(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),Em(b,o,s),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===s){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Go(s,r,o,c){s=null;for(var d=r,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var S=d.type;ss(d.pendingProps.value,b.value)||(s!==null?s.push(S):s=[S])}}else if(d===ve.current){if(b=d.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(s!==null?s.push(qc):s=[qc])}d=d.return}s!==null&&Tm(r,s,o,c),r.flags|=262144}function Th(s){for(s=s.firstContext;s!==null;){if(!ss(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Xa(s){Wa=s,Hi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function vn(s){return Ev(Wa,s)}function wh(s,r){return Wa===null&&Xa(s),Ev(s,r)}function Ev(s,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Hi===null){if(s===null)throw Error(i(308));Hi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Hi=Hi.next=r;return o}var $C=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(o,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(o){return o()})}},KC=n.unstable_scheduleCallback,YC=n.unstable_NormalPriority,Ft={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wm(){return{controller:new $C,data:new Map,refCount:0}}function _c(s){s.refCount--,s.refCount===0&&KC(YC,function(){s.controller.abort()})}var yc=null,Sm=0,$o=0,Ko=null;function QC(s,r){if(yc===null){var o=yc=[];Sm=0,$o=Cp(),Ko={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Sm++,r.then(Tv,Tv),r}function Tv(){if(--Sm===0&&yc!==null){Ko!==null&&(Ko.status="fulfilled");var s=yc;yc=null,$o=0,Ko=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function WC(s,r){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var d=0;d<o.length;d++)(0,o[d])(r)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var wv=z.S;z.S=function(s,r){ab=fn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&QC(s,r),wv!==null&&wv(s,r)};var Ja=D(null);function Am(){var s=Ja.current;return s!==null?s:_t.pooledCache}function Sh(s,r){r===null?Q(Ja,Ja.current):Q(Ja,r.pool)}function Sv(){var s=Am();return s===null?null:{parent:Ft._currentValue,pool:s}}var Yo=Error(i(460)),xm=Error(i(474)),Ah=Error(i(542)),xh={then:function(){}};function Av(s){return s=s.status,s==="fulfilled"||s==="rejected"}function xv(s,r,o){switch(o=s[o],o===void 0?s.push(r):o!==r&&(r.then(Us,Us),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Iv(s),s;default:if(typeof r.status=="string")r.then(Us,Us);else{if(s=_t,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=c}},function(c){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Iv(s),s}throw eo=r,Yo}}function Za(s){try{var r=s._init;return r(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(eo=o,Yo):o}}var eo=null;function Cv(){if(eo===null)throw Error(i(459));var s=eo;return eo=null,s}function Iv(s){if(s===Yo||s===Ah)throw Error(i(483))}var Qo=null,vc=0;function Ch(s){var r=vc;return vc+=1,Qo===null&&(Qo=[]),xv(Qo,s,r)}function bc(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Ih(s,r){throw r.$$typeof===w?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Rv(s){function r(U,M){if(s){var B=U.deletions;B===null?(U.deletions=[M],U.flags|=16):B.push(M)}}function o(U,M){if(!s)return null;for(;M!==null;)r(U,M),M=M.sibling;return null}function c(U){for(var M=new Map;U!==null;)U.key!==null?M.set(U.key,U):M.set(U.index,U),U=U.sibling;return M}function d(U,M){return U=Fi(U,M),U.index=0,U.sibling=null,U}function m(U,M,B){return U.index=B,s?(B=U.alternate,B!==null?(B=B.index,B<M?(U.flags|=67108866,M):B):(U.flags|=67108866,M)):(U.flags|=1048576,M)}function b(U){return s&&U.alternate===null&&(U.flags|=67108866),U}function S(U,M,B,J){return M===null||M.tag!==6?(M=mm(B,U.mode,J),M.return=U,M):(M=d(M,B),M.return=U,M)}function k(U,M,B,J){var Te=B.type;return Te===G?W(U,M,B.props.children,J,B.key):M!==null&&(M.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===x&&Za(Te)===M.type)?(M=d(M,B.props),bc(M,B),M.return=U,M):(M=bh(B.type,B.key,B.props,null,U.mode,J),bc(M,B),M.return=U,M)}function F(U,M,B,J){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=pm(B,U.mode,J),M.return=U,M):(M=d(M,B.children||[]),M.return=U,M)}function W(U,M,B,J,Te){return M===null||M.tag!==7?(M=Ya(B,U.mode,J,Te),M.return=U,M):(M=d(M,B),M.return=U,M)}function Z(U,M,B){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=mm(""+M,U.mode,B),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case I:return B=bh(M.type,M.key,M.props,null,U.mode,B),bc(B,M),B.return=U,B;case V:return M=pm(M,U.mode,B),M.return=U,M;case x:return M=Za(M),Z(U,M,B)}if(Ze(M)||L(M))return M=Ya(M,U.mode,B,null),M.return=U,M;if(typeof M.then=="function")return Z(U,Ch(M),B);if(M.$$typeof===re)return Z(U,wh(U,M),B);Ih(U,M)}return null}function q(U,M,B,J){var Te=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Te!==null?null:S(U,M,""+B,J);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return B.key===Te?k(U,M,B,J):null;case V:return B.key===Te?F(U,M,B,J):null;case x:return B=Za(B),q(U,M,B,J)}if(Ze(B)||L(B))return Te!==null?null:W(U,M,B,J,null);if(typeof B.then=="function")return q(U,M,Ch(B),J);if(B.$$typeof===re)return q(U,M,wh(U,B),J);Ih(U,B)}return null}function K(U,M,B,J,Te){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(B)||null,S(M,U,""+J,Te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case I:return U=U.get(J.key===null?B:J.key)||null,k(M,U,J,Te);case V:return U=U.get(J.key===null?B:J.key)||null,F(M,U,J,Te);case x:return J=Za(J),K(U,M,B,J,Te)}if(Ze(J)||L(J))return U=U.get(B)||null,W(M,U,J,Te,null);if(typeof J.then=="function")return K(U,M,B,Ch(J),Te);if(J.$$typeof===re)return K(U,M,B,wh(M,J),Te);Ih(M,J)}return null}function pe(U,M,B,J){for(var Te=null,et=null,ye=M,Le=M=0,He=null;ye!==null&&Le<B.length;Le++){ye.index>Le?(He=ye,ye=null):He=ye.sibling;var tt=q(U,ye,B[Le],J);if(tt===null){ye===null&&(ye=He);break}s&&ye&&tt.alternate===null&&r(U,ye),M=m(tt,M,Le),et===null?Te=tt:et.sibling=tt,et=tt,ye=He}if(Le===B.length)return o(U,ye),Ke&&qi(U,Le),Te;if(ye===null){for(;Le<B.length;Le++)ye=Z(U,B[Le],J),ye!==null&&(M=m(ye,M,Le),et===null?Te=ye:et.sibling=ye,et=ye);return Ke&&qi(U,Le),Te}for(ye=c(ye);Le<B.length;Le++)He=K(ye,U,Le,B[Le],J),He!==null&&(s&&He.alternate!==null&&ye.delete(He.key===null?Le:He.key),M=m(He,M,Le),et===null?Te=He:et.sibling=He,et=He);return s&&ye.forEach(function(ta){return r(U,ta)}),Ke&&qi(U,Le),Te}function Ae(U,M,B,J){if(B==null)throw Error(i(151));for(var Te=null,et=null,ye=M,Le=M=0,He=null,tt=B.next();ye!==null&&!tt.done;Le++,tt=B.next()){ye.index>Le?(He=ye,ye=null):He=ye.sibling;var ta=q(U,ye,tt.value,J);if(ta===null){ye===null&&(ye=He);break}s&&ye&&ta.alternate===null&&r(U,ye),M=m(ta,M,Le),et===null?Te=ta:et.sibling=ta,et=ta,ye=He}if(tt.done)return o(U,ye),Ke&&qi(U,Le),Te;if(ye===null){for(;!tt.done;Le++,tt=B.next())tt=Z(U,tt.value,J),tt!==null&&(M=m(tt,M,Le),et===null?Te=tt:et.sibling=tt,et=tt);return Ke&&qi(U,Le),Te}for(ye=c(ye);!tt.done;Le++,tt=B.next())tt=K(ye,U,Le,tt.value,J),tt!==null&&(s&&tt.alternate!==null&&ye.delete(tt.key===null?Le:tt.key),M=m(tt,M,Le),et===null?Te=tt:et.sibling=tt,et=tt);return s&&ye.forEach(function(oR){return r(U,oR)}),Ke&&qi(U,Le),Te}function mt(U,M,B,J){if(typeof B=="object"&&B!==null&&B.type===G&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case I:e:{for(var Te=B.key;M!==null;){if(M.key===Te){if(Te=B.type,Te===G){if(M.tag===7){o(U,M.sibling),J=d(M,B.props.children),J.return=U,U=J;break e}}else if(M.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===x&&Za(Te)===M.type){o(U,M.sibling),J=d(M,B.props),bc(J,B),J.return=U,U=J;break e}o(U,M);break}else r(U,M);M=M.sibling}B.type===G?(J=Ya(B.props.children,U.mode,J,B.key),J.return=U,U=J):(J=bh(B.type,B.key,B.props,null,U.mode,J),bc(J,B),J.return=U,U=J)}return b(U);case V:e:{for(Te=B.key;M!==null;){if(M.key===Te)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){o(U,M.sibling),J=d(M,B.children||[]),J.return=U,U=J;break e}else{o(U,M);break}else r(U,M);M=M.sibling}J=pm(B,U.mode,J),J.return=U,U=J}return b(U);case x:return B=Za(B),mt(U,M,B,J)}if(Ze(B))return pe(U,M,B,J);if(L(B)){if(Te=L(B),typeof Te!="function")throw Error(i(150));return B=Te.call(B),Ae(U,M,B,J)}if(typeof B.then=="function")return mt(U,M,Ch(B),J);if(B.$$typeof===re)return mt(U,M,wh(U,B),J);Ih(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,M!==null&&M.tag===6?(o(U,M.sibling),J=d(M,B),J.return=U,U=J):(o(U,M),J=mm(B,U.mode,J),J.return=U,U=J),b(U)):o(U,M)}return function(U,M,B,J){try{vc=0;var Te=mt(U,M,B,J);return Qo=null,Te}catch(ye){if(ye===Yo||ye===Ah)throw ye;var et=is(29,ye,null,U.mode);return et.lanes=J,et.return=U,et}finally{}}}var to=Rv(!0),Nv=Rv(!1),Ur=!1;function Cm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Im(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function jr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function zr(s,r,o){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(st&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,r=vh(s),fv(s,null,o),r}return yh(s,c,r,o),vh(s)}function Ec(s,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,o|=c,r.lanes=o,mn(s,o)}}function Rm(s,r){var o=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?d=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?d=m=r:m=m.next=r}else d=m=r;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=r:s.next=r,o.lastBaseUpdate=r}var Nm=!1;function Tc(){if(Nm){var s=Ko;if(s!==null)throw s}}function wc(s,r,o,c){Nm=!1;var d=s.updateQueue;Ur=!1;var m=d.firstBaseUpdate,b=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var k=S,F=k.next;k.next=null,b===null?m=F:b.next=F,b=k;var W=s.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==b&&(S===null?W.firstBaseUpdate=F:S.next=F,W.lastBaseUpdate=k))}if(m!==null){var Z=d.baseState;b=0,W=F=k=null,S=m;do{var q=S.lane&-536870913,K=q!==S.lane;if(K?(qe&q)===q:(c&q)===q){q!==0&&q===$o&&(Nm=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var pe=s,Ae=S;q=r;var mt=o;switch(Ae.tag){case 1:if(pe=Ae.payload,typeof pe=="function"){Z=pe.call(mt,Z,q);break e}Z=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ae.payload,q=typeof pe=="function"?pe.call(mt,Z,q):pe,q==null)break e;Z=_({},Z,q);break e;case 2:Ur=!0}}q=S.callback,q!==null&&(s.flags|=64,K&&(s.flags|=8192),K=d.callbacks,K===null?d.callbacks=[q]:K.push(q))}else K={lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(F=W=K,k=Z):W=W.next=K,b|=q;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;K=S,S=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);W===null&&(k=Z),d.baseState=k,d.firstBaseUpdate=F,d.lastBaseUpdate=W,m===null&&(d.shared.lanes=0),Gr|=b,s.lanes=b,s.memoizedState=Z}}function kv(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Dv(s,r){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)kv(o[s],r)}var Wo=D(null),Rh=D(0);function Ov(s,r){s=er,Q(Rh,s),Q(Wo,r),er=s|r.baseLanes}function km(){Q(Rh,er),Q(Wo,Wo.current)}function Dm(){er=Rh.current,X(Wo),X(Rh)}var rs=D(null),ws=null;function Br(s){var r=s.alternate;Q(Ot,Ot.current&1),Q(rs,s),ws===null&&(r===null||Wo.current!==null||r.memoizedState!==null)&&(ws=s)}function Om(s){Q(Ot,Ot.current),Q(rs,s),ws===null&&(ws=s)}function Mv(s){s.tag===22?(Q(Ot,Ot.current),Q(rs,s),ws===null&&(ws=s)):Fr()}function Fr(){Q(Ot,Ot.current),Q(rs,rs.current)}function as(s){X(rs),ws===s&&(ws=null),X(Ot)}var Ot=D(0);function Nh(s){for(var r=s;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||jp(o)||zp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var $i=0,Ve=null,dt=null,qt=null,kh=!1,Xo=!1,no=!1,Dh=0,Sc=0,Jo=null,XC=0;function Rt(){throw Error(i(321))}function Mm(s,r){if(r===null)return!1;for(var o=0;o<r.length&&o<s.length;o++)if(!ss(s[o],r[o]))return!1;return!0}function Pm(s,r,o,c,d,m){return $i=m,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,z.H=s===null||s.memoizedState===null?_0:Wm,no=!1,m=o(c,d),no=!1,Xo&&(m=Vv(r,o,c,d)),Pv(s),m}function Pv(s){z.H=Cc;var r=dt!==null&&dt.next!==null;if($i=0,qt=dt=Ve=null,kh=!1,Sc=0,Jo=null,r)throw Error(i(300));s===null||Ht||(s=s.dependencies,s!==null&&Th(s)&&(Ht=!0))}function Vv(s,r,o,c){Ve=s;var d=0;do{if(Xo&&(Jo=null),Sc=0,Xo=!1,25<=d)throw Error(i(301));if(d+=1,qt=dt=null,s.updateQueue!=null){var m=s.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}z.H=y0,m=r(o,c)}while(Xo);return m}function JC(){var s=z.H,r=s.useState()[0];return r=typeof r.then=="function"?Ac(r):r,s=s.useState()[0],(dt!==null?dt.memoizedState:null)!==s&&(Ve.flags|=1024),r}function Vm(){var s=Dh!==0;return Dh=0,s}function Lm(s,r,o){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~o}function Um(s){if(kh){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}kh=!1}$i=0,qt=dt=Ve=null,Xo=!1,Sc=Dh=0,Jo=null}function Un(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Ve.memoizedState=qt=s:qt=qt.next=s,qt}function Mt(){if(dt===null){var s=Ve.alternate;s=s!==null?s.memoizedState:null}else s=dt.next;var r=qt===null?Ve.memoizedState:qt.next;if(r!==null)qt=r,dt=s;else{if(s===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));dt=s,s={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},qt===null?Ve.memoizedState=qt=s:qt=qt.next=s}return qt}function Oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ac(s){var r=Sc;return Sc+=1,Jo===null&&(Jo=[]),s=xv(Jo,s,r),r=Ve,(qt===null?r.memoizedState:qt.next)===null&&(r=r.alternate,z.H=r===null||r.memoizedState===null?_0:Wm),s}function Mh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ac(s);if(s.$$typeof===re)return vn(s)}throw Error(i(438,String(s)))}function jm(s){var r=null,o=Ve.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Ve.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Oh(),Ve.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(s),c=0;c<s;c++)o[c]=P;return r.index++,o}function Ki(s,r){return typeof r=="function"?r(s):r}function Ph(s){var r=Mt();return zm(r,dt,s)}function zm(s,r,o){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var d=s.baseQueue,m=c.pending;if(m!==null){if(d!==null){var b=d.next;d.next=m.next,m.next=b}r.baseQueue=d=m,c.pending=null}if(m=s.baseState,d===null)s.memoizedState=m;else{r=d.next;var S=b=null,k=null,F=r,W=!1;do{var Z=F.lane&-536870913;if(Z!==F.lane?(qe&Z)===Z:($i&Z)===Z){var q=F.revertLane;if(q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),Z===$o&&(W=!0);else if(($i&q)===q){F=F.next,q===$o&&(W=!0);continue}else Z={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},k===null?(S=k=Z,b=m):k=k.next=Z,Ve.lanes|=q,Gr|=q;Z=F.action,no&&o(m,Z),m=F.hasEagerState?F.eagerState:o(m,Z)}else q={lane:Z,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},k===null?(S=k=q,b=m):k=k.next=q,Ve.lanes|=Z,Gr|=Z;F=F.next}while(F!==null&&F!==r);if(k===null?b=m:k.next=S,!ss(m,s.memoizedState)&&(Ht=!0,W&&(o=Ko,o!==null)))throw o;s.memoizedState=m,s.baseState=b,s.baseQueue=k,c.lastRenderedState=m}return d===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Bm(s){var r=Mt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=s;var c=o.dispatch,d=o.pending,m=r.memoizedState;if(d!==null){o.pending=null;var b=d=d.next;do m=s(m,b.action),b=b.next;while(b!==d);ss(m,r.memoizedState)||(Ht=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function Lv(s,r,o){var c=Ve,d=Mt(),m=Ke;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var b=!ss((dt||d).memoizedState,o);if(b&&(d.memoizedState=o,Ht=!0),d=d.queue,Hm(zv.bind(null,c,d,s),[s]),d.getSnapshot!==r||b||qt!==null&&qt.memoizedState.tag&1){if(c.flags|=2048,Zo(9,{destroy:void 0},jv.bind(null,c,d,o,r),null),_t===null)throw Error(i(349));m||($i&127)!==0||Uv(c,r,o)}return o}function Uv(s,r,o){s.flags|=16384,s={getSnapshot:r,value:o},r=Ve.updateQueue,r===null?(r=Oh(),Ve.updateQueue=r,r.stores=[s]):(o=r.stores,o===null?r.stores=[s]:o.push(s))}function jv(s,r,o,c){r.value=o,r.getSnapshot=c,Bv(r)&&Fv(s)}function zv(s,r,o){return o(function(){Bv(r)&&Fv(s)})}function Bv(s){var r=s.getSnapshot;s=s.value;try{var o=r();return!ss(s,o)}catch{return!0}}function Fv(s){var r=Ka(s,2);r!==null&&Kn(r,s,2)}function Fm(s){var r=Un();if(typeof s=="function"){var o=s;if(s=o(),no){Pn(!0);try{o()}finally{Pn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:s},r}function qv(s,r,o,c){return s.baseState=o,zm(s,dt,typeof c=="function"?c:Ki)}function ZC(s,r,o,c,d){if(Uh(s))throw Error(i(485));if(s=r.action,s!==null){var m={payload:d,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};z.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,Hv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function Hv(s,r){var o=r.action,c=r.payload,d=s.state;if(r.isTransition){var m=z.T,b={};z.T=b;try{var S=o(d,c),k=z.S;k!==null&&k(b,S),Gv(s,r,S)}catch(F){qm(s,r,F)}finally{m!==null&&b.types!==null&&(m.types=b.types),z.T=m}}else try{m=o(d,c),Gv(s,r,m)}catch(F){qm(s,r,F)}}function Gv(s,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){$v(s,r,c)},function(c){return qm(s,r,c)}):$v(s,r,o)}function $v(s,r,o){r.status="fulfilled",r.value=o,Kv(r),s.state=o,r=s.pending,r!==null&&(o=r.next,o===r?s.pending=null:(o=o.next,r.next=o,Hv(s,o)))}function qm(s,r,o){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Kv(r),r=r.next;while(r!==c)}s.action=null}function Kv(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Yv(s,r){return r}function Qv(s,r){if(Ke){var o=_t.formState;if(o!==null){e:{var c=Ve;if(Ke){if(bt){t:{for(var d=bt,m=Ts;d.nodeType!==8;){if(!m){d=null;break t}if(d=Ss(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){bt=Ss(d.nextSibling),c=d.data==="F!";break e}}Vr(c)}c=!1}c&&(r=o[0])}}return o=Un(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yv,lastRenderedState:r},o.queue=c,o=m0.bind(null,Ve,c),c.dispatch=o,c=Fm(!1),m=Qm.bind(null,Ve,!1,c.queue),c=Un(),d={state:r,dispatch:null,action:s,pending:null},c.queue=d,o=ZC.bind(null,Ve,d,m,o),d.dispatch=o,c.memoizedState=s,[r,o,!1]}function Wv(s){var r=Mt();return Xv(r,dt,s)}function Xv(s,r,o){if(r=zm(s,r,Yv)[0],s=Ph(Ki)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Ac(r)}catch(b){throw b===Yo?Ah:b}else c=r;r=Mt();var d=r.queue,m=d.dispatch;return o!==r.memoizedState&&(Ve.flags|=2048,Zo(9,{destroy:void 0},eI.bind(null,d,o),null)),[c,m,s]}function eI(s,r){s.action=r}function Jv(s){var r=Mt(),o=dt;if(o!==null)return Xv(r,o,s);Mt(),r=r.memoizedState,o=Mt();var c=o.queue.dispatch;return o.memoizedState=s,[r,c,!1]}function Zo(s,r,o,c){return s={tag:s,create:o,deps:c,inst:r,next:null},r=Ve.updateQueue,r===null&&(r=Oh(),Ve.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=s.next=s:(c=o.next,o.next=s,s.next=c,r.lastEffect=s),s}function Zv(){return Mt().memoizedState}function Vh(s,r,o,c){var d=Un();Ve.flags|=s,d.memoizedState=Zo(1|r,{destroy:void 0},o,c===void 0?null:c)}function Lh(s,r,o,c){var d=Mt();c=c===void 0?null:c;var m=d.memoizedState.inst;dt!==null&&c!==null&&Mm(c,dt.memoizedState.deps)?d.memoizedState=Zo(r,m,o,c):(Ve.flags|=s,d.memoizedState=Zo(1|r,m,o,c))}function e0(s,r){Vh(8390656,8,s,r)}function Hm(s,r){Lh(2048,8,s,r)}function tI(s){Ve.flags|=4;var r=Ve.updateQueue;if(r===null)r=Oh(),Ve.updateQueue=r,r.events=[s];else{var o=r.events;o===null?r.events=[s]:o.push(s)}}function t0(s){var r=Mt().memoizedState;return tI({ref:r,nextImpl:s}),function(){if((st&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function n0(s,r){return Lh(4,2,s,r)}function s0(s,r){return Lh(4,4,s,r)}function i0(s,r){if(typeof r=="function"){s=s();var o=r(s);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function r0(s,r,o){o=o!=null?o.concat([s]):null,Lh(4,4,i0.bind(null,r,s),o)}function Gm(){}function a0(s,r){var o=Mt();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Mm(r,c[1])?c[0]:(o.memoizedState=[s,r],s)}function o0(s,r){var o=Mt();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Mm(r,c[1]))return c[0];if(c=s(),no){Pn(!0);try{s()}finally{Pn(!1)}}return o.memoizedState=[c,r],c}function $m(s,r,o){return o===void 0||($i&1073741824)!==0&&(qe&261930)===0?s.memoizedState=r:(s.memoizedState=o,s=lb(),Ve.lanes|=s,Gr|=s,o)}function l0(s,r,o,c){return ss(o,r)?o:Wo.current!==null?(s=$m(s,o,c),ss(s,r)||(Ht=!0),s):($i&42)===0||($i&1073741824)!==0&&(qe&261930)===0?(Ht=!0,s.memoizedState=o):(s=lb(),Ve.lanes|=s,Gr|=s,r)}function c0(s,r,o,c,d){var m=ie.p;ie.p=m!==0&&8>m?m:8;var b=z.T,S={};z.T=S,Qm(s,!1,r,o);try{var k=d(),F=z.S;if(F!==null&&F(S,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=WC(k,c);xc(s,r,W,cs(s))}else xc(s,r,c,cs(s))}catch(Z){xc(s,r,{then:function(){},status:"rejected",reason:Z},cs())}finally{ie.p=m,b!==null&&S.types!==null&&(b.types=S.types),z.T=b}}function nI(){}function Km(s,r,o,c){if(s.tag!==5)throw Error(i(476));var d=u0(s).queue;c0(s,d,r,ne,o===null?nI:function(){return h0(s),o(c)})}function u0(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:ne},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:o},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function h0(s){var r=u0(s);r.next===null&&(r=s.alternate.memoizedState),xc(s,r.next.queue,{},cs())}function Ym(){return vn(qc)}function d0(){return Mt().memoizedState}function f0(){return Mt().memoizedState}function sI(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var o=cs();s=jr(o);var c=zr(r,s,o);c!==null&&(Kn(c,r,o),Ec(c,r,o)),r={cache:wm()},s.payload=r;return}r=r.return}}function iI(s,r,o){var c=cs();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Uh(s)?p0(r,o):(o=dm(s,r,o,c),o!==null&&(Kn(o,s,c),g0(o,r,c)))}function m0(s,r,o){var c=cs();xc(s,r,o,c)}function xc(s,r,o,c){var d={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Uh(s))p0(r,d);else{var m=s.alternate;if(s.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,S=m(b,o);if(d.hasEagerState=!0,d.eagerState=S,ss(S,b))return yh(s,r,d,0),_t===null&&_h(),!1}catch{}finally{}if(o=dm(s,r,d,c),o!==null)return Kn(o,s,c),g0(o,r,c),!0}return!1}function Qm(s,r,o,c){if(c={lane:2,revertLane:Cp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Uh(s)){if(r)throw Error(i(479))}else r=dm(s,o,c,2),r!==null&&Kn(r,s,2)}function Uh(s){var r=s.alternate;return s===Ve||r!==null&&r===Ve}function p0(s,r){Xo=kh=!0;var o=s.pending;o===null?r.next=r:(r.next=o.next,o.next=r),s.pending=r}function g0(s,r,o){if((o&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,o|=c,r.lanes=o,mn(s,o)}}var Cc={readContext:vn,use:Mh,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};Cc.useEffectEvent=Rt;var _0={readContext:vn,use:Mh,useCallback:function(s,r){return Un().memoizedState=[s,r===void 0?null:r],s},useContext:vn,useEffect:e0,useImperativeHandle:function(s,r,o){o=o!=null?o.concat([s]):null,Vh(4194308,4,i0.bind(null,r,s),o)},useLayoutEffect:function(s,r){return Vh(4194308,4,s,r)},useInsertionEffect:function(s,r){Vh(4,2,s,r)},useMemo:function(s,r){var o=Un();r=r===void 0?null:r;var c=s();if(no){Pn(!0);try{s()}finally{Pn(!1)}}return o.memoizedState=[c,r],c},useReducer:function(s,r,o){var c=Un();if(o!==void 0){var d=o(r);if(no){Pn(!0);try{o(r)}finally{Pn(!1)}}}else d=r;return c.memoizedState=c.baseState=d,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:d},c.queue=s,s=s.dispatch=iI.bind(null,Ve,s),[c.memoizedState,s]},useRef:function(s){var r=Un();return s={current:s},r.memoizedState=s},useState:function(s){s=Fm(s);var r=s.queue,o=m0.bind(null,Ve,r);return r.dispatch=o,[s.memoizedState,o]},useDebugValue:Gm,useDeferredValue:function(s,r){var o=Un();return $m(o,s,r)},useTransition:function(){var s=Fm(!1);return s=c0.bind(null,Ve,s.queue,!0,!1),Un().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,o){var c=Ve,d=Un();if(Ke){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),_t===null)throw Error(i(349));(qe&127)!==0||Uv(c,r,o)}d.memoizedState=o;var m={value:o,getSnapshot:r};return d.queue=m,e0(zv.bind(null,c,m,s),[s]),c.flags|=2048,Zo(9,{destroy:void 0},jv.bind(null,c,m,o,r),null),o},useId:function(){var s=Un(),r=_t.identifierPrefix;if(Ke){var o=bi,c=vi;o=(c&~(1<<32-At(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=Dh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=XC++,r="_"+r+"r_"+o.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Ym,useFormState:Qv,useActionState:Qv,useOptimistic:function(s){var r=Un();r.memoizedState=r.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Qm.bind(null,Ve,!0,o),o.dispatch=r,[s,r]},useMemoCache:jm,useCacheRefresh:function(){return Un().memoizedState=sI.bind(null,Ve)},useEffectEvent:function(s){var r=Un(),o={impl:s};return r.memoizedState=o,function(){if((st&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Wm={readContext:vn,use:Mh,useCallback:a0,useContext:vn,useEffect:Hm,useImperativeHandle:r0,useInsertionEffect:n0,useLayoutEffect:s0,useMemo:o0,useReducer:Ph,useRef:Zv,useState:function(){return Ph(Ki)},useDebugValue:Gm,useDeferredValue:function(s,r){var o=Mt();return l0(o,dt.memoizedState,s,r)},useTransition:function(){var s=Ph(Ki)[0],r=Mt().memoizedState;return[typeof s=="boolean"?s:Ac(s),r]},useSyncExternalStore:Lv,useId:d0,useHostTransitionStatus:Ym,useFormState:Wv,useActionState:Wv,useOptimistic:function(s,r){var o=Mt();return qv(o,dt,s,r)},useMemoCache:jm,useCacheRefresh:f0};Wm.useEffectEvent=t0;var y0={readContext:vn,use:Mh,useCallback:a0,useContext:vn,useEffect:Hm,useImperativeHandle:r0,useInsertionEffect:n0,useLayoutEffect:s0,useMemo:o0,useReducer:Bm,useRef:Zv,useState:function(){return Bm(Ki)},useDebugValue:Gm,useDeferredValue:function(s,r){var o=Mt();return dt===null?$m(o,s,r):l0(o,dt.memoizedState,s,r)},useTransition:function(){var s=Bm(Ki)[0],r=Mt().memoizedState;return[typeof s=="boolean"?s:Ac(s),r]},useSyncExternalStore:Lv,useId:d0,useHostTransitionStatus:Ym,useFormState:Jv,useActionState:Jv,useOptimistic:function(s,r){var o=Mt();return dt!==null?qv(o,dt,s,r):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:jm,useCacheRefresh:f0};y0.useEffectEvent=t0;function Xm(s,r,o,c){r=s.memoizedState,o=o(c,r),o=o==null?r:_({},r,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Jm={enqueueSetState:function(s,r,o){s=s._reactInternals;var c=cs(),d=jr(c);d.payload=r,o!=null&&(d.callback=o),r=zr(s,d,c),r!==null&&(Kn(r,s,c),Ec(r,s,c))},enqueueReplaceState:function(s,r,o){s=s._reactInternals;var c=cs(),d=jr(c);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=zr(s,d,c),r!==null&&(Kn(r,s,c),Ec(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var o=cs(),c=jr(o);c.tag=2,r!=null&&(c.callback=r),r=zr(s,c,o),r!==null&&(Kn(r,s,o),Ec(r,s,o))}};function v0(s,r,o,c,d,m,b){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!fc(o,c)||!fc(d,m):!0}function b0(s,r,o,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==s&&Jm.enqueueReplaceState(r,r.state,null)}function so(s,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(s=s.defaultProps){o===r&&(o=_({},o));for(var d in s)o[d]===void 0&&(o[d]=s[d])}return o}function E0(s){gh(s)}function T0(s){console.error(s)}function w0(s){gh(s)}function jh(s,r){try{var o=s.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function S0(s,r,o){try{var c=s.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Zm(s,r,o){return o=jr(o),o.tag=3,o.payload={element:null},o.callback=function(){jh(s,r)},o}function A0(s){return s=jr(s),s.tag=3,s}function x0(s,r,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var m=c.value;s.payload=function(){return d(m)},s.callback=function(){S0(r,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(s.callback=function(){S0(r,o,c),typeof d!="function"&&($r===null?$r=new Set([this]):$r.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function rI(s,r,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Go(r,o,d,!0),o=rs.current,o!==null){switch(o.tag){case 31:case 13:return ws===null?Xh():o.alternate===null&&Nt===0&&(Nt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===xh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Sp(s,c,d)),!1;case 22:return o.flags|=65536,c===xh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Sp(s,c,d)),!1}throw Error(i(435,o.tag))}return Sp(s,c,d),Xh(),!1}if(Ke)return r=rs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,c!==ym&&(s=Error(i(422),{cause:c}),gc(vs(s,o)))):(c!==ym&&(r=Error(i(423),{cause:c}),gc(vs(r,o))),s=s.current.alternate,s.flags|=65536,d&=-d,s.lanes|=d,c=vs(c,o),d=Zm(s.stateNode,c,d),Rm(s,d),Nt!==4&&(Nt=2)),!1;var m=Error(i(520),{cause:c});if(m=vs(m,o),Pc===null?Pc=[m]:Pc.push(m),Nt!==4&&(Nt=2),r===null)return!0;c=vs(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,s=d&-d,o.lanes|=s,s=Zm(o.stateNode,c,s),Rm(o,s),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&($r===null||!$r.has(m))))return o.flags|=65536,d&=-d,o.lanes|=d,d=A0(d),x0(d,s,o,c),Rm(o,d),!1}o=o.return}while(o!==null);return!1}var ep=Error(i(461)),Ht=!1;function bn(s,r,o,c){r.child=s===null?Nv(r,null,o,c):to(r,s.child,o,c)}function C0(s,r,o,c,d){o=o.render;var m=r.ref;if("ref"in c){var b={};for(var S in c)S!=="ref"&&(b[S]=c[S])}else b=c;return Xa(r),c=Pm(s,r,o,b,m,d),S=Vm(),s!==null&&!Ht?(Lm(s,r,d),Yi(s,r,d)):(Ke&&S&&gm(r),r.flags|=1,bn(s,r,c,d),r.child)}function I0(s,r,o,c,d){if(s===null){var m=o.type;return typeof m=="function"&&!fm(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,R0(s,r,m,c,d)):(s=bh(o.type,null,c,r,r.mode,d),s.ref=r.ref,s.return=r,r.child=s)}if(m=s.child,!lp(s,d)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:fc,o(b,c)&&s.ref===r.ref)return Yi(s,r,d)}return r.flags|=1,s=Fi(m,c),s.ref=r.ref,s.return=r,r.child=s}function R0(s,r,o,c,d){if(s!==null){var m=s.memoizedProps;if(fc(m,c)&&s.ref===r.ref)if(Ht=!1,r.pendingProps=c=m,lp(s,d))(s.flags&131072)!==0&&(Ht=!0);else return r.lanes=s.lanes,Yi(s,r,d)}return tp(s,r,o,c,d)}function N0(s,r,o,c){var d=c.children,m=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,s!==null){for(c=r.child=s.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;c=d&~m}else c=0,r.child=null;return k0(s,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Sh(r,m!==null?m.cachePool:null),m!==null?Ov(r,m):km(),Mv(r);else return c=r.lanes=536870912,k0(s,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Sh(r,m.cachePool),Ov(r,m),Fr(),r.memoizedState=null):(s!==null&&Sh(r,null),km(),Fr());return bn(s,r,d,o),r.child}function Ic(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function k0(s,r,o,c,d){var m=Am();return m=m===null?null:{parent:Ft._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},s!==null&&Sh(r,null),km(),Mv(r),s!==null&&Go(s,r,c,!0),r.childLanes=d,null}function zh(s,r){return r=Fh({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function D0(s,r,o){return to(r,s.child,null,o),s=zh(r,r.pendingProps),s.flags|=2,as(r),r.memoizedState=null,s}function aI(s,r,o){var c=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Ke){if(c.mode==="hidden")return s=zh(r,c),r.lanes=536870912,Ic(null,s);if(Om(r),(s=bt)?(s=Hb(s,Ts),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Mr!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=pv(s),o.return=r,r.child=o,yn=r,bt=null)):s=null,s===null)throw Vr(r);return r.lanes=536870912,null}return zh(r,c)}var m=s.memoizedState;if(m!==null){var b=m.dehydrated;if(Om(r),d)if(r.flags&256)r.flags&=-257,r=D0(s,r,o);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Ht||Go(s,r,o,!1),d=(o&s.childLanes)!==0,Ht||d){if(c=_t,c!==null&&(b=pn(c,o),b!==0&&b!==m.retryLane))throw m.retryLane=b,Ka(s,b),Kn(c,s,b),ep;Xh(),r=D0(s,r,o)}else s=m.treeContext,bt=Ss(b.nextSibling),yn=r,Ke=!0,Pr=null,Ts=!1,s!==null&&yv(r,s),r=zh(r,c),r.flags|=4096;return r}return s=Fi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Bh(s,r){var o=r.ref;if(o===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(s===null||s.ref!==o)&&(r.flags|=4194816)}}function tp(s,r,o,c,d){return Xa(r),o=Pm(s,r,o,c,void 0,d),c=Vm(),s!==null&&!Ht?(Lm(s,r,d),Yi(s,r,d)):(Ke&&c&&gm(r),r.flags|=1,bn(s,r,o,d),r.child)}function O0(s,r,o,c,d,m){return Xa(r),r.updateQueue=null,o=Vv(r,c,o,d),Pv(s),c=Vm(),s!==null&&!Ht?(Lm(s,r,m),Yi(s,r,m)):(Ke&&c&&gm(r),r.flags|=1,bn(s,r,o,m),r.child)}function M0(s,r,o,c,d){if(Xa(r),r.stateNode===null){var m=Bo,b=o.contextType;typeof b=="object"&&b!==null&&(m=vn(b)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Jm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Cm(r),b=o.contextType,m.context=typeof b=="object"&&b!==null?vn(b):Bo,m.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Xm(r,o,b,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Jm.enqueueReplaceState(m,m.state,null),wc(r,c,m,d),Tc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){m=r.stateNode;var S=r.memoizedProps,k=so(o,S);m.props=k;var F=m.context,W=o.contextType;b=Bo,typeof W=="object"&&W!==null&&(b=vn(W));var Z=o.getDerivedStateFromProps;W=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||F!==b)&&b0(r,m,c,b),Ur=!1;var q=r.memoizedState;m.state=q,wc(r,c,m,d),Tc(),F=r.memoizedState,S||q!==F||Ur?(typeof Z=="function"&&(Xm(r,o,Z,c),F=r.memoizedState),(k=Ur||v0(r,o,k,c,q,F,b))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=F),m.props=c,m.state=F,m.context=b,c=k):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Im(s,r),b=r.memoizedProps,W=so(o,b),m.props=W,Z=r.pendingProps,q=m.context,F=o.contextType,k=Bo,typeof F=="object"&&F!==null&&(k=vn(F)),S=o.getDerivedStateFromProps,(F=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==Z||q!==k)&&b0(r,m,c,k),Ur=!1,q=r.memoizedState,m.state=q,wc(r,c,m,d),Tc();var K=r.memoizedState;b!==Z||q!==K||Ur||s!==null&&s.dependencies!==null&&Th(s.dependencies)?(typeof S=="function"&&(Xm(r,o,S,c),K=r.memoizedState),(W=Ur||v0(r,o,W,c,q,K,k)||s!==null&&s.dependencies!==null&&Th(s.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,K,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,K,k)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===s.memoizedProps&&q===s.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&q===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=K),m.props=c,m.state=K,m.context=k,c=W):(typeof m.componentDidUpdate!="function"||b===s.memoizedProps&&q===s.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&q===s.memoizedState||(r.flags|=1024),c=!1)}return m=c,Bh(s,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,s!==null&&c?(r.child=to(r,s.child,null,d),r.child=to(r,null,o,d)):bn(s,r,o,d),r.memoizedState=m.state,s=r.child):s=Yi(s,r,d),s}function P0(s,r,o,c){return Qa(),r.flags|=256,bn(s,r,o,c),r.child}var np={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sp(s){return{baseLanes:s,cachePool:Sv()}}function ip(s,r,o){return s=s!==null?s.childLanes&~o:0,r&&(s|=ls),s}function V0(s,r,o){var c=r.pendingProps,d=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=s!==null&&s.memoizedState===null?!1:(Ot.current&2)!==0),b&&(d=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ke){if(d?Br(r):Fr(),(s=bt)?(s=Hb(s,Ts),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Mr!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=pv(s),o.return=r,r.child=o,yn=r,bt=null)):s=null,s===null)throw Vr(r);return zp(s)?r.lanes=32:r.lanes=536870912,null}var S=c.children;return c=c.fallback,d?(Fr(),d=r.mode,S=Fh({mode:"hidden",children:S},d),c=Ya(c,d,o,null),S.return=r,c.return=r,S.sibling=c,r.child=S,c=r.child,c.memoizedState=sp(o),c.childLanes=ip(s,b,o),r.memoizedState=np,Ic(null,c)):(Br(r),rp(r,S))}var k=s.memoizedState;if(k!==null&&(S=k.dehydrated,S!==null)){if(m)r.flags&256?(Br(r),r.flags&=-257,r=ap(s,r,o)):r.memoizedState!==null?(Fr(),r.child=s.child,r.flags|=128,r=null):(Fr(),S=c.fallback,d=r.mode,c=Fh({mode:"visible",children:c.children},d),S=Ya(S,d,o,null),S.flags|=2,c.return=r,S.return=r,c.sibling=S,r.child=c,to(r,s.child,null,o),c=r.child,c.memoizedState=sp(o),c.childLanes=ip(s,b,o),r.memoizedState=np,r=Ic(null,c));else if(Br(r),zp(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var F=b.dgst;b=F,c=Error(i(419)),c.stack="",c.digest=b,gc({value:c,source:null,stack:null}),r=ap(s,r,o)}else if(Ht||Go(s,r,o,!1),b=(o&s.childLanes)!==0,Ht||b){if(b=_t,b!==null&&(c=pn(b,o),c!==0&&c!==k.retryLane))throw k.retryLane=c,Ka(s,c),Kn(b,s,c),ep;jp(S)||Xh(),r=ap(s,r,o)}else jp(S)?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,bt=Ss(S.nextSibling),yn=r,Ke=!0,Pr=null,Ts=!1,s!==null&&yv(r,s),r=rp(r,c.children),r.flags|=4096);return r}return d?(Fr(),S=c.fallback,d=r.mode,k=s.child,F=k.sibling,c=Fi(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,F!==null?S=Fi(F,S):(S=Ya(S,d,o,null),S.flags|=2),S.return=r,c.return=r,c.sibling=S,r.child=c,Ic(null,c),c=r.child,S=s.child.memoizedState,S===null?S=sp(o):(d=S.cachePool,d!==null?(k=Ft._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=Sv(),S={baseLanes:S.baseLanes|o,cachePool:d}),c.memoizedState=S,c.childLanes=ip(s,b,o),r.memoizedState=np,Ic(s.child,c)):(Br(r),o=s.child,s=o.sibling,o=Fi(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,s!==null&&(b=r.deletions,b===null?(r.deletions=[s],r.flags|=16):b.push(s)),r.child=o,r.memoizedState=null,o)}function rp(s,r){return r=Fh({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Fh(s,r){return s=is(22,s,null,r),s.lanes=0,s}function ap(s,r,o){return to(r,s.child,null,o),s=rp(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function L0(s,r,o){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Em(s.return,r,o)}function op(s,r,o,c,d,m){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=d,b.treeForkCount=m)}function U0(s,r,o){var c=r.pendingProps,d=c.revealOrder,m=c.tail;c=c.children;var b=Ot.current,S=(b&2)!==0;if(S?(b=b&1|2,r.flags|=128):b&=1,Q(Ot,b),bn(s,r,c,o),c=Ke?pc:0,!S&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&L0(s,o,r);else if(s.tag===19)L0(s,o,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(d){case"forwards":for(o=r.child,d=null;o!==null;)s=o.alternate,s!==null&&Nh(s)===null&&(d=o),o=o.sibling;o=d,o===null?(d=r.child,r.child=null):(d=o.sibling,o.sibling=null),op(r,!1,d,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=r.child,r.child=null;d!==null;){if(s=d.alternate,s!==null&&Nh(s)===null){r.child=d;break}s=d.sibling,d.sibling=o,o=d,d=s}op(r,!0,o,null,m,c);break;case"together":op(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Yi(s,r,o){if(s!==null&&(r.dependencies=s.dependencies),Gr|=r.lanes,(o&r.childLanes)===0)if(s!==null){if(Go(s,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,o=Fi(s,s.pendingProps),r.child=o,o.return=r;s.sibling!==null;)s=s.sibling,o=o.sibling=Fi(s,s.pendingProps),o.return=r;o.sibling=null}return r.child}function lp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Th(s)))}function oI(s,r,o){switch(r.tag){case 3:Ie(r,r.stateNode.containerInfo),Lr(r,Ft,s.memoizedState.cache),Qa();break;case 27:case 5:hn(r);break;case 4:Ie(r,r.stateNode.containerInfo);break;case 10:Lr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Om(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Br(r),r.flags|=128,null):(o&r.child.childLanes)!==0?V0(s,r,o):(Br(r),s=Yi(s,r,o),s!==null?s.sibling:null);Br(r);break;case 19:var d=(s.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Go(s,r,o,!1),c=(o&r.childLanes)!==0),d){if(c)return U0(s,r,o);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Q(Ot,Ot.current),c)break;return null;case 22:return r.lanes=0,N0(s,r,o,r.pendingProps);case 24:Lr(r,Ft,s.memoizedState.cache)}return Yi(s,r,o)}function j0(s,r,o){if(s!==null)if(s.memoizedProps!==r.pendingProps)Ht=!0;else{if(!lp(s,o)&&(r.flags&128)===0)return Ht=!1,oI(s,r,o);Ht=(s.flags&131072)!==0}else Ht=!1,Ke&&(r.flags&1048576)!==0&&_v(r,pc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=Za(r.elementType),r.type=s,typeof s=="function")fm(s)?(c=so(s,c),r.tag=1,r=M0(null,r,s,c,o)):(r.tag=0,r=tp(null,r,s,c,o));else{if(s!=null){var d=s.$$typeof;if(d===me){r.tag=11,r=C0(null,r,s,c,o);break e}else if(d===N){r.tag=14,r=I0(null,r,s,c,o);break e}}throw r=Je(s)||s,Error(i(306,r,""))}}return r;case 0:return tp(s,r,r.type,r.pendingProps,o);case 1:return c=r.type,d=so(c,r.pendingProps),M0(s,r,c,d,o);case 3:e:{if(Ie(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;d=m.element,Im(s,r),wc(r,c,null,o);var b=r.memoizedState;if(c=b.cache,Lr(r,Ft,c),c!==m.cache&&Tm(r,[Ft],o,!0),Tc(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=P0(s,r,c,o);break e}else if(c!==d){d=vs(Error(i(424)),r),gc(d),r=P0(s,r,c,o);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(bt=Ss(s.firstChild),yn=r,Ke=!0,Pr=null,Ts=!0,o=Nv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Qa(),c===d){r=Yi(s,r,o);break e}bn(s,r,c,o)}r=r.child}return r;case 26:return Bh(s,r),s===null?(o=Wb(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ke||(o=r.type,s=r.pendingProps,c=id(be.current).createElement(o),c[jt]=r,c[sn]=s,En(c,o,s),zt(c),r.stateNode=c):r.memoizedState=Wb(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return hn(r),s===null&&Ke&&(c=r.stateNode=Kb(r.type,r.pendingProps,be.current),yn=r,Ts=!0,d=bt,Wr(r.type)?(Bp=d,bt=Ss(c.firstChild)):bt=d),bn(s,r,r.pendingProps.children,o),Bh(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ke&&((d=c=bt)&&(c=LI(c,r.type,r.pendingProps,Ts),c!==null?(r.stateNode=c,yn=r,bt=Ss(c.firstChild),Ts=!1,d=!0):d=!1),d||Vr(r)),hn(r),d=r.type,m=r.pendingProps,b=s!==null?s.memoizedProps:null,c=m.children,Vp(d,m)?c=null:b!==null&&Vp(d,b)&&(r.flags|=32),r.memoizedState!==null&&(d=Pm(s,r,JC,null,null,o),qc._currentValue=d),Bh(s,r),bn(s,r,c,o),r.child;case 6:return s===null&&Ke&&((s=o=bt)&&(o=UI(o,r.pendingProps,Ts),o!==null?(r.stateNode=o,yn=r,bt=null,s=!0):s=!1),s||Vr(r)),null;case 13:return V0(s,r,o);case 4:return Ie(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=to(r,null,c,o):bn(s,r,c,o),r.child;case 11:return C0(s,r,r.type,r.pendingProps,o);case 7:return bn(s,r,r.pendingProps,o),r.child;case 8:return bn(s,r,r.pendingProps.children,o),r.child;case 12:return bn(s,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Lr(r,r.type,c.value),bn(s,r,c.children,o),r.child;case 9:return d=r.type._context,c=r.pendingProps.children,Xa(r),d=vn(d),c=c(d),r.flags|=1,bn(s,r,c,o),r.child;case 14:return I0(s,r,r.type,r.pendingProps,o);case 15:return R0(s,r,r.type,r.pendingProps,o);case 19:return U0(s,r,o);case 31:return aI(s,r,o);case 22:return N0(s,r,o,r.pendingProps);case 24:return Xa(r),c=vn(Ft),s===null?(d=Am(),d===null&&(d=_t,m=wm(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=o),d=m),r.memoizedState={parent:c,cache:d},Cm(r),Lr(r,Ft,d)):((s.lanes&o)!==0&&(Im(s,r),wc(r,null,null,o),Tc()),d=s.memoizedState,m=r.memoizedState,d.parent!==c?(d={parent:c,cache:c},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Lr(r,Ft,c)):(c=m.cache,Lr(r,Ft,c),c!==d.cache&&Tm(r,[Ft],o,!0))),bn(s,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Qi(s){s.flags|=4}function cp(s,r,o,c,d){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(d&335544128)===d)if(s.stateNode.complete)s.flags|=8192;else if(db())s.flags|=8192;else throw eo=xh,xm}else s.flags&=-16777217}function z0(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!tE(r))if(db())s.flags|=8192;else throw eo=xh,xm}function qh(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?nn():536870912,s.lanes|=r,sl|=r)}function Rc(s,r){if(!Ke)switch(s.tailMode){case"hidden":r=s.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function Et(s){var r=s.alternate!==null&&s.alternate.child===s.child,o=0,c=0;if(r)for(var d=s.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=s,d=d.sibling;else for(d=s.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=s,d=d.sibling;return s.subtreeFlags|=c,s.childLanes=o,r}function lI(s,r,o){var c=r.pendingProps;switch(_m(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(r),null;case 1:return Et(r),null;case 3:return o=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Gi(Ft),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Ho(r)?Qi(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,vm())),Et(r),null;case 26:var d=r.type,m=r.memoizedState;return s===null?(Qi(r),m!==null?(Et(r),z0(r,m)):(Et(r),cp(r,d,null,c,o))):m?m!==s.memoizedState?(Qi(r),Et(r),z0(r,m)):(Et(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&Qi(r),Et(r),cp(r,d,s,c,o)),null;case 27:if(Mn(r),o=be.current,d=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Qi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Et(r),null}s=se.current,Ho(r)?vv(r):(s=Kb(d,c,o),r.stateNode=s,Qi(r))}return Et(r),null;case 5:if(Mn(r),d=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Qi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Et(r),null}if(m=se.current,Ho(r))vv(r);else{var b=id(be.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(d,{is:c.is}):b.createElement(d)}}m[jt]=r,m[sn]=c;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(En(m,d,c),d){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Qi(r)}}return Et(r),cp(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,o),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&Qi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=be.current,Ho(r)){if(s=r.stateNode,o=r.memoizedProps,c=null,d=yn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}s[jt]=r,s=!!(s.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Vb(s.nodeValue,o)),s||Vr(r,!0)}else s=id(s).createTextNode(c),s[jt]=r,r.stateNode=s}return Et(r),null;case 31:if(o=r.memoizedState,s===null||s.memoizedState!==null){if(c=Ho(r),o!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[jt]=r}else Qa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),s=!1}else o=vm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return r.flags&256?(as(r),r):(as(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Et(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(d=Ho(r),c!==null&&c.dehydrated!==null){if(s===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[jt]=r}else Qa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),d=!1}else d=vm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(as(r),r):(as(r),null)}return as(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,s=s!==null&&s.memoizedState!==null,o&&(c=r.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==d&&(c.flags|=2048)),o!==s&&o&&(r.child.flags|=8192),qh(r,r.updateQueue),Et(r),null);case 4:return Fe(),s===null&&kp(r.stateNode.containerInfo),Et(r),null;case 10:return Gi(r.type),Et(r),null;case 19:if(X(Ot),c=r.memoizedState,c===null)return Et(r),null;if(d=(r.flags&128)!==0,m=c.rendering,m===null)if(d)Rc(c,!1);else{if(Nt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(m=Nh(s),m!==null){for(r.flags|=128,Rc(c,!1),s=m.updateQueue,r.updateQueue=s,qh(r,s),r.subtreeFlags=0,s=o,o=r.child;o!==null;)mv(o,s),o=o.sibling;return Q(Ot,Ot.current&1|2),Ke&&qi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&fn()>Yh&&(r.flags|=128,d=!0,Rc(c,!1),r.lanes=4194304)}else{if(!d)if(s=Nh(m),s!==null){if(r.flags|=128,d=!0,s=s.updateQueue,r.updateQueue=s,qh(r,s),Rc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Ke)return Et(r),null}else 2*fn()-c.renderingStartTime>Yh&&o!==536870912&&(r.flags|=128,d=!0,Rc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(s=c.last,s!==null?s.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=fn(),s.sibling=null,o=Ot.current,Q(Ot,d?o&1|2:o&1),Ke&&qi(r,c.treeForkCount),s):(Et(r),null);case 22:case 23:return as(r),Dm(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Et(r),r.subtreeFlags&6&&(r.flags|=8192)):Et(r),o=r.updateQueue,o!==null&&qh(r,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),s!==null&&X(Ja),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Gi(Ft),Et(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function cI(s,r){switch(_m(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Gi(Ft),Fe(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Mn(r),null;case 31:if(r.memoizedState!==null){if(as(r),r.alternate===null)throw Error(i(340));Qa()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(as(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Qa()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return X(Ot),null;case 4:return Fe(),null;case 10:return Gi(r.type),null;case 22:case 23:return as(r),Dm(),s!==null&&X(Ja),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Gi(Ft),null;case 25:return null;default:return null}}function B0(s,r){switch(_m(r),r.tag){case 3:Gi(Ft),Fe();break;case 26:case 27:case 5:Mn(r);break;case 4:Fe();break;case 31:r.memoizedState!==null&&as(r);break;case 13:as(r);break;case 19:X(Ot);break;case 10:Gi(r.type);break;case 22:case 23:as(r),Dm(),s!==null&&X(Ja);break;case 24:Gi(Ft)}}function Nc(s,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&s)===s){c=void 0;var m=o.create,b=o.inst;c=m(),b.destroy=c}o=o.next}while(o!==d)}}catch(S){ut(r,r.return,S)}}function qr(s,r,o){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var m=d.next;c=m;do{if((c.tag&s)===s){var b=c.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,d=r;var k=o,F=S;try{F()}catch(W){ut(d,k,W)}}}c=c.next}while(c!==m)}}catch(W){ut(r,r.return,W)}}function F0(s){var r=s.updateQueue;if(r!==null){var o=s.stateNode;try{Dv(r,o)}catch(c){ut(s,s.return,c)}}}function q0(s,r,o){o.props=so(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(c){ut(s,r,c)}}function kc(s,r){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof o=="function"?s.refCleanup=o(c):o.current=c}}catch(d){ut(s,r,d)}}function Ei(s,r){var o=s.ref,c=s.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){ut(s,r,d)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){ut(s,r,d)}else o.current=null}function H0(s){var r=s.type,o=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){ut(s,s.return,d)}}function up(s,r,o){try{var c=s.stateNode;kI(c,s.type,o,r),c[sn]=r}catch(d){ut(s,s.return,d)}}function G0(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Wr(s.type)||s.tag===4}function hp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||G0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Wr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function dp(s,r,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(s),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Us));else if(c!==4&&(c===27&&Wr(s.type)&&(o=s.stateNode,r=null),s=s.child,s!==null))for(dp(s,r,o),s=s.sibling;s!==null;)dp(s,r,o),s=s.sibling}function Hh(s,r,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?o.insertBefore(s,r):o.appendChild(s);else if(c!==4&&(c===27&&Wr(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Hh(s,r,o),s=s.sibling;s!==null;)Hh(s,r,o),s=s.sibling}function $0(s){var r=s.stateNode,o=s.memoizedProps;try{for(var c=s.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);En(r,c,o),r[jt]=s,r[sn]=o}catch(m){ut(s,s.return,m)}}var Wi=!1,Gt=!1,fp=!1,K0=typeof WeakSet=="function"?WeakSet:Set,an=null;function uI(s,r){if(s=s.containerInfo,Mp=hd,s=rv(s),am(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var b=0,S=-1,k=-1,F=0,W=0,Z=s,q=null;t:for(;;){for(var K;Z!==o||d!==0&&Z.nodeType!==3||(S=b+d),Z!==m||c!==0&&Z.nodeType!==3||(k=b+c),Z.nodeType===3&&(b+=Z.nodeValue.length),(K=Z.firstChild)!==null;)q=Z,Z=K;for(;;){if(Z===s)break t;if(q===o&&++F===d&&(S=b),q===m&&++W===c&&(k=b),(K=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=K}o=S===-1||k===-1?null:{start:S,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Pp={focusedElem:s,selectionRange:o},hd=!1,an=r;an!==null;)if(r=an,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,an=s;else for(;an!==null;){switch(r=an,m=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)d=s[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&m!==null){s=void 0,o=r,d=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var pe=so(o.type,d);s=c.getSnapshotBeforeUpdate(pe,m),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){ut(o,o.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,o=s.nodeType,o===9)Up(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Up(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,an=s;break}an=r.return}}function Y0(s,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ji(s,o),c&4&&Nc(5,o);break;case 1:if(Ji(s,o),c&4)if(s=o.stateNode,r===null)try{s.componentDidMount()}catch(b){ut(o,o.return,b)}else{var d=so(o.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(d,r,s.__reactInternalSnapshotBeforeUpdate)}catch(b){ut(o,o.return,b)}}c&64&&F0(o),c&512&&kc(o,o.return);break;case 3:if(Ji(s,o),c&64&&(s=o.updateQueue,s!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Dv(s,r)}catch(b){ut(o,o.return,b)}}break;case 27:r===null&&c&4&&$0(o);case 26:case 5:Ji(s,o),r===null&&c&4&&H0(o),c&512&&kc(o,o.return);break;case 12:Ji(s,o);break;case 31:Ji(s,o),c&4&&X0(s,o);break;case 13:Ji(s,o),c&4&&J0(s,o),c&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=vI.bind(null,o),jI(s,o))));break;case 22:if(c=o.memoizedState!==null||Wi,!c){r=r!==null&&r.memoizedState!==null||Gt,d=Wi;var m=Gt;Wi=c,(Gt=r)&&!m?Zi(s,o,(o.subtreeFlags&8772)!==0):Ji(s,o),Wi=d,Gt=m}break;case 30:break;default:Ji(s,o)}}function Q0(s){var r=s.alternate;r!==null&&(s.alternate=null,Q0(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Co(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ct=null,qn=!1;function Xi(s,r,o){for(o=o.child;o!==null;)W0(s,r,o),o=o.sibling}function W0(s,r,o){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Jn,o)}catch{}switch(o.tag){case 26:Gt||Ei(o,r),Xi(s,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Gt||Ei(o,r);var c=Ct,d=qn;Wr(o.type)&&(Ct=o.stateNode,qn=!1),Xi(s,r,o),zc(o.stateNode),Ct=c,qn=d;break;case 5:Gt||Ei(o,r);case 6:if(c=Ct,d=qn,Ct=null,Xi(s,r,o),Ct=c,qn=d,Ct!==null)if(qn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(o.stateNode)}catch(m){ut(o,r,m)}else try{Ct.removeChild(o.stateNode)}catch(m){ut(o,r,m)}break;case 18:Ct!==null&&(qn?(s=Ct,Fb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),hl(s)):Fb(Ct,o.stateNode));break;case 4:c=Ct,d=qn,Ct=o.stateNode.containerInfo,qn=!0,Xi(s,r,o),Ct=c,qn=d;break;case 0:case 11:case 14:case 15:qr(2,o,r),Gt||qr(4,o,r),Xi(s,r,o);break;case 1:Gt||(Ei(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&q0(o,r,c)),Xi(s,r,o);break;case 21:Xi(s,r,o);break;case 22:Gt=(c=Gt)||o.memoizedState!==null,Xi(s,r,o),Gt=c;break;default:Xi(s,r,o)}}function X0(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{hl(s)}catch(o){ut(r,r.return,o)}}}function J0(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{hl(s)}catch(o){ut(r,r.return,o)}}function hI(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new K0),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new K0),r;default:throw Error(i(435,s.tag))}}function Gh(s,r){var o=hI(s);r.forEach(function(c){if(!o.has(c)){o.add(c);var d=bI.bind(null,s,c);c.then(d,d)}})}function Hn(s,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],m=s,b=r,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(Wr(S.type)){Ct=S.stateNode,qn=!1;break e}break;case 5:Ct=S.stateNode,qn=!1;break e;case 3:case 4:Ct=S.stateNode.containerInfo,qn=!0;break e}S=S.return}if(Ct===null)throw Error(i(160));W0(m,b,d),Ct=null,qn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Z0(r,s),r=r.sibling}var Hs=null;function Z0(s,r){var o=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Hn(r,s),Gn(s),c&4&&(qr(3,s,s.return),Nc(3,s),qr(5,s,s.return));break;case 1:Hn(r,s),Gn(s),c&512&&(Gt||o===null||Ei(o,o.return)),c&64&&Wi&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=Hs;if(Hn(r,s),Gn(s),c&512&&(Gt||o===null||Ei(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=s.memoizedState,o===null)if(c===null)if(s.stateNode===null){e:{c=s.type,o=s.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":m=d.getElementsByTagName("title")[0],(!m||m[oi]||m[jt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(c),d.head.insertBefore(m,d.querySelector("head > title"))),En(m,c,o),m[jt]=s,zt(m),c=m;break e;case"link":var b=Zb("link","href",d).get(c+(o.href||""));if(b){for(var S=0;S<b.length;S++)if(m=b[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(S,1);break t}}m=d.createElement(c),En(m,c,o),d.head.appendChild(m);break;case"meta":if(b=Zb("meta","content",d).get(c+(o.content||""))){for(S=0;S<b.length;S++)if(m=b[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(S,1);break t}}m=d.createElement(c),En(m,c,o),d.head.appendChild(m);break;default:throw Error(i(468,c))}m[jt]=s,zt(m),c=m}s.stateNode=c}else eE(d,s.type,s.stateNode);else s.stateNode=Jb(d,c,s.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?eE(d,s.type,s.stateNode):Jb(d,c,s.memoizedProps)):c===null&&s.stateNode!==null&&up(s,s.memoizedProps,o.memoizedProps)}break;case 27:Hn(r,s),Gn(s),c&512&&(Gt||o===null||Ei(o,o.return)),o!==null&&c&4&&up(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Hn(r,s),Gn(s),c&512&&(Gt||o===null||Ei(o,o.return)),s.flags&32){d=s.stateNode;try{Fn(d,"")}catch(pe){ut(s,s.return,pe)}}c&4&&s.stateNode!=null&&(d=s.memoizedProps,up(s,d,o!==null?o.memoizedProps:d)),c&1024&&(fp=!0);break;case 6:if(Hn(r,s),Gn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,o=s.stateNode;try{o.nodeValue=c}catch(pe){ut(s,s.return,pe)}}break;case 3:if(od=null,d=Hs,Hs=rd(r.containerInfo),Hn(r,s),Hs=d,Gn(s),c&4&&o!==null&&o.memoizedState.isDehydrated)try{hl(r.containerInfo)}catch(pe){ut(s,s.return,pe)}fp&&(fp=!1,eb(s));break;case 4:c=Hs,Hs=rd(s.stateNode.containerInfo),Hn(r,s),Gn(s),Hs=c;break;case 12:Hn(r,s),Gn(s);break;case 31:Hn(r,s),Gn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Gh(s,c)));break;case 13:Hn(r,s),Gn(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Kh=fn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Gh(s,c)));break;case 22:d=s.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,F=Wi,W=Gt;if(Wi=F||d,Gt=W||k,Hn(r,s),Gt=W,Wi=F,Gn(s),c&8192)e:for(r=s.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(o===null||k||Wi||Gt||io(s)),o=null,r=s;;){if(r.tag===5||r.tag===26){if(o===null){k=o=r;try{if(m=k.stateNode,d)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=k.stateNode;var Z=k.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;S.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(pe){ut(k,k.return,pe)}}}else if(r.tag===6){if(o===null){k=r;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(pe){ut(k,k.return,pe)}}}else if(r.tag===18){if(o===null){k=r;try{var K=k.stateNode;d?qb(K,!0):qb(k.stateNode,!1)}catch(pe){ut(k,k.return,pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Gh(s,o))));break;case 19:Hn(r,s),Gn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Gh(s,c)));break;case 30:break;case 21:break;default:Hn(r,s),Gn(s)}}function Gn(s){var r=s.flags;if(r&2){try{for(var o,c=s.return;c!==null;){if(G0(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,m=hp(s);Hh(s,m,d);break;case 5:var b=o.stateNode;o.flags&32&&(Fn(b,""),o.flags&=-33);var S=hp(s);Hh(s,S,b);break;case 3:case 4:var k=o.stateNode.containerInfo,F=hp(s);dp(s,F,k);break;default:throw Error(i(161))}}catch(W){ut(s,s.return,W)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function eb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;eb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Ji(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Y0(s,r.alternate,r),r=r.sibling}function io(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:qr(4,r,r.return),io(r);break;case 1:Ei(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&q0(r,r.return,o),io(r);break;case 27:zc(r.stateNode);case 26:case 5:Ei(r,r.return),io(r);break;case 22:r.memoizedState===null&&io(r);break;case 30:io(r);break;default:io(r)}s=s.sibling}}function Zi(s,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,d=s,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:Zi(d,m,o),Nc(4,m);break;case 1:if(Zi(d,m,o),c=m,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){ut(c,c.return,F)}if(c=m,d=c.updateQueue,d!==null){var S=c.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)kv(k[d],S)}catch(F){ut(c,c.return,F)}}o&&b&64&&F0(m),kc(m,m.return);break;case 27:$0(m);case 26:case 5:Zi(d,m,o),o&&c===null&&b&4&&H0(m),kc(m,m.return);break;case 12:Zi(d,m,o);break;case 31:Zi(d,m,o),o&&b&4&&X0(d,m);break;case 13:Zi(d,m,o),o&&b&4&&J0(d,m);break;case 22:m.memoizedState===null&&Zi(d,m,o),kc(m,m.return);break;case 30:break;default:Zi(d,m,o)}r=r.sibling}}function mp(s,r){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&_c(o))}function pp(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&_c(s))}function Gs(s,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)tb(s,r,o,c),r=r.sibling}function tb(s,r,o,c){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Gs(s,r,o,c),d&2048&&Nc(9,r);break;case 1:Gs(s,r,o,c);break;case 3:Gs(s,r,o,c),d&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&_c(s)));break;case 12:if(d&2048){Gs(s,r,o,c),s=r.stateNode;try{var m=r.memoizedProps,b=m.id,S=m.onPostCommit;typeof S=="function"&&S(b,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){ut(r,r.return,k)}}else Gs(s,r,o,c);break;case 31:Gs(s,r,o,c);break;case 13:Gs(s,r,o,c);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?Gs(s,r,o,c):Dc(s,r):m._visibility&2?Gs(s,r,o,c):(m._visibility|=2,el(s,r,o,c,(r.subtreeFlags&10256)!==0||!1)),d&2048&&mp(b,r);break;case 24:Gs(s,r,o,c),d&2048&&pp(r.alternate,r);break;default:Gs(s,r,o,c)}}function el(s,r,o,c,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=s,b=r,S=o,k=c,F=b.flags;switch(b.tag){case 0:case 11:case 15:el(m,b,S,k,d),Nc(8,b);break;case 23:break;case 22:var W=b.stateNode;b.memoizedState!==null?W._visibility&2?el(m,b,S,k,d):Dc(m,b):(W._visibility|=2,el(m,b,S,k,d)),d&&F&2048&&mp(b.alternate,b);break;case 24:el(m,b,S,k,d),d&&F&2048&&pp(b.alternate,b);break;default:el(m,b,S,k,d)}r=r.sibling}}function Dc(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=s,c=r,d=c.flags;switch(c.tag){case 22:Dc(o,c),d&2048&&mp(c.alternate,c);break;case 24:Dc(o,c),d&2048&&pp(c.alternate,c);break;default:Dc(o,c)}r=r.sibling}}var Oc=8192;function tl(s,r,o){if(s.subtreeFlags&Oc)for(s=s.child;s!==null;)nb(s,r,o),s=s.sibling}function nb(s,r,o){switch(s.tag){case 26:tl(s,r,o),s.flags&Oc&&s.memoizedState!==null&&XI(o,Hs,s.memoizedState,s.memoizedProps);break;case 5:tl(s,r,o);break;case 3:case 4:var c=Hs;Hs=rd(s.stateNode.containerInfo),tl(s,r,o),Hs=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Oc,Oc=16777216,tl(s,r,o),Oc=c):tl(s,r,o));break;default:tl(s,r,o)}}function sb(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Mc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];an=c,rb(c,s)}sb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ib(s),s=s.sibling}function ib(s){switch(s.tag){case 0:case 11:case 15:Mc(s),s.flags&2048&&qr(9,s,s.return);break;case 3:Mc(s);break;case 12:Mc(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,$h(s)):Mc(s);break;default:Mc(s)}}function $h(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];an=c,rb(c,s)}sb(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:qr(8,r,r.return),$h(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,$h(r));break;default:$h(r)}s=s.sibling}}function rb(s,r){for(;an!==null;){var o=an;switch(o.tag){case 0:case 11:case 15:qr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:_c(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,an=c;else e:for(o=s;an!==null;){c=an;var d=c.sibling,m=c.return;if(Q0(c),c===o){an=null;break e}if(d!==null){d.return=m,an=d;break e}an=m}}}var dI={getCacheForType:function(s){var r=vn(Ft),o=r.data.get(s);return o===void 0&&(o=s(),r.data.set(s,o)),o},cacheSignal:function(){return vn(Ft).controller.signal}},fI=typeof WeakMap=="function"?WeakMap:Map,st=0,_t=null,je=null,qe=0,ct=0,os=null,Hr=!1,nl=!1,gp=!1,er=0,Nt=0,Gr=0,ro=0,_p=0,ls=0,sl=0,Pc=null,$n=null,yp=!1,Kh=0,ab=0,Yh=1/0,Qh=null,$r=null,Xt=0,Kr=null,il=null,tr=0,vp=0,bp=null,ob=null,Vc=0,Ep=null;function cs(){return(st&2)!==0&&qe!==0?qe&-qe:z.T!==null?Cp():Ql()}function lb(){if(ls===0)if((qe&536870912)===0||Ke){var s=Ui;Ui<<=1,(Ui&3932160)===0&&(Ui=262144),ls=s}else ls=536870912;return s=rs.current,s!==null&&(s.flags|=32),ls}function Kn(s,r,o){(s===_t&&(ct===2||ct===9)||s.cancelPendingCommit!==null)&&(rl(s,0),Yr(s,qe,ls,!1)),vt(s,o),((st&2)===0||s!==_t)&&(s===_t&&((st&2)===0&&(ro|=o),Nt===4&&Yr(s,qe,ls,!1)),Ti(s))}function cb(s,r,o){if((st&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&s.expiredLanes)===0||rt(s,r),d=c?gI(s,r):wp(s,r,!0),m=c;do{if(d===0){nl&&!c&&Yr(s,r,0,!1);break}else{if(o=s.current.alternate,m&&!mI(o)){d=wp(s,r,!1),m=!1;continue}if(d===2){if(m=r,s.errorRecoveryDisabledLanes&m)var b=0;else b=s.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var S=s;d=Pc;var k=S.current.memoizedState.isDehydrated;if(k&&(rl(S,b).flags|=256),b=wp(S,b,!1),b!==2){if(gp&&!k){S.errorRecoveryDisabledLanes|=m,ro|=m,d=4;break e}m=$n,$n=d,m!==null&&($n===null?$n=m:$n.push.apply($n,m))}d=b}if(m=!1,d!==2)continue}}if(d===1){rl(s,0),Yr(s,r,0,!0);break}e:{switch(c=s,m=d,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Yr(c,r,ls,!Hr);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=Kh+300-fn(),10<d)){if(Yr(c,r,ls,!Hr),Se(c,0,!0)!==0)break e;tr=r,c.timeoutHandle=zb(ub.bind(null,c,o,$n,Qh,yp,r,ls,ro,sl,Hr,m,"Throttled",-0,0),d);break e}ub(c,o,$n,Qh,yp,r,ls,ro,sl,Hr,m,null,-0,0)}}break}while(!0);Ti(s)}function ub(s,r,o,c,d,m,b,S,k,F,W,Z,q,K){if(s.timeoutHandle=-1,Z=r.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Us},nb(r,m,Z);var pe=(m&62914560)===m?Kh-fn():(m&4194048)===m?ab-fn():0;if(pe=JI(Z,pe),pe!==null){tr=m,s.cancelPendingCommit=pe(yb.bind(null,s,r,m,o,c,d,b,S,k,W,Z,null,q,K)),Yr(s,m,b,!F);return}}yb(s,r,m,o,c,d,b,S,k)}function mI(s){for(var r=s;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],m=d.getSnapshot;d=d.value;try{if(!ss(m(),d))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Yr(s,r,o,c){r&=~_p,r&=~ro,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var d=r;0<d;){var m=31-At(d),b=1<<m;c[m]=-1,d&=~b}o!==0&&fs(s,o,r)}function Wh(){return(st&6)===0?(Lc(0),!1):!0}function Tp(){if(je!==null){if(ct===0)var s=je.return;else s=je,Hi=Wa=null,Um(s),Qo=null,vc=0,s=je;for(;s!==null;)B0(s.alternate,s),s=s.return;je=null}}function rl(s,r){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,MI(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),tr=0,Tp(),_t=s,je=o=Fi(s.current,null),qe=r,ct=0,os=null,Hr=!1,nl=rt(s,r),gp=!1,sl=ls=_p=ro=Gr=Nt=0,$n=Pc=null,yp=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var d=31-At(c),m=1<<d;r|=s[d],c&=~m}return er=r,_h(),o}function hb(s,r){Ve=null,z.H=Cc,r===Yo||r===Ah?(r=Cv(),ct=3):r===xm?(r=Cv(),ct=4):ct=r===ep?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,os=r,je===null&&(Nt=1,jh(s,vs(r,s.current)))}function db(){var s=rs.current;return s===null?!0:(qe&4194048)===qe?ws===null:(qe&62914560)===qe||(qe&536870912)!==0?s===ws:!1}function fb(){var s=z.H;return z.H=Cc,s===null?Cc:s}function mb(){var s=z.A;return z.A=dI,s}function Xh(){Nt=4,Hr||(qe&4194048)!==qe&&rs.current!==null||(nl=!0),(Gr&134217727)===0&&(ro&134217727)===0||_t===null||Yr(_t,qe,ls,!1)}function wp(s,r,o){var c=st;st|=2;var d=fb(),m=mb();(_t!==s||qe!==r)&&(Qh=null,rl(s,r)),r=!1;var b=Nt;e:do try{if(ct!==0&&je!==null){var S=je,k=os;switch(ct){case 8:Tp(),b=6;break e;case 3:case 2:case 9:case 6:rs.current===null&&(r=!0);var F=ct;if(ct=0,os=null,al(s,S,k,F),o&&nl){b=0;break e}break;default:F=ct,ct=0,os=null,al(s,S,k,F)}}pI(),b=Nt;break}catch(W){hb(s,W)}while(!0);return r&&s.shellSuspendCounter++,Hi=Wa=null,st=c,z.H=d,z.A=m,je===null&&(_t=null,qe=0,_h()),b}function pI(){for(;je!==null;)pb(je)}function gI(s,r){var o=st;st|=2;var c=fb(),d=mb();_t!==s||qe!==r?(Qh=null,Yh=fn()+500,rl(s,r)):nl=rt(s,r);e:do try{if(ct!==0&&je!==null){r=je;var m=os;t:switch(ct){case 1:ct=0,os=null,al(s,r,m,1);break;case 2:case 9:if(Av(m)){ct=0,os=null,gb(r);break}r=function(){ct!==2&&ct!==9||_t!==s||(ct=7),Ti(s)},m.then(r,r);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Av(m)?(ct=0,os=null,gb(r)):(ct=0,os=null,al(s,r,m,7));break;case 5:var b=null;switch(je.tag){case 26:b=je.memoizedState;case 5:case 27:var S=je;if(b?tE(b):S.stateNode.complete){ct=0,os=null;var k=S.sibling;if(k!==null)je=k;else{var F=S.return;F!==null?(je=F,Jh(F)):je=null}break t}}ct=0,os=null,al(s,r,m,5);break;case 6:ct=0,os=null,al(s,r,m,6);break;case 8:Tp(),Nt=6;break e;default:throw Error(i(462))}}_I();break}catch(W){hb(s,W)}while(!0);return Hi=Wa=null,z.H=c,z.A=d,st=o,je!==null?0:(_t=null,qe=0,_h(),Nt)}function _I(){for(;je!==null&&!dn();)pb(je)}function pb(s){var r=j0(s.alternate,s,er);s.memoizedProps=s.pendingProps,r===null?Jh(s):je=r}function gb(s){var r=s,o=r.alternate;switch(r.tag){case 15:case 0:r=O0(o,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=O0(o,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:Um(r);default:B0(o,r),r=je=mv(r,er),r=j0(o,r,er)}s.memoizedProps=s.pendingProps,r===null?Jh(s):je=r}function al(s,r,o,c){Hi=Wa=null,Um(r),Qo=null,vc=0;var d=r.return;try{if(rI(s,d,r,o,qe)){Nt=1,jh(s,vs(o,s.current)),je=null;return}}catch(m){if(d!==null)throw je=d,m;Nt=1,jh(s,vs(o,s.current)),je=null;return}r.flags&32768?(Ke||c===1?s=!0:nl||(qe&536870912)!==0?s=!1:(Hr=s=!0,(c===2||c===9||c===3||c===6)&&(c=rs.current,c!==null&&c.tag===13&&(c.flags|=16384))),_b(r,s)):Jh(r)}function Jh(s){var r=s;do{if((r.flags&32768)!==0){_b(r,Hr);return}s=r.return;var o=lI(r.alternate,r,er);if(o!==null){je=o;return}if(r=r.sibling,r!==null){je=r;return}je=r=s}while(r!==null);Nt===0&&(Nt=5)}function _b(s,r){do{var o=cI(s.alternate,s);if(o!==null){o.flags&=32767,je=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(s=s.sibling,s!==null)){je=s;return}je=s=o}while(s!==null);Nt=6,je=null}function yb(s,r,o,c,d,m,b,S,k){s.cancelPendingCommit=null;do Zh();while(Xt!==0);if((st&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=hm,An(s,o,m,b,S,k),s===_t&&(je=_t=null,qe=0),il=r,Kr=s,tr=o,vp=m,bp=d,ob=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,EI(Os,function(){return wb(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,d=ie.p,ie.p=2,b=st,st|=4;try{uI(s,r,o)}finally{st=b,ie.p=d,z.T=c}}Xt=1,vb(),bb(),Eb()}}function vb(){if(Xt===1){Xt=0;var s=Kr,r=il,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=z.T,z.T=null;var c=ie.p;ie.p=2;var d=st;st|=4;try{Z0(r,s);var m=Pp,b=rv(s.containerInfo),S=m.focusedElem,k=m.selectionRange;if(b!==S&&S&&S.ownerDocument&&iv(S.ownerDocument.documentElement,S)){if(k!==null&&am(S)){var F=k.start,W=k.end;if(W===void 0&&(W=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(W,S.value.length);else{var Z=S.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var K=q.getSelection(),pe=S.textContent.length,Ae=Math.min(k.start,pe),mt=k.end===void 0?Ae:Math.min(k.end,pe);!K.extend&&Ae>mt&&(b=mt,mt=Ae,Ae=b);var U=sv(S,Ae),M=sv(S,mt);if(U&&M&&(K.rangeCount!==1||K.anchorNode!==U.node||K.anchorOffset!==U.offset||K.focusNode!==M.node||K.focusOffset!==M.offset)){var B=Z.createRange();B.setStart(U.node,U.offset),K.removeAllRanges(),Ae>mt?(K.addRange(B),K.extend(M.node,M.offset)):(B.setEnd(M.node,M.offset),K.addRange(B))}}}}for(Z=[],K=S;K=K.parentNode;)K.nodeType===1&&Z.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Z.length;S++){var J=Z[S];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}hd=!!Mp,Pp=Mp=null}finally{st=d,ie.p=c,z.T=o}}s.current=r,Xt=2}}function bb(){if(Xt===2){Xt=0;var s=Kr,r=il,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=z.T,z.T=null;var c=ie.p;ie.p=2;var d=st;st|=4;try{Y0(s,r.alternate,r)}finally{st=d,ie.p=c,z.T=o}}Xt=3}}function Eb(){if(Xt===4||Xt===3){Xt=0,Ds();var s=Kr,r=il,o=tr,c=ob;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,il=Kr=null,Tb(s,s.pendingLanes));var d=s.pendingLanes;if(d===0&&($r=null),gn(o),r=r.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Jn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=z.T,d=ie.p,ie.p=2,z.T=null;try{for(var m=s.onRecoverableError,b=0;b<c.length;b++){var S=c[b];m(S.value,{componentStack:S.stack})}}finally{z.T=r,ie.p=d}}(tr&3)!==0&&Zh(),Ti(s),d=s.pendingLanes,(o&261930)!==0&&(d&42)!==0?s===Ep?Vc++:(Vc=0,Ep=s):Vc=0,Lc(0)}}function Tb(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,_c(r)))}function Zh(){return vb(),bb(),Eb(),wb()}function wb(){if(Xt!==5)return!1;var s=Kr,r=vp;vp=0;var o=gn(tr),c=z.T,d=ie.p;try{ie.p=32>o?32:o,z.T=null,o=bp,bp=null;var m=Kr,b=tr;if(Xt=0,il=Kr=null,tr=0,(st&6)!==0)throw Error(i(331));var S=st;if(st|=4,ib(m.current),tb(m,m.current,b,o),st=S,Lc(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Jn,m)}catch{}return!0}finally{ie.p=d,z.T=c,Tb(s,r)}}function Sb(s,r,o){r=vs(o,r),r=Zm(s.stateNode,r,2),s=zr(s,r,2),s!==null&&(vt(s,2),Ti(s))}function ut(s,r,o){if(s.tag===3)Sb(s,s,o);else for(;r!==null;){if(r.tag===3){Sb(r,s,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&($r===null||!$r.has(c))){s=vs(o,s),o=A0(2),c=zr(r,o,2),c!==null&&(x0(o,c,r,s),vt(c,2),Ti(c));break}}r=r.return}}function Sp(s,r,o){var c=s.pingCache;if(c===null){c=s.pingCache=new fI;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(o)||(gp=!0,d.add(o),s=yI.bind(null,s,r,o),r.then(s,s))}function yI(s,r,o){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,_t===s&&(qe&o)===o&&(Nt===4||Nt===3&&(qe&62914560)===qe&&300>fn()-Kh?(st&2)===0&&rl(s,0):_p|=o,sl===qe&&(sl=0)),Ti(s)}function Ab(s,r){r===0&&(r=nn()),s=Ka(s,r),s!==null&&(vt(s,r),Ti(s))}function vI(s){var r=s.memoizedState,o=0;r!==null&&(o=r.retryLane),Ab(s,o)}function bI(s,r){var o=0;switch(s.tag){case 31:case 13:var c=s.stateNode,d=s.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Ab(s,o)}function EI(s,r){return kt(s,r)}var ed=null,ol=null,Ap=!1,td=!1,xp=!1,Qr=0;function Ti(s){s!==ol&&s.next===null&&(ol===null?ed=ol=s:ol=ol.next=s),td=!0,Ap||(Ap=!0,wI())}function Lc(s,r){if(!xp&&td){xp=!0;do for(var o=!1,c=ed;c!==null;){if(s!==0){var d=c.pendingLanes;if(d===0)var m=0;else{var b=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-At(42|s)+1)-1,m&=d&~(b&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Rb(c,m))}else m=qe,m=Se(c,c===_t?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||rt(c,m)||(o=!0,Rb(c,m));c=c.next}while(o);xp=!1}}function TI(){xb()}function xb(){td=Ap=!1;var s=0;Qr!==0&&OI()&&(s=Qr);for(var r=fn(),o=null,c=ed;c!==null;){var d=c.next,m=Cb(c,r);m===0?(c.next=null,o===null?ed=d:o.next=d,d===null&&(ol=o)):(o=c,(s!==0||(m&3)!==0)&&(td=!0)),c=d}Xt!==0&&Xt!==5||Lc(s),Qr!==0&&(Qr=0)}function Cb(s,r){for(var o=s.suspendedLanes,c=s.pingedLanes,d=s.expirationTimes,m=s.pendingLanes&-62914561;0<m;){var b=31-At(m),S=1<<b,k=d[b];k===-1?((S&o)===0||(S&c)!==0)&&(d[b]=Ut(S,r)):k<=r&&(s.expiredLanes|=S),m&=~S}if(r=_t,o=qe,o=Se(s,s===r?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,o===0||s===r&&(ct===2||ct===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&ni(c),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||rt(s,o)){if(r=o&-o,r===s.callbackPriority)return r;switch(c!==null&&ni(c),gn(o)){case 2:case 8:o=Oa;break;case 32:o=Os;break;case 268435456:o=Ms;break;default:o=Os}return c=Ib.bind(null,s),o=kt(o,c),s.callbackPriority=r,s.callbackNode=o,r}return c!==null&&c!==null&&ni(c),s.callbackPriority=2,s.callbackNode=null,2}function Ib(s,r){if(Xt!==0&&Xt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Zh()&&s.callbackNode!==o)return null;var c=qe;return c=Se(s,s===_t?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(cb(s,c,r),Cb(s,fn()),s.callbackNode!=null&&s.callbackNode===o?Ib.bind(null,s):null)}function Rb(s,r){if(Zh())return null;cb(s,r,!0)}function wI(){PI(function(){(st&6)!==0?kt(si,TI):xb()})}function Cp(){if(Qr===0){var s=$o;s===0&&(s=ds,ds<<=1,(ds&261888)===0&&(ds=256)),Qr=s}return Qr}function Nb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ko(""+s)}function kb(s,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,s.id&&o.setAttribute("form",s.id),r.parentNode.insertBefore(o,r),s=new FormData(s),o.parentNode.removeChild(o),s}function SI(s,r,o,c,d){if(r==="submit"&&o&&o.stateNode===d){var m=Nb((d[sn]||null).action),b=c.submitter;b&&(r=(r=b[sn]||null)?Nb(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var S=new pi("action","action",null,c,d);s.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Qr!==0){var k=b?kb(d,b):new FormData(d);Km(o,{pending:!0,data:k,method:d.method,action:m},null,k)}}else typeof m=="function"&&(S.preventDefault(),k=b?kb(d,b):new FormData(d),Km(o,{pending:!0,data:k,method:d.method,action:m},m,k))},currentTarget:d}]})}}for(var Ip=0;Ip<um.length;Ip++){var Rp=um[Ip],AI=Rp.toLowerCase(),xI=Rp[0].toUpperCase()+Rp.slice(1);qs(AI,"on"+xI)}qs(lv,"onAnimationEnd"),qs(cv,"onAnimationIteration"),qs(uv,"onAnimationStart"),qs("dblclick","onDoubleClick"),qs("focusin","onFocus"),qs("focusout","onBlur"),qs(FC,"onTransitionRun"),qs(qC,"onTransitionStart"),qs(HC,"onTransitionCancel"),qs(hv,"onTransitionEnd"),hi("onMouseEnter",["mouseout","mouseover"]),hi("onMouseLeave",["mouseout","mouseover"]),hi("onPointerEnter",["pointerout","pointerover"]),hi("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uc));function Db(s,r){r=(r&4)!==0;for(var o=0;o<s.length;o++){var c=s[o],d=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var S=c[b],k=S.instance,F=S.currentTarget;if(S=S.listener,k!==m&&d.isPropagationStopped())break e;m=S,d.currentTarget=F;try{m(d)}catch(W){gh(W)}d.currentTarget=null,m=k}else for(b=0;b<c.length;b++){if(S=c[b],k=S.instance,F=S.currentTarget,S=S.listener,k!==m&&d.isPropagationStopped())break e;m=S,d.currentTarget=F;try{m(d)}catch(W){gh(W)}d.currentTarget=null,m=k}}}}function ze(s,r){var o=r[xo];o===void 0&&(o=r[xo]=new Set);var c=s+"__bubble";o.has(c)||(Ob(r,s,2,!1),o.add(c))}function Np(s,r,o){var c=0;r&&(c|=4),Ob(o,s,c,r)}var nd="_reactListening"+Math.random().toString(36).slice(2);function kp(s){if(!s[nd]){s[nd]=!0,Wl.forEach(function(o){o!=="selectionchange"&&(CI.has(o)||Np(o,!1,s),Np(o,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[nd]||(r[nd]=!0,Np("selectionchange",!1,r))}}function Ob(s,r,o,c){switch(lE(r)){case 2:var d=tR;break;case 8:d=nR;break;default:d=$p}o=d.bind(null,r,o,s),d=void 0,!ja||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?s.addEventListener(r,o,{capture:!0,passive:d}):s.addEventListener(r,o,!0):d!==void 0?s.addEventListener(r,o,{passive:d}):s.addEventListener(r,o,!1)}function Dp(s,r,o,c,d){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var S=c.stateNode.containerInfo;if(S===d)break;if(b===4)for(b=c.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;S!==null;){if(b=li(S),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){c=m=b;continue e}S=S.parentNode}}c=c.return}Nr(function(){var F=m,W=ps(o),Z=[];e:{var q=dv.get(s);if(q!==void 0){var K=pi,pe=s;switch(s){case"keypress":if(Ba(o)===0)break e;case"keydown":case"keyup":K=fh;break;case"focusin":pe="focus",K=qa;break;case"focusout":pe="blur",K=qa;break;case"beforeblur":case"afterblur":K=qa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=y;break;case lv:case cv:case uv:K=ah;break;case hv:K=A;break;case"scroll":case"scrollend":K=lc;break;case"wheel":K=$;break;case"copy":case"cut":case"paste":K=oh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Bi;break;case"toggle":case"beforetoggle":K=Pe}var Ae=(r&4)!==0,mt=!Ae&&(s==="scroll"||s==="scrollend"),U=Ae?q!==null?q+"Capture":null:q;Ae=[];for(var M=F,B;M!==null;){var J=M;if(B=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||B===null||U===null||(J=js(M,U),J!=null&&Ae.push(jc(M,J,B))),mt)break;M=M.return}0<Ae.length&&(q=new K(q,pe,null,o,W),Z.push({event:q,listeners:Ae}))}}if((r&7)===0){e:{if(q=s==="mouseover"||s==="pointerover",K=s==="mouseout"||s==="pointerout",q&&o!==rc&&(pe=o.relatedTarget||o.fromElement)&&(li(pe)||pe[ai]))break e;if((K||q)&&(q=W.window===W?W:(q=W.ownerDocument)?q.defaultView||q.parentWindow:window,K?(pe=o.relatedTarget||o.toElement,K=F,pe=pe?li(pe):null,pe!==null&&(mt=l(pe),Ae=pe.tag,pe!==mt||Ae!==5&&Ae!==27&&Ae!==6)&&(pe=null)):(K=null,pe=F),K!==pe)){if(Ae=cc,J="onMouseLeave",U="onMouseEnter",M="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=Bi,J="onPointerLeave",U="onPointerEnter",M="pointer"),mt=K==null?q:ts(K),B=pe==null?q:ts(pe),q=new Ae(J,M+"leave",K,o,W),q.target=mt,q.relatedTarget=B,J=null,li(W)===F&&(Ae=new Ae(U,M+"enter",pe,o,W),Ae.target=B,Ae.relatedTarget=mt,J=Ae),mt=J,K&&pe)t:{for(Ae=II,U=K,M=pe,B=0,J=U;J;J=Ae(J))B++;J=0;for(var Te=M;Te;Te=Ae(Te))J++;for(;0<B-J;)U=Ae(U),B--;for(;0<J-B;)M=Ae(M),J--;for(;B--;){if(U===M||M!==null&&U===M.alternate){Ae=U;break t}U=Ae(U),M=Ae(M)}Ae=null}else Ae=null;K!==null&&Mb(Z,q,K,Ae,!1),pe!==null&&mt!==null&&Mb(Z,mt,pe,Ae,!0)}}e:{if(q=F?ts(F):window,K=q.nodeName&&q.nodeName.toLowerCase(),K==="select"||K==="input"&&q.type==="file")var et=Xy;else if(Qy(q))if(Jy)et=jC;else{et=LC;var ye=VC}else K=q.nodeName,!K||K.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?F&&No(F.elementType)&&(et=Xy):et=UC;if(et&&(et=et(s,F))){Wy(Z,et,o,W);break e}ye&&ye(s,q,F),s==="focusout"&&F&&q.type==="number"&&F.memoizedProps.value!=null&&nc(q,"number",q.value)}switch(ye=F?ts(F):window,s){case"focusin":(Qy(ye)||ye.contentEditable==="true")&&(Uo=ye,om=F,mc=null);break;case"focusout":mc=om=Uo=null;break;case"mousedown":lm=!0;break;case"contextmenu":case"mouseup":case"dragend":lm=!1,av(Z,o,W);break;case"selectionchange":if(BC)break;case"keydown":case"keyup":av(Z,o,W)}var Le;if(nt)e:{switch(s){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Lo?Ha(s,o)&&(He="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(He="onCompositionStart");He&&(yi&&o.locale!=="ko"&&(Lo||He!=="onCompositionStart"?He==="onCompositionEnd"&&Lo&&(Le=oc()):(mi=W,ac="value"in mi?mi.value:mi.textContent,Lo=!0)),ye=sd(F,He),0<ye.length&&(He=new _i(He,s,null,o,W),Z.push({event:He,listeners:ye}),Le?He.data=Le:(Le=Vo(o),Le!==null&&(He.data=Le)))),(Le=_s?DC(s,o):OC(s,o))&&(He=sd(F,"onBeforeInput"),0<He.length&&(ye=new _i("onBeforeInput","beforeinput",null,o,W),Z.push({event:ye,listeners:He}),ye.data=Le)),SI(Z,s,F,o,W)}Db(Z,r)})}function jc(s,r,o){return{instance:s,listener:r,currentTarget:o}}function sd(s,r){for(var o=r+"Capture",c=[];s!==null;){var d=s,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=js(s,o),d!=null&&c.unshift(jc(s,d,m)),d=js(s,r),d!=null&&c.push(jc(s,d,m))),s.tag===3)return c;s=s.return}return[]}function II(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Mb(s,r,o,c,d){for(var m=r._reactName,b=[];o!==null&&o!==c;){var S=o,k=S.alternate,F=S.stateNode;if(S=S.tag,k!==null&&k===c)break;S!==5&&S!==26&&S!==27||F===null||(k=F,d?(F=js(o,m),F!=null&&b.unshift(jc(o,F,k))):d||(F=js(o,m),F!=null&&b.push(jc(o,F,k)))),o=o.return}b.length!==0&&s.push({event:r,listeners:b})}var RI=/\r\n?/g,NI=/\u0000|\uFFFD/g;function Pb(s){return(typeof s=="string"?s:""+s).replace(RI,`
`).replace(NI,"")}function Vb(s,r){return r=Pb(r),Pb(s)===r}function ft(s,r,o,c,d,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Fn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Fn(s,""+c);break;case"className":ns(s,"class",c);break;case"tabIndex":ns(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ns(s,o,c);break;case"style":ic(s,c,m);break;case"data":if(r!=="object"){ns(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){s.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=ko(""+c),s.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&ft(s,r,"name",d.name,d,null),ft(s,r,"formEncType",d.formEncType,d,null),ft(s,r,"formMethod",d.formMethod,d,null),ft(s,r,"formTarget",d.formTarget,d,null)):(ft(s,r,"encType",d.encType,d,null),ft(s,r,"method",d.method,d,null),ft(s,r,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=ko(""+c),s.setAttribute(o,c);break;case"onClick":c!=null&&(s.onclick=Us);break;case"onScroll":c!=null&&ze("scroll",s);break;case"onScrollEnd":c!=null&&ze("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}o=ko(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""+c):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":c===!0?s.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,c):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(o,c):s.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(o):s.setAttribute(o,c);break;case"popover":ze("beforetoggle",s),ze("toggle",s),Io(s,"popover",c);break;case"xlinkActuate":Bt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Bt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Bt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Bt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Bt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Bt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Bt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Bt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Bt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Io(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=sh.get(o)||o,Io(s,o,c))}}function Op(s,r,o,c,d,m){switch(o){case"style":ic(s,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"children":typeof c=="string"?Fn(s,c):(typeof c=="number"||typeof c=="bigint")&&Fn(s,""+c);break;case"onScroll":c!=null&&ze("scroll",s);break;case"onScrollEnd":c!=null&&ze("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),r=o.slice(2,d?o.length-7:void 0),m=s[sn]||null,m=m!=null?m[o]:null,typeof m=="function"&&s.removeEventListener(r,m,d),typeof c=="function")){typeof m!="function"&&m!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(r,c,d);break e}o in s?s[o]=c:c===!0?s.setAttribute(o,""):Io(s,o,c)}}}function En(s,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",s),ze("load",s);var c=!1,d=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ft(s,r,m,b,o,null)}}d&&ft(s,r,"srcSet",o.srcSet,o,null),c&&ft(s,r,"src",o.src,o,null);return;case"input":ze("invalid",s);var S=m=b=d=null,k=null,F=null;for(c in o)if(o.hasOwnProperty(c)){var W=o[c];if(W!=null)switch(c){case"name":d=W;break;case"type":b=W;break;case"checked":k=W;break;case"defaultChecked":F=W;break;case"value":m=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:ft(s,r,c,W,o,null)}}eh(s,m,S,k,F,b,d,!1);return;case"select":ze("invalid",s),c=b=m=null;for(d in o)if(o.hasOwnProperty(d)&&(S=o[d],S!=null))switch(d){case"value":m=S;break;case"defaultValue":b=S;break;case"multiple":c=S;default:ft(s,r,d,S,o,null)}r=m,o=b,s.multiple=!!c,r!=null?xr(s,!!c,r,!1):o!=null&&xr(s,!!c,o,!0);return;case"textarea":ze("invalid",s),m=d=c=null;for(b in o)if(o.hasOwnProperty(b)&&(S=o[b],S!=null))switch(b){case"value":c=S;break;case"defaultValue":d=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:ft(s,r,b,S,o,null)}Cr(s,c,d,m);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(c=o[k],c!=null))switch(k){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ft(s,r,k,c,o,null)}return;case"dialog":ze("beforetoggle",s),ze("toggle",s),ze("cancel",s),ze("close",s);break;case"iframe":case"object":ze("load",s);break;case"video":case"audio":for(c=0;c<Uc.length;c++)ze(Uc[c],s);break;case"image":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"embed":case"source":case"link":ze("error",s),ze("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(c=o[F],c!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ft(s,r,F,c,o,null)}return;default:if(No(r)){for(W in o)o.hasOwnProperty(W)&&(c=o[W],c!==void 0&&Op(s,r,W,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&ft(s,r,S,c,o,null))}function kI(s,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,b=null,S=null,k=null,F=null,W=null;for(K in o){var Z=o[K];if(o.hasOwnProperty(K)&&Z!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":k=Z;default:c.hasOwnProperty(K)||ft(s,r,K,null,c,Z)}}for(var q in c){var K=c[q];if(Z=o[q],c.hasOwnProperty(q)&&(K!=null||Z!=null))switch(q){case"type":m=K;break;case"name":d=K;break;case"checked":F=K;break;case"defaultChecked":W=K;break;case"value":b=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:K!==Z&&ft(s,r,q,K,c,Z)}}Ro(s,b,S,k,F,W,m,d);return;case"select":K=b=S=q=null;for(m in o)if(k=o[m],o.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":K=k;default:c.hasOwnProperty(m)||ft(s,r,m,null,c,k)}for(d in c)if(m=c[d],k=o[d],c.hasOwnProperty(d)&&(m!=null||k!=null))switch(d){case"value":q=m;break;case"defaultValue":S=m;break;case"multiple":b=m;default:m!==k&&ft(s,r,d,m,c,k)}r=S,o=b,c=K,q!=null?xr(s,!!o,q,!1):!!c!=!!o&&(r!=null?xr(s,!!o,r,!0):xr(s,!!o,o?[]:"",!1));return;case"textarea":K=q=null;for(S in o)if(d=o[S],o.hasOwnProperty(S)&&d!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ft(s,r,S,null,c,d)}for(b in c)if(d=c[b],m=o[b],c.hasOwnProperty(b)&&(d!=null||m!=null))switch(b){case"value":q=d;break;case"defaultValue":K=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==m&&ft(s,r,b,d,c,m)}th(s,q,K);return;case"option":for(var pe in o)if(q=o[pe],o.hasOwnProperty(pe)&&q!=null&&!c.hasOwnProperty(pe))switch(pe){case"selected":s.selected=!1;break;default:ft(s,r,pe,null,c,q)}for(k in c)if(q=c[k],K=o[k],c.hasOwnProperty(k)&&q!==K&&(q!=null||K!=null))switch(k){case"selected":s.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ft(s,r,k,q,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)q=o[Ae],o.hasOwnProperty(Ae)&&q!=null&&!c.hasOwnProperty(Ae)&&ft(s,r,Ae,null,c,q);for(F in c)if(q=c[F],K=o[F],c.hasOwnProperty(F)&&q!==K&&(q!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,r));break;default:ft(s,r,F,q,c,K)}return;default:if(No(r)){for(var mt in o)q=o[mt],o.hasOwnProperty(mt)&&q!==void 0&&!c.hasOwnProperty(mt)&&Op(s,r,mt,void 0,c,q);for(W in c)q=c[W],K=o[W],!c.hasOwnProperty(W)||q===K||q===void 0&&K===void 0||Op(s,r,W,q,c,K);return}}for(var U in o)q=o[U],o.hasOwnProperty(U)&&q!=null&&!c.hasOwnProperty(U)&&ft(s,r,U,null,c,q);for(Z in c)q=c[Z],K=o[Z],!c.hasOwnProperty(Z)||q===K||q==null&&K==null||ft(s,r,Z,q,c,K)}function Lb(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DI(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var d=o[c],m=d.transferSize,b=d.initiatorType,S=d.duration;if(m&&S&&Lb(b)){for(b=0,S=d.responseEnd,c+=1;c<o.length;c++){var k=o[c],F=k.startTime;if(F>S)break;var W=k.transferSize,Z=k.initiatorType;W&&Lb(Z)&&(k=k.responseEnd,b+=W*(k<S?1:(S-F)/(k-F)))}if(--c,r+=8*(m+b)/(d.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Mp=null,Pp=null;function id(s){return s.nodeType===9?s:s.ownerDocument}function Ub(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jb(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Vp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Lp=null;function OI(){var s=window.event;return s&&s.type==="popstate"?s===Lp?!1:(Lp=s,!0):(Lp=null,!1)}var zb=typeof setTimeout=="function"?setTimeout:void 0,MI=typeof clearTimeout=="function"?clearTimeout:void 0,Bb=typeof Promise=="function"?Promise:void 0,PI=typeof queueMicrotask=="function"?queueMicrotask:typeof Bb<"u"?function(s){return Bb.resolve(null).then(s).catch(VI)}:zb;function VI(s){setTimeout(function(){throw s})}function Wr(s){return s==="head"}function Fb(s,r){var o=r,c=0;do{var d=o.nextSibling;if(s.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(c===0){s.removeChild(d),hl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")zc(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,zc(o);for(var m=o.firstChild;m;){var b=m.nextSibling,S=m.nodeName;m[oi]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=b}}else o==="body"&&zc(s.ownerDocument.body);o=d}while(o);hl(r)}function qb(s,r){var o=s;s=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=c}while(o)}function Up(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Up(o),Co(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function LI(s,r,o,c){for(;s.nodeType===1;){var d=o;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[oi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(m=s.getAttribute("rel"),m==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(m!==d.rel||s.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||s.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||s.getAttribute("title")!==(d.title==null?null:d.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(m=s.getAttribute("src"),(m!==(d.src==null?null:d.src)||s.getAttribute("type")!==(d.type==null?null:d.type)||s.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&s.getAttribute("name")===m)return s}else return s;if(s=Ss(s.nextSibling),s===null)break}return null}function UI(s,r,o){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Ss(s.nextSibling),s===null))return null;return s}function Hb(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Ss(s.nextSibling),s===null))return null;return s}function jp(s){return s.data==="$?"||s.data==="$~"}function zp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function jI(s,r){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Ss(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Bp=null;function Gb(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(r===0)return Ss(s.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}s=s.nextSibling}return null}function $b(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return s;r--}else o!=="/$"&&o!=="/&"||r++}s=s.previousSibling}return null}function Kb(s,r,o){switch(r=id(o),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function zc(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Co(s)}var As=new Map,Yb=new Set;function rd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var nr=ie.d;ie.d={f:zI,r:BI,D:FI,C:qI,L:HI,m:GI,X:KI,S:$I,M:YI};function zI(){var s=nr.f(),r=Wh();return s||r}function BI(s){var r=ms(s);r!==null&&r.tag===5&&r.type==="form"?h0(r):nr.r(s)}var ll=typeof document>"u"?null:document;function Qb(s,r,o){var c=ll;if(c&&typeof r=="string"&&r){var d=Bn(r);d='link[rel="'+s+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Yb.has(d)||(Yb.add(d),s={rel:s,crossOrigin:o,href:r},c.querySelector(d)===null&&(r=c.createElement("link"),En(r,"link",s),zt(r),c.head.appendChild(r)))}}function FI(s){nr.D(s),Qb("dns-prefetch",s,null)}function qI(s,r){nr.C(s,r),Qb("preconnect",s,r)}function HI(s,r,o){nr.L(s,r,o);var c=ll;if(c&&s&&r){var d='link[rel="preload"][as="'+Bn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Bn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Bn(o.imageSizes)+'"]')):d+='[href="'+Bn(s)+'"]';var m=d;switch(r){case"style":m=cl(s);break;case"script":m=ul(s)}As.has(m)||(s=_({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:s,as:r},o),As.set(m,s),c.querySelector(d)!==null||r==="style"&&c.querySelector(Bc(m))||r==="script"&&c.querySelector(Fc(m))||(r=c.createElement("link"),En(r,"link",s),zt(r),c.head.appendChild(r)))}}function GI(s,r){nr.m(s,r);var o=ll;if(o&&s){var c=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Bn(c)+'"][href="'+Bn(s)+'"]',m=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ul(s)}if(!As.has(m)&&(s=_({rel:"modulepreload",href:s},r),As.set(m,s),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fc(m)))return}c=o.createElement("link"),En(c,"link",s),zt(c),o.head.appendChild(c)}}}function $I(s,r,o){nr.S(s,r,o);var c=ll;if(c&&s){var d=ci(c).hoistableStyles,m=cl(s);r=r||"default";var b=d.get(m);if(!b){var S={loading:0,preload:null};if(b=c.querySelector(Bc(m)))S.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":r},o),(o=As.get(m))&&Fp(s,o);var k=b=c.createElement("link");zt(k),En(k,"link",s),k._p=new Promise(function(F,W){k.onload=F,k.onerror=W}),k.addEventListener("load",function(){S.loading|=1}),k.addEventListener("error",function(){S.loading|=2}),S.loading|=4,ad(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:S},d.set(m,b)}}}function KI(s,r){nr.X(s,r);var o=ll;if(o&&s){var c=ci(o).hoistableScripts,d=ul(s),m=c.get(d);m||(m=o.querySelector(Fc(d)),m||(s=_({src:s,async:!0},r),(r=As.get(d))&&qp(s,r),m=o.createElement("script"),zt(m),En(m,"link",s),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(d,m))}}function YI(s,r){nr.M(s,r);var o=ll;if(o&&s){var c=ci(o).hoistableScripts,d=ul(s),m=c.get(d);m||(m=o.querySelector(Fc(d)),m||(s=_({src:s,async:!0,type:"module"},r),(r=As.get(d))&&qp(s,r),m=o.createElement("script"),zt(m),En(m,"link",s),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(d,m))}}function Wb(s,r,o,c){var d=(d=be.current)?rd(d):null;if(!d)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=cl(o.href),o=ci(d).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=cl(o.href);var m=ci(d).hoistableStyles,b=m.get(s);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(s,b),(m=d.querySelector(Bc(s)))&&!m._p&&(b.instance=m,b.state.loading=5),As.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},As.set(s,o),m||QI(d,s,o,b.state))),r&&c===null)throw Error(i(528,""));return b}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ul(o),o=ci(d).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function cl(s){return'href="'+Bn(s)+'"'}function Bc(s){return'link[rel="stylesheet"]['+s+"]"}function Xb(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function QI(s,r,o,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),En(r,"link",o),zt(r),s.head.appendChild(r))}function ul(s){return'[src="'+Bn(s)+'"]'}function Fc(s){return"script[async]"+s}function Jb(s,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+Bn(o.href)+'"]');if(c)return r.instance=c,zt(c),c;var d=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),zt(c),En(c,"style",d),ad(c,o.precedence,s),r.instance=c;case"stylesheet":d=cl(o.href);var m=s.querySelector(Bc(d));if(m)return r.state.loading|=4,r.instance=m,zt(m),m;c=Xb(o),(d=As.get(d))&&Fp(c,d),m=(s.ownerDocument||s).createElement("link"),zt(m);var b=m;return b._p=new Promise(function(S,k){b.onload=S,b.onerror=k}),En(m,"link",c),r.state.loading|=4,ad(m,o.precedence,s),r.instance=m;case"script":return m=ul(o.src),(d=s.querySelector(Fc(m)))?(r.instance=d,zt(d),d):(c=o,(d=As.get(m))&&(c=_({},o),qp(c,d)),s=s.ownerDocument||s,d=s.createElement("script"),zt(d),En(d,"link",c),s.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,ad(c,o.precedence,s));return r.instance}function ad(s,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,m=d,b=0;b<c.length;b++){var S=c[b];if(S.dataset.precedence===r)m=S;else if(m!==d)break}m?m.parentNode.insertBefore(s,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(s,r.firstChild))}function Fp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function qp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var od=null;function Zb(s,r,o){if(od===null){var c=new Map,d=od=new Map;d.set(o,c)}else d=od,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(s))return c;for(c.set(s,null),o=o.getElementsByTagName(s),d=0;d<o.length;d++){var m=o[d];if(!(m[oi]||m[jt]||s==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=s+b;var S=c.get(b);S?S.push(m):c.set(b,[m])}}return c}function eE(s,r,o){s=s.ownerDocument||s,s.head.insertBefore(o,r==="title"?s.querySelector("head > title"):null)}function WI(s,r,o){if(o===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function tE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function XI(s,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=cl(c.href),m=r.querySelector(Bc(d));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=ld.bind(s),r.then(s,s)),o.state.loading|=4,o.instance=m,zt(m);return}m=r.ownerDocument||r,c=Xb(c),(d=As.get(d))&&Fp(c,d),m=m.createElement("link"),zt(m);var b=m;b._p=new Promise(function(S,k){b.onload=S,b.onerror=k}),En(m,"link",c),o.instance=m}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=ld.bind(s),r.addEventListener("load",o),r.addEventListener("error",o))}}var Hp=0;function JI(s,r){return s.stylesheets&&s.count===0&&ud(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var c=setTimeout(function(){if(s.stylesheets&&ud(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4+r);0<s.imgBytes&&Hp===0&&(Hp=62500*DI());var d=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ud(s,s.stylesheets),s.unsuspend)){var m=s.unsuspend;s.unsuspend=null,m()}},(s.imgBytes>Hp?50:800)+r);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(d)}}:null}function ld(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ud(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var cd=null;function ud(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,cd=new Map,r.forEach(ZI,s),cd=null,ld.call(s))}function ZI(s,r){if(!(r.state.loading&4)){var o=cd.get(s);if(o)var c=o.get(null);else{o=new Map,cd.set(s,o);for(var d=s.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var b=d[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}d=r.instance,b=d.getAttribute("data-precedence"),m=o.get(b)||c,m===c&&o.set(null,d),o.set(b,d),this.count++,c=ld.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),m?m.parentNode.insertBefore(d,m.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(d,s.firstChild)),r.state.loading|=4}}var qc={$$typeof:re,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function eR(s,r,o,c,d,m,b,S,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vn(0),this.hiddenUpdates=Vn(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function nE(s,r,o,c,d,m,b,S,k,F,W,Z){return s=new eR(s,r,o,b,k,F,W,Z,S),r=1,m===!0&&(r|=24),m=is(3,null,null,r),s.current=m,m.stateNode=s,r=wm(),r.refCount++,s.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Cm(m),s}function sE(s){return s?(s=Bo,s):Bo}function iE(s,r,o,c,d,m){d=sE(d),c.context===null?c.context=d:c.pendingContext=d,c=jr(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=zr(s,c,r),o!==null&&(Kn(o,s,r),Ec(o,s,r))}function rE(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<r?o:r}}function Gp(s,r){rE(s,r),(s=s.alternate)&&rE(s,r)}function aE(s){if(s.tag===13||s.tag===31){var r=Ka(s,67108864);r!==null&&Kn(r,s,67108864),Gp(s,67108864)}}function oE(s){if(s.tag===13||s.tag===31){var r=cs();r=ri(r);var o=Ka(s,r);o!==null&&Kn(o,s,r),Gp(s,r)}}var hd=!0;function tR(s,r,o,c){var d=z.T;z.T=null;var m=ie.p;try{ie.p=2,$p(s,r,o,c)}finally{ie.p=m,z.T=d}}function nR(s,r,o,c){var d=z.T;z.T=null;var m=ie.p;try{ie.p=8,$p(s,r,o,c)}finally{ie.p=m,z.T=d}}function $p(s,r,o,c){if(hd){var d=Kp(c);if(d===null)Dp(s,r,c,dd,o),cE(s,c);else if(iR(d,s,r,o,c))c.stopPropagation();else if(cE(s,c),r&4&&-1<sR.indexOf(s)){for(;d!==null;){var m=ms(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=es(m.pendingLanes);if(b!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var k=1<<31-At(b);S.entanglements[1]|=k,b&=~k}Ti(m),(st&6)===0&&(Yh=fn()+500,Lc(0))}}break;case 31:case 13:S=Ka(m,2),S!==null&&Kn(S,m,2),Wh(),Gp(m,2)}if(m=Kp(c),m===null&&Dp(s,r,c,dd,o),m===d)break;d=m}d!==null&&c.stopPropagation()}else Dp(s,r,c,null,o)}}function Kp(s){return s=ps(s),Yp(s)}var dd=null;function Yp(s){if(dd=null,s=li(s),s!==null){var r=l(s);if(r===null)s=null;else{var o=r.tag;if(o===13){if(s=u(r),s!==null)return s;s=null}else if(o===31){if(s=f(r),s!==null)return s;s=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return dd=s,null}function lE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Li()){case si:return 2;case Oa:return 8;case Os:case Ma:return 32;case Ms:return 268435456;default:return 32}default:return 32}}var Qp=!1,Xr=null,Jr=null,Zr=null,Hc=new Map,Gc=new Map,ea=[],sR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cE(s,r){switch(s){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Hc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(r.pointerId)}}function $c(s,r,o,c,d,m){return s===null||s.nativeEvent!==m?(s={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},r!==null&&(r=ms(r),r!==null&&aE(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),s)}function iR(s,r,o,c,d){switch(r){case"focusin":return Xr=$c(Xr,s,r,o,c,d),!0;case"dragenter":return Jr=$c(Jr,s,r,o,c,d),!0;case"mouseover":return Zr=$c(Zr,s,r,o,c,d),!0;case"pointerover":var m=d.pointerId;return Hc.set(m,$c(Hc.get(m)||null,s,r,o,c,d)),!0;case"gotpointercapture":return m=d.pointerId,Gc.set(m,$c(Gc.get(m)||null,s,r,o,c,d)),!0}return!1}function uE(s){var r=li(s.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){s.blockedOn=r,Vs(s.priority,function(){oE(o)});return}}else if(r===31){if(r=f(o),r!==null){s.blockedOn=r,Vs(s.priority,function(){oE(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function fd(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var o=Kp(s.nativeEvent);if(o===null){o=s.nativeEvent;var c=new o.constructor(o.type,o);rc=c,o.target.dispatchEvent(c),rc=null}else return r=ms(o),r!==null&&aE(r),s.blockedOn=o,!1;r.shift()}return!0}function hE(s,r,o){fd(s)&&o.delete(r)}function rR(){Qp=!1,Xr!==null&&fd(Xr)&&(Xr=null),Jr!==null&&fd(Jr)&&(Jr=null),Zr!==null&&fd(Zr)&&(Zr=null),Hc.forEach(hE),Gc.forEach(hE)}function md(s,r){s.blockedOn===r&&(s.blockedOn=null,Qp||(Qp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,rR)))}var pd=null;function dE(s){pd!==s&&(pd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){pd===s&&(pd=null);for(var r=0;r<s.length;r+=3){var o=s[r],c=s[r+1],d=s[r+2];if(typeof c!="function"){if(Yp(c||o)===null)continue;break}var m=ms(o);m!==null&&(s.splice(r,3),r-=3,Km(m,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function hl(s){function r(k){return md(k,s)}Xr!==null&&md(Xr,s),Jr!==null&&md(Jr,s),Zr!==null&&md(Zr,s),Hc.forEach(r),Gc.forEach(r);for(var o=0;o<ea.length;o++){var c=ea[o];c.blockedOn===s&&(c.blockedOn=null)}for(;0<ea.length&&(o=ea[0],o.blockedOn===null);)uE(o),o.blockedOn===null&&ea.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],m=o[c+1],b=d[sn]||null;if(typeof m=="function")b||dE(o);else if(b){var S=null;if(m&&m.hasAttribute("formAction")){if(d=m,b=m[sn]||null)S=b.formAction;else if(Yp(d)!==null)continue}else S=b.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),dE(o)}}}function fE(){function s(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,d=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function Wp(s){this._internalRoot=s}gd.prototype.render=Wp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=cs();iE(o,c,s,r,null,null)},gd.prototype.unmount=Wp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;iE(s.current,2,null,s,null,null),Wh(),r[ai]=null}};function gd(s){this._internalRoot=s}gd.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ql();s={blockedOn:null,target:s,priority:r};for(var o=0;o<ea.length&&r!==0&&r<ea[o].priority;o++);ea.splice(o,0,s),o===0&&uE(s)}};var mE=e.version;if(mE!=="19.2.0")throw Error(i(527,mE,"19.2.0"));ie.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=g(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var aR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_d.isDisabled&&_d.supportsFiber)try{Jn=_d.inject(aR),Wt=_d}catch{}}return Yc.createRoot=function(s,r){if(!a(s))throw Error(i(299));var o=!1,c="",d=E0,m=T0,b=w0;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=nE(s,1,!1,null,null,o,c,null,d,m,b,fE),s[ai]=r.current,kp(s),new Wp(r)},Yc.hydrateRoot=function(s,r,o){if(!a(s))throw Error(i(299));var c=!1,d="",m=E0,b=T0,S=w0,k=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),r=nE(s,1,!0,r,o??null,c,d,k,m,b,S,fE),r.context=sE(null),o=r.current,c=cs(),c=ri(c),d=jr(c),d.callback=null,zr(o,d,c),o=c,r.current.lanes=o,vt(r,o),Ti(r),s[ai]=r.current,kp(s),new gd(r)},Yc.version="19.2.0",Yc}var SE;function gR(){if(SE)return Jp.exports;SE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jp.exports=pR(),Jp.exports}var _R=gR();function yR(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,i,a,l,u=[],f="",p=n.split("/");for(p[0]||p.shift();a=p.shift();)t=a[0],t==="*"?(u.push(t),f+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(i=a.indexOf("?",1),l=a.indexOf(".",1),u.push(a.substring(1,~i?i:~l?l:a.length)),f+=~i&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(f+=(~i?"?":"")+"\\"+a.substring(l))):f+="/"+a;return{keys:u,pattern:new RegExp("^"+f+(e?"(?=$|/)":"/?$"),"i")}}var oe=Sf();const ae=cS(oe),hS=lR({__proto__:null,default:ae},[oe]);var sg={exports:{}},ig={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE;function vR(){if(AE)return ig;AE=1;var n=Sf();function e(_,w){return _===w&&(_!==0||1/_===1/w)||_!==_&&w!==w}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,a=n.useEffect,l=n.useLayoutEffect,u=n.useDebugValue;function f(_,w){var I=w(),V=i({inst:{value:I,getSnapshot:w}}),G=V[0].inst,H=V[1];return l(function(){G.value=I,G.getSnapshot=w,p(G)&&H({inst:G})},[_,I,w]),a(function(){return p(G)&&H({inst:G}),_(function(){p(G)&&H({inst:G})})},[_]),u(I),I}function p(_){var w=_.getSnapshot;_=_.value;try{var I=w();return!t(_,I)}catch{return!0}}function g(_,w){return w()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:f;return ig.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:v,ig}var xE;function bR(){return xE||(xE=1,sg.exports=vR()),sg.exports}var ER=bR();const TR=hS.useInsertionEffect,wR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SR=wR?oe.useLayoutEffect:oe.useEffect,AR=TR||SR,dS=n=>{const e=oe.useRef([n,(...t)=>e[0](...t)]).current;return AR(()=>{e[0]=n}),e[1]},xR="popstate",S_="pushState",A_="replaceState",CR="hashchange",CE=[xR,S_,A_,CR],IR=n=>{for(const e of CE)addEventListener(e,n);return()=>{for(const e of CE)removeEventListener(e,n)}},fS=(n,e)=>ER.useSyncExternalStore(IR,n,e),RR=()=>location.search,NR=({ssrSearch:n=""}={})=>fS(RR,()=>n),IE=()=>location.pathname,kR=({ssrPath:n}={})=>fS(IE,n?()=>n:IE),DR=(n,{replace:e=!1,state:t=null}={})=>history[e?A_:S_](t,"",n),OR=(n={})=>[kR(n),DR],RE=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[RE]>"u"){for(const n of[S_,A_]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),i=new Event(n);return i.arguments=arguments,dispatchEvent(i),t}}Object.defineProperty(window,RE,{value:!0})}const MR=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",mS=(n="")=>n==="/"?"":n,PR=(n,e)=>n[0]==="~"?n.slice(1):mS(e)+n,VR=(n="",e)=>MR(NE(mS(n)),NE(e)),NE=n=>{try{return decodeURI(n)}catch{return n}},pS={hook:OR,searchHook:NR,parser:yR,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},gS=oe.createContext(pS),ku=()=>oe.useContext(gS),_S={},yS=oe.createContext(_S),LR=()=>oe.useContext(yS),x_=n=>{const[e,t]=n.hook(n);return[VR(n.base,e),dS((i,a)=>t(PR(i,n.base),a))]},Zs=()=>x_(ku()),vS=(n,e,t,i)=>{const{pattern:a,keys:l}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",i),u=a.exec(t)||[],[f,...p]=u;return f!==void 0?[!0,(()=>{const g=l!==!1?Object.fromEntries(l.map((_,w)=>[_,p[w]])):u.groups;let v={...p};return g&&Object.assign(v,g),v})(),...i?[f]:[]]:[!1,null]},UR=n=>vS(ku().parser,n,Zs()[0]),bS=({children:n,...e})=>{const t=ku(),i=e.hook?pS:t;let a=i;const[l,u]=e.ssrPath?.split("?")??[];u&&(e.ssrSearch=u,e.ssrPath=l),e.hrefs=e.hrefs??e.hook?.hrefs;let f=oe.useRef({}),p=f.current,g=p;for(let v in i){const _=v==="base"?i[v]+(e[v]||""):e[v]||i[v];p===g&&_!==g[v]&&(f.current=g={...g}),g[v]=_,_!==i[v]&&(a=g)}return oe.createElement(gS.Provider,{value:a,children:n})},kE=({children:n,component:e},t)=>e?oe.createElement(e,{params:t}):typeof n=="function"?n(t):n,jR=n=>{let e=oe.useRef(_S),t=e.current;for(const i in n)n[i]!==t[i]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},wi=({path:n,nest:e,match:t,...i})=>{const a=ku(),[l]=x_(a),[u,f,p]=t??vS(a.parser,n,l,e),g=jR({...LR(),...f});if(!u)return null;const v=p?oe.createElement(bS,{base:p},kE(i,g)):kE(i,g);return oe.createElement(yS.Provider,{value:g,children:v})};oe.forwardRef((n,e)=>{const t=ku(),[i,a]=x_(t),{to:l="",href:u=l,onClick:f,asChild:p,children:g,className:v,replace:_,state:w,...I}=n,V=dS(H=>{H.ctrlKey||H.metaKey||H.altKey||H.shiftKey||H.button!==0||(f?.(H),H.defaultPrevented||(H.preventDefault(),a(u,n)))}),G=t.hrefs(u[0]==="~"?u.slice(1):t.base+u,t);return p&&oe.isValidElement(g)?oe.cloneElement(g,{onClick:V,href:G}):oe.createElement("a",{...I,onClick:V,href:G,className:v?.call?v(i===u):v,children:g,ref:e})});const zR="modulepreload",BR=function(n){return"/InstaClone/"+n},DE={},FR=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let g=function(v){return Promise.all(v.map(_=>Promise.resolve(_).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var u=g;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");a=g(t.map(v=>{if(v=BR(v),v in DE)return;DE[v]=!0;const _=v.endsWith(".css"),w=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${w}`))return;const I=document.createElement("link");if(I.rel=_?"stylesheet":zR,_||(I.as="script"),I.crossOrigin="",I.href=v,p&&I.setAttribute("nonce",p),document.head.appendChild(I),_)return new Promise((V,G)=>{I.addEventListener("load",V),I.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return a.then(f=>{for(const p of f||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})},OE=n=>{let e;const t=new Set,i=(g,v)=>{const _=typeof g=="function"?g(e):g;if(!Object.is(_,e)){const w=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),t.forEach(I=>I(e,w))}},a=()=>e,f={setState:i,getState:a,getInitialState:()=>p,subscribe:g=>(t.add(g),()=>t.delete(g))},p=e=n(i,a,f);return f},qR=(n=>n?OE(n):OE),HR=n=>n;function GR(n,e=HR){const t=ae.useSyncExternalStore(n.subscribe,ae.useCallback(()=>e(n.getState()),[n,e]),ae.useCallback(()=>e(n.getInitialState()),[n,e]));return ae.useDebugValue(t),t}const ME=n=>{const e=qR(n),t=i=>GR(e,i);return Object.assign(t,e),t},$R=(n=>n?ME(n):ME),KR=()=>{};var PE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue=function(n,e){if(!n)throw Vl(e)},Vl=function(n){return new Error("Firebase Database ("+ES.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},YR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],f=n[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},C_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,f=u?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,v=l>>2,_=(l&3)<<4|f>>4;let w=(f&15)<<2|g>>6,I=g&63;p||(I=64,u||(w=64)),i.push(t[v],t[_],t[w],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):YR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||g==null||_==null)throw new QR;const w=l<<2|f>>4;if(i.push(w),g!==64){const I=f<<4&240|g>>2;if(i.push(I),_!==64){const V=g<<6&192|_;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class QR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wS=function(n){const e=TS(n);return C_.encodeByteArray(e,!0)},Hd=function(n){return wS(n).replace(/\./g,"")},Gd=function(n){try{return C_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(n){return SS(void 0,n)}function SS(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!XR(t)||(n[t]=SS(n[t],e[t]));return n}function XR(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=()=>JR().__FIREBASE_DEFAULTS__,eN=()=>{if(typeof process>"u"||typeof PE>"u")return;const n=PE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},tN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Gd(n[1]);return e&&JSON.parse(e)},Af=()=>{try{return KR()||ZR()||eN()||tN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},AS=n=>Af()?.emulatorHosts?.[n],I_=n=>{const e=AS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},xS=()=>Af()?.config,CS=n=>Af()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xf(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Hd(JSON.stringify(t)),Hd(JSON.stringify(u)),""].join(".")}const ou={};function nN(){const n={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?n.emulator.push(e):n.prod.push(e);return n}function sN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let VE=!1;function Cf(n,e){if(typeof window>"u"||typeof document>"u"||!br(window.location.host)||ou[n]===e||ou[n]||VE)return;ou[n]=e;function t(w){return`__firebase__banner__${w}`}const i="__firebase__banner",l=nN().prod.length>0;function u(){const w=document.getElementById(i);w&&w.remove()}function f(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,I){w.setAttribute("width","24"),w.setAttribute("id",I),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{VE=!0,u()},w}function v(w,I){w.setAttribute("id",I),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=sN(i),I=t("text"),V=document.getElementById(I)||document.createElement("span"),G=t("learnmore"),H=document.getElementById(G)||document.createElement("a"),Y=t("preprendIcon"),ce=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const re=w.element;f(re),v(H,G);const me=g();p(ce,Y),re.append(ce,V,H,me),document.body.appendChild(re)}l?(V.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function iN(){const n=Af()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function IS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oN(){const n=On();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lN(){return ES.NODE_ADMIN===!0}function cN(){return!iN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uN(){try{return typeof indexedDB=="object"}catch{return!1}}function hN(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="FirebaseError";class Pi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=dN,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Du.prototype.create)}}class Du{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?fN(l,i):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new Pi(a,f,i)}}function fN(n,e){return n.replace(mN,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const mN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(n){return JSON.parse(n)}function Tn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=function(n){let e={},t={},i={},a="";try{const l=n.split(".");e=vu(Gd(l[0])||""),t=vu(Gd(l[1])||""),a=l[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},pN=function(n){const e=RS(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},gN=function(n){const e=RS(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Cl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function kg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $d(n,e,t){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=e.call(t,n[a],a,n));return i}function pa(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(LE(l)&&LE(u)){if(!pa(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function LE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function tu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function nu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let _=0;_<16;_++)i[_]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let _=16;_<80;_++){const w=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(w<<1|w>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],u=this.chain_[2],f=this.chain_[3],p=this.chain_[4],g,v;for(let _=0;_<80;_++){_<40?_<20?(g=f^l&(u^f),v=1518500249):(g=l^u^f,v=1859775393):_<60?(g=l&u|f&(l|u),v=2400959708):(g=l^u^f,v=3395469782);const w=(a<<5|a>>>27)+g+p+v+i[_]&4294967295;p=f,f=u,u=(l<<30|l>>>2)&4294967295,l=a,a=w}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const l=this.buf_;let u=this.inbuf_;for(;a<t;){if(u===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[u]=e.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}else for(;a<t;)if(l[u]=e[a],++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[a]>>l&255,++i;return e}}function yN(n,e){const t=new vN(n,e);return t.subscribe.bind(t)}class vN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");bN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=rg),a.error===void 0&&(a.error=rg),a.complete===void 0&&(a.complete=rg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function rg(){}function EN(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const l=a-55296;i++,ue(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;a=65536+(l<<10)+u}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},If=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n){return n&&n._delegate?n._delegate:n}class fr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new R_;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AN(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:SN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SN(n){return n===oo?void 0:n}function AN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const CN={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},IN=Be.INFO,RN={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},NN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=RN[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rf{constructor(e){this.name=e,this._logLevel=IN,this._logHandler=NN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const kN=(n,e)=>e.some(t=>n instanceof t);let UE,jE;function DN(){return UE||(UE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ON(){return jE||(jE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NS=new WeakMap,Dg=new WeakMap,kS=new WeakMap,ag=new WeakMap,D_=new WeakMap;function MN(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(ca(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&NS.set(t,n)}).catch(()=>{}),D_.set(e,n),e}function PN(n){if(Dg.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Dg.set(n,e)}let Og={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Dg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ca(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function VN(n){Og=n(Og)}function LN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(og(this),e,...t);return kS.set(i,e.sort?e.sort():[e]),ca(i)}:ON().includes(n)?function(...e){return n.apply(og(this),e),ca(NS.get(this))}:function(...e){return ca(n.apply(og(this),e))}}function UN(n){return typeof n=="function"?LN(n):(n instanceof IDBTransaction&&PN(n),kN(n,DN())?new Proxy(n,Og):n)}function ca(n){if(n instanceof IDBRequest)return MN(n);if(ag.has(n))return ag.get(n);const e=UN(n);return e!==n&&(ag.set(n,e),D_.set(e,n)),e}const og=n=>D_.get(n);function jN(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),f=ca(u);return i&&u.addEventListener("upgradeneeded",p=>{i(ca(u.result),p.oldVersion,p.newVersion,ca(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const zN=["get","getKey","getAll","getAllKeys","count"],BN=["put","add","delete","clear"],lg=new Map;function zE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=BN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||zN.includes(t)))return;const l=async function(u,...f){const p=this.transaction(u,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&p.done]))[0]};return lg.set(e,l),l}VN(n=>({...n,get:(e,t,i)=>zE(e,t)||n.get(e,t,i),has:(e,t)=>!!zE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function qN(n){return n.getComponent()?.type==="VERSION"}const Mg="@firebase/app",BE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Rf("@firebase/app"),HN="@firebase/app-compat",GN="@firebase/analytics-compat",$N="@firebase/analytics",KN="@firebase/app-check-compat",YN="@firebase/app-check",QN="@firebase/auth",WN="@firebase/auth-compat",XN="@firebase/database",JN="@firebase/data-connect",ZN="@firebase/database-compat",e2="@firebase/functions",t2="@firebase/functions-compat",n2="@firebase/installations",s2="@firebase/installations-compat",i2="@firebase/messaging",r2="@firebase/messaging-compat",a2="@firebase/performance",o2="@firebase/performance-compat",l2="@firebase/remote-config",c2="@firebase/remote-config-compat",u2="@firebase/storage",h2="@firebase/storage-compat",d2="@firebase/firestore",f2="@firebase/ai",m2="@firebase/firestore-compat",p2="firebase",g2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="[DEFAULT]",_2={[Mg]:"fire-core",[HN]:"fire-core-compat",[$N]:"fire-analytics",[GN]:"fire-analytics-compat",[YN]:"fire-app-check",[KN]:"fire-app-check-compat",[QN]:"fire-auth",[WN]:"fire-auth-compat",[XN]:"fire-rtdb",[JN]:"fire-data-connect",[ZN]:"fire-rtdb-compat",[e2]:"fire-fn",[t2]:"fire-fn-compat",[n2]:"fire-iid",[s2]:"fire-iid-compat",[i2]:"fire-fcm",[r2]:"fire-fcm-compat",[a2]:"fire-perf",[o2]:"fire-perf-compat",[l2]:"fire-rc",[c2]:"fire-rc-compat",[u2]:"fire-gcs",[h2]:"fire-gcs-compat",[d2]:"fire-fst",[m2]:"fire-fst-compat",[f2]:"fire-vertex","fire-js":"fire-js",[p2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=new Map,y2=new Map,Vg=new Map;function FE(n,e){try{n.container.addComponent(e)}catch(t){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ga(n){const e=n.name;if(Vg.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;Vg.set(e,n);for(const t of Kd.values())FE(t,n);for(const t of y2.values())FE(t,n);return!0}function Ou(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ua=new Du("app","Firebase",v2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ua.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=g2;function DS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Pg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ua.create("bad-app-name",{appName:String(a)});if(t||(t=xS()),!t)throw ua.create("no-options");const l=Kd.get(a);if(l){if(pa(t,l.options)&&pa(i,l.config))return l;throw ua.create("duplicate-app",{appName:a})}const u=new xN(a);for(const p of Vg.values())u.addComponent(p);const f=new b2(t,i,u);return Kd.set(a,f),f}function Nf(n=Pg){const e=Kd.get(n);if(!e&&n===Pg&&xS())return DS();if(!e)throw ua.create("no-app",{appName:n});return e}function Is(n,e,t){let i=_2[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(u.join(" "));return}ga(new fr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="firebase-heartbeat-database",T2=1,bu="firebase-heartbeat-store";let cg=null;function OS(){return cg||(cg=jN(E2,T2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ua.create("idb-open",{originalErrorMessage:n.message})})),cg}async function w2(n){try{const t=(await OS()).transaction(bu),i=await t.objectStore(bu).get(MS(n));return await t.done,i}catch(e){if(e instanceof Pi)mr.warn(e.message);else{const t=ua.create("idb-get",{originalErrorMessage:e?.message});mr.warn(t.message)}}}async function qE(n,e){try{const i=(await OS()).transaction(bu,"readwrite");await i.objectStore(bu).put(e,MS(n)),await i.done}catch(t){if(t instanceof Pi)mr.warn(t.message);else{const i=ua.create("idb-set",{originalErrorMessage:t?.message});mr.warn(i.message)}}}function MS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=1024,A2=30;class x2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new I2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=HE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>A2){const a=R2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=HE(),{heartbeatsToSend:t,unsentEntries:i}=C2(this._heartbeatsCache.heartbeats),a=Hd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return mr.warn(e),""}}}function HE(){return new Date().toISOString().substring(0,10)}function C2(n,e=S2){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),GE(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),GE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class I2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uN()?hN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await w2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return qE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return qE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function GE(n){return Hd(JSON.stringify({version:2,heartbeats:n})).length}function R2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(n){ga(new fr("platform-logger",e=>new FN(e),"PRIVATE")),ga(new fr("heartbeat",e=>new x2(e),"PRIVATE")),Is(Mg,BE,n),Is(Mg,BE,"esm2020"),Is("fire-js","")}N2("");var k2="firebase",D2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Is(k2,D2,"app");function PS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O2=PS,VS=new Du("auth","Firebase",PS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new Rf("@firebase/auth");function M2(n,...e){Yd.logLevel<=Be.WARN&&Yd.warn(`Auth (${Sa}): ${n}`,...e)}function Nd(n,...e){Yd.logLevel<=Be.ERROR&&Yd.error(`Auth (${Sa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(n,...e){throw M_(n,...e)}function Ws(n,...e){return M_(n,...e)}function O_(n,e,t){const i={...O2(),[e]:t};return new Du("auth","Firebase",i).create(e,{appName:n.name})}function ur(n){return O_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function P2(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Rs(n,"argument-error"),O_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function M_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return VS.create(n,...e)}function xe(n,e,...t){if(!n)throw M_(e,...t)}function or(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Nd(e),new Error(e)}function pr(n,e){n||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(){return typeof self<"u"&&self.location?.href||""}function V2(){return $E()==="http:"||$E()==="https:"}function $E(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V2()||aN()||"connection"in navigator)?navigator.onLine:!0}function U2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,pr(t>e,"Short delay should be less than long delay!"),this.isMobile=k_()||IS()}get(){return L2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(n,e){pr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B2=new Mu(3e4,6e4);function Aa(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function xa(n,e,t,i,a={}){return US(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=Ll({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return rN()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&br(n.emulatorConfig.host)&&(g.credentials="include"),LS.fetch()(await jS(n,n.config.apiHost,t,f),g)})}async function US(n,e,t){n._canInitEmulator=!1;const i={...j2,...e};try{const a=new q2(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw yd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[p,g]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw yd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw yd(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw O_(n,v,g);Rs(n,v)}}catch(a){if(a instanceof Pi)throw a;Rs(n,"network-request-failed",{message:String(a)})}}async function Pu(n,e,t,i,a={}){const l=await xa(n,e,t,i,a);return"mfaPendingCredential"in l&&Rs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function jS(n,e,t,i){const a=`${e}${t}?${i}`,l=n,u=l.config.emulator?P_(n.config,a):`${n.config.apiScheme}://${a}`;return z2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function F2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class q2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ws(this.auth,"network-request-failed")),B2.get())})}}function yd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ws(n,e,i);return a.customData._tokenResponse=t,a}function KE(n){return n!==void 0&&n.enterprise!==void 0}class H2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return F2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function G2(n,e){return xa(n,"GET","/v2/recaptchaConfig",Aa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(n,e){return xa(n,"POST","/v1/accounts:delete",e)}async function Qd(n,e){return xa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K2(n,e=!1){const t=Lt(n),i=await t.getIdToken(e),a=V_(i);xe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:i,authTime:lu(ug(a.auth_time)),issuedAtTime:lu(ug(a.iat)),expirationTime:lu(ug(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function ug(n){return Number(n)*1e3}function V_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Gd(t);return a?JSON.parse(a):(Nd("Failed to decode base64 JWT payload"),null)}catch(a){return Nd("Caught error parsing JWT payload as JSON",a?.toString()),null}}function YE(n){const e=V_(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Pi&&Y2(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Y2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lu(this.lastLoginAt),this.creationTime=lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(n){const e=n.auth,t=await n.getIdToken(),i=await Eu(n,Qd(e,{idToken:t}));xe(i?.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?zS(a.providerUserInfo):[],u=X2(n.providerData,l),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!u?.length,g=f?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Ug(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function W2(n){const e=Lt(n);await Wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X2(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function zS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(n,e){const t=await US(n,{},async()=>{const i=Ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await jS(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return n.emulatorConfig&&br(n.emulatorConfig.host)&&(p.credentials="include"),LS.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Z2(n,e){return xa(n,"POST","/v2/accounts:revokeToken",Aa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=YE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await J2(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new bl;return i&&(xe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(xe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(xe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ks{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new Q2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ug(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Eu(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return K2(this,e)}reload(){return W2(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ks({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Wd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(ur(this.auth));const e=await this.getIdToken();return await Eu(this,$2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:w,isAnonymous:I,providerData:V,stsTokenManager:G}=t;xe(_&&G,e,"internal-error");const H=bl.fromJSON(this.name,G);xe(typeof _=="string",e,"internal-error"),na(i,e.name),na(a,e.name),xe(typeof w=="boolean",e,"internal-error"),xe(typeof I=="boolean",e,"internal-error"),na(l,e.name),na(u,e.name),na(f,e.name),na(p,e.name),na(g,e.name),na(v,e.name);const Y=new Ks({uid:_,auth:e,email:a,emailVerified:w,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:H,createdAt:g,lastLoginAt:v});return V&&Array.isArray(V)&&(Y.providerData=V.map(ce=>({...ce}))),p&&(Y._redirectEventId=p),Y}static async _fromIdTokenResponse(e,t,i=!1){const a=new bl;a.updateFromServerResponse(t);const l=new Ks({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Wd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];xe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?zS(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,f=new bl;f.updateFromIdToken(i);const p=new Ks({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ug(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=new Map;function lr(n){pr(n instanceof Function,"Expected a class definition");let e=QE.get(n);return e?(pr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,QE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}BS.type="NONE";const WE=BS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(n,e,t){return`firebase:${n}:${e}:${t}`}class El{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=kd(this.userKey,a.apiKey,l),this.fullPersistenceKey=kd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qd(this.auth,{idToken:e}).catch(()=>{});return t?Ks._fromGetAccountInfoResponse(this.auth,t,e):null}return Ks._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new El(lr(WE),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||lr(WE);const u=kd(i,e.config.apiKey,e.name);let f=null;for(const g of t)try{const v=await g._get(u);if(v){let _;if(typeof v=="string"){const w=await Qd(e,{idToken:v}).catch(()=>{});if(!w)break;_=await Ks._fromGetAccountInfoResponse(e,w,v)}else _=Ks._fromJSON(e,v);g!==l&&(f=_),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new El(l,e,i):(l=p[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new El(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KS(e))return"Blackberry";if(YS(e))return"Webos";if(qS(e))return"Safari";if((e.includes("chrome/")||HS(e))&&!e.includes("edge/"))return"Chrome";if($S(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function FS(n=On()){return/firefox\//i.test(n)}function qS(n=On()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HS(n=On()){return/crios\//i.test(n)}function GS(n=On()){return/iemobile/i.test(n)}function $S(n=On()){return/android/i.test(n)}function KS(n=On()){return/blackberry/i.test(n)}function YS(n=On()){return/webos/i.test(n)}function L_(n=On()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ek(n=On()){return L_(n)&&!!window.navigator?.standalone}function tk(){return oN()&&document.documentMode===10}function QS(n=On()){return L_(n)||$S(n)||YS(n)||KS(n)||/windows phone/i.test(n)||GS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n,e=[]){let t;switch(n){case"Browser":t=XE(On());break;case"Worker":t=`${XE(On())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const p=e(l);u(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(n,e={}){return xa(n,"GET","/v2/passwordPolicy",Aa(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=6;class rk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ik,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JE(this),this.idTokenSubscription=new JE(this),this.beforeStateQueue=new nk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await El.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qd(this,{idToken:e}),i=await Ks._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===u)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=U2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(ur(this));const t=e?Lt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sk(this),t=new rk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Du("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Z2(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&lr(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&M2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ca(n){return Lt(n)}class JE{constructor(e){this.auth=e,this.observer=null,this.addObserver=yN(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ok(n){kf=n}function XS(n){return kf.loadJS(n)}function lk(){return kf.recaptchaEnterpriseScript}function ck(){return kf.gapiScript}function uk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class hk{constructor(){this.enterprise=new dk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class dk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const fk="recaptcha-enterprise",JS="NO_RECAPTCHA";class mk{constructor(e){this.type=fk,this.auth=Ca(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{G2(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new H2(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,u(g.siteKey)}}).catch(p=>{f(p)})})}function a(l,u,f){const p=window.grecaptcha;KE(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{u(g)}).catch(()=>{u(JS)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hk().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(f=>{if(!t&&KE(window.grecaptcha))a(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=lk();p.length!==0&&(p+=f),XS(p).then(()=>{a(f,l,u)}).catch(g=>{u(g)})}}).catch(f=>{u(f)})})}}async function ZE(n,e,t,i=!1,a=!1){const l=new mk(n);let u;if(a)u=JS;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function jg(n,e,t,i,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ZE(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await ZE(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(n,e){const t=Ou(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(pa(l,e??{}))return a;Rs(a,"already-initialized")}return t.initialize({options:e})}function gk(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function _k(n,e,t){const i=Ca(n);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=ZS(e),{host:u,port:f}=yk(e),p=f===null?"":`:${f}`,g={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(pa(g,i.config.emulator)&&pa(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,br(u)?(xf(`${l}//${u}${p}`),Cf("Auth",!0)):vk()}function ZS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yk(n){const e=ZS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:eT(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:eT(u)}}}function eT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function vk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,t){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}async function bk(n,e){return xa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(n,e){return Pu(n,"POST","/v1/accounts:signInWithPassword",Aa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(n,e){return Pu(n,"POST","/v1/accounts:signInWithEmailLink",Aa(n,e))}async function wk(n,e){return Pu(n,"POST","/v1/accounts:signInWithEmailLink",Aa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends U_{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Tu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Tu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jg(e,t,"signInWithPassword",Ek);case"emailLink":return Tk(e,{email:this._email,oobCode:this._password});default:Rs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jg(e,i,"signUpPassword",bk);case"emailLink":return wk(e,{idToken:t,email:this._email,oobCode:this._password});default:Rs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(n,e){return Pu(n,"POST","/v1/accounts:signInWithIdp",Aa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="http://localhost";class mo extends U_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const u=new mo(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Tl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Tl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tl(e,t)}buildRequest(){const e={requestUri:Sk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ll(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xk(n){const e=tu(nu(n)).link,t=e?tu(nu(e)).deep_link_id:null,i=tu(nu(n)).deep_link_id;return(i?tu(nu(i)).link:null)||i||t||e||n}class j_{constructor(e){const t=tu(nu(e)),i=t.apiKey??null,a=t.oobCode??null,l=Ak(t.mode??null);xe(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=xk(e);try{return new j_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.providerId=Ul.PROVIDER_ID}static credential(e,t){return Tu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=j_.parseLink(t);return xe(i,"argument-error"),Tu._fromEmailAndCode(e,i.code,i.tenantId)}}Ul.PROVIDER_ID="password";Ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends z_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Vu{constructor(){super("facebook.com")}static credential(e){return mo._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ra.credential(e.oauthAccessToken)}catch{return null}}}ra.FACEBOOK_SIGN_IN_METHOD="facebook.com";ra.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mo._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ar.credential(t,i)}catch{return null}}}ar.GOOGLE_SIGN_IN_METHOD="google.com";ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends Vu{constructor(){super("github.com")}static credential(e){return mo._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return aa.credential(e.oauthAccessToken)}catch{return null}}}aa.GITHUB_SIGN_IN_METHOD="github.com";aa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends Vu{constructor(){super("twitter.com")}static credential(e,t){return mo._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return oa.credential(t,i)}catch{return null}}}oa.TWITTER_SIGN_IN_METHOD="twitter.com";oa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(n,e){return Pu(n,"POST","/v1/accounts:signUp",Aa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Ks._fromIdTokenResponse(e,i,a),u=tT(i);return new po({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=tT(i);return new po({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function tT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd extends Pi{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Xd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Xd(e,t,i,a)}}function eA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Xd._fromErrorAndOperation(n,l,e,i):l})}async function Ik(n,e,t=!1){const i=await Eu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return po._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(n,e,t=!1){const{auth:i}=n;if(jn(i.app))return Promise.reject(ur(i));const a="reauthenticate";try{const l=await Eu(n,eA(i,a,e,n),t);xe(l.idToken,i,"internal-error");const u=V_(l.idToken);xe(u,i,"internal-error");const{sub:f}=u;return xe(n.uid===f,i,"user-mismatch"),po._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Rs(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(n,e,t=!1){if(jn(n.app))return Promise.reject(ur(n));const i="signIn",a=await eA(n,i,e),l=await po._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function Nk(n,e){return tA(Ca(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(n){const e=Ca(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kk(n,e,t){if(jn(n.app))return Promise.reject(ur(n));const i=Ca(n),u=await jg(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ck).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&nA(n),p}),f=await po._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function Dk(n,e,t){return jn(n.app)?Promise.reject(ur(n)):Nk(Lt(n),Ul.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&nA(n),i})}function Ok(n,e,t,i){return Lt(n).onIdTokenChanged(e,t,i)}function Mk(n,e,t){return Lt(n).beforeAuthStateChanged(e,t)}function Pk(n,e,t,i){return Lt(n).onAuthStateChanged(e,t,i)}function Vk(n){return Lt(n).signOut()}const Jd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jd,"1"),this.storage.removeItem(Jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=1e3,Uk=10;class iA extends sA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);tk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Uk):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Lk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iA.type="LOCAL";const jk=iA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA extends sA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rA.type="SESSION";const aA=rA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Df(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(u).map(async g=>g(t.origin,l)),p=await zk(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,p)=>{const g=B_("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(_){const w=_;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(w.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function Fk(n){Ci().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function qk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Hk(){return navigator?.serviceWorker?.controller||null}function Gk(){return oA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="firebaseLocalStorageDb",$k=1,Zd="firebaseLocalStorage",cA="fbase_key";class Lu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Of(n,e){return n.transaction([Zd],e?"readwrite":"readonly").objectStore(Zd)}function Kk(){const n=indexedDB.deleteDatabase(lA);return new Lu(n).toPromise()}function zg(){const n=indexedDB.open(lA,$k);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Zd,{keyPath:cA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Zd)?e(i):(i.close(),await Kk(),e(await zg()))})})}async function nT(n,e,t){const i=Of(n,!0).put({[cA]:e,value:t});return new Lu(i).toPromise()}async function Yk(n,e){const t=Of(n,!1).get(e),i=await new Lu(t).toPromise();return i===void 0?null:i.value}function sT(n,e){const t=Of(n,!0).delete(e);return new Lu(t).toPromise()}const Qk=800,Wk=3;class uA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Wk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(Gk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await qk(),!this.activeServiceWorker)return;this.sender=new Bk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Hk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zg();return await nT(e,Jd,"1"),await sT(e,Jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>nT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Yk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Of(a,!1).getAll();return new Lu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Qk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uA.type="LOCAL";const Xk=uA;new Mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(n,e){return e?lr(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_ extends U_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jk(n){return tA(n.auth,new F_(n),n.bypassAuthState)}function Zk(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),Rk(t,new F_(n),n.bypassAuthState)}async function eD(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),Ik(t,new F_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jk;case"linkViaPopup":case"linkViaRedirect":return eD;case"reauthViaPopup":case"reauthViaRedirect":return Zk;default:Rs(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new Mu(2e3,1e4);async function nD(n,e,t){if(jn(n.app))return Promise.reject(Ws(n,"operation-not-supported-in-this-environment"));const i=Ca(n);P2(n,e,z_);const a=hA(i,t);return new co(i,"signInViaPopup",e,a).executeNotNull()}class co extends dA{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=B_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tD.get())};e()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="pendingRedirect",Dd=new Map;class iD extends dA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Dd.get(this.auth._key());if(!e){try{const i=await rD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Dd.set(this.auth._key(),e)}return this.bypassAuthState||Dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rD(n,e){const t=lD(e),i=oD(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function aD(n,e){Dd.set(n._key(),e)}function oD(n){return lr(n._redirectPersistence)}function lD(n){return kd(sD,n.config.apiKey,n.name)}async function cD(n,e,t=!1){if(jn(n.app))return Promise.reject(ur(n));const i=Ca(n),a=hA(i,e),u=await new iD(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=600*1e3;class hD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!fA(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ws(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uD&&this.cachedEventUids.clear(),this.cachedEventUids.has(iT(e))}saveEventToCache(e){this.cachedEventUids.add(iT(e)),this.lastProcessedEventTime=Date.now()}}function iT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function fA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function dD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(n,e={}){return xa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pD=/^https?/;async function gD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await fD(n);for(const t of e)try{if(_D(t))return}catch{}Rs(n,"unauthorized-domain")}function _D(n){const e=Lg(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!pD.test(t))return!1;if(mD.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new Mu(3e4,6e4);function rT(){const n=Ci().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vD(n){return new Promise((e,t)=>{function i(){rT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rT(),t(Ws(n,"network-request-failed"))},timeout:yD.get()})}if(Ci().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ci().gapi?.load)i();else{const a=uk("iframefcb");return Ci()[a]=()=>{gapi.load?i():t(Ws(n,"network-request-failed"))},XS(`${ck()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Od=null,e})}let Od=null;function bD(n){return Od=Od||vD(n),Od}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new Mu(5e3,15e3),TD="__/auth/iframe",wD="emulator/auth/iframe",SD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xD(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?P_(e,wD):`https://${n.config.authDomain}/${TD}`,i={apiKey:e.apiKey,appName:n.name,v:Sa},a=AD.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Ll(i).slice(1)}`}async function CD(n){const e=await bD(n),t=Ci().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:xD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SD,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Ws(n,"network-request-failed"),f=Ci().setTimeout(()=>{l(u)},ED.get());function p(){Ci().clearTimeout(f),a(i)}i.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RD=500,ND=600,kD="_blank",DD="http://localhost";class aT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OD(n,e,t,i=RD,a=ND){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...ID,width:i.toString(),height:a.toString(),top:l,left:u},g=On().toLowerCase();t&&(f=HS(g)?kD:t),FS(g)&&(e=e||DD,p.scrollbars="yes");const v=Object.entries(p).reduce((w,[I,V])=>`${w}${I}=${V},`,"");if(ek(g)&&f!=="_self")return MD(e||"",f),new aT(null);const _=window.open(e||"",f,v);xe(_,n,"popup-blocked");try{_.focus()}catch{}return new aT(_)}function MD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="__/auth/handler",VD="emulator/auth/handler",LD=encodeURIComponent("fac");async function oT(n,e,t,i,a,l){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Sa,eventId:a};if(e instanceof z_){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",kg(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))u[v]=_}if(e instanceof Vu){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),g=p?`#${LD}=${encodeURIComponent(p)}`:"";return`${UD(n)}?${Ll(f).slice(1)}${g}`}function UD({config:n}){return n.emulator?P_(n,VD):`https://${n.authDomain}/${PD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="webStorageSupport";class jD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aA,this._completeRedirectFn=cD,this._overrideRedirectResult=aD}async _openPopup(e,t,i,a){pr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await oT(e,t,i,Lg(),a);return OD(e,l,B_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await oT(e,t,i,Lg(),a);return Fk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(pr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await CD(e),i=new hD(e);return t.register("authEvent",a=>(xe(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hg,{type:hg},a=>{const l=a?.[0]?.[hg];l!==void 0&&t(!!l),Rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return QS()||qS()||L_()}}const zD=jD;var lT="@firebase/auth",cT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qD(n){ga(new fr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;xe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WS(n)},g=new ak(i,a,l,p);return gk(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ga(new fr("auth-internal",e=>{const t=Ca(e.getProvider("auth").getImmediate());return(i=>new BD(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Is(lT,cT,FD(n)),Is(lT,cT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=300,GD=CS("authIdTokenMaxAge")||HD;let uT=null;const $D=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>GD)return;const a=t?.token;uT!==a&&(uT=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function KD(n=Nf()){const e=Ou(n,"auth");if(e.isInitialized())return e.getImmediate();const t=pk(n,{popupRedirectResolver:zD,persistence:[Xk,jk,aA]}),i=CS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=$D(l.toString());Mk(t,u,()=>u(t.currentUser)),Ok(t,f=>u(f))}}const a=AS("auth");return a&&_k(t,`http://${a}`),t}function YD(){return document.getElementsByTagName("head")?.[0]??document}ok({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Ws("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",YD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qD("Browser");var hT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ha,mA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function R(){}R.prototype=x.prototype,N.F=x.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(P,O,L){for(var C=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)C[Je-2]=arguments[Je];return x.prototype[O].apply(P,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,x,R){R||(R=0);const P=Array(16);if(typeof x=="string")for(var O=0;O<16;++O)P[O]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(O=0;O<16;++O)P[O]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=N.g[0],R=N.g[1],O=N.g[2];let L=N.g[3],C;C=x+(L^R&(O^L))+P[0]+3614090360&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(O^x&(R^O))+P[1]+3905402710&4294967295,L=x+(C<<12&4294967295|C>>>20),C=O+(R^L&(x^R))+P[2]+606105819&4294967295,O=L+(C<<17&4294967295|C>>>15),C=R+(x^O&(L^x))+P[3]+3250441966&4294967295,R=O+(C<<22&4294967295|C>>>10),C=x+(L^R&(O^L))+P[4]+4118548399&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(O^x&(R^O))+P[5]+1200080426&4294967295,L=x+(C<<12&4294967295|C>>>20),C=O+(R^L&(x^R))+P[6]+2821735955&4294967295,O=L+(C<<17&4294967295|C>>>15),C=R+(x^O&(L^x))+P[7]+4249261313&4294967295,R=O+(C<<22&4294967295|C>>>10),C=x+(L^R&(O^L))+P[8]+1770035416&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(O^x&(R^O))+P[9]+2336552879&4294967295,L=x+(C<<12&4294967295|C>>>20),C=O+(R^L&(x^R))+P[10]+4294925233&4294967295,O=L+(C<<17&4294967295|C>>>15),C=R+(x^O&(L^x))+P[11]+2304563134&4294967295,R=O+(C<<22&4294967295|C>>>10),C=x+(L^R&(O^L))+P[12]+1804603682&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(O^x&(R^O))+P[13]+4254626195&4294967295,L=x+(C<<12&4294967295|C>>>20),C=O+(R^L&(x^R))+P[14]+2792965006&4294967295,O=L+(C<<17&4294967295|C>>>15),C=R+(x^O&(L^x))+P[15]+1236535329&4294967295,R=O+(C<<22&4294967295|C>>>10),C=x+(O^L&(R^O))+P[1]+4129170786&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^O&(x^R))+P[6]+3225465664&4294967295,L=x+(C<<9&4294967295|C>>>23),C=O+(x^R&(L^x))+P[11]+643717713&4294967295,O=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(O^L))+P[0]+3921069994&4294967295,R=O+(C<<20&4294967295|C>>>12),C=x+(O^L&(R^O))+P[5]+3593408605&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^O&(x^R))+P[10]+38016083&4294967295,L=x+(C<<9&4294967295|C>>>23),C=O+(x^R&(L^x))+P[15]+3634488961&4294967295,O=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(O^L))+P[4]+3889429448&4294967295,R=O+(C<<20&4294967295|C>>>12),C=x+(O^L&(R^O))+P[9]+568446438&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^O&(x^R))+P[14]+3275163606&4294967295,L=x+(C<<9&4294967295|C>>>23),C=O+(x^R&(L^x))+P[3]+4107603335&4294967295,O=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(O^L))+P[8]+1163531501&4294967295,R=O+(C<<20&4294967295|C>>>12),C=x+(O^L&(R^O))+P[13]+2850285829&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^O&(x^R))+P[2]+4243563512&4294967295,L=x+(C<<9&4294967295|C>>>23),C=O+(x^R&(L^x))+P[7]+1735328473&4294967295,O=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(O^L))+P[12]+2368359562&4294967295,R=O+(C<<20&4294967295|C>>>12),C=x+(R^O^L)+P[5]+4294588738&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^O)+P[8]+2272392833&4294967295,L=x+(C<<11&4294967295|C>>>21),C=O+(L^x^R)+P[11]+1839030562&4294967295,O=L+(C<<16&4294967295|C>>>16),C=R+(O^L^x)+P[14]+4259657740&4294967295,R=O+(C<<23&4294967295|C>>>9),C=x+(R^O^L)+P[1]+2763975236&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^O)+P[4]+1272893353&4294967295,L=x+(C<<11&4294967295|C>>>21),C=O+(L^x^R)+P[7]+4139469664&4294967295,O=L+(C<<16&4294967295|C>>>16),C=R+(O^L^x)+P[10]+3200236656&4294967295,R=O+(C<<23&4294967295|C>>>9),C=x+(R^O^L)+P[13]+681279174&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^O)+P[0]+3936430074&4294967295,L=x+(C<<11&4294967295|C>>>21),C=O+(L^x^R)+P[3]+3572445317&4294967295,O=L+(C<<16&4294967295|C>>>16),C=R+(O^L^x)+P[6]+76029189&4294967295,R=O+(C<<23&4294967295|C>>>9),C=x+(R^O^L)+P[9]+3654602809&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^O)+P[12]+3873151461&4294967295,L=x+(C<<11&4294967295|C>>>21),C=O+(L^x^R)+P[15]+530742520&4294967295,O=L+(C<<16&4294967295|C>>>16),C=R+(O^L^x)+P[2]+3299628645&4294967295,R=O+(C<<23&4294967295|C>>>9),C=x+(O^(R|~L))+P[0]+4096336452&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~O))+P[7]+1126891415&4294967295,L=x+(C<<10&4294967295|C>>>22),C=O+(x^(L|~R))+P[14]+2878612391&4294967295,O=L+(C<<15&4294967295|C>>>17),C=R+(L^(O|~x))+P[5]+4237533241&4294967295,R=O+(C<<21&4294967295|C>>>11),C=x+(O^(R|~L))+P[12]+1700485571&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~O))+P[3]+2399980690&4294967295,L=x+(C<<10&4294967295|C>>>22),C=O+(x^(L|~R))+P[10]+4293915773&4294967295,O=L+(C<<15&4294967295|C>>>17),C=R+(L^(O|~x))+P[1]+2240044497&4294967295,R=O+(C<<21&4294967295|C>>>11),C=x+(O^(R|~L))+P[8]+1873313359&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~O))+P[15]+4264355552&4294967295,L=x+(C<<10&4294967295|C>>>22),C=O+(x^(L|~R))+P[6]+2734768916&4294967295,O=L+(C<<15&4294967295|C>>>17),C=R+(L^(O|~x))+P[13]+1309151649&4294967295,R=O+(C<<21&4294967295|C>>>11),C=x+(O^(R|~L))+P[4]+4149444226&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~O))+P[11]+3174756917&4294967295,L=x+(C<<10&4294967295|C>>>22),C=O+(x^(L|~R))+P[2]+718787259&4294967295,O=L+(C<<15&4294967295|C>>>17),C=R+(L^(O|~x))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+L&4294967295}i.prototype.v=function(N,x){x===void 0&&(x=N.length);const R=x-this.blockSize,P=this.C;let O=this.h,L=0;for(;L<x;){if(O==0)for(;L<=R;)a(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<x;)if(P[O++]=N.charCodeAt(L++),O==this.blockSize){a(this,P),O=0;break}}else for(;L<x;)if(P[O++]=N[L++],O==this.blockSize){a(this,P),O=0;break}}this.h=O,this.o+=x},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;x=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=x&255,x/=256;for(this.v(N),N=Array(16),x=0,R=0;R<4;++R)for(let P=0;P<32;P+=8)N[x++]=this.g[R]>>>P&255;return N};function l(N,x){var R=f;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=x(N)}function u(N,x){this.h=x;const R=[];let P=!0;for(let O=N.length-1;O>=0;O--){const L=N[O]|0;P&&L==x||(R[O]=L,P=!1)}this.g=R}var f={};function p(N){return-128<=N&&N<128?l(N,function(x){return new u([x|0],x<0?-1:0)}):new u([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return _;if(N<0)return H(g(-N));const x=[];let R=1;for(let P=0;N>=R;P++)x[P]=N/R|0,R*=4294967296;return new u(x,0)}function v(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return H(v(N.substring(1),x));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(x,8));let P=_;for(let L=0;L<N.length;L+=8){var O=Math.min(8,N.length-L);const C=parseInt(N.substring(L,L+O),x);O<8?(O=g(Math.pow(x,O)),P=P.j(O).add(g(C))):(P=P.j(R),P=P.add(g(C)))}return P}var _=p(0),w=p(1),I=p(16777216);n=u.prototype,n.m=function(){if(G(this))return-H(this).m();let N=0,x=1;for(let R=0;R<this.g.length;R++){const P=this.i(R);N+=(P>=0?P:4294967296+P)*x,x*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(V(this))return"0";if(G(this))return"-"+H(this).toString(N);const x=g(Math.pow(N,6));var R=this;let P="";for(;;){const O=me(R,x).g;R=Y(R,O.j(x));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=O,V(R))return L+P;for(;L.length<6;)L="0"+L;P=L+P}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function V(N){if(N.h!=0)return!1;for(let x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function G(N){return N.h==-1}n.l=function(N){return N=Y(this,N),G(N)?-1:V(N)?0:1};function H(N){const x=N.g.length,R=[];for(let P=0;P<x;P++)R[P]=~N.g[P];return new u(R,~N.h).add(w)}n.abs=function(){return G(this)?H(this):this},n.add=function(N){const x=Math.max(this.g.length,N.g.length),R=[];let P=0;for(let O=0;O<=x;O++){let L=P+(this.i(O)&65535)+(N.i(O)&65535),C=(L>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);P=C>>>16,L&=65535,C&=65535,R[O]=C<<16|L}return new u(R,R[R.length-1]&-2147483648?-1:0)};function Y(N,x){return N.add(H(x))}n.j=function(N){if(V(this)||V(N))return _;if(G(this))return G(N)?H(this).j(H(N)):H(H(this).j(N));if(G(N))return H(this.j(H(N)));if(this.l(I)<0&&N.l(I)<0)return g(this.m()*N.m());const x=this.g.length+N.g.length,R=[];for(var P=0;P<2*x;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<N.g.length;O++){const L=this.i(P)>>>16,C=this.i(P)&65535,Je=N.i(O)>>>16,Ze=N.i(O)&65535;R[2*P+2*O]+=C*Ze,ce(R,2*P+2*O),R[2*P+2*O+1]+=L*Ze,ce(R,2*P+2*O+1),R[2*P+2*O+1]+=C*Je,ce(R,2*P+2*O+1),R[2*P+2*O+2]+=L*Je,ce(R,2*P+2*O+2)}for(N=0;N<x;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=x;N<2*x;N++)R[N]=0;return new u(R,0)};function ce(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function re(N,x){this.g=N,this.h=x}function me(N,x){if(V(x))throw Error("division by zero");if(V(N))return new re(_,_);if(G(N))return x=me(H(N),x),new re(H(x.g),H(x.h));if(G(x))return x=me(N,H(x)),new re(H(x.g),x.h);if(N.g.length>30){if(G(N)||G(x))throw Error("slowDivide_ only works with positive integers.");for(var R=w,P=x;P.l(N)<=0;)R=Me(R),P=Me(P);var O=Ee(R,1),L=Ee(P,1);for(P=Ee(P,2),R=Ee(R,2);!V(P);){var C=L.add(P);C.l(N)<=0&&(O=O.add(R),L=C),P=Ee(P,1),R=Ee(R,1)}return x=Y(N,O.j(x)),new re(O,x)}for(O=_;N.l(x)>=0;){for(R=Math.max(1,Math.floor(N.m()/x.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),L=g(R),C=L.j(x);G(C)||C.l(N)>0;)R-=P,L=g(R),C=L.j(x);V(L)&&(L=w),O=O.add(L),N=Y(N,C)}return new re(O,N)}n.B=function(N){return me(this,N).h},n.and=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let P=0;P<x;P++)R[P]=this.i(P)&N.i(P);return new u(R,this.h&N.h)},n.or=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let P=0;P<x;P++)R[P]=this.i(P)|N.i(P);return new u(R,this.h|N.h)},n.xor=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let P=0;P<x;P++)R[P]=this.i(P)^N.i(P);return new u(R,this.h^N.h)};function Me(N){const x=N.g.length+1,R=[];for(let P=0;P<x;P++)R[P]=N.i(P)<<1|N.i(P-1)>>>31;return new u(R,N.h)}function Ee(N,x){const R=x>>5;x%=32;const P=N.g.length-R,O=[];for(let L=0;L<P;L++)O[L]=x>0?N.i(L+R)>>>x|N.i(L+R+1)<<32-x:N.i(L+R);return new u(O,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,mA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=v,ha=u}).apply(typeof hT<"u"?hT:typeof self<"u"?self:typeof window<"u"?window:{});var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pA,su,gA,Md,Bg,_A,yA,vA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof vd=="object"&&vd];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var j=h[A];if(!(j in E))break e;E=E[j]}h=h[h.length-1],A=E[h],y=y(A),y!=A&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&E.push([A,y[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=p,g.apply(null,arguments)}function v(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function _(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,j,$){for(var le=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)le[Pe-2]=arguments[Pe];return y.prototype[j].apply(A,le)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const y=h.length;if(y>0){const E=Array(y);for(let A=0;A<y;A++)E[A]=h[A];return E}return[]}function V(h,y){for(let A=1;A<arguments.length;A++){const j=arguments[A];var E=typeof j;if(E=E!="object"?E:j?Array.isArray(j)?"array":E:"null",E=="array"||E=="object"&&typeof j.length=="number"){E=h.length||0;const $=j.length||0;h.length=E+$;for(let le=0;le<$;le++)h[E+le]=j[le]}else h.push(j)}}class G{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function H(h){u.setTimeout(()=>{throw h},0)}function Y(){var h=N;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ce{constructor(){this.h=this.g=null}add(y,E){const A=re.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var re=new G(()=>new me,h=>h.reset());class me{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,Ee=!1,N=new ce,x=()=>{const h=Promise.resolve(void 0);Me=()=>{h.then(R)}};function R(){for(var h;h=Y();){try{h.h.call(h.g)}catch(E){H(E)}var y=re;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Ee=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};u.addEventListener("test",E,y),u.removeEventListener("test",E,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function Je(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}_(Je,O),Je.prototype.init=function(h,y){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Je.Z.h.call(this)},Je.prototype.h=function(){Je.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ze="closure_listenable_"+(Math.random()*1e6|0),z=0;function ie(h,y,E,A,j){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=j,this.key=++z,this.da=this.fa=!1}function ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ne(h,y,E){for(const A in h)y.call(E,h[A],A,h)}function ke(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function D(h){const y={};for(const E in h)y[E]=h[E];return y}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(h,y){let E,A;for(let j=1;j<arguments.length;j++){A=arguments[j];for(E in A)h[E]=A[E];for(let $=0;$<X.length;$++)E=X[$],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function se(h){this.src=h,this.g={},this.h=0}se.prototype.add=function(h,y,E,A,j){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const le=be(h,y,A,j);return le>-1?(y=h[le],E||(y.fa=!1)):(y=new ie(y,this.src,$,!!A,j),y.fa=E,h.push(y)),y};function he(h,y){const E=y.type;if(E in h.g){var A=h.g[E],j=Array.prototype.indexOf.call(A,y,void 0),$;($=j>=0)&&Array.prototype.splice.call(A,j,1),$&&(ne(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function be(h,y,E,A){for(let j=0;j<h.length;++j){const $=h[j];if(!$.da&&$.listener==y&&$.capture==!!E&&$.ha==A)return j}return-1}var ve="closure_lm_"+(Math.random()*1e6|0),Ie={};function Fe(h,y,E,A,j){if(Array.isArray(y)){for(let $=0;$<y.length;$++)Fe(h,y[$],E,A,j);return null}return E=Sr(E),h&&h[Ze]?h.J(y,E,f(A)?!!A.capture:!1,j):hn(h,y,E,!1,A,j)}function hn(h,y,E,A,j,$){if(!y)throw Error("Invalid event type");const le=f(j)?!!j.capture:!!j;let Pe=ti(h);if(Pe||(h[ve]=Pe=new se(h)),E=Pe.add(y,E,A,le,$),E.proxy)return E;if(A=Mn(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)L||(j=le),j===void 0&&(j=!1),h.addEventListener(y.toString(),A,j);else if(h.attachEvent)h.attachEvent(zn(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Mn(){function h(E){return y.call(h.src,h.listener,E)}const y=Da;return h}function tn(h,y,E,A,j){if(Array.isArray(y))for(var $=0;$<y.length;$++)tn(h,y[$],E,A,j);else A=f(A)?!!A.capture:!!A,E=Sr(E),h&&h[Ze]?(h=h.i,$=String(y).toString(),$ in h.g&&(y=h.g[$],E=be(y,E,A,j),E>-1&&(ne(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[$],h.h--)))):h&&(h=ti(h))&&(y=h.g[y.toString()],h=-1,y&&(h=be(y,E,A,j)),(E=h>-1?y[h]:null)&&wr(E))}function wr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ze])he(y.i,h);else{var E=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(E,A,h.capture):y.detachEvent?y.detachEvent(zn(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=ti(y))?(he(E,h),E.h==0&&(E.src=null,y[ve]=null)):ne(h)}}}function zn(h){return h in Ie?Ie[h]:Ie[h]="on"+h}function Da(h,y){if(h.da)h=!0;else{y=new Je(y,this);const E=h.listener,A=h.ha||h.src;h.fa&&wr(h),h=E.call(A,y)}return h}function ti(h){return h=h[ve],h instanceof se?h:null}var ks="__closure_events_fn_"+(Math.random()*1e9>>>0);function Sr(h){return typeof h=="function"?h:(h[ks]||(h[ks]=function(y){return h.handleEvent(y)}),h[ks])}function it(){P.call(this),this.i=new se(this),this.M=this,this.G=null}_(it,P),it.prototype[Ze]=!0,it.prototype.removeEventListener=function(h,y,E,A){tn(this,h,y,E,A)};function kt(h,y){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var j=y;y=new O(A,h),Q(y,j)}j=!0;let $,le;if(E)for(le=E.length-1;le>=0;le--)$=y.g=E[le],j=ni($,A,!0,y)&&j;if($=y.g=h,j=ni($,A,!0,y)&&j,j=ni($,A,!1,y)&&j,E)for(le=0;le<E.length;le++)$=y.g=E[le],j=ni($,A,!1,y)&&j}it.prototype.N=function(){if(it.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let A=0;A<E.length;A++)ne(E[A]);delete h.g[y],h.h--}}this.G=null},it.prototype.J=function(h,y,E,A){return this.i.add(String(h),y,!1,E,A)},it.prototype.K=function(h,y,E,A){return this.i.add(String(h),y,!0,E,A)};function ni(h,y,E,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let j=!0;for(let $=0;$<y.length;++$){const le=y[$];if(le&&!le.da&&le.capture==E){const Pe=le.listener,Dt=le.ha||le.src;le.fa&&he(h.i,le),j=Pe.call(Dt,A)!==!1&&j}}return j&&!A.defaultPrevented}function dn(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:u.setTimeout(h,y||0)}function Ds(h){h.g=dn(()=>{h.g=null,h.i&&(h.i=!1,Ds(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class fn extends P{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ds(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(h){P.call(this),this.h=h,this.g={}}_(Li,P);var si=[];function Oa(h){Ne(h.g,function(y,E){this.g.hasOwnProperty(E)&&wr(y)},h),h.g={}}Li.prototype.N=function(){Li.Z.N.call(this),Oa(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Os=u.JSON.stringify,Ma=u.JSON.parse,Ms=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Pa(){}function Ps(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){O.call(this,"d")}_(Wt,O);function Pn(){O.call(this,"c")}_(Pn,O);var At={},Ao=null;function ii(){return Ao=Ao||new it}At.Ia="serverreachability";function Zn(h){O.call(this,At.Ia,h)}_(Zn,O);function ds(h){const y=ii();kt(y,new Zn(y))}At.STAT_EVENT="statevent";function Ui(h,y){O.call(this,At.STAT_EVENT,h),this.stat=y}_(Ui,O);function It(h){const y=ii();kt(y,new Ui(y,h))}At.Ja="timingevent";function es(h,y){O.call(this,At.Ja,h),this.size=y}_(es,O);function Se(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},y)}function rt(){this.g=!0}rt.prototype.ua=function(){this.g=!1};function Ut(h,y,E,A,j,$){h.info(function(){if(h.g)if($){var le="",Pe=$.split("&");for(let nt=0;nt<Pe.length;nt++){var Dt=Pe[nt].split("=");if(Dt.length>1){const xt=Dt[0];Dt=Dt[1];const _s=xt.split("_");le=_s.length>=2&&_s[1]=="type"?le+(xt+"="+Dt+"&"):le+(xt+"=redacted&")}}}else le=null;else le=$;return"XMLHTTP REQ ("+A+") [attempt "+j+"]: "+y+`
`+E+`
`+le})}function nn(h,y,E,A,j,$,le){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+j+"]: "+y+`
`+E+`
`+$+" "+le})}function Vn(h,y,E,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+An(h,E)+(A?" "+A:"")})}function vt(h,y){h.info(function(){return"TIMEOUT: "+y})}rt.prototype.info=function(){};function An(h,y){if(!h.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var E=$[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var j=A[0];if(j!="noop"&&j!="stop"&&j!="close")for(let le=1;le<A.length;le++)A[le]=""}}}}return Os($)}catch{return y}}var fs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pn;function ri(){}_(ri,Pa),ri.prototype.g=function(){return new XMLHttpRequest},pn=new ri;function gn(h){return encodeURIComponent(String(h))}function Ql(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function Vs(h,y,E,A){this.j=h,this.i=y,this.l=E,this.S=A||1,this.V=new Li(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ls}function Ls(){this.i=null,this.g="",this.h=!1}var jt={},sn={};function ai(h,y,E){h.M=1,h.A=Va(Bt(y)),h.u=E,h.R=!0,xo(h,null)}function xo(h,y){h.F=Date.now(),oi(h),h.B=Bt(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),No(E.i,"t",A),h.C=0,E=h.j.L,h.h=new Ls,h.g=hh(h.j,E?y:null,!h.u),h.P>0&&(h.O=new fn(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,A=h.ba;var j="readystatechange";Array.isArray(j)||(j&&(si[0]=j.toString()),j=si);for(let $=0;$<j.length;$++){const le=Fe(E,j[$],A||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=h.J?D(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ds(),Ut(h.i,h.v,h.B,h.l,h.S,h.u)}Vs.prototype.ba=function(h){h=h.target;const y=this.O;y&&zs(h)==3?y.j():this.Y(h)},Vs.prototype.Y=function(h){try{if(h==this.g)e:{const Pe=zs(this.g),Dt=this.g.ya(),nt=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||_n(this.g)))){this.K||Pe!=4||Dt==7||(Dt==8||nt<=0?ds(3):ds(2)),li(this);var y=this.g.ca();this.X=y;var E=sm(this);if(this.o=y==200,nn(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,j=this.g;if((A=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var $=A;break t}}$=null}if(h=$)Vn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ci(this,h);else{this.o=!1,this.m=3,It(12),ts(this),ms(this);break e}}if(this.R){h=!0;let xt;for(;!this.K&&this.C<E.length;)if(xt=Ju(this,E),xt==sn){Pe==4&&(this.m=4,It(14),h=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==jt){this.m=4,It(15),Vn(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Vn(this.i,this.l,xt,null),ci(this,xt);if(Xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||E.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)Vn(this.i,this.l,E,"[Invalid Chunked Response]"),ts(this),ms(this);else if(E.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),uc(le),le.P=!0,It(11))}}else Vn(this.i,this.l,E,null),ci(this,E);Pe==4&&ts(this),this.o&&!this.K&&(Pe==4?oh(this.j,this):(this.o=!1,oi(this)))}else zi(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),ts(this),ms(this)}}}catch{}finally{}};function sm(h){if(!Xu(h))return h.g.la();const y=_n(h.g);if(y==="")return"";let E="";const A=y.length,j=zs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ts(h),ms(h),"";h.h.i=new u.TextDecoder}for(let $=0;$<A;$++)h.h.h=!0,E+=h.h.i.decode(y[$],{stream:!(j&&$==A-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Xu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ju(h,y){var E=h.C,A=y.indexOf(`
`,E);return A==-1?sn:(E=Number(y.substring(E,A)),isNaN(E)?jt:(A+=1,A+E>y.length?sn:(y=y.slice(A,A+E),h.C=A+E,y)))}Vs.prototype.cancel=function(){this.K=!0,ts(this)};function oi(h){h.T=Date.now()+h.H,Co(h,h.H)}function Co(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Se(g(h.aa,h),y)}function li(h){h.D&&(u.clearTimeout(h.D),h.D=null)}Vs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(vt(this.i,this.B),this.M!=2&&(ds(),It(17)),ts(this),this.m=2,ms(this)):Co(this,this.T-h)};function ms(h){h.j.I==0||h.K||oh(h.j,h)}function ts(h){li(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Oa(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function ci(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||hi(E.h,h))){if(!h.L&&hi(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var j=A;if(j[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Po(E),Dr(E);else break e;qa(E),It(18)}}else E.xa=j[1],0<E.xa-E.K&&j[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Se(g(E.Va,E),6e3));ui(E.h)<=1&&E.ta&&(E.ta=void 0)}else _i(E,11)}else if((h.L||E.g==h)&&Po(E),!C(y))for(j=E.Ba.g.parse(y),y=0;y<j.length;y++){let nt=j[y];const xt=nt[0];if(!(xt<=E.K))if(E.K=xt,nt=nt[1],E.I==2)if(nt[0]=="c"){E.M=nt[1],E.ba=nt[2];const _s=nt[3];_s!=null&&(E.ka=_s,E.j.info("VER="+E.ka));const yi=nt[4];yi!=null&&(E.za=yi,E.j.info("SVER="+E.za));const Bs=nt[5];Bs!=null&&typeof Bs=="number"&&Bs>0&&(A=1.5*Bs,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const Fs=h.g;if(Fs){const Ha=Fs.g?Fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ha){var $=A.h;$.g||Ha.indexOf("spdy")==-1&&Ha.indexOf("quic")==-1&&Ha.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Jl($,$.h),$.h=null))}if(A.G){const Vo=Fs.g?Fs.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(A.wa=Vo,lt(A.J,A.G,Vo))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var le=h;if(A.na=uh(A,A.L?A.ba:null,A.W),le.L){Zl(A.h,le);var Pe=le,Dt=A.O;Dt&&(Pe.H=Dt),Pe.D&&(li(Pe),oi(Pe)),A.g=le}else rh(A);E.i.length>0&&gi(E)}else nt[0]!="stop"&&nt[0]!="close"||_i(E,7);else E.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?_i(E,7):lc(E):nt[0]!="noop"&&E.l&&E.l.qa(nt),E.A=0)}}ds(4)}catch{}}var zt=class{constructor(h,y){this.g=h,this.map=y}};function Wl(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ui(h){return h.h?1:h.g?h.g.size:0}function hi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Jl(h,y){h.g?h.g.add(y):h.h=y}function Zl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Wl.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ec(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return I(h.i)}var Zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Io(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let j,$=null;A>=0?(j=h[E].substring(0,A),$=h[E].substring(A+1)):j=h[E],y(j,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ns(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ns?(this.l=h.l,rn(this,h.j),this.o=h.o,this.g=h.g,Ar(this,h.u),this.h=h.h,tc(this,sh(h.i)),this.m=h.m):h&&(y=String(h).match(Zu))?(this.l=!1,rn(this,y[1]||"",!0),this.o=di(y[2]||""),this.g=di(y[3]||"",!0),Ar(this,y[4]),this.h=di(y[5]||"",!0),tc(this,y[6]||"",!0),this.m=di(y[7]||"")):(this.l=!1,this.i=new Cr(null,this.l))}ns.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(La(y,Ro,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(La(y,Ro,!0),"@"),h.push(gn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(La(E,E.charAt(0)=="/"?nc:eh,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",La(E,th)),h.join("")},ns.prototype.resolve=function(h){const y=Bt(this);let E=!!h.j;E?rn(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var A=h.h;if(E)Ar(y,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var j=y.h.lastIndexOf("/");j!=-1&&(A=y.h.slice(0,j+1)+A)}if(j=A,j==".."||j==".")A="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){A=j.lastIndexOf("/",0)==0,j=j.split("/");const $=[];for(let le=0;le<j.length;){const Pe=j[le++];Pe=="."?A&&le==j.length&&$.push(""):Pe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),A&&le==j.length&&$.push("")):($.push(Pe),A=!0)}A=$.join("/")}else A=j}return E?y.h=A:E=h.i.toString()!=="",E?tc(y,sh(h.i)):E=!!h.m,E&&(y.m=h.m),y};function Bt(h){return new ns(h)}function rn(h,y,E){h.j=E?di(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ar(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function tc(h,y,E){y instanceof Cr?(h.i=y,ko(h.i,h.l)):(E||(y=La(y,xr)),h.i=new Cr(y,h.l))}function lt(h,y,E){h.i.set(y,E)}function Va(h){return lt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function di(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function La(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,Bn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Bn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ro=/[#\/\?@]/g,eh=/[#\?:]/g,nc=/[#\?]/g,xr=/[#\?@]/g,th=/#/g;function Cr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Fn(h){h.g||(h.g=new Map,h.h=0,h.i&&Io(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=Cr.prototype,n.add=function(h,y){Fn(this),this.i=null,h=Ir(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function nh(h,y){Fn(h),y=Ir(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function sc(h,y){return Fn(h),y=Ir(h,y),h.g.has(y)}n.forEach=function(h,y){Fn(this),this.g.forEach(function(E,A){E.forEach(function(j){h.call(y,j,A,this)},this)},this)};function ic(h,y){Fn(h);let E=[];if(typeof y=="string")sc(h,y)&&(E=E.concat(h.g.get(Ir(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}n.set=function(h,y){return Fn(this),this.i=null,h=Ir(this,h),sc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=ic(this,h),h.length>0?String(h[0]):y):y};function No(h,y,E){nh(h,y),E.length>0&&(h.i=null,h.g.set(Ir(h,y),I(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var E=y[A];const j=gn(E);E=ic(this,E);for(let $=0;$<E.length;$++){let le=j;E[$]!==""&&(le+="="+gn(E[$])),h.push(le)}}return this.i=h.join("&")};function sh(h){const y=new Cr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ir(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ko(h,y){y&&!h.j&&(Fn(h),h.i=null,h.g.forEach(function(E,A){const j=A.toLowerCase();A!=j&&(nh(this,A),No(this,j,E))},h)),h.j=y}function Us(h,y){const E=new rt;if(u.Image){const A=new Image;A.onload=v(ps,E,"TestLoadImage: loaded",!0,y,A),A.onerror=v(ps,E,"TestLoadImage: error",!1,y,A),A.onabort=v(ps,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=v(ps,E,"TestLoadImage: timeout",!1,y,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function rc(h,y){const E=new rt,A=new AbortController,j=setTimeout(()=>{A.abort(),ps(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then($=>{clearTimeout(j),$.ok?ps(E,"TestPingServer: ok",!0,y):ps(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),ps(E,"TestPingServer: error",!1,y)})}function ps(h,y,E,A,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),A(E)}catch{}}function Rr(){this.g=new Ms}function fi(h){this.i=h.Sb||null,this.h=h.ab||!1}_(fi,Pa),fi.prototype.g=function(){return new Ua(this.i,this.h)};function Ua(h,y){it.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ua,it),n=Ua.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,js(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||u).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Do(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Do(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Nr(this):js(this),this.readyState==3&&Do(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Nr(this))},n.Na=function(h){this.g&&(this.response=h,Nr(this))},n.ga=function(){this.g&&Nr(this)};function Nr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,js(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function js(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function gs(h){let y="";return Ne(h,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function ja(h,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=gs(E),typeof h=="string"?E!=null&&gn(E):lt(h,y,E))}function ht(h){it.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ht,it);var mi=/^https?$/i,ac=["POST","PUT"];n=ht.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pn.g(),this.g.onreadystatechange=w(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch($){za(this,$);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var j in A)E.set(j,A[j]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())E.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),j=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(ac,y,void 0)>=0)||A||j||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,le]of E)this.g.setRequestHeader($,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){za(this,$)}};function za(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,oc(h),ji(h)}function oc(h){h.A||(h.A=!0,kt(h,"complete"),kt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,kt(this,"complete"),kt(this,"abort"),ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ba(this):this.Xa())},n.Xa=function(){Ba(this)};function Ba(h){if(h.h&&typeof l<"u"){if(h.v&&zs(h)==4)setTimeout(h.Ca.bind(h),0);else if(kt(h,"readystatechange"),zs(h)==4){h.h=!1;try{const $=h.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=$===0){let le=String(h.D).match(Zu)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),A=!mi.test(le?le.toLowerCase():"")}E=A}if(E)kt(h,"complete"),kt(h,"success");else{h.o=6;try{var j=zs(h)>2?h.g.statusText:""}catch{j=""}h.l=j+" ["+h.ca()+"]",oc(h)}}finally{ji(h)}}}}function ji(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||kt(h,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function zs(h){return h.g?h.g.readyState:0}n.ca=function(){try{return zs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ma(y)}};function _n(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(h){const y={};h=(h.g&&zs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(C(h[A]))continue;var E=Ql(h[A]);const j=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=y[j]||[];y[j]=$,$.push(E)}ke(y,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function kr(h){this.za=0,this.i=[],this.j=new rt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,h),this.Za=pi("retryDelaySeedMs",1e4,h),this.Ta=pi("forwardChannelMaxRetries",2,h),this.va=pi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Wl(h&&h.concurrentRequestLimit),this.Ba=new Rr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=kr.prototype,n.ka=8,n.I=1,n.connect=function(h,y,E,A){It(0),this.W=h,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=uh(this,null,this.W),gi(this)};function lc(h){if(Oo(h),h.I==3){var y=h.V++,E=Bt(h.J);if(lt(E,"SID",h.M),lt(E,"RID",y),lt(E,"TYPE","terminate"),Fa(h,E),y=new Vs(h,h.j,y),y.M=2,y.A=Va(Bt(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=y.A,E=!0),E||(y.g=hh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),oi(y)}ch(h)}function Dr(h){h.g&&(uc(h),h.g.cancel(),h.g=null)}function Oo(h){Dr(h),h.v&&(u.clearTimeout(h.v),h.v=null),Po(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function gi(h){if(!Xl(h.h)&&!h.m){h.m=!0;var y=h.Ea;Me||x(),Ee||(Me(),Ee=!0),N.add(y,h),h.D=0}}function Mo(h,y){return ui(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Se(g(h.Ea,h,y),lh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const j=new Vs(this,this.j,h);let $=this.o;if(this.U&&($?($=D($),Q($,this.U)):$=this.U),this.u!==null||this.R||(j.J=$,$=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=ih(this,j,y),E=Bt(this.J),lt(E,"RID",h),lt(E,"CVER",22),this.G&&lt(E,"X-HTTP-Session-Id",this.G),Fa(this,E),$&&(this.R?y="headers="+gn(gs($))+"&"+y:this.u&&ja(E,this.u,$)),Jl(this.h,j),this.Ra&&lt(E,"TYPE","init"),this.S?(lt(E,"$req",y),lt(E,"SID","null"),j.U=!0,ai(j,E,null)):ai(j,E,y),this.I=2}}else this.I==3&&(h?cc(this,h):this.i.length==0||Xl(this.h)||cc(this))};function cc(h,y){var E;y?E=y.l:E=h.V++;const A=Bt(h.J);lt(A,"SID",h.M),lt(A,"RID",E),lt(A,"AID",h.K),Fa(h,A),h.u&&h.o&&ja(A,h.u,h.o),E=new Vs(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=ih(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Jl(h.h,E),ai(E,A,y)}function Fa(h,y){h.H&&Ne(h.H,function(E,A){lt(y,A,E)}),h.l&&Ne({},function(E,A){lt(y,A,E)})}function ih(h,y,E){E=Math.min(h.i.length,E);const A=h.l?g(h.l.Ka,h.l,h):null;e:{var j=h.i;let Pe=-1;for(;;){const Dt=["count="+E];Pe==-1?E>0?(Pe=j[0].g,Dt.push("ofs="+Pe)):Pe=0:Dt.push("ofs="+Pe);let nt=!0;for(let xt=0;xt<E;xt++){var $=j[xt].g;const _s=j[xt].map;if($-=Pe,$<0)Pe=Math.max(0,j[xt].g-100),nt=!1;else try{$="req"+$+"_"||"";try{var le=_s instanceof Map?_s:Object.entries(_s);for(const[yi,Bs]of le){let Fs=Bs;f(Bs)&&(Fs=Os(Bs)),Dt.push($+yi+"="+encodeURIComponent(Fs))}}catch(yi){throw Dt.push($+"type="+encodeURIComponent("_badmap")),yi}}catch{A&&A(_s)}}if(nt){le=Dt.join("&");break e}}le=void 0}return h=h.i.splice(0,E),y.G=h,le}function rh(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Me||x(),Ee||(Me(),Ee=!0),N.add(y,h),h.A=0}}function qa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Se(g(h.Da,h),lh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ah(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Se(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Dr(this),ah(this))};function uc(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function ah(h){h.g=new Vs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Bt(h.na);lt(y,"RID","rpc"),lt(y,"SID",h.M),lt(y,"AID",h.K),lt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&lt(y,"TO",h.ia),lt(y,"TYPE","xmlhttp"),Fa(h,y),h.u&&h.o&&ja(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Va(Bt(y)),E.u=null,E.R=!0,xo(E,h)}n.Va=function(){this.C!=null&&(this.C=null,Dr(this),qa(this),It(19))};function Po(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function oh(h,y){var E=null;if(h.g==y){Po(h),uc(h),h.g=null;var A=2}else if(hi(h.h,y))E=y.G,Zl(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var j=h.D;A=ii(),kt(A,new es(A,E)),gi(h)}else rh(h);else if(j=y.m,j==3||j==0&&y.X>0||!(A==1&&Mo(h,y)||A==2&&qa(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),j){case 1:_i(h,5);break;case 4:_i(h,10);break;case 3:_i(h,6);break;default:_i(h,2)}}}function lh(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function _i(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),A=h.Ua;const j=!A;A=new ns(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||rn(A,"https"),Va(A),j?Us(A.toString(),E):rc(A.toString(),E)}else It(2);h.I=0,h.l&&h.l.pa(y),ch(h),Oo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function ch(h){if(h.I=0,h.ja=[],h.l){const y=ec(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ja,y),V(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function uh(h,y,E){var A=E instanceof ns?Bt(E):new ns(E);if(A.g!="")y&&(A.g=y+"."+A.g),Ar(A,A.u);else{var j=u.location;A=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;const $=new ns(null);A&&rn($,A),y&&($.g=y),j&&Ar($,j),E&&($.h=E),A=$}return E=h.G,y=h.wa,E&&y&&lt(A,E,y),lt(A,"VER",h.ka),Fa(h,A),A}function hh(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ht(new fi({ab:E})):new ht(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function dh(){}n=dh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Or(){}Or.prototype.g=function(h,y){return new Ln(h,y)};function Ln(h,y){it.call(this),this.g=new kr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Bi(this)}_(Ln,it),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){lc(this.g)},Ln.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Os(h),h=E);y.i.push(new zt(y.Ya++,h)),y.I==3&&gi(y)},Ln.prototype.N=function(){this.g.l=null,delete this.j,lc(this.g),delete this.g,Ln.Z.N.call(this)};function fh(h){Wt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}_(fh,Wt);function mh(){Pn.call(this),this.status=1}_(mh,Pn);function Bi(h){this.g=h}_(Bi,dh),Bi.prototype.ra=function(){kt(this.g,"a")},Bi.prototype.qa=function(h){kt(this.g,new fh(h))},Bi.prototype.pa=function(h){kt(this.g,new mh)},Bi.prototype.oa=function(){kt(this.g,"b")},Or.prototype.createWebChannel=Or.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,vA=function(){return new Or},yA=function(){return ii()},_A=At,Bg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fs.NO_ERROR=0,fs.TIMEOUT=8,fs.HTTP_ERROR=6,Md=fs,mn.COMPLETE="complete",gA=mn,Ps.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",it.prototype.listen=it.prototype.J,su=Ps,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,pA=ht}).apply(typeof vd<"u"?vd:typeof self<"u"?self:typeof window<"u"?window:{});const dT="@firebase/firestore",fT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let In=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new Rf("@firebase/firestore");function ml(){return go.logLevel}function fe(n,...e){if(go.logLevel<=Be.DEBUG){const t=e.map(q_);go.debug(`Firestore (${jl}): ${n}`,...t)}}function gr(n,...e){if(go.logLevel<=Be.ERROR){const t=e.map(q_);go.error(`Firestore (${jl}): ${n}`,...t)}}function Il(n,...e){if(go.logLevel<=Be.WARN){const t=e.map(q_);go.warn(`Firestore (${jl}): ${n}`,...t)}}function q_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,bA(n,i,t)}function bA(n,e,t){let i=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw gr(i),new Error(i)}function ot(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||bA(e,a,i)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(In.UNAUTHENTICATED)))}shutdown(){}}class WD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class XD{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new hr,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},f=p=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new hr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string",31837,{l:i}),new EA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class JD{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZD{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new JD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(In.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);const i=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=tO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Ge(n,e){return n<e?-1:n>e?1:0}function Fg(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return dg(a)===dg(l)?Ge(a,l):dg(a)?1:-1}return Ge(n.length,e.length)}const nO=55296,sO=57343;function dg(n){const e=n.charCodeAt(0);return e>=nO&&e<=sO}function Rl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="__name__";class Ai{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ce(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Ai.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ge(e.length,t.length)}static compareSegments(e,t){const i=Ai.isNumericId(e),a=Ai.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):Fg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ha.fromString(e.substring(4,e.length-2))}}class yt extends Ai{construct(e,t,i){return new yt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new yt(t)}static emptyPath(){return new yt([])}}const iO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends Ai{construct(e,t,i){return new wn(e,t,i)}static isValidIdentifier(e){return iO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pT}static keyField(){return new wn([pT])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(i+=f,a++):(l(),a++)}if(l(),u)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(t)}static emptyPath(){return new wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(yt.fromString(e))}static fromName(e){return new we(yt.fromString(e).popFirst(5))}static empty(){return new we(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n,e,t){if(!t)throw new de(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rO(n,e,t,i){if(e===!0&&i===!0)throw new de(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gT(n){if(!we.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _T(n){if(we.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Mf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function _r(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mf(n);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Uu(n,e){if(!wA(n))throw new de(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new de(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=-62135596800,vT=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*vT);return new pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yT)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vT}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Uu(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Yt("string",pt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new pt(0,0))}static max(){return new Re(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=-1;function aO(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Re.fromTimestamp(i===1e9?new pt(t+1,0):new pt(t,i));return new _a(a,we.empty(),e)}function oO(n){return new _a(n.readTime,n.key,wu)}class _a{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new _a(Re.min(),we.empty(),wu)}static max(){return new _a(Re.max(),we.empty(),wu)}}function lO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==cO)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,i)=>{t(e)}))}static reject(e){return new te(((t,i)=>{i(e)}))}static waitFor(e){return new te(((t,i)=>{let a=0,l=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++l,u&&l===a&&t()}),(p=>i(p)))})),u=!0,l===a&&t()}))}static or(e){let t=te.resolve(!1);for(const i of e)t=t.next((a=>a?te.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new te(((i,a)=>{const l=e.length,u=new Array(l);let f=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{u[g]=v,++f,f===l&&i(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new te(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function hO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=-1;function Vf(n){return n==null}function ef(n){return n===0&&1/n==-1/0}function dO(n){return typeof n=="number"&&Number.isInteger(n)&&!ef(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="";function fO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bT(e)),e=mO(n.get(t),e);return bT(e)}function mO(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case SA:t+="";break;default:t+=l}}return t}function bT(n){return n+SA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ia(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function AA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qt=class qg{constructor(e,t){this.comparator=e,this.root=t||da.EMPTY}insert(e,t){return new qg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,da.BLACK,null,null))}remove(e){return new qg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,da.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bd(this.root,e,this.comparator,!0)}},bd=class{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},da=class rr{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??rr.RED,this.left=a??rr.EMPTY,this.right=l??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new rr(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return rr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}};da.EMPTY=null,da.RED=!0,da.BLACK=!1;da.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new da(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new TT(this.data.getIterator())}getIteratorFrom(e){return new TT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Zt(this.comparator);return t.data=e,t}}class TT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new us([])}unionWith(e){let t=new Zt(wn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new us(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new xA("Invalid base64 string: "+l):l}})(e);return new Sn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const pO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(n){if(ot(!!n,39018),typeof n=="string"){let e=0;const t=pO.exec(n);if(ot(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function va(n){return typeof n=="string"?Sn.fromBase64String(n):Sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="server_timestamp",IA="__type__",RA="__previous_value__",NA="__local_write_time__";function $_(n){return(n?.mapValue?.fields||{})[IA]?.stringValue===CA}function Lf(n){const e=n.mapValue.fields[RA];return $_(e)?Lf(e):e}function Su(n){const e=ya(n.mapValue.fields[NA].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,t,i,a,l,u,f,p,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const tf="(default)";class Au{constructor(e,t){this.projectId=e,this.database=t||tf}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database===tf}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="__type__",_O="__max__",Ed={mapValue:{}},DA="__vector__",nf="value";function ba(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$_(n)?4:vO(n)?9007199254740991:yO(n)?10:11:Ce(28295,{value:n})}function Oi(n,e){if(n===e)return!0;const t=ba(n);if(t!==ba(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Su(n).isEqual(Su(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ya(a.timestampValue),f=ya(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return va(a.bytesValue).isEqual(va(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Pt(a.geoPointValue.latitude)===Pt(l.geoPointValue.latitude)&&Pt(a.geoPointValue.longitude)===Pt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Pt(a.integerValue)===Pt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Pt(a.doubleValue),f=Pt(l.doubleValue);return u===f?ef(u)===ef(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Rl(n.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(ET(u)!==ET(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!Oi(u[p],f[p])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function xu(n,e){return(n.values||[]).find((t=>Oi(t,e)))!==void 0}function Nl(n,e){if(n===e)return 0;const t=ba(n),i=ba(e);if(t!==i)return Ge(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Pt(l.integerValue||l.doubleValue),p=Pt(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return wT(n.timestampValue,e.timestampValue);case 4:return wT(Su(n),Su(e));case 5:return Fg(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=va(l),p=va(u);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),p=u.split("/");for(let g=0;g<f.length&&g<p.length;g++){const v=Ge(f[g],p[g]);if(v!==0)return v}return Ge(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=Ge(Pt(l.latitude),Pt(u.latitude));return f!==0?f:Ge(Pt(l.longitude),Pt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ST(n.arrayValue,e.arrayValue);case 10:return(function(l,u){const f=l.fields||{},p=u.fields||{},g=f[nf]?.arrayValue,v=p[nf]?.arrayValue,_=Ge(g?.values?.length||0,v?.values?.length||0);return _!==0?_:ST(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Ed.mapValue&&u===Ed.mapValue)return 0;if(l===Ed.mapValue)return 1;if(u===Ed.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),g=u.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let _=0;_<p.length&&_<v.length;++_){const w=Fg(p[_],v[_]);if(w!==0)return w;const I=Nl(f[p[_]],g[v[_]]);if(I!==0)return I}return Ge(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function wT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);const t=ya(n),i=ya(e),a=Ge(t.seconds,i.seconds);return a!==0?a:Ge(t.nanos,i.nanos)}function ST(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Nl(t[a],i[a]);if(l)return l}return Ge(t.length,i.length)}function kl(n){return Hg(n)}function Hg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ya(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return va(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Hg(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${Hg(t.fields[u])}`;return a+"}"})(n.mapValue):Ce(61005,{value:n})}function Pd(n){switch(ba(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lf(n);return e?16+Pd(e):16;case 5:return 2*n.stringValue.length;case 6:return va(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Pd(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Ia(i.fields,((l,u)=>{a+=l.length+Pd(u)})),a})(n.mapValue);default:throw Ce(13486,{value:n})}}function AT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gg(n){return!!n&&"integerValue"in n}function K_(n){return!!n&&"arrayValue"in n}function xT(n){return!!n&&"nullValue"in n}function CT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vd(n){return!!n&&"mapValue"in n}function yO(n){return(n?.mapValue?.fields||{})[kA]?.stringValue===DA}function cu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ia(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=cu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cu(n.arrayValue.values[t]);return e}return{...n}}function vO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_O}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Vd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(t)}setAll(e){let t=wn.emptyPath(),i={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=f.popLast()}u?i[f.lastSegment()]=cu(u):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Vd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Vd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ia(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new Wn(cu(this.value))}}function OA(n){const e=[];return Ia(n.fields,((t,i)=>{const a=new wn([t]);if(Vd(i)){const l=OA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new us(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t,i,a,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Rn(e,0,Re.min(),Re.min(),Re.min(),Wn.empty(),0)}static newFoundDocument(e,t,i,a){return new Rn(e,1,t,Re.min(),i,a,0)}static newNoDocument(e,t){return new Rn(e,2,t,Re.min(),Re.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new Rn(e,3,t,Re.min(),Re.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.position=e,this.inclusive=t}}function IT(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=we.comparator(we.fromName(u.referenceValue),t.key):i=Nl(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function RT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t="asc"){this.field=e,this.dir=t}}function bO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{}class Kt extends MA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new TO(e,t,i):t==="array-contains"?new AO(e,i):t==="in"?new xO(e,i):t==="not-in"?new CO(e,i):t==="array-contains-any"?new IO(e,i):new Kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new wO(e,i):new SO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nl(t,this.value)):t!==null&&ba(this.value)===ba(t)&&this.matchesComparison(Nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Js extends MA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Js(e,t)}matches(e){return PA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function PA(n){return n.op==="and"}function VA(n){return EO(n)&&PA(n)}function EO(n){for(const e of n.filters)if(e instanceof Js)return!1;return!0}function $g(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+kl(n.value);if(VA(n))return n.filters.map((e=>$g(e))).join(",");{const e=n.filters.map((t=>$g(t))).join(",");return`${n.op}(${e})`}}function LA(n,e){return n instanceof Kt?(function(i,a){return a instanceof Kt&&i.op===a.op&&i.field.isEqual(a.field)&&Oi(i.value,a.value)})(n,e):n instanceof Js?(function(i,a){return a instanceof Js&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,f)=>l&&LA(u,a.filters[f])),!0):!1})(n,e):void Ce(19439)}function UA(n){return n instanceof Kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${kl(t.value)}`})(n):n instanceof Js?(function(t){return t.op.toString()+" {"+t.getFilters().map(UA).join(" ,")+"}"})(n):"Filter"}class TO extends Kt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class wO extends Kt{constructor(e,t){super(e,"in",t),this.keys=jA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class SO extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=jA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jA(n,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class AO extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return K_(t)&&xu(t.arrayValue,this.value)}}class xO extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xu(this.value.arrayValue,t)}}class CO extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xu(this.value.arrayValue,t)}}class IO extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!K_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>xu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,t=null,i=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function NT(n,e=null,t=[],i=[],a=null,l=null,u=null){return new RO(n,e,t,i,a,l,u)}function Y_(n){const e=Oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>$g(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>kl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>kl(i))).join(",")),e.Te=t}return e.Te}function Q_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RT(n.startAt,e.startAt)&&RT(n.endAt,e.endAt)}function Kg(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t=null,i=[],a=[],l=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function NO(n,e,t,i,a,l,u,f){return new ju(n,e,t,i,a,l,u,f)}function W_(n){return new ju(n)}function kT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zA(n){return n.collectionGroup!==null}function uu(n){const e=Oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Zt(wn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new rf(l,i))})),t.has(wn.keyField().canonicalString())||e.Ie.push(new rf(wn.keyField(),i))}return e.Ie}function Ii(n){const e=Oe(n);return e.Ee||(e.Ee=kO(e,uu(n))),e.Ee}function kO(n,e){if(n.limitType==="F")return NT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new rf(a.field,l)}));const t=n.endAt?new sf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new sf(n.startAt.position,n.startAt.inclusive):null;return NT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Yg(n,e){const t=n.filters.concat([e]);return new ju(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qg(n,e,t){return new ju(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uf(n,e){return Q_(Ii(n),Ii(e))&&n.limitType===e.limitType}function BA(n){return`${Y_(Ii(n))}|lt:${n.limitType}`}function pl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>UA(a))).join(", ")}]`),Vf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>kl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>kl(a))).join(",")),`Target(${i})`})(Ii(n))}; limitType=${n.limitType})`}function jf(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):we.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of uu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(u,f,p){const g=IT(u,f,p);return u.inclusive?g<=0:g<0})(i.startAt,uu(i),a)||i.endAt&&!(function(u,f,p){const g=IT(u,f,p);return u.inclusive?g>=0:g>0})(i.endAt,uu(i),a))})(n,e)}function DO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FA(n){return(e,t)=>{let i=!1;for(const a of uu(n)){const l=OO(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function OO(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):(function(l,u,f){const p=u.data.field(l),g=f.data.field(l);return p!==null&&g!==null?Nl(p,g):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return AA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new Qt(we.comparator);function yr(){return MO}const qA=new Qt(we.comparator);function iu(...n){let e=qA;for(const t of n)e=e.insert(t.key,t);return e}function HA(n){let e=qA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function uo(){return hu()}function GA(){return hu()}function hu(){return new Eo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const PO=new Qt(we.comparator),VO=new Zt(we.comparator);function $e(...n){let e=VO;for(const t of n)e=e.add(t);return e}const LO=new Zt(Ge);function UO(){return LO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ef(e)?"-0":e}}function $A(n){return{integerValue:""+n}}function jO(n,e){return dO(e)?$A(e):X_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(){this._=void 0}}function zO(n,e,t){return n instanceof af?(function(a,l){const u={fields:{[IA]:{stringValue:CA},[NA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&$_(l)&&(l=Lf(l)),l&&(u.fields[RA]=l),{mapValue:u}})(t,e):n instanceof Cu?YA(n,e):n instanceof Iu?QA(n,e):(function(a,l){const u=KA(a,l),f=DT(u)+DT(a.Ae);return Gg(u)&&Gg(a.Ae)?$A(f):X_(a.serializer,f)})(n,e)}function BO(n,e,t){return n instanceof Cu?YA(n,e):n instanceof Iu?QA(n,e):t}function KA(n,e){return n instanceof of?(function(i){return Gg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class af extends zf{}class Cu extends zf{constructor(e){super(),this.elements=e}}function YA(n,e){const t=WA(e);for(const i of n.elements)t.some((a=>Oi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Iu extends zf{constructor(e){super(),this.elements=e}}function QA(n,e){let t=WA(e);for(const i of n.elements)t=t.filter((a=>!Oi(a,i)));return{arrayValue:{values:t}}}class of extends zf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function DT(n){return Pt(n.integerValue||n.doubleValue)}function WA(n){return K_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function FO(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof Cu&&a instanceof Cu||i instanceof Iu&&a instanceof Iu?Rl(i.elements,a.elements,Oi):i instanceof of&&a instanceof of?Oi(i.Ae,a.Ae):i instanceof af&&a instanceof af})(n.transform,e.transform)}class qO{constructor(e,t){this.version=e,this.transformResults=t}}class Ri{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ri}static exists(e){return new Ri(void 0,e)}static updateTime(e){return new Ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ld(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Bf{}function XA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ZA(n.key,Ri.none()):new zu(n.key,n.data,Ri.none());{const t=n.data,i=Wn.empty();let a=new Zt(wn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new Ra(n.key,i,new us(a.toArray()),Ri.none())}}function HO(n,e,t){n instanceof zu?(function(a,l,u){const f=a.value.clone(),p=MT(a.fieldTransforms,l,u.transformResults);f.setAll(p),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Ra?(function(a,l,u){if(!Ld(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=MT(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(JA(a)),p.setAll(f),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function du(n,e,t,i){return n instanceof zu?(function(l,u,f,p){if(!Ld(l.precondition,u))return f;const g=l.value.clone(),v=PT(l.fieldTransforms,p,u);return g.setAll(v),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ra?(function(l,u,f,p){if(!Ld(l.precondition,u))return f;const g=PT(l.fieldTransforms,p,u),v=u.data;return v.setAll(JA(l)),v.setAll(g),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,i):(function(l,u,f){return Ld(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function GO(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=KA(i.transform,a||null);l!=null&&(t===null&&(t=Wn.empty()),t.set(i.field,l))}return t||null}function OT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Rl(i,a,((l,u)=>FO(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class zu extends Bf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ra extends Bf{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function JA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function MT(n,e,t){const i=new Map;ot(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,f=e.data.field(l.field);i.set(l.field,BO(u,f,t[a]))}return i}function PT(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,zO(l,u,e))}return i}class ZA extends Bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $O extends Bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&HO(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=du(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=du(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=GA();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const p=XA(u,f);p!==null&&i.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,((t,i)=>OT(t,i)))&&Rl(this.baseMutations,e.baseMutations,((t,i)=>OT(t,i)))}}class J_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ot(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return PO})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new J_(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,Qe;function WO(n){switch(n){case ee.OK:return Ce(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function e1(n){if(n===void 0)return gr("GRPC error has no .code"),ee.UNKNOWN;switch(n){case $t.OK:return ee.OK;case $t.CANCELLED:return ee.CANCELLED;case $t.UNKNOWN:return ee.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ee.INTERNAL;case $t.UNAVAILABLE:return ee.UNAVAILABLE;case $t.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case $t.NOT_FOUND:return ee.NOT_FOUND;case $t.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case $t.ABORTED:return ee.ABORTED;case $t.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case $t.DATA_LOSS:return ee.DATA_LOSS;default:return Ce(39323,{code:n})}}(Qe=$t||($t={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=new ha([4294967295,4294967295],0);function VT(n){const e=XO().encode(n),t=new mA;return t.update(e),new Uint8Array(t.digest())}function LT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ha([t,i],0),new ha([a,l],0)]}class Z_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ru(`Invalid padding: ${t}`);if(i<0)throw new ru(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ru(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ha.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(ha.fromNumber(i)));return a.compare(JO)===1&&(a=new ha([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=VT(e),[i,a]=LT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Z_(l,a,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=VT(e),[i,a]=LT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Bu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ff(Re.min(),a,new Qt(Ge),yr(),$e())}}class Bu{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Bu(i,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class t1{constructor(e,t){this.targetId=e,this.Ce=t}}class n1{constructor(e,t,i=Sn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class UT{constructor(){this.ve=0,this.Fe=jT(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),i=$e();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Ce(38017,{changeType:l})}})),new Bu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=jT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZO{constructor(e){this.Ge=e,this.ze=new Map,this.je=yr(),this.Je=Td(),this.He=Td(),this.Ye=new Qt(Ge)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Kg(l))if(i===0){const u=new we(l.path);this.et(t,u,Rn.newNoDocument(u,Re.min()))}else ot(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),p=f?this.ct(f,e,u):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=va(i).toUint8Array()}catch(p){if(p instanceof xA)return Il("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Z_(u,a,l)}catch(p){return Il(p instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&Kg(f.target)){const p=new we(f.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,Rn.newNoDocument(p,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=$e();this.He.forEach(((l,u)=>{let f=!0;u.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Ff(e,t,this.Ye,this.je,i);return this.je=yr(),this.Je=Td(),this.He=Td(),this.Ye=new Qt(Ge),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new UT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Zt(Ge),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Zt(Ge),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new UT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Td(){return new Qt(we.comparator)}function jT(){return new Qt(we.comparator)}const eM={asc:"ASCENDING",desc:"DESCENDING"},tM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nM={and:"AND",or:"OR"};class sM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wg(n,e){return n.useProto3Json||Vf(e)?e:{value:e}}function lf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iM(n,e){return lf(n,e.toTimestamp())}function Ni(n){return ot(!!n,49232),Re.fromTimestamp((function(t){const i=ya(t);return new pt(i.seconds,i.nanos)})(n))}function ey(n,e){return Xg(n,e).canonicalString()}function Xg(n,e){const t=(function(a){return new yt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function i1(n){const e=yt.fromString(n);return ot(c1(e),10190,{key:e.toString()}),e}function Jg(n,e){return ey(n.databaseId,e.path)}function fg(n,e){const t=i1(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(a1(t))}function r1(n,e){return ey(n.databaseId,e)}function rM(n){const e=i1(n);return e.length===4?yt.emptyPath():a1(e)}function Zg(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function a1(n){return ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function zT(n,e,t){return{name:Jg(n,e),fields:t.value.mapValue.fields}}function aM(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ce(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(ot(v===void 0||typeof v=="string",58123),Sn.fromBase64String(v||"")):(ot(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Sn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(g){const v=g.code===void 0?ee.UNKNOWN:e1(g.code);return new de(v,g.message||"")})(u);t=new n1(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=fg(n,i.document.name),l=Ni(i.document.updateTime),u=i.document.createTime?Ni(i.document.createTime):Re.min(),f=new Wn({mapValue:{fields:i.document.fields}}),p=Rn.newFoundDocument(a,l,u,f),g=i.targetIds||[],v=i.removedTargetIds||[];t=new Ud(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=fg(n,i.document),l=i.readTime?Ni(i.readTime):Re.min(),u=Rn.newNoDocument(a,l),f=i.removedTargetIds||[];t=new Ud([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=fg(n,i.document),l=i.removedTargetIds||[];t=new Ud([],l,a,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new QO(a,l),f=i.targetId;t=new t1(f,u)}}return t}function oM(n,e){let t;if(e instanceof zu)t={update:zT(n,e.key,e.value)};else if(e instanceof ZA)t={delete:Jg(n,e.key)};else if(e instanceof Ra)t={update:zT(n,e.key,e.data),updateMask:gM(e.fieldMask)};else{if(!(e instanceof $O))return Ce(16599,{Vt:e.type});t={verify:Jg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof af)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Cu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Iu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof of)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ce(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:iM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(n,e.precondition)),t}function lM(n,e){return n&&n.length>0?(ot(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Ni(a.updateTime):Ni(l);return u.isEqual(Re.min())&&(u=Ni(l)),new qO(u,a.transformResults||[])})(t,e)))):[]}function cM(n,e){return{documents:[r1(n,e.path)]}}function uM(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=r1(n,a);const l=(function(g){if(g.length!==0)return l1(Js.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(g){if(g.length!==0)return g.map((v=>(function(w){return{field:gl(w.field),direction:fM(w.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Wg(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function hM(n){let e=rM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ot(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(_){const w=o1(_);return w instanceof Js&&VA(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((w=>(function(V){return new rf(_l(V.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(w)))})(t.orderBy));let f=null;t.limit&&(f=(function(_){let w;return w=typeof _=="object"?_.value:_,Vf(w)?null:w})(t.limit));let p=null;t.startAt&&(p=(function(_){const w=!!_.before,I=_.values||[];return new sf(I,w)})(t.startAt));let g=null;return t.endAt&&(g=(function(_){const w=!_.before,I=_.values||[];return new sf(I,w)})(t.endAt)),NO(e,a,u,l,f,"F",p,g)}function dM(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function o1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=_l(t.unaryFilter.field);return Kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=_l(t.unaryFilter.field);return Kt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=_l(t.unaryFilter.field);return Kt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=_l(t.unaryFilter.field);return Kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Kt.create(_l(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Js.create(t.compositeFilter.filters.map((i=>o1(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function fM(n){return eM[n]}function mM(n){return tM[n]}function pM(n){return nM[n]}function gl(n){return{fieldPath:n.canonicalString()}}function _l(n){return wn.fromServerFormat(n.fieldPath)}function l1(n){return n instanceof Kt?(function(t){if(t.op==="=="){if(CT(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NAN"}};if(xT(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(CT(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NOT_NAN"}};if(xT(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gl(t.field),op:mM(t.op),value:t.value}}})(n):n instanceof Js?(function(t){const i=t.getFilters().map((a=>l1(a)));return i.length===1?i[0]:{compositeFilter:{op:pM(t.op),filters:i}}})(n):Ce(54877,{filter:n})}function gM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function c1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t,i,a,l=Re.min(),u=Re.min(),f=Sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new la(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.yt=e}}function yM(n){const e=hM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Qg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(){this.Cn=new bM}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(_a.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(_a.min())}updateCollectionGroup(e,t,i){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class bM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Zt(yt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Zt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},u1=41943040;class Qn{static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(u1,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Dl(0)}static cr(){return new Dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="LruGarbageCollector",EM=1048576;function qT([n,e],[t,i]){const a=Ge(n,t);return a===0?Ge(e,i):a}class TM{constructor(e){this.Ir=e,this.buffer=new Zt(qT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();qT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(FT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bl(t)?fe(FT,"Ignoring IndexedDB error during garbage collection: ",t):await zl(t)}await this.Vr(3e5)}))}}class SM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Pf.ce);const i=new TM(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(BT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,u,f,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(i=_,f=Date.now(),this.removeTargets(e,i,t)))).next((_=>(l=_,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(g=Date.now(),ml()<=Be.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${_} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function AM(n,e){return new SM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.changes=new Eo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&du(i.mutation,a,us.empty(),pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,$e()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=$e()){const a=uo();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=iu();return l.forEach(((f,p)=>{u=u.insert(f,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=uo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,$e())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,a){let l=yr();const u=hu(),f=(function(){return hu()})();return t.forEach(((p,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Ra)?l=l.insert(g.key,g):v!==void 0?(u.set(g.key,v.mutation.getFieldMask()),du(v.mutation,g,v.mutation.getFieldMask(),pt.now())):u.set(g.key,us.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>u.set(g,v))),t.forEach(((g,v)=>f.set(g,new CM(v,u.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=hu();let a=new Qt(((u,f)=>u-f)),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=i.get(p)||us.empty();v=f.applyToLocalView(g,v),i.set(p,v);const _=(a.get(f.batchId)||$e()).add(p);a=a.insert(f.batchId,_)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),g=p.key,v=p.value,_=GA();v.forEach((w=>{if(!l.has(w)){const I=XA(t.get(w),i.get(w));I!==null&&_.set(w,I),l=l.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,_))}return te.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(u){return we.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):te.resolve(uo());let f=wu,p=l;return u.next((g=>te.forEach(g,((v,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),l.get(v)?te.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{p=p.insert(v,w)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,$e()))).next((v=>({batchId:f,changes:HA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let a=iu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=iu();return this.indexManager.getCollectionParents(e,l).next((f=>te.forEach(f,(p=>{const g=(function(_,w){return new ju(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((v=>{v.forEach(((_,w)=>{u=u.insert(_,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((p,g)=>{const v=g.getKey();u.get(v)===null&&(u=u.insert(v,Rn.newInvalidDocument(v)))}));let f=iu();return u.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&du(v.mutation,g,us.empty(),pt.now()),jf(t,g)&&(f=f.insert(p,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ni(a.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:yM(a.bundledQuery),readTime:Ni(a.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.overlays=new Qt(we.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=uo();return te.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),te.resolve()}getOverlaysForCollection(e,t,i){const a=uo(),l=t.length+1,u=new we(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return te.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Qt(((g,v)=>g-v));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=uo(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const f=uo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>f.set(g,v))),!(f.size()>=a)););return te.resolve(f)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new YO(t,i));let l=this.qr.get(t);l===void 0&&(l=$e(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.Qr=new Zt(ln.$r),this.Ur=new Zt(ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new ln(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new ln(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new we(new yt([])),i=new ln(t,e),a=new ln(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new yt([])),i=new ln(t,e),a=new ln(t,e+1);let l=$e();return this.Ur.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new ln(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class ln{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Ge(e.Yr,t.Yr)}static Kr(e,t){return Ge(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(ln.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new KO(l,t,i,a);this.mutationQueue.push(u);for(const f of a)this.Zr=this.Zr.add(new ln(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?G_:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new ln(t,0),a=new ln(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(u=>{const f=this.Xr(u.Yr);l.push(f)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Zt(Ge);return t.forEach((a=>{const l=new ln(a,0),u=new ln(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(f=>{i=i.add(f.Yr)}))})),te.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;we.isDocumentKey(l)||(l=l.child(""));const u=new ln(new we(l),0);let f=new Zt(Ge);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(f=f.add(p.Yr)),!0)}),u),te.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ot(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return te.forEach(t.mutations,(a=>{const l=new ln(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new ln(t,0),a=this.Zr.firstAfterOrEqual(i);return te.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.ri=e,this.docs=(function(){return new Qt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return te.resolve(i?i.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let i=yr();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Rn.newInvalidDocument(a))})),te.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=yr();const u=t.path,f=new we(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||lO(oO(v),i)<=0||(a.has(v.key)||jf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Ce(9500)}ii(e,t){return te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new MM(this)}getSize(e){return te.resolve(this.size)}}class MM extends xM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.persistence=e,this.si=new Eo((t=>Y_(t)),Q_),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new ty,this.targetCount=0,this.ai=Dl.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Dl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),te.waitFor(l).next((()=>a))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return te.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),te.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return te.resolve(i)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,t){this.ui={},this.overlays={},this.ci=new Pf(0),this.li=!1,this.li=!0,this.hi=new kM,this.referenceDelegate=e(this),this.Pi=new PM(this),this.indexManager=new vM,this.remoteDocumentCache=(function(a){return new OM(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new _M(t),this.Ii=new RM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new DM(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const a=new VM(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return te.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class VM extends uO{constructor(e){super(),this.currentSequenceNumber=e}}class ny{constructor(e){this.persistence=e,this.Ri=new ty,this.Vi=null}static mi(e){return new ny(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(i=>{const a=we.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class cf{constructor(e,t){this.persistence=e,this.pi=new Eo((i=>fO(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=AM(this,t)}static mi(e,t){return new cf(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?te.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,l.removeEntry(u,Re.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pd(e.data.value)),t}br(e,t,i){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return te.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=$e(),a=$e();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new sy(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return cN()?8:hO(On())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new LM;return this.Ss(e,t,u).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(ml()<=Be.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(ml()<=Be.DEBUG&&fe("QueryEngine","Query:",pl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(ml()<=Be.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ii(t))):te.resolve())}ys(e,t){if(kT(t))return te.resolve(null);let i=Ii(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Qg(t,null,"F"),i=Ii(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=$e(...l);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.Ds(t,f);return this.Cs(t,g,u,p.readTime)?this.ys(e,Qg(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,i,a){return kT(t)||a.isEqual(Re.min())?te.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,a)?te.resolve(null):(ml()<=Be.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),pl(t)),this.vs(e,u,t,aO(a,wu)).next((f=>f)))}))}Ds(e,t){let i=new Zt(FA(e));return t.forEach(((a,l)=>{jf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return ml()<=Be.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",pl(t)),this.ps.getDocumentsMatchingQuery(e,t,_a.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="LocalStore",jM=3e8;class zM{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Qt(Ge),this.xs=new Eo((l=>Y_(l)),Q_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function BM(n,e,t,i){return new zM(n,e,t,i)}async function d1(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let p=$e();for(const g of a){u.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){f.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ls:g,removedBatchIds:u,addedBatchIds:f})))}))}))}function FM(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,g,v){const _=g.batch,w=_.keys();let I=te.resolve();return w.forEach((V=>{I=I.next((()=>v.getEntry(p,V))).next((G=>{const H=g.docVersions.get(V);ot(H!==null,48541),G.version.compareTo(H)<0&&(_.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),v.addEntry(G)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(p,_)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=$e();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(p=p.add(f.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function f1(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function qM(n,e){const t=Oe(n),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((v,_)=>{const w=a.get(_);if(!w)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,_))));let I=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(Sn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,i)),a=a.insert(_,I),(function(G,H,Y){return G.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=jM?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(w,I,v)&&f.push(t.Pi.updateTargetData(l,I))}));let p=yr(),g=$e();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(HM(l,u,e.documentUpdates).next((v=>{p=v.ks,g=v.qs}))),!i.isEqual(Re.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(v)}return te.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function HM(n,e,t){let i=$e(),a=$e();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=yr();return t.forEach(((f,p)=>{const g=l.get(f);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):fe(iy,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",p.version)})),{ks:u,qs:a}}))}function GM(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=G_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function $M(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,te.resolve(a)):t.Pi.allocateTargetId(i).next((u=>(a=new la(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function e_(n,e,t){const i=Oe(n),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Bl(u))throw u;fe(iy,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function HT(n,e,t){const i=Oe(n);let a=Re.min(),l=$e();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,g,v){const _=Oe(p),w=_.xs.get(v);return w!==void 0?te.resolve(_.Ms.get(w)):_.Pi.getTargetData(g,v)})(i,u,Ii(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?a:Re.min(),t?l:$e()))).next((f=>(KM(i,DO(e),f),{documents:f,Qs:l})))))}function KM(n,e,t){let i=n.Os.get(e)||Re.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class GT{constructor(){this.activeTargetIds=UO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YM{constructor(){this.Mo=new GT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new GT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="ConnectivityMonitor";class KT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe($T,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe($T,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd=null;function t_(){return wd===null?wd=(function(){return 268435456+Math.round(2147483648*Math.random())})():wd++,"0x"+wd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="RestConnection",WM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===tf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const u=t_(),f=this.zo(e,t.toUriEncodedString());fe(mg,`Sending RPC '${e}' ${u}:`,f,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:g}=new URL(f),v=br(g);return this.Jo(e,f,p,i,v).then((_=>(fe(mg,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw Il(mg,`RPC '${e}' ${u} failed with error: `,_,"url: ",f,"request:",i),_}))}Ho(e,t,i,a,l,u){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=WM[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class ZM extends XM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const u=t_();return new Promise(((f,p)=>{const g=new pA;g.setWithCredentials(!0),g.listenOnce(gA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Md.NO_ERROR:const _=g.getResponseJson();fe(Cn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),f(_);break;case Md.TIMEOUT:fe(Cn,`RPC '${e}' ${u} timed out`),p(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Md.HTTP_ERROR:const w=g.getStatus();if(fe(Cn,`RPC '${e}' ${u} failed with status:`,w,"response text:",g.getResponseText()),w>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const V=I?.error;if(V&&V.status&&V.message){const G=(function(Y){const ce=Y.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ce)>=0?ce:ee.UNKNOWN})(V.status);p(new de(G,V.message))}else p(new de(ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new de(ee.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{fe(Cn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);fe(Cn,`RPC '${e}' ${u} sending request:`,a),g.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=t_(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=vA(),f=yA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=l.join("");fe(Cn,`Creating RPC '${e}' stream ${a}: ${v}`,p);const _=u.createWebChannel(v,p);this.I_(_);let w=!1,I=!1;const V=new JM({Yo:H=>{I?fe(Cn,`Not sending because RPC '${e}' stream ${a} is closed:`,H):(w||(fe(Cn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),w=!0),fe(Cn,`RPC '${e}' stream ${a} sending:`,H),_.send(H))},Zo:()=>_.close()}),G=(H,Y,ce)=>{H.listen(Y,(re=>{try{ce(re)}catch(me){setTimeout((()=>{throw me}),0)}}))};return G(_,su.EventType.OPEN,(()=>{I||(fe(Cn,`RPC '${e}' stream ${a} transport opened.`),V.o_())})),G(_,su.EventType.CLOSE,(()=>{I||(I=!0,fe(Cn,`RPC '${e}' stream ${a} transport closed`),V.a_(),this.E_(_))})),G(_,su.EventType.ERROR,(H=>{I||(I=!0,Il(Cn,`RPC '${e}' stream ${a} transport errored. Name:`,H.name,"Message:",H.message),V.a_(new de(ee.UNAVAILABLE,"The operation could not be completed")))})),G(_,su.EventType.MESSAGE,(H=>{if(!I){const Y=H.data[0];ot(!!Y,16349);const ce=Y,re=ce?.error||ce[0]?.error;if(re){fe(Cn,`RPC '${e}' stream ${a} received error:`,re);const me=re.status;let Me=(function(x){const R=$t[x];if(R!==void 0)return e1(R)})(me),Ee=re.message;Me===void 0&&(Me=ee.INTERNAL,Ee="Unknown error status: "+me+" with message "+re.message),I=!0,V.a_(new de(Me,Ee)),_.close()}else fe(Cn,`RPC '${e}' stream ${a} received:`,Y),V.u_(Y)}})),G(f,_A.STAT_EVENT,(H=>{H.stat===Bg.PROXY?fe(Cn,`RPC '${e}' stream ${a} detected buffering proxy`):H.stat===Bg.NOPROXY&&fe(Cn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function pg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(n){return new sM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&fe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="PersistentStream";class p1{constructor(e,t,i,a,l,u,f,p){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new m1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new de(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(YT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(YT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class e4 extends p1{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=aM(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Re.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Ni(u.readTime):Re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Zg(this.serializer),t.addTarget=(function(l,u){let f;const p=u.target;if(f=Kg(p)?{documents:cM(l,p)}:{query:uM(l,p).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=s1(l,u.resumeToken);const g=Wg(l,u.expectedCount);g!==null&&(f.expectedCount=g)}else if(u.snapshotVersion.compareTo(Re.min())>0){f.readTime=lf(l,u.snapshotVersion.toTimestamp());const g=Wg(l,u.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const i=dM(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Zg(this.serializer),t.removeTarget=e,this.q_(t)}}class t4 extends p1{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lM(e.writeResults,e.commitTime),i=Ni(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Zg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>oM(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{}class s4 extends n4{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Xg(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(ee.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,Xg(t,i),a,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(ee.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class i4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gr(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class r4{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{To(this)&&(fe(_o,"Restarting streams for network reachability change."),await(async function(p){const g=Oe(p);g.Ea.add(4),await Fu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Hf(g)})(this))}))})),this.Ra=new i4(i,a)}}async function Hf(n){if(To(n))for(const e of n.da)await e(!0)}async function Fu(n){for(const e of n.da)await e(!1)}function g1(n,e){const t=Oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ly(t)?oy(t):Fl(t).O_()&&ay(t,e))}function ry(n,e){const t=Oe(n),i=Fl(t);t.Ia.delete(e),i.O_()&&_1(t,e),t.Ia.size===0&&(i.O_()?i.L_():To(t)&&t.Ra.set("Unknown"))}function ay(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fl(n).Y_(e)}function _1(n,e){n.Va.Ue(e),Fl(n).Z_(e)}function oy(n){n.Va=new ZO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Fl(n).start(),n.Ra.ua()}function ly(n){return To(n)&&!Fl(n).x_()&&n.Ia.size>0}function To(n){return Oe(n).Ea.size===0}function y1(n){n.Va=void 0}async function a4(n){n.Ra.set("Online")}async function o4(n){n.Ia.forEach(((e,t)=>{ay(n,e)}))}async function l4(n,e){y1(n),ly(n)?(n.Ra.ha(e),oy(n)):n.Ra.set("Unknown")}async function c4(n,e,t){if(n.Ra.set("Online"),e instanceof n1&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.Va.removeTarget(f))})(n,e)}catch(i){fe(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await uf(n,i)}else if(e instanceof Ud?n.Va.Ze(e):e instanceof t1?n.Va.st(e):n.Va.tt(e),!t.isEqual(Re.min()))try{const i=await f1(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,u))}})),f.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Sn.EMPTY_BYTE_STRING,v.snapshotVersion)),_1(l,p);const _=new la(v.target,p,g,v.sequenceNumber);ay(l,_)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){fe(_o,"Failed to raise snapshot:",i),await uf(n,i)}}async function uf(n,e,t){if(!Bl(e))throw e;n.Ea.add(1),await Fu(n),n.Ra.set("Offline"),t||(t=()=>f1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(_o,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Hf(n)}))}function v1(n,e){return e().catch((t=>uf(n,t,e)))}async function Gf(n){const e=Oe(n),t=Ea(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:G_;for(;u4(e);)try{const a=await GM(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,h4(e,a)}catch(a){await uf(e,a)}b1(e)&&E1(e)}function u4(n){return To(n)&&n.Ta.length<10}function h4(n,e){n.Ta.push(e);const t=Ea(n);t.O_()&&t.X_&&t.ea(e.mutations)}function b1(n){return To(n)&&!Ea(n).x_()&&n.Ta.length>0}function E1(n){Ea(n).start()}async function d4(n){Ea(n).ra()}async function f4(n){const e=Ea(n);for(const t of n.Ta)e.ea(t.mutations)}async function m4(n,e,t){const i=n.Ta.shift(),a=J_.from(i,e,t);await v1(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Gf(n)}async function p4(n,e){e&&Ea(n).X_&&await(async function(i,a){if((function(u){return WO(u)&&u!==ee.ABORTED})(a.code)){const l=i.Ta.shift();Ea(i).B_(),await v1(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Gf(i)}})(n,e),b1(n)&&E1(n)}async function QT(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),fe(_o,"RemoteStore received new credentials");const i=To(t);t.Ea.add(3),await Fu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Hf(t)}async function g4(n,e){const t=Oe(n);e?(t.Ea.delete(2),await Hf(t)):e||(t.Ea.add(2),await Fu(t),t.Ra.set("Unknown"))}function Fl(n){return n.ma||(n.ma=(function(t,i,a){const l=Oe(t);return l.sa(),new e4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:a4.bind(null,n),t_:o4.bind(null,n),r_:l4.bind(null,n),H_:c4.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ly(n)?oy(n):n.Ra.set("Unknown")):(await n.ma.stop(),y1(n))}))),n.ma}function Ea(n){return n.fa||(n.fa=(function(t,i,a){const l=Oe(t);return l.sa(),new t4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:d4.bind(null,n),r_:p4.bind(null,n),ta:f4.bind(null,n),na:m4.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Gf(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(_o,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,f=new cy(e,t,u,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uy(n,e){if(gr("AsyncQueue",`${e}: ${n}`),Bl(n))return new de(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=iu(),this.sortedSet=new Qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new wl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.ga=new Qt(we.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ol{constructor(e,t,i,a,l,u,f,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Ol(e,t,wl.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class y4{constructor(){this.queries=XT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Oe(t),l=a.queries;a.queries=XT(),l.forEach(((u,f)=>{for(const p of f.Sa)p.onError(i)}))})(this,new de(ee.ABORTED,"Firestore shutting down"))}}function XT(){return new Eo((n=>BA(n)),Uf)}async function T1(n,e){const t=Oe(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new _4,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=uy(u,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&hy(t)}async function w1(n,e){const t=Oe(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function v4(n,e){const t=Oe(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(a)&&(i=!0);u.wa=a}}i&&hy(t)}function b4(n,e,t){const i=Oe(n),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function hy(n){n.Ca.forEach((e=>{e.next()}))}var n_,JT;(JT=n_||(n_={})).Ma="default",JT.Cache="cache";class S1{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Ol(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==n_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.key=e}}class x1{constructor(e){this.key=e}}class E4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=FA(e),this.tu=new wl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new WT,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const w=a.get(v),I=jf(this.query,_)?_:null,V=!!w&&this.mutatedKeys.has(w.key),G=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let H=!1;w&&I?w.data.isEqual(I.data)?V!==G&&(i.track({type:3,doc:I}),H=!0):this.su(w,I)||(i.track({type:2,doc:I}),H=!0,(p&&this.eu(I,p)>0||g&&this.eu(I,g)<0)&&(f=!0)):!w&&I?(i.track({type:0,doc:I}),H=!0):w&&!I&&(i.track({type:1,doc:w}),H=!0,(p||g)&&(f=!0)),H&&(I?(u=u.add(I),l=G?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,_)=>(function(I,V){const G=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:H})}};return G(I)-G(V)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,g=p!==this.Za;return this.Za=p,u.length!==0||g?{snapshot:new Ol(this.query,e.tu,l,u,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new WT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new x1(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new A1(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dy="SyncEngine";class T4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class w4{constructor(e){this.key=e,this.hu=!1}}class S4{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Eo((f=>BA(f)),Uf),this.Iu=new Map,this.Eu=new Set,this.du=new Qt(we.comparator),this.Au=new Map,this.Ru=new ty,this.Vu={},this.mu=new Map,this.fu=Dl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function A4(n,e,t=!0){const i=D1(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await C1(i,e,t,!0),a}async function x4(n,e){const t=D1(n);await C1(t,e,!0,!1)}async function C1(n,e,t,i){const a=await $M(n.localStore,Ii(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await C4(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&g1(n.remoteStore,a),f}async function C4(n,e,t,i,a){n.pu=(_,w,I)=>(async function(G,H,Y,ce){let re=H.view.ru(Y);re.Cs&&(re=await HT(G.localStore,H.query,!1).then((({documents:N})=>H.view.ru(N,re))));const me=ce&&ce.targetChanges.get(H.targetId),Me=ce&&ce.targetMismatches.get(H.targetId)!=null,Ee=H.view.applyChanges(re,G.isPrimaryClient,me,Me);return ew(G,H.targetId,Ee.au),Ee.snapshot})(n,_,w,I);const l=await HT(n.localStore,e,!0),u=new E4(e,l.Qs),f=u.ru(l.documents),p=Bu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=u.applyChanges(f,n.isPrimaryClient,p);ew(n,t,g.au);const v=new T4(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function I4(n,e,t){const i=Oe(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((u=>!Uf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await e_(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&ry(i.remoteStore,a.targetId),s_(i,a.targetId)})).catch(zl)):(s_(i,a.targetId),await e_(i.localStore,a.targetId,!0))}async function R4(n,e){const t=Oe(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ry(t.remoteStore,i.targetId))}async function N4(n,e,t){const i=L4(n);try{const a=await(function(u,f){const p=Oe(u),g=pt.now(),v=f.reduce(((I,V)=>I.add(V.key)),$e());let _,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let V=yr(),G=$e();return p.Ns.getEntries(I,v).next((H=>{V=H,V.forEach(((Y,ce)=>{ce.isValidDocument()||(G=G.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,V))).next((H=>{_=H;const Y=[];for(const ce of f){const re=GO(ce,_.get(ce.key).overlayedDocument);re!=null&&Y.push(new Ra(ce.key,re,OA(re.value.mapValue),Ri.exists(!0)))}return p.mutationQueue.addMutationBatch(I,g,Y,f)})).next((H=>{w=H;const Y=H.applyToLocalDocumentSet(_,G);return p.documentOverlayCache.saveOverlays(I,H.batchId,Y)}))})).then((()=>({batchId:w.batchId,changes:HA(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,f,p){let g=u.Vu[u.currentUser.toKey()];g||(g=new Qt(Ge)),g=g.insert(f,p),u.Vu[u.currentUser.toKey()]=g})(i,a.batchId,t),await qu(i,a.changes),await Gf(i.remoteStore)}catch(a){const l=uy(a,"Failed to persist write");t.reject(l)}}async function I1(n,e){const t=Oe(n);try{const i=await qM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(ot(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?ot(u.hu,14607):a.removedDocuments.size>0&&(ot(u.hu,42227),u.hu=!1))})),await qu(t,i,e)}catch(i){await zl(i)}}function ZT(n,e,t){const i=Oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const p=Oe(u);p.onlineState=f;let g=!1;p.queries.forEach(((v,_)=>{for(const w of _.Sa)w.va(f)&&(g=!0)})),g&&hy(p)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function k4(n,e,t){const i=Oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let u=new Qt(we.comparator);u=u.insert(l,Rn.newNoDocument(l,Re.min()));const f=$e().add(l),p=new Ff(Re.min(),new Map,new Qt(Ge),u,f);await I1(i,p),i.du=i.du.remove(l),i.Au.delete(e),fy(i)}else await e_(i.localStore,e,!1).then((()=>s_(i,e,t))).catch(zl)}async function D4(n,e){const t=Oe(n),i=e.batch.batchId;try{const a=await FM(t.localStore,e);N1(t,i,null),R1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await qu(t,a)}catch(a){await zl(a)}}async function O4(n,e,t){const i=Oe(n);try{const a=await(function(u,f){const p=Oe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,f).next((_=>(ot(_!==null,37113),v=_.keys(),p.mutationQueue.removeMutationBatch(g,_)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(i.localStore,e);N1(i,e,t),R1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await qu(i,a)}catch(a){await zl(a)}}function R1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function N1(n,e,t){const i=Oe(n);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function s_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||k1(n,i)}))}function k1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ry(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),fy(n))}function ew(n,e,t){for(const i of t)i instanceof A1?(n.Ru.addReference(i.key,e),M4(n,i)):i instanceof x1?(fe(dy,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||k1(n,i.key)):Ce(19791,{wu:i})}function M4(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(fe(dy,"New document in limbo: "+t),n.Eu.add(i),fy(n))}function fy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(yt.fromString(e)),i=n.fu.next();n.Au.set(i,new w4(t)),n.du=n.du.insert(t,i),g1(n.remoteStore,new la(Ii(W_(t.path)),i,"TargetPurposeLimboResolution",Pf.ce))}}async function qu(n,e,t){const i=Oe(n),a=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{u.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){a.push(g);const v=sy.As(p.targetId,g);l.push(v)}})))})),await Promise.all(u),i.Pu.H_(a),await(async function(p,g){const v=Oe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>te.forEach(g,(w=>te.forEach(w.Es,(I=>v.persistence.referenceDelegate.addReference(_,w.targetId,I))).next((()=>te.forEach(w.ds,(I=>v.persistence.referenceDelegate.removeReference(_,w.targetId,I)))))))))}catch(_){if(!Bl(_))throw _;fe(iy,"Failed to update sequence numbers: "+_)}for(const _ of g){const w=_.targetId;if(!_.fromCache){const I=v.Ms.get(w),V=I.snapshotVersion,G=I.withLastLimboFreeSnapshotVersion(V);v.Ms=v.Ms.insert(w,G)}}})(i.localStore,l))}async function P4(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){fe(dy,"User change. New user:",e.toKey());const i=await d1(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new de(ee.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await qu(t,i.Ls)}}function V4(n,e){const t=Oe(n),i=t.Au.get(e);if(i&&i.hu)return $e().add(i.key);{let a=$e();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}function D1(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=I1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k4.bind(null,e),e.Pu.H_=v4.bind(null,e.eventManager),e.Pu.yu=b4.bind(null,e.eventManager),e}function L4(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O4.bind(null,e),e}class hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return BM(this.persistence,new UM,e.initialUser,this.serializer)}Cu(e){return new h1(ny.mi,this.serializer)}Du(e){return new YM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hf.provider={build:()=>new hf};class U4 extends hf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof cf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new wM(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new h1((i=>cf.mi(i,t)),this.serializer)}}class i_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ZT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=P4.bind(null,this.syncEngine),await g4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new y4})()}createDatastore(e){const t=qf(e.databaseInfo.databaseId),i=(function(l){return new ZM(l)})(e.databaseInfo);return(function(l,u,f,p){return new s4(l,u,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,f){return new r4(i,a,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>ZT(this.syncEngine,t,0)),(function(){return KT.v()?new KT:new QM})())}createSyncEngine(e,t){return(function(a,l,u,f,p,g,v){const _=new S4(a,l,u,f,p,g);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Oe(t);fe(_o,"RemoteStore shutting down."),i.Ea.add(5),await Fu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}i_.provider={build:()=>new i_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="FirestoreClient";class j4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=In.UNAUTHENTICATED,this.clientId=H_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{fe(Ta,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(fe(Ta,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=uy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function gg(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Ta,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await d1(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function tw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await z4(n);fe(Ta,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>QT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>QT(e.remoteStore,a))),n._onlineComponents=e}async function z4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Ta,"Using user provided OfflineComponentProvider");try{await gg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ee.FAILED_PRECONDITION||a.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Il("Error using user provided cache. Falling back to memory cache: "+t),await gg(n,new hf)}}else fe(Ta,"Using default OfflineComponentProvider"),await gg(n,new U4(void 0));return n._offlineComponents}async function M1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Ta,"Using user provided OnlineComponentProvider"),await tw(n,n._uninitializedComponentsProvider._online)):(fe(Ta,"Using default OnlineComponentProvider"),await tw(n,new i_))),n._onlineComponents}function B4(n){return M1(n).then((e=>e.syncEngine))}async function P1(n){const e=await M1(n),t=e.eventManager;return t.onListen=A4.bind(null,e.syncEngine),t.onUnlisten=I4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=x4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=R4.bind(null,e.syncEngine),t}function F4(n,e,t={}){const i=new hr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,p,g){const v=new O1({next:w=>{v.Nu(),u.enqueueAndForget((()=>w1(l,_)));const I=w.docs.has(f);!I&&w.fromCache?g.reject(new de(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&w.fromCache&&p&&p.source==="server"?g.reject(new de(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:w=>g.reject(w)}),_=new S1(W_(f.path),v,{includeMetadataChanges:!0,qa:!0});return T1(l,_)})(await P1(n),n.asyncQueue,e,t,i))),i.promise}function q4(n,e,t={}){const i=new hr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,p,g){const v=new O1({next:w=>{v.Nu(),u.enqueueAndForget((()=>w1(l,_))),w.fromCache&&p.source==="server"?g.reject(new de(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),_=new S1(f,v,{includeMetadataChanges:!0,qa:!0});return T1(l,_)})(await P1(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="firestore.googleapis.com",sw=!0;class iw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=L1,this.ssl=sw}else this.host=e.host,this.ssl=e.ssl??sw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=u1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EM)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $f{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new QD;switch(i.type){case"firstParty":return new ZD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=nw.get(t);i&&(fe("ComponentProvider","Removing Datastore"),nw.delete(t),i.terminate())})(this),Promise.resolve()}}function H4(n,e,t,i={}){n=_r(n,$f);const a=br(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(xf(`https://${f}`),Cf("Firestore",!0)),l.host!==L1&&l.host!==f&&Il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:a,emulatorOptions:i};if(!pa(p,u)&&(n._setSettings(p),i.mockUserToken)){let g,v;if(typeof i.mockUserToken=="string")g=i.mockUserToken,v=In.MOCK_USER;else{g=N_(i.mockUserToken,n._app?.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new In(_)}n._authCredentials=new WD(new EA(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ql(this.firestore,e,this._query)}}class Vt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Uu(t,Vt._jsonSchema))return new Vt(e,i||null,new we(yt.fromString(t.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Yt("string",Vt._jsonSchemaVersion),referencePath:Yt("string")};class fa extends ql{constructor(e,t,i){super(e,t,W_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new we(e))}withConverter(e){return new fa(this.firestore,e,this._path)}}function G4(n,e,...t){if(n=Lt(n),TA("collection","path",e),n instanceof $f){const i=yt.fromString(e,...t);return _T(i),new fa(n,null,i)}{if(!(n instanceof Vt||n instanceof fa))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yt.fromString(e,...t));return _T(i),new fa(n.firestore,null,i)}}function sa(n,e,...t){if(n=Lt(n),arguments.length===1&&(e=H_.newId()),TA("doc","path",e),n instanceof $f){const i=yt.fromString(e,...t);return gT(i),new Vt(n,null,new we(i))}{if(!(n instanceof Vt||n instanceof fa))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yt.fromString(e,...t));return gT(i),new Vt(n.firestore,n instanceof fa?n.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="AsyncQueue";class aw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new m1(this,"async_queue_retry"),this._c=()=>{const i=pg();i&&fe(rw,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=pg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bl(e))throw e;fe(rw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,gr("INTERNAL UNHANDLED ERROR: ",ow(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=cy.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ce(47125,{Pc:ow(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ow(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Hu extends $f{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new aw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aw(e),this._firestoreClient=void 0,await e}}}function $4(n,e){const t=typeof n=="object"?n:Nf(),i=typeof n=="string"?n:tf,a=Ou(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=I_("firestore");l&&H4(a,...l)}return a}function my(n){if(n._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||K4(n),n._firestoreClient}function K4(n){const e=n._freezeSettings(),t=(function(a,l,u,f){return new gO(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,V1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new j4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xs(Sn.fromBase64String(e))}catch(t){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xs(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Uu(e,xs._jsonSchema))return xs.fromBase64String(e.bytes)}}xs._jsonSchemaVersion="firestore/bytes/1.0",xs._jsonSchema={type:Yt("string",xs._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ki._jsonSchemaVersion}}static fromJSON(e){if(Uu(e,ki._jsonSchema))return new ki(e.latitude,e.longitude)}}ki._jsonSchemaVersion="firestore/geoPoint/1.0",ki._jsonSchema={type:Yt("string",ki._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Uu(e,Di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Di(e.vectorValues);throw new de(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:Yt("string",Di._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=/^__.*__$/;class Q4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ra(e,this.data,this.fieldMask,t,this.fieldTransforms):new zu(e,this.data,t,this.fieldTransforms)}}class U1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ra(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function j1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class gy{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return df(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(j1(this.Ac)&&Y4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class W4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||qf(e)}Cc(e,t,i,a=!1){return new gy({Ac:e,methodName:t,Dc:i,path:wn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _y(n){const e=n._freezeSettings(),t=qf(n._databaseId);return new W4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function X4(n,e,t,i,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);yy("Data must be an object, but it was:",u,i);const f=z1(i,u);let p,g;if(l.merge)p=new us(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const _ of l.mergeFields){const w=r_(e,_,t);if(!u.contains(w))throw new de(ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);F1(v,w)||v.push(w)}p=new us(v),g=u.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,g=u.fieldTransforms;return new Q4(new Wn(f),p,g)}class Yf extends py{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}function J4(n,e,t,i){const a=n.Cc(1,e,t);yy("Data must be an object, but it was:",a,i);const l=[],u=Wn.empty();Ia(i,((p,g)=>{const v=vy(e,p,t);g=Lt(g);const _=a.yc(v);if(g instanceof Yf)l.push(v);else{const w=Gu(g,_);w!=null&&(l.push(v),u.set(v,w))}}));const f=new us(l);return new U1(u,f,a.fieldTransforms)}function Z4(n,e,t,i,a,l){const u=n.Cc(1,e,t),f=[r_(e,i,t)],p=[a];if(l.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)f.push(r_(e,l[w])),p.push(l[w+1]);const g=[],v=Wn.empty();for(let w=f.length-1;w>=0;--w)if(!F1(g,f[w])){const I=f[w];let V=p[w];V=Lt(V);const G=u.yc(I);if(V instanceof Yf)g.push(I);else{const H=Gu(V,G);H!=null&&(g.push(I),v.set(I,H))}}const _=new us(g);return new U1(v,_,u.fieldTransforms)}function eP(n,e,t,i=!1){return Gu(t,n.Cc(i?4:3,e))}function Gu(n,e){if(B1(n=Lt(n)))return yy("Unsupported field value:",e,n),z1(n,e);if(n instanceof py)return(function(i,a){if(!j1(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const f of i){let p=Gu(f,a.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return jO(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=pt.fromDate(i);return{timestampValue:lf(a.serializer,l)}}if(i instanceof pt){const l=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:lf(a.serializer,l)}}if(i instanceof ki)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xs)return{bytesValue:s1(a.serializer,i._byteString)};if(i instanceof Vt){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ey(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Di)return(function(u,f){return{mapValue:{fields:{[kA]:{stringValue:DA},[nf]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return X_(f.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Mf(i)}`)})(n,e)}function z1(n,e){const t={};return AA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(n,((i,a)=>{const l=Gu(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function B1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof ki||n instanceof xs||n instanceof Vt||n instanceof py||n instanceof Di)}function yy(n,e,t){if(!B1(t)||!wA(t)){const i=Mf(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function r_(n,e,t){if((e=Lt(e))instanceof Kf)return e._internalPath;if(typeof e=="string")return vy(n,e);throw df("Field path arguments must be of type string or ",n,!1,void 0,t)}const tP=new RegExp("[~\\*/\\[\\]]");function vy(n,e,t){if(e.search(tP)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kf(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function df(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${i}`),u&&(p+=` in document ${a}`),p+=")"),new de(ee.INVALID_ARGUMENT,f+n+p)}function F1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(by("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class nP extends q1{data(){return super.data()}}function by(n,e){return typeof e=="string"?vy(n,e):e instanceof Kf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ey{}class iP extends Ey{}function rP(n,e,...t){let i=[];e instanceof Ey&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((p=>p instanceof Ty)).length,f=l.filter((p=>p instanceof Qf)).length;if(u>1||u>0&&f>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class Qf extends iP{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Qf(e,t,i)}_apply(e){const t=this._parse(e);return H1(e._query,t),new ql(e.firestore,e.converter,Yg(e._query,t))}_parse(e){const t=_y(e.firestore);return(function(l,u,f,p,g,v,_){let w;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){cw(_,v);const V=[];for(const G of _)V.push(lw(p,l,G));w={arrayValue:{values:V}}}else w=lw(p,l,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||cw(_,v),w=eP(f,u,_,v==="in"||v==="not-in");return Kt.create(g,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function aP(n,e,t){const i=e,a=by("where",n);return Qf._create(a,i,t)}class Ty extends Ey{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ty(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Js.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const f=l.getFlattenedFilters();for(const p of f)H1(u,p),u=Yg(u,p)})(e._query,t),new ql(e.firestore,e.converter,Yg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function lw(n,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zA(e)&&t.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(yt.fromString(t));if(!we.isDocumentKey(i))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return AT(n,new we(i))}if(t instanceof Vt)return AT(n,t._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mf(t)}.`)}function cw(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function H1(n,e){const t=(function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class oP{convertValue(e,t="none"){switch(ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ia(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[nf].arrayValue?.values?.map((i=>Pt(i.doubleValue)));return new Di(t)}convertGeoPoint(e){return new ki(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Lf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const t=ya(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=yt.fromString(e);ot(c1(i),9688,{name:e});const a=new Au(i.get(1),i.get(3)),l=new we(i.popFirst(5));return a.isEqual(t)||gr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fo extends q1{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(by("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=fo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}fo._jsonSchemaVersion="firestore/documentSnapshot/1.0",fo._jsonSchema={type:Yt("string",fo._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class jd extends fo{data(e={}){return super.data(e)}}class Sl{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new au(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new jd(this._firestore,this._userDataWriter,i.key,i,new au(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const p=new jd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new au(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new jd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new au(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return f.type!==0&&(g=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:cP(f.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=H_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(n){n=_r(n,Vt);const e=_r(n.firestore,Hu);return F4(my(e),n._key).then((t=>hP(e,n,t)))}Sl._jsonSchemaVersion="firestore/querySnapshot/1.0",Sl._jsonSchema={type:Yt("string",Sl._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class G1 extends oP{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}function uP(n){n=_r(n,ql);const e=_r(n.firestore,Hu),t=my(e),i=new G1(e);return sP(n._query),q4(t,n._query).then((a=>new Sl(e,i,n,a)))}function uw(n,e,t){n=_r(n,Vt);const i=_r(n.firestore,Hu),a=lP(n.converter,e);return $1(i,[X4(_y(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Ri.none())])}function yg(n,e,t,...i){n=_r(n,Vt);const a=_r(n.firestore,Hu),l=_y(a);let u;return u=typeof(e=Lt(e))=="string"||e instanceof Kf?Z4(l,"updateDoc",n._key,e,t,i):J4(l,"updateDoc",n._key,e),$1(a,[u.toMutation(n._key,Ri.exists(!0))])}function $1(n,e){return(function(i,a){const l=new hr;return i.asyncQueue.enqueueAndForget((async()=>N4(await B4(i),a,l))),l.promise})(my(n),e)}function hP(n,e,t){const i=t.docs.get(e._key),a=new G1(n);return new fo(n,a,e._key,i,new au(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){jl=a})(Sa),ga(new fr("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Hu(new XD(i.getProvider("auth-internal")),new eO(u,i.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(g.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Is(dT,fT,e),Is(dT,fT,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="firebasestorage.googleapis.com",dP="storageBucket",fP=120*1e3,mP=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Pi{constructor(e,t,i=0){super(vg(e),`Firebase Storage: ${t} (${vg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mi||(Mi={}));function vg(n){return"storage/"+n}function pP(){const n="An unknown error occurred, please check the error payload for server response.";return new Vi(Mi.UNKNOWN,n)}function gP(){return new Vi(Mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _P(){return new Vi(Mi.CANCELED,"User canceled the upload/download.")}function yP(n){return new Vi(Mi.INVALID_URL,"Invalid URL '"+n+"'.")}function vP(n){return new Vi(Mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function hw(n){return new Vi(Mi.INVALID_ARGUMENT,n)}function Y1(){return new Vi(Mi.APP_DELETED,"The Firebase app was deleted.")}function bP(n){return new Vi(Mi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Ys.makeFromUrl(e,t)}catch{return new Ys(e,"")}if(i.path==="")return i;throw vP(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(me){me.path.charAt(me.path.length-1)==="/"&&(me.path_=me.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+a+u,"i"),p={bucket:1,path:3};function g(me){me.path_=decodeURIComponent(me.path)}const v="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",I=new RegExp(`^https?://${_}/${v}/b/${a}/o${w}`,"i"),V={bucket:1,path:3},G=t===K1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,H="([^?#]*)",Y=new RegExp(`^https?://${G}/${a}/${H}`,"i"),re=[{regex:f,indices:p,postModify:l},{regex:I,indices:V,postModify:g},{regex:Y,indices:{bucket:1,path:2},postModify:g}];for(let me=0;me<re.length;me++){const Me=re[me],Ee=Me.regex.exec(e);if(Ee){const N=Ee[Me.indices.bucket];let x=Ee[Me.indices.path];x||(x=""),i=new Ys(N,x),Me.postModify(i);break}}if(i==null)throw yP(e);return i}}class EP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(n,e,t){let i=1,a=null,l=null,u=!1,f=0;function p(){return f===2}let g=!1;function v(...H){g||(g=!0,e.apply(null,H))}function _(H){a=setTimeout(()=>{a=null,n(I,p())},H)}function w(){l&&clearTimeout(l)}function I(H,...Y){if(g){w();return}if(H){w(),v.call(null,H,...Y);return}if(p()||u){w(),v.call(null,H,...Y);return}i<64&&(i*=2);let re;f===1?(f=2,re=0):re=(i+Math.random())*1e3,_(re)}let V=!1;function G(H){V||(V=!0,w(),!g&&(a!==null?(H||(f=2),clearTimeout(a),_(0)):H||(f=1)))}return _(0),l=setTimeout(()=>{u=!0,G(!0)},t),G}function wP(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n){return n!==void 0}function dw(n,e,t,i){if(i<e)throw hw(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw hw(`Invalid value for '${n}'. Expected ${t} or less.`)}function AP(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var ff;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ff||(ff={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,t,i,a,l,u,f,p,g,v,_,w=!0,I=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=v,this.connectionFactory_=_,this.retry=w,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,G)=>{this.resolve_=V,this.reject_=G,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new Sd(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=f=>{const p=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const f=l.getErrorCode()===ff.NO_ERROR,p=l.getStatus();if(!f||xP(p,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===ff.ABORT;i(!1,new Sd(!1,null,v));return}const g=this.successCodes_.indexOf(p)!==-1;i(!0,new Sd(g,l))})},t=(i,a)=>{const l=this.resolve_,u=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(f,f.getResponse());SP(p)?l(p):l()}catch(p){u(p)}else if(f!==null){const p=pP();p.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,p)):u(p)}else if(a.canceled){const p=this.appDelete_?Y1():_P();u(p)}else{const p=gP();u(p)}};this.canceled_?t(!1,new Sd(!1,null,!0)):this.backoffId_=TP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sd{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function IP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function RP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function kP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function DP(n,e,t,i,a,l,u=!0,f=!1){const p=AP(n.urlParams),g=n.url+p,v=Object.assign({},n.headers);return NP(v,e),IP(v,t),RP(v,l),kP(v,i),new CP(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,u,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function MP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this._service=e,t instanceof Ys?this._location=t:this._location=Ys.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new mf(e,t)}get root(){const e=new Ys(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MP(this._location.path)}get storage(){return this._service}get parent(){const e=OP(this._location.path);if(e===null)return null;const t=new Ys(this._location.bucket,e);return new mf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw bP(e)}}function fw(n,e){const t=e?.[dP];return t==null?null:Ys.makeFromBucketSpec(t,n)}function PP(n,e,t,i={}){n.host=`${e}:${t}`;const a=br(e);a&&(xf(`https://${n.host}/b`),Cf("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:N_(l,n.app.options.projectId))}class VP{constructor(e,t,i,a,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=K1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fP,this._maxUploadRetryTime=mP,this._requests=new Set,a!=null?this._bucket=Ys.makeFromBucketSpec(a,this._host):this._bucket=fw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ys.makeFromBucketSpec(this._url,e):this._bucket=fw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mf(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new EP(Y1());{const u=DP(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const mw="@firebase/storage",pw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="storage";function LP(n=Nf(),e){n=Lt(n);const i=Ou(n,Q1).getImmediate({identifier:e}),a=I_("storage");return a&&UP(i,...a),i}function UP(n,e,t,i={}){PP(n,e,t,i)}function jP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new VP(t,i,a,e,Sa)}function zP(){ga(new fr(Q1,jP,"PUBLIC").setMultipleInstances(!0)),Is(mw,pw,""),Is(mw,pw,"esm2020")}zP();var gw={};const _w="@firebase/database",yw="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W1="";function BP(n){W1=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Tn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:vu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Er(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new FP(e)}}catch{}return new qP},ho=X1("localStorage"),HP=X1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=new Rf("@firebase/database"),GP=(function(){let n=1;return function(){return n++}})(),J1=function(n){const e=TN(n),t=new _N;t.update(e);const i=t.digest();return C_.encodeByteArray(i)},$u=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=$u.apply(null,i):typeof i=="object"?e+=Tn(i):e+=i,e+=" "}return e};let fu=null,vw=!0;const $P=function(n,e){ue(!0,"Can't turn on custom loggers persistently."),Al.logLevel=Be.VERBOSE,fu=Al.log.bind(Al)},Nn=function(...n){if(vw===!0&&(vw=!1,fu===null&&HP.get("logging_enabled")===!0&&$P()),fu){const e=$u.apply(null,n);fu(e)}},Ku=function(n){return function(...e){Nn(n,...e)}},a_=function(...n){const e="FIREBASE INTERNAL ERROR: "+$u(...n);Al.error(e)},vr=function(...n){const e=`FIREBASE FATAL ERROR: ${$u(...n)}`;throw Al.error(e),new Error(e)},hs=function(...n){const e="FIREBASE WARNING: "+$u(...n);Al.warn(e)},KP=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Z1=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},YP=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ml="[MIN_NAME]",yo="[MAX_NAME]",Hl=function(n,e){if(n===e)return 0;if(n===Ml||e===yo)return-1;if(e===Ml||n===yo)return 1;{const t=bw(n),i=bw(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},QP=function(n,e){return n===e?0:n<e?-1:1},Qc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Tn(e))},wy=function(n){if(typeof n!="object"||n===null)return Tn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Tn(e[i]),t+=":",t+=wy(n[e[i]]);return t+="}",t},ex=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(n.substring(a,t)):i.push(n.substring(a,a+e));return i};function Ns(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const tx=function(n){ue(!Z1(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,l,u,f,p;n===0?(l=0,u=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=f+i,u=Math.round(n*Math.pow(2,t-f)-Math.pow(2,t))):(l=0,u=Math.round(n/Math.pow(2,1-i-t))));const g=[];for(p=t;p;p-=1)g.push(u%2?1:0),u=Math.floor(u/2);for(p=e;p;p-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(a?1:0),g.reverse();const v=g.join("");let _="";for(p=0;p<64;p+=8){let w=parseInt(v.substr(p,8),2).toString(16);w.length===1&&(w="0"+w),_=_+w}return _.toLowerCase()},WP=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},XP=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},JP=new RegExp("^-?(0*)\\d{1,10}$"),ZP=-2147483648,eV=2147483647,bw=function(n){if(JP.test(n)){const e=Number(n);if(e>=ZP&&e<=eV)return e}return null},Yu=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw hs("Exception was thrown by user callback.",t),e},Math.floor(0))}},tV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},mu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,jn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){hs(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hs(e)}}class zd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}zd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="5",nx="v",sx="s",ix="r",rx="f",ax=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ox="ls",lx="p",o_="ac",cx="websocket",ux="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,i,a,l=!1,u="",f=!1,p=!1,g=null){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ho.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ho.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function iV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function dx(n,e,t){ue(typeof e=="string","typeof type must == string"),ue(typeof t=="object","typeof params must == object");let i;if(e===cx)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===ux)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);iV(n)&&(t.ns=n.namespace);const a=[];return Ns(t,(l,u)=>{a.push(l+"="+u)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.counters_={}}incrementCounter(e,t=1){Er(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return WR(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg={},Eg={};function Ay(n){const e=n.toString();return bg[e]||(bg[e]=new rV),bg[e]}function aV(n,e){const t=n.toString();return Eg[t]||(Eg[t]=e()),Eg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&Yu(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="start",lV="close",cV="pLPCommand",uV="pRTLPCB",fx="id",mx="pw",px="ser",hV="cb",dV="seg",fV="ts",mV="d",pV="dframe",gx=1870,_x=30,gV=gx-_x,_V=25e3,yV=3e4;class yl{constructor(e,t,i,a,l,u,f){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ku(e),this.stats_=Ay(t),this.urlFn=p=>(this.appCheckToken&&(p[o_]=this.appCheckToken),dx(t,ux,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new oV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(yV)),YP(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xy((...l)=>{const[u,f,p,g,v]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Ew)this.id=f,this.password=p;else if(u===lV)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const i={};i[Ew]="t",i[px]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[hV]=this.scriptTagHolder.uniqueCallbackIdentifier),i[nx]=Sy,this.transportSessionId&&(i[sx]=this.transportSessionId),this.lastSessionId&&(i[ox]=this.lastSessionId),this.applicationId&&(i[lx]=this.applicationId),this.appCheckToken&&(i[o_]=this.appCheckToken),typeof location<"u"&&location.hostname&&ax.test(location.hostname)&&(i[ix]=rx);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yl.forceAllow_=!0}static forceDisallow(){yl.forceDisallow_=!0}static isAvailable(){return yl.forceAllow_?!0:!yl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!WP()&&!XP()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=wS(t),a=ex(i,gV);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[pV]="t",i[fx]=e,i[mx]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Tn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class xy{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=GP(),window[cV+this.uniqueCallbackIdentifier]=e,window[uV+this.uniqueCallbackIdentifier]=t,this.myIFrame=xy.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){Nn("frame writing exception"),f.stack&&Nn(f.stack),Nn(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Nn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[fx]=this.myID,e[mx]=this.myPW,e[px]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_x+i.length<=gx;){const u=this.pendingSegs.shift();i=i+"&"+dV+a+"="+u.seg+"&"+fV+a+"="+u.ts+"&"+mV+a+"="+u.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(_V)),l=()=>{clearTimeout(a),i()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=16384,bV=45e3;let pf=null;typeof MozWebSocket<"u"?pf=MozWebSocket:typeof WebSocket<"u"&&(pf=WebSocket);class $s{constructor(e,t,i,a,l,u,f){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ku(this.connId),this.stats_=Ay(t),this.connURL=$s.connectionURL_(t,u,f,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,l){const u={};return u[nx]=Sy,typeof location<"u"&&location.hostname&&ax.test(location.hostname)&&(u[ix]=rx),t&&(u[sx]=t),i&&(u[ox]=i),a&&(u[o_]=a),l&&(u[lx]=l),dx(e,cx,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ho.set("previous_websocket_failure",!0);try{let i;lN(),this.mySock=new pf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){$s.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&pf!==null&&!$s.forceDisallow_}static previouslyFailed(){return ho.isInMemoryStorage||ho.get("previous_websocket_failure")===!0}markConnectionHealthy(){ho.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=vu(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=Tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=ex(t,vV);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(bV))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}$s.responsesRequiredToBeHealthy=2;$s.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{static get ALL_TRANSPORTS(){return[yl,$s]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=$s&&$s.isAvailable();let i=t&&!$s.previouslyFailed();if(e.webSocketOnly&&(t||hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$s];else{const a=this.transports_=[];for(const l of Ru.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);Ru.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ru.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=6e4,TV=5e3,wV=10*1024,SV=100*1024,Tg="t",Tw="d",AV="s",ww="r",xV="e",Sw="o",Aw="a",xw="n",Cw="p",CV="h";class IV{constructor(e,t,i,a,l,u,f,p,g,v){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ku("c:"+this.id+":"),this.transportManager_=new Ru(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=mu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>SV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>wV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Tg in e){const t=e[Tg];t===Aw?this.upgradeIfSecondaryHealthy_():t===ww?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Sw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Qc("t",e),i=Qc("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Cw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Aw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:xw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Qc("t",e),i=Qc("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Qc(Tg,e);if(Tw in e){const i=e[Tw];if(t===CV){const a={...i};this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===xw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===AV?this.onConnectionShutdown_(i):t===ww?this.onReset_(i):t===xV?a_("Server Error: "+i):t===Sw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):a_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Sy!==i&&hs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),mu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(EV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(TV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Cw,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ho.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.allowedEvents_=e,this.listeners_={},ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!i||i===a[l].context)){a.splice(l,1);return}}validateEventType_(e){ue(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends vx{static getInstance(){return new gf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!k_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=32,Rw=768;class St{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function gt(){return new St("")}function We(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wa(n){return n.pieces_.length-n.pieceNum_}function wt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new St(n.pieces_,e)}function bx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function RV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Ex(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Tx(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new St(e,0)}function un(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof St)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new St(t,0)}function Ye(n){return n.pieceNum_>=n.pieces_.length}function Cs(n,e){const t=We(n),i=We(e);if(t===null)return e;if(t===i)return Cs(wt(n),wt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function wx(n,e){if(wa(n)!==wa(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Qs(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(wa(n)>wa(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class NV{constructor(e,t){this.errorPrefix_=t,this.parts_=Ex(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=If(this.parts_[i]);Sx(this)}}function kV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=If(e),Sx(n)}function DV(n){const e=n.parts_.pop();n.byteLength_-=If(e),n.parts_.length>0&&(n.byteLength_-=1)}function Sx(n){if(n.byteLength_>Rw)throw new Error(n.errorPrefix_+"has a key path longer than "+Rw+" bytes ("+n.byteLength_+").");if(n.parts_.length>Iw)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Iw+") or object contains a cycle "+lo(n))}function lo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy extends vx{static getInstance(){return new Cy}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ue(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=1e3,OV=300*1e3,Nw=30*1e3,MV=1.3,PV=3e4,VV="server_kill",kw=3;class dr extends yx{constructor(e,t,i,a,l,u,f,p){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=f,this.authOverride_=p,this.id=dr.nextPersistentConnectionId_++,this.log_=Ku("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wc,this.maxReconnectDelay_=OV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Cy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&gf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(Tn(l)),ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new R_,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const f=u.d;u.s==="ok"?t.resolve(f):t.reject(f)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,i,a){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ue(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const f={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(u).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i},u="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,f=>{const p=f.d,g=f.s;dr.warnOnListenWarnings_(p,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(g,p))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Er(e,"w")){const i=Cl(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();hs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||gN(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Nw)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=pN(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const l=a.s,u=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},u="n";a&&(l.q=i,l.t=a),this.sendRequest(u,l)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const l={p:t,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,l){this.initConnection_();const u={p:t,d:i};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:a}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Tn(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):a_("Unrecognized action received from server: "+Tn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Wc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>PV&&(this.reconnectDelay_=Wc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*MV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+dr.nextConnectionId_++,l=this.lastSessionId;let u=!1,f=null;const p=function(){f?f.close():(u=!0,i())},g=function(_){ue(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(_)};this.realtime_={close:p,sendRequest:g};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,w]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);u?Nn("getToken() completed but was canceled"):(Nn("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=w&&w.token,f=new IV(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,I=>{hs(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(VV)},l))}catch(_){this.log_("Failed to get token: "+_),u||(this.repoInfo_.nodeAdmin&&hs(_),p())}}}interrupt(e){Nn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Nn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],kg(this.interruptReasons_)&&(this.reconnectDelay_=Wc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(l=>wy(l)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new St(e).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){Nn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=kw&&(this.reconnectDelay_=Nw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Nn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=kw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+W1.replace(/\./g,"-")]=1,k_()?e["framework.cordova"]=1:IS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=gf.getInstance().currentlyOnline();return kg(this.interruptReasons_)&&e}}dr.nextPersistentConnectionId_=0;dr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Xe(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Xe(Ml,e),a=new Xe(Ml,t);return this.compare(i,a)!==0}minPost(){return Xe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad;class Ax extends Wf{static get __EMPTY_NODE(){return Ad}static set __EMPTY_NODE(e){Ad=e}compare(e,t){return Hl(e.name,t.name)}isDefinedOn(e){throw Vl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Xe.MIN}maxPost(){return new Xe(yo,Ad)}makePost(e,t){return ue(typeof e=="string","KeyIndex indexValue must always be a string."),new Xe(e,Ad)}toString(){return".key"}}const xl=new Ax;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,i,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,a&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class cn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??cn.RED,this.left=a??Xn.EMPTY_NODE,this.right=l??Xn.EMPTY_NODE}copy(e,t,i,a,l){return new cn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Xn.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}cn.RED=!0;cn.BLACK=!1;class LV{copy(e,t,i,a,l){return this}insert(e,t,i){return new cn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Xn{constructor(e,t=Xn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Xn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,cn.BLACK,null,null))}remove(e){return new Xn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,cn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new xd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new xd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new xd(this.root_,null,this.comparator_,!0,e)}}Xn.EMPTY_NODE=new LV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(n,e){return Hl(n.name,e.name)}function Iy(n,e){return Hl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l_;function jV(n){l_=n}const xx=function(n){return typeof n=="number"?"number:"+tx(n):"string:"+n},Cx=function(n){if(n.isLeafNode()){const e=n.val();ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Er(e,".sv"),"Priority must be a string or number.")}else ue(n===l_||n.isEmpty(),"priority of unexpected type.");ue(n===l_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dw;class on{static set __childrenNodeConstructor(e){Dw=e}static get __childrenNodeConstructor(){return Dw}constructor(e,t=on.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Cx(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new on(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:on.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ye(e)?this:We(e)===".priority"?this.priorityNode_:on.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:on.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=We(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ue(i!==".priority"||wa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,on.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+xx(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=tx(this.value_):e+=this.value_,this.lazyHash_=J1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===on.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof on.__childrenNodeConstructor?-1:(ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=on.VALUE_TYPE_ORDER.indexOf(t),l=on.VALUE_TYPE_ORDER.indexOf(i);return ue(a>=0,"Unknown leaf type: "+t),ue(l>=0,"Unknown leaf type: "+i),a===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}on.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ix,Rx;function zV(n){Ix=n}function BV(n){Rx=n}class FV extends Wf{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),l=i.compareTo(a);return l===0?Hl(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Xe.MIN}maxPost(){return new Xe(yo,new on("[PRIORITY-POST]",Rx))}makePost(e,t){const i=Ix(e);return new Xe(t,new on("[PRIORITY-POST]",i))}toString(){return".priority"}}const Dn=new FV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=Math.log(2);class HV{constructor(e){const t=l=>parseInt(Math.log(l)/qV,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _f=function(n,e,t,i){n.sort(e);const a=function(p,g){const v=g-p;let _,w;if(v===0)return null;if(v===1)return _=n[p],w=t?t(_):_,new cn(w,_.node,cn.BLACK,null,null);{const I=parseInt(v/2,10)+p,V=a(p,I),G=a(I+1,g);return _=n[I],w=t?t(_):_,new cn(w,_.node,cn.BLACK,V,G)}},l=function(p){let g=null,v=null,_=n.length;const w=function(V,G){const H=_-V,Y=_;_-=V;const ce=a(H+1,Y),re=n[H],me=t?t(re):re;I(new cn(me,re.node,G,null,ce))},I=function(V){g?(g.left=V,g=V):(v=V,g=V)};for(let V=0;V<p.count;++V){const G=p.nextBitIsOne(),H=Math.pow(2,p.count-(V+1));G?w(H,cn.BLACK):(w(H,cn.BLACK),w(H,cn.RED))}return v},u=new HV(n.length),f=l(u);return new Xn(i||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wg;const dl={};class cr{static get Default(){return ue(dl&&Dn,"ChildrenNode.ts has not been loaded"),wg=wg||new cr({".priority":dl},{".priority":Dn}),wg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Cl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Xn?t:null}hasIndex(e){return Er(this.indexSet_,e.toString())}addIndex(e,t){ue(e!==xl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const l=t.getIterator(Xe.Wrap);let u=l.getNext();for(;u;)a=a||e.isDefinedOn(u.node),i.push(u),u=l.getNext();let f;a?f=_f(i,e.getCompare()):f=dl;const p=e.toString(),g={...this.indexSet_};g[p]=e;const v={...this.indexes_};return v[p]=f,new cr(v,g)}addToIndexes(e,t){const i=$d(this.indexes_,(a,l)=>{const u=Cl(this.indexSet_,l);if(ue(u,"Missing index implementation for "+l),a===dl)if(u.isDefinedOn(e.node)){const f=[],p=t.getIterator(Xe.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&f.push(g),g=p.getNext();return f.push(e),_f(f,u.getCompare())}else return dl;else{const f=t.get(e.name);let p=a;return f&&(p=p.remove(new Xe(e.name,f))),p.insert(e,e.node)}});return new cr(i,this.indexSet_)}removeFromIndexes(e,t){const i=$d(this.indexes_,a=>{if(a===dl)return a;{const l=t.get(e.name);return l?a.remove(new Xe(e.name,l)):a}});return new cr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc;class at{static get EMPTY_NODE(){return Xc||(Xc=new at(new Xn(Iy),null,cr.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Cx(this.priorityNode_),this.children_.isEmpty()&&ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xc}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Xc:t}}getChild(e){const t=We(e);return t===null?this:this.getImmediateChild(t).getChild(wt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ue(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Xe(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(i,this.children_));const u=a.isEmpty()?Xc:this.priorityNode_;return new at(a,u,l)}}updateChild(e,t){const i=We(e);if(i===null)return t;{ue(We(e)!==".priority"||wa(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(wt(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,l=!0;if(this.forEachChild(Dn,(u,f)=>{t[u]=f.val(e),i++,l&&at.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):l=!1}),!e&&l&&a<2*i){const u=[];for(const f in t)u[f]=t[f];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+xx(this.getPriority().val())+":"),this.forEachChild(Dn,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":J1(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Xe(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Xe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Xe(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Xe.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Xe.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qu?-1:0}withIndex(e){if(e===xl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===xl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Dn),a=t.getIterator(Dn);let l=i.getNext(),u=a.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=i.getNext(),u=a.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===xl?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class GV extends at{constructor(){super(new Xn(Iy),at.EMPTY_NODE,cr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const Qu=new GV;Object.defineProperties(Xe,{MIN:{value:new Xe(Ml,at.EMPTY_NODE)},MAX:{value:new Xe(yo,Qu)}});Ax.__EMPTY_NODE=at.EMPTY_NODE;on.__childrenNodeConstructor=at;jV(Qu);BV(Qu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=!0;function kn(n,e=null){if(n===null)return at.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new on(t,kn(e))}if(!(n instanceof Array)&&$V){const t=[];let i=!1;if(Ns(n,(u,f)=>{if(u.substring(0,1)!=="."){const p=kn(f);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new Xe(u,p)))}}),t.length===0)return at.EMPTY_NODE;const l=_f(t,UV,u=>u.name,Iy);if(i){const u=_f(t,Dn.getCompare());return new at(l,kn(e),new cr({".priority":u},{".priority":Dn}))}else return new at(l,kn(e),cr.Default)}else{let t=at.EMPTY_NODE;return Ns(n,(i,a)=>{if(Er(n,i)&&i.substring(0,1)!=="."){const l=kn(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(i,l))}}),t.updatePriority(kn(e))}}zV(kn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV extends Wf{constructor(e){super(),this.indexPath_=e,ue(!Ye(e)&&We(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),l=i.compareTo(a);return l===0?Hl(e.name,t.name):l}makePost(e,t){const i=kn(e),a=at.EMPTY_NODE.updateChild(this.indexPath_,i);return new Xe(t,a)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,Qu);return new Xe(yo,e)}toString(){return Ex(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV extends Wf{compare(e,t){const i=e.node.compareTo(t.node);return i===0?Hl(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Xe.MIN}maxPost(){return Xe.MAX}makePost(e,t){const i=kn(e);return new Xe(t,i)}toString(){return".value"}}const QV=new YV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(n){return{type:"value",snapshotNode:n}}function XV(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function JV(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ow(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function ZV(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ml}hasEnd(){return this.endSet_}getIndexEndValue(){return ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dn}copy(){const e=new Ry;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Mw(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Dn?t="$priority":n.index_===QV?t="$value":n.index_===xl?t="$key":(ue(n.index_ instanceof KV,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Tn(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=Tn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Tn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Tn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Tn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Pw(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Dn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends yx{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=Ku("p:rest:"),this.listens_={}}listen(e,t,i,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=yf.getListenId_(e,i),f={};this.listens_[u]=f;const p=Mw(e._queryParams);this.restRequest_(l+".json",p,(g,v)=>{let _=v;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(l,_,!1,i),Cl(this.listens_,u)===f){let w;g?g===401?w="permission_denied":w="rest_error:"+g:w="ok",a(w,null)}})}unlisten(e,t){const i=yf.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Mw(e._queryParams),i=e._path.toString(),a=new R_;return this.restRequest_(i+".json",t,(l,u)=>{let f=u;l===404&&(f=null,l=null),l===null?(this.onDataUpdate_(i,f,!1,null),a.resolve(f)):a.reject(new Error(f))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ll(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&f.readyState===4){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let p=null;if(f.status>=200&&f.status<300){try{p=vu(f.responseText)}catch{hs("Failed to parse JSON response for "+u+": "+f.responseText)}i(null,p)}else f.status!==401&&f.status!==404&&hs("Got unsuccessful REST response for "+u+" Status: "+f.status),i(f.status);i=null}},f.open("GET",u,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(){return{value:null,children:new Map}}function Nx(n,e,t){if(Ye(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=We(e);n.children.has(i)||n.children.set(i,vf());const a=n.children.get(i);e=wt(e),Nx(a,e,t)}}function c_(n,e,t){n.value!==null?t(e,n.value):tL(n,(i,a)=>{const l=new St(e.toString()+"/"+i);c_(a,l,t)})}function tL(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&Ns(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=10*1e3,sL=30*1e3,iL=300*1e3;class rL{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new nL(e);const i=Vw+(sL-Vw)*Math.random();mu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Ns(e,(a,l)=>{l>0&&Er(this.statsToReport_,a)&&(t[a]=l,i=!0)}),i&&this.server_.reportStats(t),mu(this.reportStats_.bind(this),Math.floor(Math.random()*2*iL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xi||(xi={}));function kx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Dx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ox(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=xi.ACK_USER_WRITE,this.source=kx()}operationForChild(e){if(Ye(this.path)){if(this.affectedTree.value!=null)return ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new St(e));return new bf(gt(),t,this.revert)}}else return ue(We(this.path)===e,"operationForChild called for unrelated child."),new bf(wt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=xi.OVERWRITE}operationForChild(e){return Ye(this.path)?new vo(this.source,gt(),this.snap.getImmediateChild(e)):new vo(this.source,wt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=xi.MERGE}operationForChild(e){if(Ye(this.path)){const t=this.children.subtree(new St(e));return t.isEmpty()?null:t.value?new vo(this.source,gt(),t.value):new Nu(this.source,gt(),t)}else return ue(We(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Nu(this.source,wt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ye(e))return this.isFullyInitialized()&&!this.filtered_;const t=We(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function aL(n,e,t,i){const a=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(ZV(u.childName,u.snapshotNode))}),Jc(n,a,"child_removed",e,i,t),Jc(n,a,"child_added",e,i,t),Jc(n,a,"child_moved",l,i,t),Jc(n,a,"child_changed",e,i,t),Jc(n,a,"value",e,i,t),a}function Jc(n,e,t,i,a,l){const u=i.filter(f=>f.type===t);u.sort((f,p)=>lL(n,f,p)),u.forEach(f=>{const p=oL(n,f,l);a.forEach(g=>{g.respondsTo(f.type)&&e.push(g.createEvent(p,n.query_))})})}function oL(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function lL(n,e,t){if(e.childName==null||t.childName==null)throw Vl("Should only compare child_ events.");const i=new Xe(e.childName,e.snapshotNode),a=new Xe(t.childName,t.snapshotNode);return n.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(n,e){return{eventCache:n,serverCache:e}}function pu(n,e,t,i){return Mx(new Ny(e,t,i),n.serverCache)}function Px(n,e,t,i){return Mx(n.eventCache,new Ny(e,t,i))}function u_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function bo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sg;const cL=()=>(Sg||(Sg=new Xn(QP)),Sg);class Tt{static fromObject(e){let t=new Tt(null);return Ns(e,(i,a)=>{t=t.set(new St(i),a)}),t}constructor(e,t=cL()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:gt(),value:this.value};if(Ye(e))return null;{const i=We(e),a=this.children.get(i);if(a!==null){const l=a.findRootMostMatchingPathAndValue(wt(e),t);return l!=null?{path:un(new St(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ye(e))return this;{const t=We(e),i=this.children.get(t);return i!==null?i.subtree(wt(e)):new Tt(null)}}set(e,t){if(Ye(e))return new Tt(t,this.children);{const i=We(e),l=(this.children.get(i)||new Tt(null)).set(wt(e),t),u=this.children.insert(i,l);return new Tt(this.value,u)}}remove(e){if(Ye(e))return this.children.isEmpty()?new Tt(null):new Tt(null,this.children);{const t=We(e),i=this.children.get(t);if(i){const a=i.remove(wt(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new Tt(null):new Tt(this.value,l)}else return this}}get(e){if(Ye(e))return this.value;{const t=We(e),i=this.children.get(t);return i?i.get(wt(e)):null}}setTree(e,t){if(Ye(e))return t;{const i=We(e),l=(this.children.get(i)||new Tt(null)).setTree(wt(e),t);let u;return l.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,l),new Tt(this.value,u)}}fold(e){return this.fold_(gt(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,l)=>{i[a]=l.fold_(un(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,gt(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if(Ye(e))return null;{const l=We(e),u=this.children.get(l);return u?u.findOnPath_(wt(e),un(t,l),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gt(),t)}foreachOnPath_(e,t,i){if(Ye(e))return this;{this.value&&i(t,this.value);const a=We(e),l=this.children.get(a);return l?l.foreachOnPath_(wt(e),un(t,a),i):new Tt(null)}}foreach(e){this.foreach_(gt(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(un(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.writeTree_=e}static empty(){return new Xs(new Tt(null))}}function gu(n,e,t){if(Ye(e))return new Xs(new Tt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let l=i.value;const u=Cs(a,e);return l=l.updateChild(u,t),new Xs(n.writeTree_.set(a,l))}else{const a=new Tt(t),l=n.writeTree_.setTree(e,a);return new Xs(l)}}}function Lw(n,e,t){let i=n;return Ns(t,(a,l)=>{i=gu(i,un(e,a),l)}),i}function Uw(n,e){if(Ye(e))return Xs.empty();{const t=n.writeTree_.setTree(e,new Tt(null));return new Xs(t)}}function h_(n,e){return wo(n,e)!=null}function wo(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Cs(t.path,e)):null}function jw(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Dn,(i,a)=>{e.push(new Xe(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Xe(i,a.value))}),e}function ma(n,e){if(Ye(e))return n;{const t=wo(n,e);return t!=null?new Xs(new Tt(t)):new Xs(n.writeTree_.subtree(e))}}function d_(n){return n.writeTree_.isEmpty()}function Pl(n,e){return Vx(gt(),n.writeTree_,e)}function Vx(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(ue(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):t=Vx(un(n,a),l,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(un(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(n,e){return Fx(e,n)}function uL(n,e,t,i,a){ue(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(n.visibleWrites=gu(n.visibleWrites,e,t)),n.lastWriteId=i}function hL(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function dL(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);ue(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let a=i.visible,l=!1,u=n.allWrites.length-1;for(;a&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&fL(f,i.path)?a=!1:Qs(i.path,f.path)&&(l=!0)),u--}if(a){if(l)return mL(n),!0;if(i.snap)n.visibleWrites=Uw(n.visibleWrites,i.path);else{const f=i.children;Ns(f,p=>{n.visibleWrites=Uw(n.visibleWrites,un(i.path,p))})}return!0}else return!1}function fL(n,e){if(n.snap)return Qs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Qs(un(n.path,t),e))return!0;return!1}function mL(n){n.visibleWrites=Ux(n.allWrites,pL,gt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function pL(n){return n.visible}function Ux(n,e,t){let i=Xs.empty();for(let a=0;a<n.length;++a){const l=n[a];if(e(l)){const u=l.path;let f;if(l.snap)Qs(t,u)?(f=Cs(t,u),i=gu(i,f,l.snap)):Qs(u,t)&&(f=Cs(u,t),i=gu(i,gt(),l.snap.getChild(f)));else if(l.children){if(Qs(t,u))f=Cs(t,u),i=Lw(i,f,l.children);else if(Qs(u,t))if(f=Cs(u,t),Ye(f))i=Lw(i,gt(),l.children);else{const p=Cl(l.children,We(f));if(p){const g=p.getChild(wt(f));i=gu(i,gt(),g)}}}else throw Vl("WriteRecord should have .snap or .children")}}return i}function jx(n,e,t,i,a){if(!i&&!a){const l=wo(n.visibleWrites,e);if(l!=null)return l;{const u=ma(n.visibleWrites,e);if(d_(u))return t;if(t==null&&!h_(u,gt()))return null;{const f=t||at.EMPTY_NODE;return Pl(u,f)}}}else{const l=ma(n.visibleWrites,e);if(!a&&d_(l))return t;if(!a&&t==null&&!h_(l,gt()))return null;{const u=function(g){return(g.visible||a)&&(!i||!~i.indexOf(g.writeId))&&(Qs(g.path,e)||Qs(e,g.path))},f=Ux(n.allWrites,u,e),p=t||at.EMPTY_NODE;return Pl(f,p)}}}function gL(n,e,t){let i=at.EMPTY_NODE;const a=wo(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Dn,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(t){const l=ma(n.visibleWrites,e);return t.forEachChild(Dn,(u,f)=>{const p=Pl(ma(l,new St(u)),f);i=i.updateImmediateChild(u,p)}),jw(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const l=ma(n.visibleWrites,e);return jw(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function _L(n,e,t,i,a){ue(i||a,"Either existingEventSnap or existingServerSnap must exist");const l=un(e,t);if(h_(n.visibleWrites,l))return null;{const u=ma(n.visibleWrites,l);return d_(u)?a.getChild(t):Pl(u,a.getChild(t))}}function yL(n,e,t,i){const a=un(e,t),l=wo(n.visibleWrites,a);if(l!=null)return l;if(i.isCompleteForChild(t)){const u=ma(n.visibleWrites,a);return Pl(u,i.getNode().getImmediateChild(t))}else return null}function vL(n,e){return wo(n.visibleWrites,e)}function bL(n,e,t,i,a,l,u){let f;const p=ma(n.visibleWrites,e),g=wo(p,gt());if(g!=null)f=g;else if(t!=null)f=Pl(p,t);else return[];if(f=f.withIndex(u),!f.isEmpty()&&!f.isLeafNode()){const v=[],_=u.getCompare(),w=l?f.getReverseIteratorFrom(i,u):f.getIteratorFrom(i,u);let I=w.getNext();for(;I&&v.length<a;)_(I,i)!==0&&v.push(I),I=w.getNext();return v}else return[]}function EL(){return{visibleWrites:Xs.empty(),allWrites:[],lastWriteId:-1}}function f_(n,e,t,i){return jx(n.writeTree,n.treePath,e,t,i)}function zx(n,e){return gL(n.writeTree,n.treePath,e)}function zw(n,e,t,i){return _L(n.writeTree,n.treePath,e,t,i)}function Ef(n,e){return vL(n.writeTree,un(n.treePath,e))}function TL(n,e,t,i,a,l){return bL(n.writeTree,n.treePath,e,t,i,a,l)}function ky(n,e,t){return yL(n.writeTree,n.treePath,e,t)}function Bx(n,e){return Fx(un(n.treePath,e),n.writeTree)}function Fx(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ue(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ue(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(i,Ow(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(i,JV(i,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(i,XV(i,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(i,Ow(i,e.snapshotNode,a.oldSnap));else throw Vl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const qx=new SL;class Dy{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Ny(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ky(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bo(this.viewCache_),l=TL(this.writes_,a,t,1,i,e);return l.length===0?null:l[0]}}function AL(n,e){ue(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ue(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function xL(n,e,t,i,a){const l=new wL;let u,f;if(t.type===xi.OVERWRITE){const g=t;g.source.fromUser?u=m_(n,e,g.path,g.snap,i,a,l):(ue(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered()&&!Ye(g.path),u=Tf(n,e,g.path,g.snap,i,a,f,l))}else if(t.type===xi.MERGE){const g=t;g.source.fromUser?u=IL(n,e,g.path,g.children,i,a,l):(ue(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered(),u=p_(n,e,g.path,g.children,i,a,f,l))}else if(t.type===xi.ACK_USER_WRITE){const g=t;g.revert?u=kL(n,e,g.path,i,a,l):u=RL(n,e,g.path,g.affectedTree,i,a,l)}else if(t.type===xi.LISTEN_COMPLETE)u=NL(n,e,t.path,i,l);else throw Vl("Unknown operation type: "+t.type);const p=l.getChanges();return CL(e,u,p),{viewCache:u,changes:p}}function CL(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=u_(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&t.push(WV(u_(e)))}}function Hx(n,e,t,i,a,l){const u=e.eventCache;if(Ef(i,t)!=null)return e;{let f,p;if(Ye(t))if(ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=bo(e),v=g instanceof at?g:at.EMPTY_NODE,_=zx(i,v);f=n.filter.updateFullNode(e.eventCache.getNode(),_,l)}else{const g=f_(i,bo(e));f=n.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=We(t);if(g===".priority"){ue(wa(t)===1,"Can't have a priority with additional path components");const v=u.getNode();p=e.serverCache.getNode();const _=zw(i,t,v,p);_!=null?f=n.filter.updatePriority(v,_):f=u.getNode()}else{const v=wt(t);let _;if(u.isCompleteForChild(g)){p=e.serverCache.getNode();const w=zw(i,t,u.getNode(),p);w!=null?_=u.getNode().getImmediateChild(g).updateChild(v,w):_=u.getNode().getImmediateChild(g)}else _=ky(i,g,e.serverCache);_!=null?f=n.filter.updateChild(u.getNode(),g,_,v,a,l):f=u.getNode()}}return pu(e,f,u.isFullyInitialized()||Ye(t),n.filter.filtersNodes())}}function Tf(n,e,t,i,a,l,u,f){const p=e.serverCache;let g;const v=u?n.filter:n.filter.getIndexedFilter();if(Ye(t))g=v.updateFullNode(p.getNode(),i,null);else if(v.filtersNodes()&&!p.isFiltered()){const I=p.getNode().updateChild(t,i);g=v.updateFullNode(p.getNode(),I,null)}else{const I=We(t);if(!p.isCompleteForPath(t)&&wa(t)>1)return e;const V=wt(t),H=p.getNode().getImmediateChild(I).updateChild(V,i);I===".priority"?g=v.updatePriority(p.getNode(),H):g=v.updateChild(p.getNode(),I,H,V,qx,null)}const _=Px(e,g,p.isFullyInitialized()||Ye(t),v.filtersNodes()),w=new Dy(a,_,l);return Hx(n,_,t,a,w,f)}function m_(n,e,t,i,a,l,u){const f=e.eventCache;let p,g;const v=new Dy(a,e,l);if(Ye(t))g=n.filter.updateFullNode(e.eventCache.getNode(),i,u),p=pu(e,g,!0,n.filter.filtersNodes());else{const _=We(t);if(_===".priority")g=n.filter.updatePriority(e.eventCache.getNode(),i),p=pu(e,g,f.isFullyInitialized(),f.isFiltered());else{const w=wt(t),I=f.getNode().getImmediateChild(_);let V;if(Ye(w))V=i;else{const G=v.getCompleteChild(_);G!=null?bx(w)===".priority"&&G.getChild(Tx(w)).isEmpty()?V=G:V=G.updateChild(w,i):V=at.EMPTY_NODE}if(I.equals(V))p=e;else{const G=n.filter.updateChild(f.getNode(),_,V,w,v,u);p=pu(e,G,f.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function Bw(n,e){return n.eventCache.isCompleteForChild(e)}function IL(n,e,t,i,a,l,u){let f=e;return i.foreach((p,g)=>{const v=un(t,p);Bw(e,We(v))&&(f=m_(n,f,v,g,a,l,u))}),i.foreach((p,g)=>{const v=un(t,p);Bw(e,We(v))||(f=m_(n,f,v,g,a,l,u))}),f}function Fw(n,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function p_(n,e,t,i,a,l,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,g;Ye(t)?g=i:g=new Tt(null).setTree(t,i);const v=e.serverCache.getNode();return g.children.inorderTraversal((_,w)=>{if(v.hasChild(_)){const I=e.serverCache.getNode().getImmediateChild(_),V=Fw(n,I,w);p=Tf(n,p,new St(_),V,a,l,u,f)}}),g.children.inorderTraversal((_,w)=>{const I=!e.serverCache.isCompleteForChild(_)&&w.value===null;if(!v.hasChild(_)&&!I){const V=e.serverCache.getNode().getImmediateChild(_),G=Fw(n,V,w);p=Tf(n,p,new St(_),G,a,l,u,f)}}),p}function RL(n,e,t,i,a,l,u){if(Ef(a,t)!=null)return e;const f=e.serverCache.isFiltered(),p=e.serverCache;if(i.value!=null){if(Ye(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return Tf(n,e,t,p.getNode().getChild(t),a,l,f,u);if(Ye(t)){let g=new Tt(null);return p.getNode().forEachChild(xl,(v,_)=>{g=g.set(new St(v),_)}),p_(n,e,t,g,a,l,f,u)}else return e}else{let g=new Tt(null);return i.foreach((v,_)=>{const w=un(t,v);p.isCompleteForPath(w)&&(g=g.set(v,p.getNode().getChild(w)))}),p_(n,e,t,g,a,l,f,u)}}function NL(n,e,t,i,a){const l=e.serverCache,u=Px(e,l.getNode(),l.isFullyInitialized()||Ye(t),l.isFiltered());return Hx(n,u,t,i,qx,a)}function kL(n,e,t,i,a,l){let u;if(Ef(i,t)!=null)return e;{const f=new Dy(i,e,a),p=e.eventCache.getNode();let g;if(Ye(t)||We(t)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=f_(i,bo(e));else{const _=e.serverCache.getNode();ue(_ instanceof at,"serverChildren would be complete if leaf node"),v=zx(i,_)}v=v,g=n.filter.updateFullNode(p,v,l)}else{const v=We(t);let _=ky(i,v,e.serverCache);_==null&&e.serverCache.isCompleteForChild(v)&&(_=p.getImmediateChild(v)),_!=null?g=n.filter.updateChild(p,v,_,wt(t),f,l):e.eventCache.getNode().hasChild(v)?g=n.filter.updateChild(p,v,at.EMPTY_NODE,wt(t),f,l):g=p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=f_(i,bo(e)),u.isLeafNode()&&(g=n.filter.updateFullNode(g,u,l)))}return u=e.serverCache.isFullyInitialized()||Ef(i,gt())!=null,pu(e,g,u,n.filter.filtersNodes())}}function DL(n,e){const t=bo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ye(e)&&!t.getImmediateChild(We(e)).isEmpty())?t.getChild(e):null}function qw(n,e,t,i){e.type===xi.MERGE&&e.source.queryId!==null&&(ue(bo(n.viewCache_),"We should always have a full cache before handling merges"),ue(u_(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,l=xL(n.processor_,a,e,t,i);return AL(n.processor_,l.viewCache),ue(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,OL(n,l.changes,l.viewCache.eventCache.getNode())}function OL(n,e,t,i){const a=n.eventRegistrations_;return aL(n.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hw;function ML(n){ue(!Hw,"__referenceConstructor has already been defined"),Hw=n}function Oy(n,e,t,i){const a=e.source.queryId;if(a!==null){const l=n.views.get(a);return ue(l!=null,"SyncTree gave us an op for an invalid query."),qw(l,e,t,i)}else{let l=[];for(const u of n.views.values())l=l.concat(qw(u,e,t,i));return l}}function My(n,e){let t=null;for(const i of n.views.values())t=t||DL(i,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gw;function PL(n){ue(!Gw,"__referenceConstructor has already been defined"),Gw=n}class $w{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Tt(null),this.pendingWriteTree_=EL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function VL(n,e,t,i,a){return uL(n.pendingWriteTree_,e,t,i,a),a?Jf(n,new vo(kx(),e,t)):[]}function vl(n,e,t=!1){const i=hL(n.pendingWriteTree_,e);if(dL(n.pendingWriteTree_,e)){let l=new Tt(null);return i.snap!=null?l=l.set(gt(),!0):Ns(i.children,u=>{l=l.set(new St(u),!0)}),Jf(n,new bf(i.path,l,t))}else return[]}function Xf(n,e,t){return Jf(n,new vo(Dx(),e,t))}function LL(n,e,t){const i=Tt.fromObject(t);return Jf(n,new Nu(Dx(),e,i))}function UL(n,e,t,i){const a=Yx(n,i);if(a!=null){const l=Qx(a),u=l.path,f=l.queryId,p=Cs(u,e),g=new vo(Ox(f),p,t);return Wx(n,u,g)}else return[]}function jL(n,e,t,i){const a=Yx(n,i);if(a){const l=Qx(a),u=l.path,f=l.queryId,p=Cs(u,e),g=Tt.fromObject(t),v=new Nu(Ox(f),p,g);return Wx(n,u,v)}else return[]}function Gx(n,e,t){const a=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(u,f)=>{const p=Cs(u,e),g=My(f,p);if(g)return g});return jx(a,e,l,t,!0)}function Jf(n,e){return $x(e,n.syncPointTree_,null,Lx(n.pendingWriteTree_,gt()))}function $x(n,e,t,i){if(Ye(n.path))return Kx(n,e,t,i);{const a=e.get(gt());t==null&&a!=null&&(t=My(a,gt()));let l=[];const u=We(n.path),f=n.operationForChild(u),p=e.children.get(u);if(p&&f){const g=t?t.getImmediateChild(u):null,v=Bx(i,u);l=l.concat($x(f,p,g,v))}return a&&(l=l.concat(Oy(a,n,i,t))),l}}function Kx(n,e,t,i){const a=e.get(gt());t==null&&a!=null&&(t=My(a,gt()));let l=[];return e.children.inorderTraversal((u,f)=>{const p=t?t.getImmediateChild(u):null,g=Bx(i,u),v=n.operationForChild(u);v&&(l=l.concat(Kx(v,f,p,g)))}),a&&(l=l.concat(Oy(a,n,i,t))),l}function Yx(n,e){return n.tagToQueryMap.get(e)}function Qx(n){const e=n.indexOf("$");return ue(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new St(n.substr(0,e))}}function Wx(n,e,t){const i=n.syncPointTree_.get(e);ue(i,"Missing sync point for query tag that we're tracking");const a=Lx(n.pendingWriteTree_,e);return Oy(i,t,a,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Py(t)}node(){return this.node_}}class Vy{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=un(this.path_,e);return new Vy(this.syncTree_,t)}node(){return Gx(this.syncTree_,this.path_)}}const zL=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Kw=function(n,e,t){if(!n||typeof n!="object")return n;if(ue(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return BL(n[".sv"],e,t);if(typeof n[".sv"]=="object")return FL(n[".sv"],e);ue(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},BL=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ue(!1,"Unexpected server value: "+n)}},FL=function(n,e,t){n.hasOwnProperty("increment")||ue(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ue(!1,"Unexpected increment value: "+i);const a=e.node();if(ue(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const u=a.getValue();return typeof u!="number"?i:u+i},qL=function(n,e,t,i){return Ly(e,new Vy(t,n),i)},HL=function(n,e,t){return Ly(n,new Py(e),t)};function Ly(n,e,t){const i=n.getPriority().val(),a=Kw(i,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const u=n,f=Kw(u.getValue(),e,t);return f!==u.getValue()||a!==u.getPriority().val()?new on(f,kn(a)):n}else{const u=n;return l=u,a!==u.getPriority().val()&&(l=l.updatePriority(new on(a))),u.forEachChild(Dn,(f,p)=>{const g=Ly(p,e.getImmediateChild(f),t);g!==p&&(l=l.updateImmediateChild(f,g))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function jy(n,e){let t=e instanceof St?e:new St(e),i=n,a=We(t);for(;a!==null;){const l=Cl(i.node.children,a)||{children:{},childCount:0};i=new Uy(a,i,l),t=wt(t),a=We(t)}return i}function Gl(n){return n.node.value}function Xx(n,e){n.node.value=e,g_(n)}function Jx(n){return n.node.childCount>0}function GL(n){return Gl(n)===void 0&&!Jx(n)}function Zf(n,e){Ns(n.node.children,(t,i)=>{e(new Uy(t,n,i))})}function Zx(n,e,t,i){t&&e(n),Zf(n,a=>{Zx(a,e,!0)})}function $L(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Wu(n){return new St(n.parent===null?n.name:Wu(n.parent)+"/"+n.name)}function g_(n){n.parent!==null&&KL(n.parent,n.name,n)}function KL(n,e,t){const i=GL(t),a=Er(n.node.children,e);i&&a?(delete n.node.children[e],n.node.childCount--,g_(n)):!i&&!a&&(n.node.children[e]=t.node,n.node.childCount++,g_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=/[\[\].#$\/\u0000-\u001F\u007F]/,QL=/[\[\].#$\u0000-\u001F\u007F]/,Ag=10*1024*1024,eC=function(n){return typeof n=="string"&&n.length!==0&&!YL.test(n)},WL=function(n){return typeof n=="string"&&n.length!==0&&!QL.test(n)},XL=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),WL(n)},tC=function(n,e,t){const i=t instanceof St?new NV(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+lo(i));if(typeof e=="function")throw new Error(n+"contains a function "+lo(i)+" with contents = "+e.toString());if(Z1(e))throw new Error(n+"contains "+e.toString()+" "+lo(i));if(typeof e=="string"&&e.length>Ag/3&&If(e)>Ag)throw new Error(n+"contains a string greater than "+Ag+" utf8 bytes "+lo(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(Ns(e,(u,f)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!eC(u)))throw new Error(n+" contains an invalid key ("+u+") "+lo(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);kV(i,u),tC(n,f,i),DV(i)}),a&&l)throw new Error(n+' contains ".value" child '+lo(i)+" in addition to actual children.")}},JL=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!eC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!XL(t))throw new Error(EN(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function e6(n,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],l=a.getPath();t!==null&&!wx(l,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&n.eventLists_.push(t)}function So(n,e,t){e6(n,t),t6(n,i=>Qs(i,e)||Qs(e,i))}function t6(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const l=a.path;e(l)?(n6(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function n6(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();fu&&Nn("event: "+t.toString()),Yu(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6="repo_interrupt",i6=25;class r6{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ZL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vf(),this.transactionQueueTree_=new Uy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function a6(n,e,t){if(n.stats_=Ay(n.repoInfo_),n.forceRestClient_||tV())n.server_=new yf(n.repoInfo_,(i,a,l,u)=>{Yw(n,i,a,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Qw(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Tn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new dr(n.repoInfo_,e,(i,a,l,u)=>{Yw(n,i,a,l,u)},i=>{Qw(n,i)},i=>{l6(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=aV(n.repoInfo_,()=>new rL(n.stats_,n.server_)),n.infoData_=new eL,n.infoSyncTree_=new $w({startListening:(i,a,l,u)=>{let f=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(f=Xf(n.infoSyncTree_,i._path,p),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),zy(n,"connected",!1),n.serverSyncTree_=new $w({startListening:(i,a,l,u)=>(n.server_.listen(i,l,a,(f,p)=>{const g=u(f,p);So(n.eventQueue_,i._path,g)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function o6(n){const t=n.infoData_.getNode(new St(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function nC(n){return zL({timestamp:o6(n)})}function Yw(n,e,t,i,a){n.dataUpdateCount++;const l=new St(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(a)if(i){const p=$d(t,g=>kn(g));u=jL(n.serverSyncTree_,l,p,a)}else{const p=kn(t);u=UL(n.serverSyncTree_,l,p,a)}else if(i){const p=$d(t,g=>kn(g));u=LL(n.serverSyncTree_,l,p)}else{const p=kn(t);u=Xf(n.serverSyncTree_,l,p)}let f=l;u.length>0&&(f=Fy(n,l)),So(n.eventQueue_,f,u)}function Qw(n,e){zy(n,"connected",e),e===!1&&u6(n)}function l6(n,e){Ns(e,(t,i)=>{zy(n,t,i)})}function zy(n,e,t){const i=new St("/.info/"+e),a=kn(t);n.infoData_.updateSnapshot(i,a);const l=Xf(n.infoSyncTree_,i,a);So(n.eventQueue_,i,l)}function c6(n){return n.nextWriteId_++}function u6(n){sC(n,"onDisconnectEvents");const e=nC(n),t=vf();c_(n.onDisconnect_,gt(),(a,l)=>{const u=qL(a,l,n.serverSyncTree_,e);Nx(t,a,u)});let i=[];c_(t,gt(),(a,l)=>{i=i.concat(Xf(n.serverSyncTree_,a,l));const u=m6(n,a);Fy(n,u)}),n.onDisconnect_=vf(),So(n.eventQueue_,gt(),i)}function h6(n){n.persistentConnection_&&n.persistentConnection_.interrupt(s6)}function sC(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Nn(t,...e)}function iC(n,e,t){return Gx(n.serverSyncTree_,e,t)||at.EMPTY_NODE}function By(n,e=n.transactionQueueTree_){if(e||em(n,e),Gl(e)){const t=aC(n,e);ue(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&d6(n,Wu(e),t)}else Jx(e)&&Zf(e,t=>{By(n,t)})}function d6(n,e,t){const i=t.map(g=>g.currentWriteId),a=iC(n,e,i);let l=a;const u=a.hash();for(let g=0;g<t.length;g++){const v=t[g];ue(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const _=Cs(e,v.path);l=l.updateChild(_,v.currentOutputSnapshotRaw)}const f=l.val(!0),p=e;n.server_.put(p.toString(),f,g=>{sC(n,"transaction put response",{path:p.toString(),status:g});let v=[];if(g==="ok"){const _=[];for(let w=0;w<t.length;w++)t[w].status=2,v=v.concat(vl(n.serverSyncTree_,t[w].currentWriteId)),t[w].onComplete&&_.push(()=>t[w].onComplete(null,!0,t[w].currentOutputSnapshotResolved)),t[w].unwatcher();em(n,jy(n.transactionQueueTree_,e)),By(n,n.transactionQueueTree_),So(n.eventQueue_,e,v);for(let w=0;w<_.length;w++)Yu(_[w])}else{if(g==="datastale")for(let _=0;_<t.length;_++)t[_].status===3?t[_].status=4:t[_].status=0;else{hs("transaction at "+p.toString()+" failed: "+g);for(let _=0;_<t.length;_++)t[_].status=4,t[_].abortReason=g}Fy(n,e)}},u)}function Fy(n,e){const t=rC(n,e),i=Wu(t),a=aC(n,t);return f6(n,a,i),i}function f6(n,e,t){if(e.length===0)return;const i=[];let a=[];const u=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const p=e[f],g=Cs(t,p.path);let v=!1,_;if(ue(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)v=!0,_=p.abortReason,a=a.concat(vl(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=i6)v=!0,_="maxretry",a=a.concat(vl(n.serverSyncTree_,p.currentWriteId,!0));else{const w=iC(n,p.path,u);p.currentInputSnapshot=w;const I=e[f].update(w.val());if(I!==void 0){tC("transaction failed: Data returned ",I,p.path);let V=kn(I);typeof I=="object"&&I!=null&&Er(I,".priority")||(V=V.updatePriority(w.getPriority()));const H=p.currentWriteId,Y=nC(n),ce=HL(V,w,Y);p.currentOutputSnapshotRaw=V,p.currentOutputSnapshotResolved=ce,p.currentWriteId=c6(n),u.splice(u.indexOf(H),1),a=a.concat(VL(n.serverSyncTree_,p.path,ce,p.currentWriteId,p.applyLocally)),a=a.concat(vl(n.serverSyncTree_,H,!0))}else v=!0,_="nodata",a=a.concat(vl(n.serverSyncTree_,p.currentWriteId,!0))}So(n.eventQueue_,t,a),a=[],v&&(e[f].status=2,(function(w){setTimeout(w,Math.floor(0))})(e[f].unwatcher),e[f].onComplete&&(_==="nodata"?i.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):i.push(()=>e[f].onComplete(new Error(_),!1,null))))}em(n,n.transactionQueueTree_);for(let f=0;f<i.length;f++)Yu(i[f]);By(n,n.transactionQueueTree_)}function rC(n,e){let t,i=n.transactionQueueTree_;for(t=We(e);t!==null&&Gl(i)===void 0;)i=jy(i,t),e=wt(e),t=We(e);return i}function aC(n,e){const t=[];return oC(n,e,t),t.sort((i,a)=>i.order-a.order),t}function oC(n,e,t){const i=Gl(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);Zf(e,a=>{oC(n,a,t)})}function em(n,e){const t=Gl(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,Xx(e,t.length>0?t:void 0)}Zf(e,i=>{em(n,i)})}function m6(n,e){const t=Wu(rC(n,e)),i=jy(n.transactionQueueTree_,e);return $L(i,a=>{xg(n,a)}),xg(n,i),Zx(i,a=>{xg(n,a)}),t}function xg(n,e){const t=Gl(e);if(t){const i=[];let a=[],l=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(ue(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):(ue(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),a=a.concat(vl(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?Xx(e,void 0):t.length=l+1,So(n.eventQueue_,Wu(e),a);for(let u=0;u<i.length;u++)Yu(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function g6(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):hs(`Invalid query segment '${t}' in query '${n}'`)}return e}const Ww=function(n,e){const t=_6(n),i=t.namespace;t.domain==="firebase.com"&&vr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&vr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||KP();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new hx(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new St(t.pathString)}},_6=function(n){let e="",t="",i="",a="",l="",u=!0,f="https",p=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(f=n.substring(0,g-1),n=n.substring(g+2));let v=n.indexOf("/");v===-1&&(v=n.length);let _=n.indexOf("?");_===-1&&(_=n.length),e=n.substring(0,Math.min(v,_)),v<_&&(a=p6(n.substring(v,_)));const w=g6(n.substring(Math.min(n.length,_)));g=e.indexOf(":"),g>=0?(u=f==="https"||f==="wss",p=parseInt(e.substring(g+1),10)):g=e.length;const I=e.slice(0,g);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const V=e.indexOf(".");i=e.substring(0,V).toLowerCase(),t=e.substring(V+1),l=i}"ns"in w&&(l=w.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:u,scheme:f,pathString:a,namespace:l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return Ye(this._path)?null:bx(this._path)}get ref(){return new $l(this._repo,this._path)}get _queryIdentifier(){const e=Pw(this._queryParams),t=wy(e);return t==="{}"?"default":t}get _queryObject(){return Pw(this._queryParams)}isEqual(e){if(e=Lt(e),!(e instanceof qy))return!1;const t=this._repo===e._repo,i=wx(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+RV(this._path)}}class $l extends qy{constructor(e,t){super(e,t,new Ry,!1)}get parent(){const e=Tx(this._path);return e===null?null:new $l(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}ML($l);PL($l);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6="FIREBASE_DATABASE_EMULATOR_HOST",__={};let v6=!1;function b6(n,e,t,i){const a=e.lastIndexOf(":"),l=e.substring(0,a),u=br(l);n.repoInfo_=new hx(e,u,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function E6(n,e,t,i,a){let l=i||n.options.databaseURL;l===void 0&&(n.options.projectId||vr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nn("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=Ww(l,a),f=u.repoInfo,p;typeof process<"u"&&gw&&(p=gw[y6]),p?(l=`http://${p}?ns=${f.namespace}`,u=Ww(l,a),f=u.repoInfo):u.repoInfo.secure;const g=new sV(n.name,n.options,e);JL("Invalid Firebase Database URL",u),Ye(u.path)||vr("Database URL must point to the root of a Firebase Database (not including a child path).");const v=w6(f,n,g,new nV(n,t));return new S6(v,n)}function T6(n,e){const t=__[e];(!t||t[n.key]!==n)&&vr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),h6(n),delete t[n.key]}function w6(n,e,t,i){let a=__[e.name];a||(a={},__[e.name]=a);let l=a[n.toURLString()];return l&&vr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new r6(n,v6,t,i),a[n.toURLString()]=l,l}class S6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(a6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $l(this._repo,gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(T6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vr("Cannot call "+e+" on a deleted database.")}}function A6(n=Nf(),e){const t=Ou(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=I_("database");i&&x6(t,...i)}return t}function x6(n,e,t,i={}){n=Lt(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&pa(i,l.repoInfo_.emulatorOptions))return;vr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&vr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new zd(zd.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:N_(i.mockUserToken,n.app.options.projectId);u=new zd(f)}br(e)&&(xf(e),Cf("Database",!0)),b6(l,a,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(n){BP(Sa),ga(new fr("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return E6(i,a,l,t)},"PUBLIC").setMultipleInstances(!0)),Is(_w,yw,n),Is(_w,yw,"esm2020")}dr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};dr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};C6();const I6={apiKey:"AIzaSyAYc4hqiWsrzIYvoybXUK_2HglHj_Ut1Mo",authDomain:"chatapp-d92e7.firebaseapp.com",projectId:"chatapp-d92e7",storageBucket:"chatapp-d92e7.firebasestorage.app",messagingSenderId:"312092844552",appId:"1:312092844552:web:c916c4839833d6c0e867bd",databaseURL:"https://chatapp-d92e7-default-rtdb.firebaseio.com"},tm=DS(I6),Zc=KD(tm),sr=$4(tm);A6(tm);LP(tm);const ei=$R((n,e)=>({currentUser:null,pendingGoogleUser:null,isAuthenticated:!1,darkMode:!1,bookmarkedPosts:[],initializeAuth:()=>{Pk(Zc,async t=>{if(t)try{const i=await _g(sa(sr,"users",t.uid));if(i.exists()){const a=i.data();try{await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.uid,username:a.username||t.displayName?.split(" ")[0].toLowerCase()||"user",email:t.email||a.email,fullName:a.fullName||t.displayName,avatar:a.avatar||t.photoURL||""})})}catch(l){console.warn("Database sync failed:",l)}n({currentUser:{id:t.uid,...a},isAuthenticated:!0})}else n({currentUser:null,isAuthenticated:!1,pendingGoogleUser:null})}catch(i){console.error("Error loading user data:",i),n({currentUser:null,isAuthenticated:!1,pendingGoogleUser:null})}else n({currentUser:null,isAuthenticated:!1,pendingGoogleUser:null})})},loginWithGoogle:async()=>{const t=new ar,a=(await nD(Zc,t)).user,l=sa(sr,"users",a.uid),u=await _g(l);if(u.exists()){const f=u.data();n({currentUser:{id:a.uid,...f},isAuthenticated:!0,pendingGoogleUser:null})}else throw n({pendingGoogleUser:{uid:a.uid,displayName:a.displayName||"User",email:a.email||"",photoURL:a.photoURL||""}}),new Error("USERNAME_SETUP_REQUIRED")},checkUsernameAvailable:async t=>{try{const i=rP(G4(sr,"users"),aP("username","==",t.toLowerCase()));return(await uP(i)).empty}catch(i){return console.error("Error checking username:",i),!1}},completeGoogleSignup:async t=>{const i=e().pendingGoogleUser;if(!i)throw new Error("No pending user");if(!await e().checkUsernameAvailable(t))throw new Error("Username already taken");const l={username:t.toLowerCase(),fullName:i.displayName,email:i.email,avatar:i.photoURL,createdAt:pt.now()};await uw(sa(sr,"users",i.uid),l);try{await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i.uid,username:t.toLowerCase(),email:i.email,fullName:i.displayName,avatar:i.photoURL})})}catch(u){console.warn("Database sync failed:",u)}n({currentUser:{id:i.uid,...l},isAuthenticated:!0,pendingGoogleUser:null})},loginWithEmail:async(t,i)=>{const l=(await Dk(Zc,t,i)).user,u=await _g(sa(sr,"users",l.uid));if(u.exists()){const f=u.data();n({currentUser:{id:l.uid,...f},isAuthenticated:!0})}},signupWithEmail:async(t,i,a)=>{const u=(await kk(Zc,t,i)).user;let f=t.split("@")[0].toLowerCase(),p=f,g=1;for(;!await e().checkUsernameAvailable(p);)p=`${f}${g}`,g++;const v={username:p,fullName:a,email:t,avatar:"",createdAt:pt.now()};await uw(sa(sr,"users",u.uid),v);try{await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:u.uid,username:p,email:t,fullName:a,avatar:""})})}catch(_){console.warn("Database sync failed:",_)}n({currentUser:{id:u.uid,...v},isAuthenticated:!0})},logout:async()=>{try{await Vk(Zc)}catch(t){console.error("Error signing out:",t)}n({currentUser:null,isAuthenticated:!1,pendingGoogleUser:null})},updateProfile:async t=>{const i=e().currentUser;if(!i)throw new Error("No current user");try{const a=await fetch(`/api/users/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to update profile");const l=await a.json();n({currentUser:{...i,...l}})}catch(a){throw console.error("Error updating profile:",a),a}},addInstagramAccount:async(t,i)=>{const a=e().currentUser;if(!a)throw new Error("No current user");try{const{getUserProfile:l}=await FR(async()=>{const{getUserProfile:I}=await Promise.resolve().then(()=>UU);return{getUserProfile:I}},void 0),u=await l("me",t),f={token:t,accountName:i||`Account ${(a.instagramAccounts?.length||0)+1}`,instagramUsername:u?.username,createdAt:pt.now()},p=sa(sr,"users",a.id),g=a.instagramAccounts||[],v=g.length===0,_={...f,id:g.length};await yg(p,{instagramAccounts:[...g,_],...v&&{activeInstagramAccountId:0}});try{await fetch("/api/instagram-accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.id,token:t,accountName:i||`Account ${g.length+1}`,instagramUsername:u?.username})})}catch(I){console.warn("Database sync failed:",I)}const w=[...g,_];n(I=>({currentUser:I.currentUser?{...I.currentUser,instagramAccounts:w,activeInstagramAccountId:v?0:I.currentUser.activeInstagramAccountId}:null}))}catch(l){throw console.error("Error adding Instagram account:",l),l}},switchInstagramAccount:async t=>{const i=e().currentUser;if(!i)throw new Error("No current user");try{const a=sa(sr,"users",i.id);await yg(a,{activeInstagramAccountId:t}),n(l=>({currentUser:l.currentUser?{...l.currentUser,activeInstagramAccountId:t}:null}))}catch(a){throw console.error("Error switching Instagram account:",a),a}},removeInstagramAccount:async t=>{const i=e().currentUser;if(!i)throw new Error("No current user");try{const a=sa(sr,"users",i.id),l=(i.instagramAccounts||[]).filter((u,f)=>f!==t);await yg(a,{instagramAccounts:l,activeInstagramAccountId:i.activeInstagramAccountId===t?l.length>0?0:void 0:i.activeInstagramAccountId});try{await fetch(`/api/instagram-accounts/${t}`,{method:"DELETE"})}catch(u){console.warn("Database sync failed:",u)}n(u=>({currentUser:u.currentUser?{...u.currentUser,instagramAccounts:l,activeInstagramAccountId:u.currentUser.activeInstagramAccountId===t?0:u.currentUser.activeInstagramAccountId}:null}))}catch(a){throw console.error("Error removing Instagram account:",a),a}},getActiveInstagramToken:()=>{const t=e().currentUser;if(!t||!t.instagramAccounts||t.instagramAccounts.length===0)return;const i=t.activeInstagramAccountId||0;return t.instagramAccounts[i]?.token},toggleDarkMode:()=>{n(t=>({darkMode:!t.darkMode}))},bookmarkPost:t=>{n(i=>({bookmarkedPosts:[...i.bookmarkedPosts,t]}))},removeBookmark:t=>{n(i=>({bookmarkedPosts:i.bookmarkedPosts.filter(a=>a!==t)}))}}));var R6=uS();const N6=cS(R6);function k6(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const D6=n=>{switch(n){case"success":return P6;case"info":return L6;case"warning":return V6;case"error":return U6;default:return null}},O6=Array(12).fill(0),M6=({visible:n,className:e})=>ae.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ae.createElement("div",{className:"sonner-spinner"},O6.map((t,i)=>ae.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),P6=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),V6=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),L6=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),U6=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),j6=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),z6=()=>{const[n,e]=ae.useState(document.hidden);return ae.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let y_=1;class B6{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:i,...a}=e,l=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:y_++,u=this.toasts.find(p=>p.id===l),f=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),u?this.toasts=this.toasts.map(p=>p.id===l?(this.publish({...p,...e,id:l,title:i}),{...p,...e,id:l,dismissible:f,title:i}):p):this.addToast({title:i,...a,dismissible:f,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let l=i!==void 0,u;const f=a.then(async g=>{if(u=["resolve",g],ae.isValidElement(g))l=!1,this.create({id:i,type:"default",message:g});else if(q6(g)&&!g.ok){l=!1;const _=typeof t.error=="function"?await t.error(`HTTP error! status: ${g.status}`):t.error,w=typeof t.description=="function"?await t.description(`HTTP error! status: ${g.status}`):t.description,V=typeof _=="object"&&!ae.isValidElement(_)?_:{message:_};this.create({id:i,type:"error",description:w,...V})}else if(g instanceof Error){l=!1;const _=typeof t.error=="function"?await t.error(g):t.error,w=typeof t.description=="function"?await t.description(g):t.description,V=typeof _=="object"&&!ae.isValidElement(_)?_:{message:_};this.create({id:i,type:"error",description:w,...V})}else if(t.success!==void 0){l=!1;const _=typeof t.success=="function"?await t.success(g):t.success,w=typeof t.description=="function"?await t.description(g):t.description,V=typeof _=="object"&&!ae.isValidElement(_)?_:{message:_};this.create({id:i,type:"success",description:w,...V})}}).catch(async g=>{if(u=["reject",g],t.error!==void 0){l=!1;const v=typeof t.error=="function"?await t.error(g):t.error,_=typeof t.description=="function"?await t.description(g):t.description,I=typeof v=="object"&&!ae.isValidElement(v)?v:{message:v};this.create({id:i,type:"error",description:_,...I})}}).finally(()=>{l&&(this.dismiss(i),i=void 0),t.finally==null||t.finally.call(t)}),p=()=>new Promise((g,v)=>f.then(()=>u[0]==="reject"?v(u[1]):g(u[1])).catch(v));return typeof i!="string"&&typeof i!="number"?{unwrap:p}:Object.assign(i,{unwrap:p})},this.custom=(e,t)=>{const i=t?.id||y_++;return this.create({jsx:e(i),id:i,...t}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Yn=new B6,F6=(n,e)=>{const t=e?.id||y_++;return Yn.addToast({title:n,...e,id:t}),t},q6=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",H6=F6,G6=()=>Yn.toasts,$6=()=>Yn.getActiveToasts(),_u=Object.assign(H6,{success:Yn.success,info:Yn.info,warning:Yn.warning,error:Yn.error,custom:Yn.custom,message:Yn.message,promise:Yn.promise,dismiss:Yn.dismiss,loading:Yn.loading},{getHistory:G6,getToasts:$6});k6("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Cd(n){return n.label!==void 0}const K6=3,Y6="24px",Q6="16px",Xw=4e3,W6=356,X6=14,J6=45,Z6=200;function Si(...n){return n.filter(Boolean).join(" ")}function e3(n){const[e,t]=n.split("-"),i=[];return e&&i.push(e),t&&i.push(t),i}const t3=n=>{var e,t,i,a,l,u,f,p,g;const{invert:v,toast:_,unstyled:w,interacting:I,setHeights:V,visibleToasts:G,heights:H,index:Y,toasts:ce,expanded:re,removeToast:me,defaultRichColors:Me,closeButton:Ee,style:N,cancelButtonStyle:x,actionButtonStyle:R,className:P="",descriptionClassName:O="",duration:L,position:C,gap:Je,expandByDefault:Ze,classNames:z,icons:ie,closeButtonAriaLabel:ne="Close toast"}=n,[Ne,ke]=ae.useState(null),[D,X]=ae.useState(null),[Q,se]=ae.useState(!1),[he,be]=ae.useState(!1),[ve,Ie]=ae.useState(!1),[Fe,hn]=ae.useState(!1),[Mn,tn]=ae.useState(!1),[wr,zn]=ae.useState(0),[Da,ti]=ae.useState(0),ks=ae.useRef(_.duration||L||Xw),Sr=ae.useRef(null),it=ae.useRef(null),kt=Y===0,ni=Y+1<=G,dn=_.type,Ds=_.dismissible!==!1,fn=_.className||"",Li=_.descriptionClassName||"",si=ae.useMemo(()=>H.findIndex(Se=>Se.toastId===_.id)||0,[H,_.id]),Oa=ae.useMemo(()=>{var Se;return(Se=_.closeButton)!=null?Se:Ee},[_.closeButton,Ee]),Os=ae.useMemo(()=>_.duration||L||Xw,[_.duration,L]),Ma=ae.useRef(0),Ms=ae.useRef(0),Pa=ae.useRef(0),Ps=ae.useRef(null),[Jn,Wt]=C.split("-"),Pn=ae.useMemo(()=>H.reduce((Se,rt,Ut)=>Ut>=si?Se:Se+rt.height,0),[H,si]),At=z6(),Ao=_.invert||v,ii=dn==="loading";Ms.current=ae.useMemo(()=>si*Je+Pn,[si,Pn]),ae.useEffect(()=>{ks.current=Os},[Os]),ae.useEffect(()=>{se(!0)},[]),ae.useEffect(()=>{const Se=it.current;if(Se){const rt=Se.getBoundingClientRect().height;return ti(rt),V(Ut=>[{toastId:_.id,height:rt,position:_.position},...Ut]),()=>V(Ut=>Ut.filter(nn=>nn.toastId!==_.id))}},[V,_.id]),ae.useLayoutEffect(()=>{if(!Q)return;const Se=it.current,rt=Se.style.height;Se.style.height="auto";const Ut=Se.getBoundingClientRect().height;Se.style.height=rt,ti(Ut),V(nn=>nn.find(vt=>vt.toastId===_.id)?nn.map(vt=>vt.toastId===_.id?{...vt,height:Ut}:vt):[{toastId:_.id,height:Ut,position:_.position},...nn])},[Q,_.title,_.description,V,_.id,_.jsx,_.action,_.cancel]);const Zn=ae.useCallback(()=>{be(!0),zn(Ms.current),V(Se=>Se.filter(rt=>rt.toastId!==_.id)),setTimeout(()=>{me(_)},Z6)},[_,me,V,Ms]);ae.useEffect(()=>{if(_.promise&&dn==="loading"||_.duration===1/0||_.type==="loading")return;let Se;return re||I||At?(()=>{if(Pa.current<Ma.current){const nn=new Date().getTime()-Ma.current;ks.current=ks.current-nn}Pa.current=new Date().getTime()})():(()=>{ks.current!==1/0&&(Ma.current=new Date().getTime(),Se=setTimeout(()=>{_.onAutoClose==null||_.onAutoClose.call(_,_),Zn()},ks.current))})(),()=>clearTimeout(Se)},[re,I,_,dn,At,Zn]),ae.useEffect(()=>{_.delete&&(Zn(),_.onDismiss==null||_.onDismiss.call(_,_))},[Zn,_.delete]);function ds(){var Se;if(ie?.loading){var rt;return ae.createElement("div",{className:Si(z?.loader,_==null||(rt=_.classNames)==null?void 0:rt.loader,"sonner-loader"),"data-visible":dn==="loading"},ie.loading)}return ae.createElement(M6,{className:Si(z?.loader,_==null||(Se=_.classNames)==null?void 0:Se.loader),visible:dn==="loading"})}const Ui=_.icon||ie?.[dn]||D6(dn);var It,es;return ae.createElement("li",{tabIndex:0,ref:it,className:Si(P,fn,z?.toast,_==null||(e=_.classNames)==null?void 0:e.toast,z?.default,z?.[dn],_==null||(t=_.classNames)==null?void 0:t[dn]),"data-sonner-toast":"","data-rich-colors":(It=_.richColors)!=null?It:Me,"data-styled":!(_.jsx||_.unstyled||w),"data-mounted":Q,"data-promise":!!_.promise,"data-swiped":Mn,"data-removed":he,"data-visible":ni,"data-y-position":Jn,"data-x-position":Wt,"data-index":Y,"data-front":kt,"data-swiping":ve,"data-dismissible":Ds,"data-type":dn,"data-invert":Ao,"data-swipe-out":Fe,"data-swipe-direction":D,"data-expanded":!!(re||Ze&&Q),"data-testid":_.testId,style:{"--index":Y,"--toasts-before":Y,"--z-index":ce.length-Y,"--offset":`${he?wr:Ms.current}px`,"--initial-height":Ze?"auto":`${Da}px`,...N,..._.style},onDragEnd:()=>{Ie(!1),ke(null),Ps.current=null},onPointerDown:Se=>{Se.button!==2&&(ii||!Ds||(Sr.current=new Date,zn(Ms.current),Se.target.setPointerCapture(Se.pointerId),Se.target.tagName!=="BUTTON"&&(Ie(!0),Ps.current={x:Se.clientX,y:Se.clientY})))},onPointerUp:()=>{var Se,rt,Ut;if(Fe||!Ds)return;Ps.current=null;const nn=Number(((Se=it.current)==null?void 0:Se.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Vn=Number(((rt=it.current)==null?void 0:rt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vt=new Date().getTime()-((Ut=Sr.current)==null?void 0:Ut.getTime()),An=Ne==="x"?nn:Vn,fs=Math.abs(An)/vt;if(Math.abs(An)>=J6||fs>.11){zn(Ms.current),_.onDismiss==null||_.onDismiss.call(_,_),X(Ne==="x"?nn>0?"right":"left":Vn>0?"down":"up"),Zn(),hn(!0);return}else{var mn,pn;(mn=it.current)==null||mn.style.setProperty("--swipe-amount-x","0px"),(pn=it.current)==null||pn.style.setProperty("--swipe-amount-y","0px")}tn(!1),Ie(!1),ke(null)},onPointerMove:Se=>{var rt,Ut,nn;if(!Ps.current||!Ds||((rt=window.getSelection())==null?void 0:rt.toString().length)>0)return;const vt=Se.clientY-Ps.current.y,An=Se.clientX-Ps.current.x;var fs;const mn=(fs=n.swipeDirections)!=null?fs:e3(C);!Ne&&(Math.abs(An)>1||Math.abs(vt)>1)&&ke(Math.abs(An)>Math.abs(vt)?"x":"y");let pn={x:0,y:0};const ri=gn=>1/(1.5+Math.abs(gn)/20);if(Ne==="y"){if(mn.includes("top")||mn.includes("bottom"))if(mn.includes("top")&&vt<0||mn.includes("bottom")&&vt>0)pn.y=vt;else{const gn=vt*ri(vt);pn.y=Math.abs(gn)<Math.abs(vt)?gn:vt}}else if(Ne==="x"&&(mn.includes("left")||mn.includes("right")))if(mn.includes("left")&&An<0||mn.includes("right")&&An>0)pn.x=An;else{const gn=An*ri(An);pn.x=Math.abs(gn)<Math.abs(An)?gn:An}(Math.abs(pn.x)>0||Math.abs(pn.y)>0)&&tn(!0),(Ut=it.current)==null||Ut.style.setProperty("--swipe-amount-x",`${pn.x}px`),(nn=it.current)==null||nn.style.setProperty("--swipe-amount-y",`${pn.y}px`)}},Oa&&!_.jsx&&dn!=="loading"?ae.createElement("button",{"aria-label":ne,"data-disabled":ii,"data-close-button":!0,onClick:ii||!Ds?()=>{}:()=>{Zn(),_.onDismiss==null||_.onDismiss.call(_,_)},className:Si(z?.closeButton,_==null||(i=_.classNames)==null?void 0:i.closeButton)},(es=ie?.close)!=null?es:j6):null,(dn||_.icon||_.promise)&&_.icon!==null&&(ie?.[dn]!==null||_.icon)?ae.createElement("div",{"data-icon":"",className:Si(z?.icon,_==null||(a=_.classNames)==null?void 0:a.icon)},_.promise||_.type==="loading"&&!_.icon?_.icon||ds():null,_.type!=="loading"?Ui:null):null,ae.createElement("div",{"data-content":"",className:Si(z?.content,_==null||(l=_.classNames)==null?void 0:l.content)},ae.createElement("div",{"data-title":"",className:Si(z?.title,_==null||(u=_.classNames)==null?void 0:u.title)},_.jsx?_.jsx:typeof _.title=="function"?_.title():_.title),_.description?ae.createElement("div",{"data-description":"",className:Si(O,Li,z?.description,_==null||(f=_.classNames)==null?void 0:f.description)},typeof _.description=="function"?_.description():_.description):null),ae.isValidElement(_.cancel)?_.cancel:_.cancel&&Cd(_.cancel)?ae.createElement("button",{"data-button":!0,"data-cancel":!0,style:_.cancelButtonStyle||x,onClick:Se=>{Cd(_.cancel)&&Ds&&(_.cancel.onClick==null||_.cancel.onClick.call(_.cancel,Se),Zn())},className:Si(z?.cancelButton,_==null||(p=_.classNames)==null?void 0:p.cancelButton)},_.cancel.label):null,ae.isValidElement(_.action)?_.action:_.action&&Cd(_.action)?ae.createElement("button",{"data-button":!0,"data-action":!0,style:_.actionButtonStyle||R,onClick:Se=>{Cd(_.action)&&(_.action.onClick==null||_.action.onClick.call(_.action,Se),!Se.defaultPrevented&&Zn())},className:Si(z?.actionButton,_==null||(g=_.classNames)==null?void 0:g.actionButton)},_.action.label):null)};function Jw(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function n3(n,e){const t={};return[n,e].forEach((i,a)=>{const l=a===1,u=l?"--mobile-offset":"--offset",f=l?Q6:Y6;function p(g){["top","right","bottom","left"].forEach(v=>{t[`${u}-${v}`]=typeof g=="number"?`${g}px`:g})}typeof i=="number"||typeof i=="string"?p(i):typeof i=="object"?["top","right","bottom","left"].forEach(g=>{i[g]===void 0?t[`${u}-${g}`]=f:t[`${u}-${g}`]=typeof i[g]=="number"?`${i[g]}px`:i[g]}):p(f)}),t}const s3=ae.forwardRef(function(e,t){const{id:i,invert:a,position:l="bottom-right",hotkey:u=["altKey","KeyT"],expand:f,closeButton:p,className:g,offset:v,mobileOffset:_,theme:w="light",richColors:I,duration:V,style:G,visibleToasts:H=K6,toastOptions:Y,dir:ce=Jw(),gap:re=X6,icons:me,containerAriaLabel:Me="Notifications"}=e,[Ee,N]=ae.useState([]),x=ae.useMemo(()=>i?Ee.filter(Q=>Q.toasterId===i):Ee.filter(Q=>!Q.toasterId),[Ee,i]),R=ae.useMemo(()=>Array.from(new Set([l].concat(x.filter(Q=>Q.position).map(Q=>Q.position)))),[x,l]),[P,O]=ae.useState([]),[L,C]=ae.useState(!1),[Je,Ze]=ae.useState(!1),[z,ie]=ae.useState(w!=="system"?w:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ne=ae.useRef(null),Ne=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),ke=ae.useRef(null),D=ae.useRef(!1),X=ae.useCallback(Q=>{N(se=>{var he;return(he=se.find(be=>be.id===Q.id))!=null&&he.delete||Yn.dismiss(Q.id),se.filter(({id:be})=>be!==Q.id)})},[]);return ae.useEffect(()=>Yn.subscribe(Q=>{if(Q.dismiss){requestAnimationFrame(()=>{N(se=>se.map(he=>he.id===Q.id?{...he,delete:!0}:he))});return}setTimeout(()=>{N6.flushSync(()=>{N(se=>{const he=se.findIndex(be=>be.id===Q.id);return he!==-1?[...se.slice(0,he),{...se[he],...Q},...se.slice(he+1)]:[Q,...se]})})})}),[Ee]),ae.useEffect(()=>{if(w!=="system"){ie(w);return}if(w==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;const Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:se})=>{ie(se?"dark":"light")})}catch{Q.addListener(({matches:he})=>{try{ie(he?"dark":"light")}catch(be){console.error(be)}})}},[w]),ae.useEffect(()=>{Ee.length<=1&&C(!1)},[Ee]),ae.useEffect(()=>{const Q=se=>{var he;if(u.every(Ie=>se[Ie]||se.code===Ie)){var ve;C(!0),(ve=ne.current)==null||ve.focus()}se.code==="Escape"&&(document.activeElement===ne.current||(he=ne.current)!=null&&he.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[u]),ae.useEffect(()=>{if(ne.current)return()=>{ke.current&&(ke.current.focus({preventScroll:!0}),ke.current=null,D.current=!1)}},[ne.current]),ae.createElement("section",{ref:t,"aria-label":`${Me} ${Ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((Q,se)=>{var he;const[be,ve]=Q.split("-");return x.length?ae.createElement("ol",{key:Q,dir:ce==="auto"?Jw():ce,tabIndex:-1,ref:ne,className:g,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":be,"data-x-position":ve,style:{"--front-toast-height":`${((he=P[0])==null?void 0:he.height)||0}px`,"--width":`${W6}px`,"--gap":`${re}px`,...G,...n3(v,_)},onBlur:Ie=>{D.current&&!Ie.currentTarget.contains(Ie.relatedTarget)&&(D.current=!1,ke.current&&(ke.current.focus({preventScroll:!0}),ke.current=null))},onFocus:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||D.current||(D.current=!0,ke.current=Ie.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{Je||C(!1)},onDragEnd:()=>C(!1),onPointerDown:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||Ze(!0)},onPointerUp:()=>Ze(!1)},x.filter(Ie=>!Ie.position&&se===0||Ie.position===Q).map((Ie,Fe)=>{var hn,Mn;return ae.createElement(t3,{key:Ie.id,icons:me,index:Fe,toast:Ie,defaultRichColors:I,duration:(hn=Y?.duration)!=null?hn:V,className:Y?.className,descriptionClassName:Y?.descriptionClassName,invert:a,visibleToasts:H,closeButton:(Mn=Y?.closeButton)!=null?Mn:p,interacting:Je,position:Q,style:Y?.style,unstyled:Y?.unstyled,classNames:Y?.classNames,cancelButtonStyle:Y?.cancelButtonStyle,actionButtonStyle:Y?.actionButtonStyle,closeButtonAriaLabel:Y?.closeButtonAriaLabel,removeToast:X,toasts:x.filter(tn=>tn.position==Ie.position),heights:P.filter(tn=>tn.position==Ie.position),setHeights:O,expandByDefault:f,gap:re,expanded:L,swipeDirections:e.swipeDirections})})):null}))});function Zw(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function i3(...n){return e=>{let t=!1;const i=n.map(a=>{const l=Zw(a,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let a=0;a<i.length;a++){const l=i[a];typeof l=="function"?l():Zw(n[a],null)}}}}var r3=Symbol.for("react.lazy"),wf=hS[" use ".trim().toString()];function a3(n){return typeof n=="object"&&n!==null&&"then"in n}function lC(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===r3&&"_payload"in n&&a3(n._payload)}function o3(n){const e=c3(n),t=oe.forwardRef((i,a)=>{let{children:l,...u}=i;lC(l)&&typeof wf=="function"&&(l=wf(l._payload));const f=oe.Children.toArray(l),p=f.find(h3);if(p){const g=p.props.children,v=f.map(_=>_===p?oe.Children.count(g)>1?oe.Children.only(null):oe.isValidElement(g)?g.props.children:null:_);return T.jsx(e,{...u,ref:a,children:oe.isValidElement(g)?oe.cloneElement(g,void 0,v):null})}return T.jsx(e,{...u,ref:a,children:l})});return t.displayName=`${n}.Slot`,t}var l3=o3("Slot");function c3(n){const e=oe.forwardRef((t,i)=>{let{children:a,...l}=t;if(lC(a)&&typeof wf=="function"&&(a=wf(a._payload)),oe.isValidElement(a)){const u=f3(a),f=d3(l,a.props);return a.type!==oe.Fragment&&(f.ref=i?i3(i,u):u),oe.cloneElement(a,f)}return oe.Children.count(a)>1?oe.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var u3=Symbol("radix.slottable");function h3(n){return oe.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===u3}function d3(n,e){const t={...e};for(const i in e){const a=n[i],l=e[i];/^on[A-Z]/.test(i)?a&&l?t[i]=(...f)=>{const p=l(...f);return a(...f),p}:a&&(t[i]=a):i==="style"?t[i]={...a,...l}:i==="className"&&(t[i]=[a,l].filter(Boolean).join(" "))}return{...n,...t}}function f3(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function cC(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=cC(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function uC(){for(var n,e,t=0,i="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=cC(n))&&(i&&(i+=" "),i+=e);return i}const eS=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,tS=uC,m3=(n,e)=>t=>{var i;if(e?.variants==null)return tS(n,t?.class,t?.className);const{variants:a,defaultVariants:l}=e,u=Object.keys(a).map(g=>{const v=t?.[g],_=l?.[g];if(v===null)return null;const w=eS(v)||eS(_);return a[g][w]}),f=t&&Object.entries(t).reduce((g,v)=>{let[_,w]=v;return w===void 0||(g[_]=w),g},{}),p=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((g,v)=>{let{class:_,className:w,...I}=v;return Object.entries(I).every(V=>{let[G,H]=V;return Array.isArray(H)?H.includes({...l,...f}[G]):{...l,...f}[G]===H})?[...g,_,w]:g},[]);return tS(n,u,p,t?.class,t?.className)},Hy="-",p3=n=>{const e=_3(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:u=>{const f=u.split(Hy);return f[0]===""&&f.length!==1&&f.shift(),hC(f,e)||g3(u)},getConflictingClassGroupIds:(u,f)=>{const p=t[u]||[];return f&&i[u]?[...p,...i[u]]:p}}},hC=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),a=i?hC(n.slice(1),i):void 0;if(a)return a;if(e.validators.length===0)return;const l=n.join(Hy);return e.validators.find(({validator:u})=>u(l))?.classGroupId},nS=/^\[(.+)\]$/,g3=n=>{if(nS.test(n)){const e=nS.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},_3=n=>{const{theme:e,classGroups:t}=n,i={nextPart:new Map,validators:[]};for(const a in t)v_(t[a],i,a,e);return i},v_=(n,e,t,i)=>{n.forEach(a=>{if(typeof a=="string"){const l=a===""?e:sS(e,a);l.classGroupId=t;return}if(typeof a=="function"){if(y3(a)){v_(a(i),e,t,i);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([l,u])=>{v_(u,sS(e,l),t,i)})})},sS=(n,e)=>{let t=n;return e.split(Hy).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},y3=n=>n.isThemeGetter,v3=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const a=(l,u)=>{t.set(l,u),e++,e>n&&(e=0,i=t,t=new Map)};return{get(l){let u=t.get(l);if(u!==void 0)return u;if((u=i.get(l))!==void 0)return a(l,u),u},set(l,u){t.has(l)?t.set(l,u):a(l,u)}}},b_="!",E_=":",b3=E_.length,E3=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=a=>{const l=[];let u=0,f=0,p=0,g;for(let V=0;V<a.length;V++){let G=a[V];if(u===0&&f===0){if(G===E_){l.push(a.slice(p,V)),p=V+b3;continue}if(G==="/"){g=V;continue}}G==="["?u++:G==="]"?u--:G==="("?f++:G===")"&&f--}const v=l.length===0?a:a.substring(p),_=T3(v),w=_!==v,I=g&&g>p?g-p:void 0;return{modifiers:l,hasImportantModifier:w,baseClassName:_,maybePostfixModifierPosition:I}};if(e){const a=e+E_,l=i;i=u=>u.startsWith(a)?l(u.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const a=i;i=l=>t({className:l,parseClassName:a})}return i},T3=n=>n.endsWith(b_)?n.substring(0,n.length-1):n.startsWith(b_)?n.substring(1):n,w3=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const a=[];let l=[];return i.forEach(u=>{u[0]==="["||e[u]?(a.push(...l.sort(),u),l=[]):l.push(u)}),a.push(...l.sort()),a}},S3=n=>({cache:v3(n.cacheSize),parseClassName:E3(n),sortModifiers:w3(n),...p3(n)}),A3=/\s+/,x3=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:l}=e,u=[],f=n.trim().split(A3);let p="";for(let g=f.length-1;g>=0;g-=1){const v=f[g],{isExternal:_,modifiers:w,hasImportantModifier:I,baseClassName:V,maybePostfixModifierPosition:G}=t(v);if(_){p=v+(p.length>0?" "+p:p);continue}let H=!!G,Y=i(H?V.substring(0,G):V);if(!Y){if(!H){p=v+(p.length>0?" "+p:p);continue}if(Y=i(V),!Y){p=v+(p.length>0?" "+p:p);continue}H=!1}const ce=l(w).join(":"),re=I?ce+b_:ce,me=re+Y;if(u.includes(me))continue;u.push(me);const Me=a(Y,H);for(let Ee=0;Ee<Me.length;++Ee){const N=Me[Ee];u.push(re+N)}p=v+(p.length>0?" "+p:p)}return p};function C3(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=dC(e))&&(i&&(i+=" "),i+=t);return i}const dC=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=dC(n[i]))&&(t&&(t+=" "),t+=e);return t};function I3(n,...e){let t,i,a,l=u;function u(p){const g=e.reduce((v,_)=>_(v),n());return t=S3(g),i=t.cache.get,a=t.cache.set,l=f,f(p)}function f(p){const g=i(p);if(g)return g;const v=x3(p,t);return a(p,v),v}return function(){return l(C3.apply(null,arguments))}}const Jt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},fC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,mC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,R3=/^\d+\/\d+$/,N3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,k3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,D3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,O3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,M3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fl=n=>R3.test(n),Ue=n=>!!n&&!Number.isNaN(Number(n)),ia=n=>!!n&&Number.isInteger(Number(n)),Cg=n=>n.endsWith("%")&&Ue(n.slice(0,-1)),ir=n=>N3.test(n),P3=()=>!0,V3=n=>k3.test(n)&&!D3.test(n),pC=()=>!1,L3=n=>O3.test(n),U3=n=>M3.test(n),j3=n=>!ge(n)&&!_e(n),z3=n=>Kl(n,yC,pC),ge=n=>fC.test(n),ao=n=>Kl(n,vC,V3),Ig=n=>Kl(n,G3,Ue),iS=n=>Kl(n,gC,pC),B3=n=>Kl(n,_C,U3),Id=n=>Kl(n,bC,L3),_e=n=>mC.test(n),eu=n=>Yl(n,vC),F3=n=>Yl(n,$3),rS=n=>Yl(n,gC),q3=n=>Yl(n,yC),H3=n=>Yl(n,_C),Rd=n=>Yl(n,bC,!0),Kl=(n,e,t)=>{const i=fC.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},Yl=(n,e,t=!1)=>{const i=mC.exec(n);return i?i[1]?e(i[1]):t:!1},gC=n=>n==="position"||n==="percentage",_C=n=>n==="image"||n==="url",yC=n=>n==="length"||n==="size"||n==="bg-size",vC=n=>n==="length",G3=n=>n==="number",$3=n=>n==="family-name",bC=n=>n==="shadow",K3=()=>{const n=Jt("color"),e=Jt("font"),t=Jt("text"),i=Jt("font-weight"),a=Jt("tracking"),l=Jt("leading"),u=Jt("breakpoint"),f=Jt("container"),p=Jt("spacing"),g=Jt("radius"),v=Jt("shadow"),_=Jt("inset-shadow"),w=Jt("text-shadow"),I=Jt("drop-shadow"),V=Jt("blur"),G=Jt("perspective"),H=Jt("aspect"),Y=Jt("ease"),ce=Jt("animate"),re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],me=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Me=()=>[...me(),_e,ge],Ee=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],x=()=>[_e,ge,p],R=()=>[fl,"full","auto",...x()],P=()=>[ia,"none","subgrid",_e,ge],O=()=>["auto",{span:["full",ia,_e,ge]},ia,_e,ge],L=()=>[ia,"auto",_e,ge],C=()=>["auto","min","max","fr",_e,ge],Je=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ze=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...x()],ie=()=>[fl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],ne=()=>[n,_e,ge],Ne=()=>[...me(),rS,iS,{position:[_e,ge]}],ke=()=>["no-repeat",{repeat:["","x","y","space","round"]}],D=()=>["auto","cover","contain",q3,z3,{size:[_e,ge]}],X=()=>[Cg,eu,ao],Q=()=>["","none","full",g,_e,ge],se=()=>["",Ue,eu,ao],he=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ve=()=>[Ue,Cg,rS,iS],Ie=()=>["","none",V,_e,ge],Fe=()=>["none",Ue,_e,ge],hn=()=>["none",Ue,_e,ge],Mn=()=>[Ue,_e,ge],tn=()=>[fl,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ir],breakpoint:[ir],color:[P3],container:[ir],"drop-shadow":[ir],ease:["in","out","in-out"],font:[j3],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ir],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ir],shadow:[ir],spacing:["px",Ue],text:[ir],"text-shadow":[ir],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",fl,ge,_e,H]}],container:["container"],columns:[{columns:[Ue,ge,_e,f]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Me()}],overflow:[{overflow:Ee()}],"overflow-x":[{"overflow-x":Ee()}],"overflow-y":[{"overflow-y":Ee()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[ia,"auto",_e,ge]}],basis:[{basis:[fl,"full","auto",f,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ue,fl,"auto","initial","none",ge]}],grow:[{grow:["",Ue,_e,ge]}],shrink:[{shrink:["",Ue,_e,ge]}],order:[{order:[ia,"first","last","none",_e,ge]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":C()}],"auto-rows":[{"auto-rows":C()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...Je(),"normal"]}],"justify-items":[{"justify-items":[...Ze(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ze()]}],"align-content":[{content:["normal",...Je()]}],"align-items":[{items:[...Ze(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ze(),{baseline:["","last"]}]}],"place-content":[{"place-content":Je()}],"place-items":[{"place-items":[...Ze(),"baseline"]}],"place-self":[{"place-self":["auto",...Ze()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[f,"screen",...ie()]}],"min-w":[{"min-w":[f,"screen","none",...ie()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[u]},...ie()]}],h:[{h:["screen","lh",...ie()]}],"min-h":[{"min-h":["screen","lh","none",...ie()]}],"max-h":[{"max-h":["screen","lh",...ie()]}],"font-size":[{text:["base",t,eu,ao]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,_e,Ig]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cg,ge]}],"font-family":[{font:[F3,ge,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,_e,ge]}],"line-clamp":[{"line-clamp":[Ue,"none",_e,Ig]}],leading:[{leading:[l,...x()]}],"list-image":[{"list-image":["none",_e,ge]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",_e,ge]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ne()}],"text-color":[{text:ne()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ue,"from-font","auto",_e,ao]}],"text-decoration-color":[{decoration:ne()}],"underline-offset":[{"underline-offset":[Ue,"auto",_e,ge]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e,ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e,ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ne()}],"bg-repeat":[{bg:ke()}],"bg-size":[{bg:D()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ia,_e,ge],radial:["",_e,ge],conic:[ia,_e,ge]},H3,B3]}],"bg-color":[{bg:ne()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:ne()}],"gradient-via":[{via:ne()}],"gradient-to":[{to:ne()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:ne()}],"border-color-x":[{"border-x":ne()}],"border-color-y":[{"border-y":ne()}],"border-color-s":[{"border-s":ne()}],"border-color-e":[{"border-e":ne()}],"border-color-t":[{"border-t":ne()}],"border-color-r":[{"border-r":ne()}],"border-color-b":[{"border-b":ne()}],"border-color-l":[{"border-l":ne()}],"divide-color":[{divide:ne()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ue,_e,ge]}],"outline-w":[{outline:["",Ue,eu,ao]}],"outline-color":[{outline:ne()}],shadow:[{shadow:["","none",v,Rd,Id]}],"shadow-color":[{shadow:ne()}],"inset-shadow":[{"inset-shadow":["none",_,Rd,Id]}],"inset-shadow-color":[{"inset-shadow":ne()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ne()}],"ring-offset-w":[{"ring-offset":[Ue,ao]}],"ring-offset-color":[{"ring-offset":ne()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":ne()}],"text-shadow":[{"text-shadow":["none",w,Rd,Id]}],"text-shadow-color":[{"text-shadow":ne()}],opacity:[{opacity:[Ue,_e,ge]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ue]}],"mask-image-linear-from-pos":[{"mask-linear-from":ve()}],"mask-image-linear-to-pos":[{"mask-linear-to":ve()}],"mask-image-linear-from-color":[{"mask-linear-from":ne()}],"mask-image-linear-to-color":[{"mask-linear-to":ne()}],"mask-image-t-from-pos":[{"mask-t-from":ve()}],"mask-image-t-to-pos":[{"mask-t-to":ve()}],"mask-image-t-from-color":[{"mask-t-from":ne()}],"mask-image-t-to-color":[{"mask-t-to":ne()}],"mask-image-r-from-pos":[{"mask-r-from":ve()}],"mask-image-r-to-pos":[{"mask-r-to":ve()}],"mask-image-r-from-color":[{"mask-r-from":ne()}],"mask-image-r-to-color":[{"mask-r-to":ne()}],"mask-image-b-from-pos":[{"mask-b-from":ve()}],"mask-image-b-to-pos":[{"mask-b-to":ve()}],"mask-image-b-from-color":[{"mask-b-from":ne()}],"mask-image-b-to-color":[{"mask-b-to":ne()}],"mask-image-l-from-pos":[{"mask-l-from":ve()}],"mask-image-l-to-pos":[{"mask-l-to":ve()}],"mask-image-l-from-color":[{"mask-l-from":ne()}],"mask-image-l-to-color":[{"mask-l-to":ne()}],"mask-image-x-from-pos":[{"mask-x-from":ve()}],"mask-image-x-to-pos":[{"mask-x-to":ve()}],"mask-image-x-from-color":[{"mask-x-from":ne()}],"mask-image-x-to-color":[{"mask-x-to":ne()}],"mask-image-y-from-pos":[{"mask-y-from":ve()}],"mask-image-y-to-pos":[{"mask-y-to":ve()}],"mask-image-y-from-color":[{"mask-y-from":ne()}],"mask-image-y-to-color":[{"mask-y-to":ne()}],"mask-image-radial":[{"mask-radial":[_e,ge]}],"mask-image-radial-from-pos":[{"mask-radial-from":ve()}],"mask-image-radial-to-pos":[{"mask-radial-to":ve()}],"mask-image-radial-from-color":[{"mask-radial-from":ne()}],"mask-image-radial-to-color":[{"mask-radial-to":ne()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":me()}],"mask-image-conic-pos":[{"mask-conic":[Ue]}],"mask-image-conic-from-pos":[{"mask-conic-from":ve()}],"mask-image-conic-to-pos":[{"mask-conic-to":ve()}],"mask-image-conic-from-color":[{"mask-conic-from":ne()}],"mask-image-conic-to-color":[{"mask-conic-to":ne()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ne()}],"mask-repeat":[{mask:ke()}],"mask-size":[{mask:D()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",_e,ge]}],filter:[{filter:["","none",_e,ge]}],blur:[{blur:Ie()}],brightness:[{brightness:[Ue,_e,ge]}],contrast:[{contrast:[Ue,_e,ge]}],"drop-shadow":[{"drop-shadow":["","none",I,Rd,Id]}],"drop-shadow-color":[{"drop-shadow":ne()}],grayscale:[{grayscale:["",Ue,_e,ge]}],"hue-rotate":[{"hue-rotate":[Ue,_e,ge]}],invert:[{invert:["",Ue,_e,ge]}],saturate:[{saturate:[Ue,_e,ge]}],sepia:[{sepia:["",Ue,_e,ge]}],"backdrop-filter":[{"backdrop-filter":["","none",_e,ge]}],"backdrop-blur":[{"backdrop-blur":Ie()}],"backdrop-brightness":[{"backdrop-brightness":[Ue,_e,ge]}],"backdrop-contrast":[{"backdrop-contrast":[Ue,_e,ge]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ue,_e,ge]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ue,_e,ge]}],"backdrop-invert":[{"backdrop-invert":["",Ue,_e,ge]}],"backdrop-opacity":[{"backdrop-opacity":[Ue,_e,ge]}],"backdrop-saturate":[{"backdrop-saturate":[Ue,_e,ge]}],"backdrop-sepia":[{"backdrop-sepia":["",Ue,_e,ge]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",_e,ge]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ue,"initial",_e,ge]}],ease:[{ease:["linear","initial",Y,_e,ge]}],delay:[{delay:[Ue,_e,ge]}],animate:[{animate:["none",ce,_e,ge]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[G,_e,ge]}],"perspective-origin":[{"perspective-origin":Me()}],rotate:[{rotate:Fe()}],"rotate-x":[{"rotate-x":Fe()}],"rotate-y":[{"rotate-y":Fe()}],"rotate-z":[{"rotate-z":Fe()}],scale:[{scale:hn()}],"scale-x":[{"scale-x":hn()}],"scale-y":[{"scale-y":hn()}],"scale-z":[{"scale-z":hn()}],"scale-3d":["scale-3d"],skew:[{skew:Mn()}],"skew-x":[{"skew-x":Mn()}],"skew-y":[{"skew-y":Mn()}],transform:[{transform:[_e,ge,"","none","gpu","cpu"]}],"transform-origin":[{origin:Me()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:tn()}],"translate-x":[{"translate-x":tn()}],"translate-y":[{"translate-y":tn()}],"translate-z":[{"translate-z":tn()}],"translate-none":["translate-none"],accent:[{accent:ne()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ne()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e,ge]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e,ge]}],fill:[{fill:["none",...ne()]}],"stroke-w":[{stroke:[Ue,eu,ao,Ig]}],stroke:[{stroke:["none",...ne()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Y3=I3(K3);function EC(...n){return Y3(uC(n))}const Q3=m3("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground shadow-sm border-destructive-border",outline:" border [border-color:var(--button-outline)] shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent",link:"text-primary underline-offset-4 hover:underline"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),T_=oe.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...a},l)=>{const u=i?l3:"button";return T.jsx(u,{className:EC(Q3({variant:e,size:t,className:n})),ref:l,...a})});T_.displayName="Button";const Bd=oe.forwardRef(({className:n,type:e,...t},i)=>T.jsx("input",{type:e,className:EC("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:i,...t}));Bd.displayName="Input";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X3=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),aS=n=>{const e=X3(n);return e.charAt(0).toUpperCase()+e.slice(1)},TC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),J3=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=oe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:u,...f},p)=>oe.createElement("svg",{ref:p,...Z3,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:TC("lucide",a),...!l&&!J3(f)&&{"aria-hidden":"true"},...f},[...u.map(([g,v])=>oe.createElement(g,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=(n,e)=>{const t=oe.forwardRef(({className:i,...a},l)=>oe.createElement(eU,{ref:l,iconNode:e,className:TC(`lucide-${W3(aS(n))}`,`lucide-${n}`,i),...a}));return t.displayName=aS(n),t};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Na=en("arrow-left",tU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],wC=en("bookmark",nU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],iU=en("check",sU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],aU=en("grid-3x3",rU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],lU=en("hash",oU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Gy=en("heart",cU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Tr=en("loader-circle",uU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],SC=en("log-out",hU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],$y=en("message-circle",dU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],mU=en("moon",fU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],gU=en("pen",pU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yU=en("plus",_U);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],AC=en("search",vU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],EU=en("share-2",bU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],wU=en("sun",TU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],AU=en("trash-2",SU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],CU=en("users",xU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],RU=en("user",IU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],kU=en("zap",NU),DU=1,OU=1e6;let Rg=0;function MU(){return Rg=(Rg+1)%Number.MAX_SAFE_INTEGER,Rg.toString()}const Ng=new Map,oS=n=>{if(Ng.has(n))return;const e=setTimeout(()=>{Ng.delete(n),yu({type:"REMOVE_TOAST",toastId:n})},OU);Ng.set(n,e)},PU=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,DU)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?oS(t):n.toasts.forEach(i=>{oS(i.id)}),{...n,toasts:n.toasts.map(i=>i.id===t||t===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Fd=[];let qd={toasts:[]};function yu(n){qd=PU(qd,n),Fd.forEach(e=>{e(qd)})}function VU({...n}){const e=MU(),t=a=>yu({type:"UPDATE_TOAST",toast:{...a,id:e}}),i=()=>yu({type:"DISMISS_TOAST",toastId:e});return yu({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:a=>{a||i()}}}),{id:e,dismiss:i,update:t}}function LU(){const[n,e]=oe.useState(qd);return oe.useEffect(()=>(Fd.push(e),()=>{const t=Fd.indexOf(e);t>-1&&Fd.splice(t,1)}),[n]),{...n,toast:VU,dismiss:t=>yu({type:"DISMISS_TOAST",toastId:t})}}function lS(){const{loginWithGoogle:n,loginWithEmail:e,signupWithEmail:t,pendingGoogleUser:i}=ei(),[,a]=Zs(),{toast:l}=LU(),[u,f]=oe.useState(!1),[p,g]=oe.useState(!1),[v,_]=oe.useState(""),[w,I]=oe.useState(""),[V,G]=oe.useState(""),H=async()=>{f(!0);try{await n(),a("/")}catch(ce){ce.message==="USERNAME_SETUP_REQUIRED"?a("/setup"):l({variant:"destructive",title:"Error",description:ce.message||"Login failed"})}finally{f(!1)}},Y=async ce=>{if(ce.preventDefault(),!(!v||!w)&&!(p&&!V)){f(!0);try{p?await t(v,w,V):await e(v,w),a("/")}catch(re){l({variant:"destructive",title:"Error",description:re.message})}finally{f(!1)}}};return T.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 max-w-md mx-auto bg-background",children:[T.jsxs("div",{className:"w-full max-w-xs space-y-6",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("h1",{className:"text-6xl mb-4 text-primary",style:{fontFamily:"'Grand Hotel', cursive"},children:"InstaClone"}),T.jsx("p",{className:"text-muted-foreground",children:p?"Share your moments with the world.":"Log in to your account."})]}),T.jsxs("form",{onSubmit:Y,className:"space-y-3",children:[p&&T.jsx(Bd,{placeholder:"Full Name",className:"bg-muted/50",type:"text",value:V,onChange:ce=>G(ce.target.value)}),T.jsx(Bd,{placeholder:"Email",className:"bg-muted/50",type:"email",value:v,onChange:ce=>_(ce.target.value)}),T.jsx(Bd,{type:"password",placeholder:"Password",className:"bg-muted/50",value:w,onChange:ce=>I(ce.target.value)}),T.jsx(T_,{type:"submit",className:"w-full font-semibold mt-2 bg-primary hover:bg-primary/90 text-white",disabled:u,children:u?T.jsx(Tr,{className:"w-4 h-4 animate-spin"}):p?"Sign Up":"Log In"})]}),T.jsxs("div",{className:"relative my-6",children:[T.jsx("div",{className:"absolute inset-0 flex items-center",children:T.jsx("span",{className:"w-full border-t border-border"})}),T.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:T.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),T.jsxs(T_,{className:"w-full bg-white hover:bg-gray-50 text-black border border-border font-semibold flex items-center gap-2",onClick:H,disabled:u,children:[T.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5"}),"Log in with Google"]}),!p&&T.jsx("div",{className:"text-center mt-4",children:T.jsx("a",{href:"#",className:"text-xs text-blue-900 dark:text-blue-400",children:"Forgot password?"})})]}),T.jsx("div",{className:"mt-auto py-6 w-full border-t border-border text-center",children:T.jsxs("p",{className:"text-sm",children:[p?"Have an account?":"Don't have an account?",T.jsx("span",{className:"font-semibold text-blue-600 cursor-pointer ml-1",onClick:()=>g(!p),children:p?"Log in":"Sign up"})]})})]})}const w_={accessToken:"",businessAccountId:"",apiVersion:"v18.0",apiBaseUrl:"https://graph.instagram.com"};function xC(){return console.warn("Instagram API token not configured"),""}function CC(){return console.warn("Instagram business account ID not configured"),""}async function ka(n,e="GET",t,i){const a=i||xC();if(!a)throw new Error("Instagram API token not configured. Please connect your Instagram account.");const l=new URL(`${w_.apiBaseUrl}/${w_.apiVersion}/${n}`);l.searchParams.append("access_token",a);const u={method:e,headers:{"Content-Type":"application/json"}};try{const f=await fetch(l.toString(),u);if(!f.ok){const p=await f.json();throw new Error(`Instagram API Error: ${p.error?.message||f.statusText}`)}return await f.json()}catch(f){throw console.error("Instagram API request failed:",f),f}}async function nm(n,e){try{const t=n||w_.businessAccountId||"me",i=await ka(`${t}/media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count`,"GET",void 0,e);return i.data&&Array.isArray(i.data)?i.data:Array.isArray(i)?i:[]}catch(t){return console.error("Error fetching user media:",t),[]}}async function Ky(n="me",e){try{return await ka(`${n}?fields=id,name,biography,website,profile_picture_url,followers_count,follows_count,media_count,username`,"GET",void 0,e)}catch(t){return console.error("Error fetching user profile:",t),null}}async function IC(n="me"){try{const e=await ka(`${n}/ig_followed_users?fields=id,name,username,profile_picture_url,biography,website`);if(e.data&&Array.isArray(e.data))return e.data;if(e.error)throw console.error("Instagram API error:",e.error),new Error(e.error.message||"Failed to fetch following list");return[]}catch(e){throw console.error("Error fetching following list:",e),e}}async function RC(n){try{const e=await ka(`${n}/media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count`);return e.data&&Array.isArray(e.data)?e.data:[]}catch(e){return console.error(`Error fetching media for user ${n}:`,e),[]}}async function NC(n){try{const e=CC();if(!e)return console.warn("Business account ID not configured for hashtag search"),[];const t=await ka(`ig_hashtag_search?user_id=${e}&fields=id,name&search_string=${encodeURIComponent(n)}`);return t.data&&Array.isArray(t.data)?t.data:[]}catch(e){return console.error("Error searching hashtags:",e),[]}}async function kC(n){try{const e=await ka(`${n}/recent_media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count,username`);return e.data&&Array.isArray(e.data)?e.data:[]}catch(e){return console.error("Error fetching hashtag media:",e),[]}}async function Yy(n="me"){try{const e=await ka(`${n}/stories?fields=id,media_type,media_url,timestamp,like_count`);return e.data&&Array.isArray(e.data)?e.data:[]}catch(e){return console.error("Error fetching user stories:",e),[]}}const UU=Object.freeze(Object.defineProperty({__proto__:null,getHashtagMedia:kC,getInstagramAccessToken:xC,getInstagramBusinessAccountId:CC,getUserFollowing:IC,getUserMedia:nm,getUserMediaById:RC,getUserProfile:Ky,getUserStories:Yy,makeInstagramRequest:ka,searchHashtags:NC},Symbol.toStringTag,{value:"Module"}));function jU(){const{currentUser:n,logout:e,darkMode:t,toggleDarkMode:i,bookmarkedPosts:a,bookmarkPost:l,removeBookmark:u,getActiveInstagramToken:f}=ei(),[,p]=Zs(),[g,v]=oe.useState([]),[_,w]=oe.useState([]),[I,V]=oe.useState(!0),G=f();oe.useEffect(()=>{(async()=>{V(!0);try{const[ce,re]=await Promise.all([nm(void 0,G),Yy("me")]);v(ce),w(re)}catch(ce){console.error("Failed to load media:",ce)}finally{V(!1)}})()},[G]);const H=async()=>{await e(),p("/login")};return T.jsxs("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-white"}`,children:[T.jsx("header",{className:`sticky top-0 z-50 ${t?"bg-gray-900 border-gray-700":"bg-white border-gray-200"} border-b`,children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center justify-between",children:[T.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-black"}`,style:{fontFamily:"'Grand Hotel', cursive"},children:"InstaClone"}),T.jsxs("div",{className:"flex items-center gap-4",children:[G&&T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>p("/search"),className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-search",title:"Search",children:T.jsx(AC,{className:"w-5 h-5"})}),T.jsx("button",{onClick:()=>p("/bookmarks"),className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-bookmarks",title:"Saved posts",children:T.jsx(wC,{className:"w-5 h-5"})}),T.jsx("button",{onClick:i,className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-dark-mode",children:t?T.jsx(wU,{className:"w-5 h-5"}):T.jsx(mU,{className:"w-5 h-5"})}),T.jsx("button",{onClick:()=>p("/following"),className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-following",title:"View people you follow",children:T.jsx(CU,{className:"w-5 h-5"})})]}),T.jsx("button",{onClick:()=>p("/profile"),className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-profile",title:"Go to profile",children:T.jsx(RU,{className:"w-5 h-5"})}),T.jsx("button",{onClick:H,className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-logout",children:T.jsx(SC,{className:"w-5 h-5"})})]})]})}),T.jsx("main",{className:"max-w-2xl mx-auto",children:I?T.jsx("div",{className:"flex justify-center items-center h-96",children:T.jsx(Tr,{className:"w-8 h-8 animate-spin text-gray-400"})}):G?g.length===0?T.jsx("div",{className:"flex justify-center items-center h-96 text-gray-400",children:T.jsx("p",{children:"No media found"})}):T.jsxs("div",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:[_&&_.length>0&&T.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} px-4 py-4 border-b ${t?"border-gray-700":"border-gray-200"} sticky top-[60px] z-40`,children:T.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-4 px-4 snap-x snap-mandatory",children:_.map((Y,ce)=>T.jsxs("button",{onClick:()=>p("/stories"),className:"flex-shrink-0 relative group focus:outline-none","data-testid":`story-thumbnail-${ce}`,children:[T.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 via-purple-500 to-pink-500 p-[2px] group-hover:shadow-lg transition-all",children:T.jsx("div",{className:`w-full h-full rounded-full overflow-hidden ${t?"bg-gray-700":"bg-gray-200"} border-2 ${t?"border-gray-800":"border-white"}`,children:Y.media_url&&(Y.media_type==="VIDEO"?T.jsx("video",{src:Y.media_url,className:"w-full h-full object-cover"}):T.jsx("img",{src:Y.media_url,alt:"Story",className:"w-full h-full object-cover"}))})}),T.jsx("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold text-white ${t?"bg-blue-600":"bg-blue-500"}`,children:ce+1})]},`story-${ce}`))})}),g.map(Y=>T.jsxs("article",{className:t?"bg-gray-800":"bg-white","data-testid":`post-${Y.id}`,children:[T.jsxs("div",{className:`px-4 py-3 flex items-center justify-between ${t?"border-gray-700":"border-gray-200"}`,children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),T.jsx("span",{className:`text-sm font-semibold ${t?"text-white":"text-black"}`,children:n?.username})]}),T.jsx("button",{className:t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black","data-testid":`button-more-${Y.id}`,children:""})]}),T.jsx("div",{className:"bg-black w-full aspect-square overflow-hidden",children:Y.media_type==="VIDEO"?T.jsx("video",{src:Y.media_url,className:"w-full h-full object-cover",controls:!0,"data-testid":`video-${Y.id}`}):T.jsx("img",{src:Y.media_url,alt:Y.caption||"Instagram post",className:"w-full h-full object-cover","data-testid":`image-${Y.id}`})}),T.jsxs("div",{className:"px-4 py-3 flex gap-4",children:[T.jsx("button",{className:t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black","data-testid":`button-like-${Y.id}`,children:T.jsx(Gy,{className:"w-6 h-6"})}),T.jsx("button",{className:t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black","data-testid":`button-comment-${Y.id}`,children:T.jsx($y,{className:"w-6 h-6"})}),T.jsx("button",{className:t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black","data-testid":`button-share-${Y.id}`,children:T.jsx(EU,{className:"w-6 h-6"})})]}),T.jsx("div",{className:"px-4 py-2 border-t border-gray-200",children:T.jsxs("p",{className:"text-sm font-semibold","data-testid":`likes-${Y.id}`,children:[Y.like_count||0," likes"]})}),Y.caption&&T.jsx("div",{className:"px-4 py-2",children:T.jsxs("p",{className:"text-sm",children:[T.jsx("span",{className:"font-semibold",children:n?.username})," ",T.jsx("span",{"data-testid":`caption-${Y.id}`,children:Y.caption})]})}),Y.comments_count>0&&T.jsx("div",{className:"px-4 py-2",children:T.jsxs("p",{className:"text-sm text-gray-600 cursor-pointer hover:text-black","data-testid":`comments-${Y.id}`,children:["View all ",Y.comments_count," comments"]})}),Y.timestamp&&T.jsx("div",{className:"px-4 pb-3",children:T.jsx("p",{className:"text-xs text-gray-400",children:new Date(Y.timestamp).toLocaleDateString()})})]},Y.id))]}):T.jsxs("div",{className:"flex flex-col justify-center items-center h-96 text-center px-4",children:[T.jsx("p",{className:`font-semibold mb-4 ${t?"text-gray-300":"text-gray-600"}`,children:"Instagram Account Not Connected"}),T.jsx("p",{className:`text-sm mb-6 ${t?"text-gray-400":"text-gray-500"}`,children:"Connect your Instagram account to see your feed and posts."}),T.jsx("button",{onClick:()=>p("/profile/connect-instagram"),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-lg font-medium transition-colors","data-testid":"button-connect-instagram-home",children:"Connect Instagram"})]})})]})}function zU(){const{currentUser:n,logout:e,darkMode:t,getActiveInstagramToken:i,switchInstagramAccount:a,removeInstagramAccount:l}=ei(),[,u]=Zs(),[f,p]=oe.useState(null),[g,v]=oe.useState([]),[_,w]=oe.useState(!0),[I,V]=oe.useState("posts"),[G,H]=oe.useState(!1),Y=i();oe.useEffect(()=>{(async()=>{w(!0);try{const me=await Ky("me",Y);p(me);const Me=await nm(void 0,Y);v(Me)}catch(me){console.error("Failed to load profile:",me)}finally{w(!1)}})()},[Y]);const ce=async()=>{await e(),u("/login")};return T.jsxs("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-white"}`,children:[T.jsx("header",{className:`sticky top-0 z-50 ${t?"bg-gray-900 border-gray-700":"bg-white border-gray-200"} border-b`,children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center justify-between",children:[T.jsx("button",{onClick:()=>u("/"),className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:`text-lg font-semibold ${t?"text-white":"text-black"}`,"data-testid":"text-profile-title",children:n?.username}),T.jsx("button",{onClick:ce,className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-logout",children:T.jsx(SC,{className:"w-5 h-5"})})]})}),T.jsx("main",{className:"max-w-2xl mx-auto px-4 py-8",children:_?T.jsx("div",{className:"flex justify-center items-center h-96",children:T.jsx(Tr,{className:"w-8 h-8 animate-spin text-gray-400"})}):Y?f?T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"flex gap-8 items-start",children:[T.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full overflow-hidden flex-shrink-0",children:f.profile_picture_url&&T.jsx("img",{src:f.profile_picture_url,alt:f.name,className:"w-full h-full object-cover","data-testid":"img-avatar"})}),T.jsxs("div",{className:"flex-1 space-y-4",children:[T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h2",{className:`text-2xl font-semibold ${t?"text-white":"text-black"}`,"data-testid":"text-username",children:f.name||n?.username}),T.jsxs("div",{className:"flex gap-2",children:[T.jsxs("button",{onClick:()=>u("/stories"),className:"bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors","data-testid":"button-view-stories",title:"View your stories",children:[T.jsx(kU,{className:"w-4 h-4"}),"Stories"]}),T.jsxs("button",{onClick:()=>u("/profile/edit"),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors","data-testid":"button-edit-profile",children:[T.jsx(gU,{className:"w-4 h-4"}),"Edit"]})]})]}),T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsxs("button",{onClick:()=>H(!G),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors w-fit text-sm","data-testid":"button-accounts-menu",children:[T.jsx(yU,{className:"w-4 h-4"}),n?.instagramAccounts?.length?"Manage Accounts":"Connect Instagram"]}),G&&n?.instagramAccounts&&n.instagramAccounts.length>0&&T.jsxs("div",{className:`border rounded-lg p-3 space-y-2 ${t?"border-gray-600 bg-gray-800":"border-gray-200 bg-gray-50"}`,children:[n.instagramAccounts.map((re,me)=>T.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${me===(n.activeInstagramAccountId||0)?t?"bg-gray-700":"bg-blue-100":""}`,children:[T.jsxs("button",{onClick:()=>a(me),className:`flex-1 text-left flex items-center gap-2 text-sm ${me===(n.activeInstagramAccountId||0)?"font-semibold":""}`,"data-testid":`button-account-${me}`,children:[me===(n.activeInstagramAccountId||0)&&T.jsx(iU,{className:"w-4 h-4 text-blue-500"}),re.accountName]}),T.jsx("button",{onClick:()=>l(me),className:`text-red-500 hover:text-red-700 p-1 ${n.instagramAccounts.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:n.instagramAccounts.length===1,"data-testid":`button-delete-account-${me}`,children:T.jsx(AU,{className:"w-4 h-4"})})]},me)),T.jsx("button",{onClick:()=>u("/profile/connect-instagram"),className:"w-full text-blue-600 hover:text-blue-700 text-sm font-medium mt-2 py-1","data-testid":"button-add-another-account",children:"+ Add Another Account"})]})]})]}),T.jsxs("div",{className:"flex gap-8 text-sm",children:[T.jsxs("div",{"data-testid":"stat-posts",children:[T.jsx("span",{className:`font-semibold ${t?"text-white":"text-black"}`,children:f.media_count||0}),T.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"posts"})]}),T.jsxs("div",{"data-testid":"stat-followers",children:[T.jsx("span",{className:`font-semibold ${t?"text-white":"text-black"}`,children:f.followers_count||0}),T.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"followers"})]}),T.jsxs("div",{"data-testid":"stat-following",children:[T.jsx("span",{className:`font-semibold ${t?"text-white":"text-black"}`,children:f.follows_count||0}),T.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"following"})]})]})]})]}),T.jsxs("div",{className:`border-t ${t?"border-gray-700":"border-gray-200"} pt-6 space-y-3`,children:[f.biography&&T.jsxs("div",{"data-testid":"text-bio",children:[T.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Bio"}),T.jsx("p",{className:`text-sm whitespace-pre-wrap ${t?"text-gray-400":"text-gray-600"}`,children:f.biography})]}),n?.bio&&T.jsxs("div",{"data-testid":"text-user-bio",children:[T.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Personal Bio"}),T.jsx("p",{className:`text-sm whitespace-pre-wrap ${t?"text-gray-400":"text-gray-600"}`,children:n.bio})]})]}),T.jsxs("div",{className:"space-y-3",children:[f.website&&T.jsxs("div",{children:[T.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Website"}),T.jsx("a",{href:f.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline text-sm break-all","data-testid":"link-instagram-website",children:f.website})]}),n?.website&&T.jsxs("div",{children:[T.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Personal Website"}),T.jsx("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline text-sm break-all","data-testid":"link-personal-website",children:n.website})]})]}),T.jsx("div",{className:`border-t ${t?"border-gray-700":"border-gray-200"} mt-8`,children:T.jsxs("div",{className:"flex items-center justify-center gap-8",children:[T.jsxs("button",{onClick:()=>V("posts"),className:`py-4 px-4 flex items-center gap-2 transition-colors border-t-2 ${I==="posts"?t?"border-white text-white":"border-gray-900 text-gray-900":t?"border-transparent text-gray-400 hover:text-white":"border-transparent text-gray-600 hover:text-gray-800"}`,"data-testid":"tab-posts",children:[T.jsx(aU,{className:"w-4 h-4"}),T.jsx("span",{className:"text-sm font-medium",children:"Posts"})]}),T.jsxs("button",{onClick:()=>V("saved"),className:`py-4 px-4 flex items-center gap-2 transition-colors border-t-2 ${I==="saved"?t?"border-white text-white":"border-gray-900 text-gray-900":t?"border-transparent text-gray-400 hover:text-white":"border-transparent text-gray-600 hover:text-gray-800"}`,"data-testid":"tab-saved",children:[T.jsx(wC,{className:"w-4 h-4"}),T.jsx("span",{className:"text-sm font-medium",children:"Saved"})]})]})}),I==="posts"&&T.jsx("div",{className:"mt-6",children:g.length===0?T.jsx("div",{className:`flex justify-center items-center h-96 ${t?"text-gray-500":"text-gray-400"}`,children:T.jsx("p",{children:"No posts yet"})}):T.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-2",children:g.map(re=>T.jsxs("div",{className:`aspect-square ${t?"bg-gray-800":"bg-gray-100"} overflow-hidden hover:opacity-80 transition-opacity cursor-pointer group relative`,"data-testid":`media-grid-${re.id}`,children:[re.media_type==="VIDEO"?T.jsx("video",{src:re.media_url,className:"w-full h-full object-cover","data-testid":`grid-video-${re.id}`}):T.jsx("img",{src:re.media_url,alt:re.caption||"Instagram post",className:"w-full h-full object-cover","data-testid":`grid-image-${re.id}`}),T.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsxs("div",{className:"flex items-center gap-4 text-white",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("span",{className:"text-sm font-semibold",children:re.like_count||0}),T.jsx("span",{className:"text-xs",children:""})]}),T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("span",{className:"text-sm font-semibold",children:re.comments_count||0}),T.jsx("span",{className:"text-xs",children:""})]})]})})]},re.id))})}),I==="saved"&&T.jsx("div",{className:"mt-6",children:T.jsx("div",{className:`flex justify-center items-center h-96 ${t?"text-gray-500":"text-gray-400"}`,children:T.jsx("p",{children:"No saved posts yet"})})})]}):f?null:T.jsx("div",{className:`flex justify-center items-center h-96 ${t?"text-gray-500":"text-gray-400"}`,children:T.jsx("p",{children:"Failed to load profile"})}):T.jsxs("div",{className:"flex flex-col justify-center items-center h-96 text-center px-4",children:[T.jsx("p",{className:`font-semibold mb-4 ${t?"text-gray-300":"text-gray-600"}`,children:"Instagram Account Not Connected"}),T.jsx("p",{className:`text-sm mb-6 ${t?"text-gray-400":"text-gray-500"}`,children:"Connect your Instagram account to view your profile and manage accounts."}),T.jsx("button",{onClick:()=>u("/profile/connect-instagram"),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-lg font-medium transition-colors","data-testid":"button-connect-instagram-profile",children:"Connect Instagram"})]})})]})}function BU(){const{currentUser:n,updateProfile:e}=ei(),[,t]=Zs(),[i,a]=oe.useState(!1),[l,u]=oe.useState(""),[f,p]=oe.useState(!1),[g,v]=oe.useState({fullName:n?.fullName||"",bio:n?.bio||"",website:n?.website||""}),_=I=>{const{name:V,value:G}=I.target;v(H=>({...H,[V]:G})),u(""),p(!1)},w=async I=>{I.preventDefault(),a(!0),u(""),p(!1);try{await e({fullName:g.fullName||void 0,bio:g.bio||void 0,website:g.website||void 0}),p(!0),setTimeout(()=>t("/profile"),1500)}catch(V){u(V instanceof Error?V.message:"Failed to update profile")}finally{a(!1)}};return T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center justify-between",children:[T.jsx("button",{onClick:()=>t("/profile"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Edit Profile"}),T.jsx("div",{className:"w-6"})]})}),T.jsx("main",{className:"max-w-2xl mx-auto px-4 py-8",children:T.jsxs("form",{onSubmit:w,className:"space-y-6 max-w-md",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),T.jsx("input",{type:"text",name:"fullName",value:g.fullName,onChange:_,placeholder:"Your full name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"input-fullname"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),T.jsx("textarea",{name:"bio",value:g.bio,onChange:_,placeholder:"Tell us about yourself",maxLength:500,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none","data-testid":"textarea-bio"}),T.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.bio.length,"/500"]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),T.jsx("input",{type:"url",name:"website",value:g.website,onChange:_,placeholder:"https://example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"input-website"})]}),l&&T.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:T.jsx("p",{className:"text-sm text-red-600","data-testid":"error-message",children:l})}),f&&T.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:T.jsx("p",{className:"text-sm text-green-600","data-testid":"success-message",children:"Profile updated successfully!"})}),T.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white font-medium py-2 rounded-lg transition-colors flex items-center justify-center gap-2","data-testid":"button-save",children:i?T.jsxs(T.Fragment,{children:[T.jsx(Tr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"}),T.jsx("button",{type:"button",onClick:()=>t("/profile"),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 rounded-lg transition-colors","data-testid":"button-cancel",children:"Cancel"})]})})]})}function FU(){const{currentUser:n}=ei(),[,e]=Zs(),[t,i]=oe.useState([]),[a,l]=oe.useState({}),[u,f]=oe.useState(!0),[p,g]=oe.useState("");return oe.useEffect(()=>{(async()=>{f(!0),g("");try{console.log("Starting to load following list...");const _=await IC();console.log("Following list loaded:",_),i(_);const w={};for(const I of _.slice(0,5)){const V=await RC(I.id);w[I.id]=V.slice(0,6)}l(w)}catch(_){console.error("Failed to load following:",_),g(_?.message||"Instagram Graph API doesn't support listing followed users with your current token. This is a limitation of Instagram's API - only certain account types and permissions can access this feature.")}finally{f(!1)}})()},[]),T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-4",children:[T.jsx("button",{onClick:()=>e("/"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Following"})]})}),T.jsx("main",{className:"max-w-2xl mx-auto px-4 py-6",children:u?T.jsx("div",{className:"flex justify-center items-center h-96",children:T.jsx(Tr,{className:"w-8 h-8 animate-spin text-gray-400"})}):p?T.jsxs("div",{className:"flex flex-col justify-center items-center h-96 text-center px-4",children:[T.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"API Limitation"}),T.jsx("p",{className:"text-gray-600 text-sm",children:p}),n&&T.jsx("p",{className:"text-gray-500 text-xs mt-4",children:"The API doesn't support listing who you follow. Go to Instagram to see your following list."})]}):t.length===0?T.jsx("div",{className:"flex justify-center items-center h-96 text-gray-400",children:T.jsx("p",{children:"You're not following anyone yet"})}):T.jsx("div",{className:"space-y-12",children:t.map(v=>T.jsxs("div",{className:"border-b border-gray-200 pb-8 last:border-b-0",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[T.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full overflow-hidden flex-shrink-0",children:v.profile_picture_url&&T.jsx("img",{src:v.profile_picture_url,alt:v.name,className:"w-full h-full object-cover","data-testid":`avatar-${v.id}`})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h2",{className:"font-semibold text-lg","data-testid":`name-${v.id}`,children:v.name||v.username}),T.jsxs("p",{className:"text-sm text-gray-600","data-testid":`username-${v.id}`,children:["@",v.username]}),v.biography&&T.jsx("p",{className:"text-sm text-gray-700 mt-1 line-clamp-2",children:v.biography})]})]}),a[v.id]&&a[v.id].length>0?T.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:a[v.id].map(_=>T.jsxs("div",{className:"aspect-square bg-gray-100 overflow-hidden rounded-lg hover:opacity-80 transition-opacity cursor-pointer group relative","data-testid":`media-${_.id}`,children:[_.media_type==="VIDEO"?T.jsx("video",{src:_.media_url,className:"w-full h-full object-cover","data-testid":`video-${_.id}`}):T.jsx("img",{src:_.media_url,alt:_.caption||"Post",className:"w-full h-full object-cover","data-testid":`image-${_.id}`}),T.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsxs("div",{className:"flex items-center gap-4 text-white",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("span",{className:"text-sm font-semibold",children:_.like_count||0}),T.jsx("span",{className:"text-xs",children:""})]}),T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("span",{className:"text-sm font-semibold",children:_.comments_count||0}),T.jsx("span",{className:"text-xs",children:""})]})]})})]},_.id))}):T.jsx("p",{className:"text-sm text-gray-400",children:"No posts yet"})]},v.id))})})]})}function qU(){const{currentUser:n,addInstagramAccount:e}=ei(),[,t]=Zs(),[i,a]=oe.useState(""),[l,u]=oe.useState(""),[f,p]=oe.useState(!1),[g,v]=oe.useState(null),_=async I=>{const V=I.target.value;if(a(V),V.trim()&&V.length>50)try{const G=await Ky("me",V);v(G)}catch{v(null)}else v(null)},w=async I=>{if(I.preventDefault(),!i.trim()){_u.error("Please enter your Instagram access token");return}p(!0);try{await e(i,l||void 0),_u.success("Instagram account connected!"),t("/profile")}catch(V){console.error("Failed to connect Instagram:",V),_u.error("Failed to connect Instagram account")}finally{p(!1)}};return T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3",children:[T.jsx("button",{onClick:()=>t("/profile"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Connect Instagram"})]})}),T.jsx("main",{className:"max-w-2xl mx-auto px-4 py-8",children:T.jsxs("div",{className:"space-y-6 max-w-md",children:[T.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800",children:[T.jsx("p",{className:"font-semibold mb-2",children:"How to get your Instagram access token:"}),T.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[T.jsxs("li",{children:["Go to ",T.jsx("a",{href:"https://developers.instagram.com",target:"_blank",rel:"noopener noreferrer",className:"underline font-semibold",children:"Instagram for Developers"})]}),T.jsx("li",{children:"Create an app or use existing one"}),T.jsx("li",{children:"Go to Roles  Testers and add your account"}),T.jsx("li",{children:"Generate an access token with instagram_basic, instagram_graph_user_media permissions"}),T.jsx("li",{children:"Copy and paste the token below"})]})]}),T.jsxs("form",{onSubmit:w,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"accountName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name (Optional)"}),T.jsx("input",{id:"accountName",type:"text",value:l,onChange:I=>u(I.target.value),placeholder:"e.g., My Main Account, Business Account...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:f,"data-testid":"input-account-name"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"token",className:"block text-sm font-medium text-gray-700 mb-2",children:"Instagram Access Token"}),T.jsx("textarea",{id:"token",value:i,onChange:_,placeholder:"Paste your Instagram access token here...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:4,disabled:f,"data-testid":"input-token"})]}),g&&T.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[T.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:" Account Preview:"}),T.jsxs("div",{className:"text-sm space-y-1 text-gray-600",children:[g.username&&T.jsxs("p",{children:[" Username: ",T.jsxs("strong",{children:["@",g.username]})]}),g.name&&T.jsxs("p",{children:[" Name: ",T.jsx("strong",{children:g.name})]})]})]}),T.jsxs("button",{type:"submit",disabled:f||!i.trim(),className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2","data-testid":"button-connect",children:[f&&T.jsx(Tr,{className:"w-4 h-4 animate-spin"}),f?"Connecting...":"Connect Instagram"]})]}),n?.instagramAccounts&&n.instagramAccounts.length>0&&T.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-sm text-green-800",children:[T.jsxs("p",{className:"font-semibold",children:[" ",n.instagramAccounts.length," account(s) connected"]}),T.jsx("p",{className:"text-xs mt-1",children:"You can manage all your accounts from your profile."})]}),T.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-xs text-gray-600 space-y-2",children:[T.jsx("p",{className:"font-semibold text-gray-700",children:"Why do we need this?"}),T.jsx("p",{children:"Each user needs to connect their own Instagram account to see their personal Instagram profile, posts, followers, and engagement metrics."}),T.jsx("p",{children:"Your token is securely stored and only used to fetch YOUR Instagram data."})]})]})})]})}function HU(){const{currentUser:n}=ei(),[,e]=Zs(),[t,i]=oe.useState(""),[a,l]=oe.useState([]),[u,f]=oe.useState(!1),p=async g=>{if(g.preventDefault(),!!t.trim()){f(!0);try{const v=await NC(t);l(v),v.length===0&&_u.info("No hashtags found")}catch(v){console.error("Search failed:",v),_u.error("Search failed")}finally{f(!1)}}};return T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3",children:[T.jsx("button",{onClick:()=>e("/"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Search"})]})}),T.jsxs("main",{className:"max-w-2xl mx-auto px-4 py-6 space-y-6",children:[T.jsx("form",{onSubmit:p,className:"relative",children:T.jsxs("div",{className:"relative",children:[T.jsx(AC,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"text",value:t,onChange:g=>i(g.target.value),placeholder:"Search hashtags...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"input-search"})]})}),u&&T.jsx("div",{className:"flex justify-center",children:T.jsx(Tr,{className:"w-6 h-6 animate-spin text-gray-400"})}),T.jsx("div",{className:"space-y-2",children:a.map(g=>T.jsxs("button",{onClick:()=>e(`/hashtag/${g.id}?name=${g.name}`),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors text-left border border-gray-200","data-testid":`hashtag-${g.name}`,children:[T.jsx(lU,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),T.jsx("div",{children:T.jsxs("p",{className:"font-semibold text-gray-900",children:["#",g.name]})})]},g.id))}),t&&!u&&a.length===0&&T.jsx("div",{className:"text-center py-8 text-gray-500",children:T.jsxs("p",{children:['No hashtags found for "',t,'"']})})]})]})}function GU(){const{currentUser:n,bookmarkedPosts:e,bookmarkPost:t,removeBookmark:i}=ei(),[,a]=Zs(),[,l]=UR("/hashtag/:id"),[u,f]=oe.useState([]),[p,g]=oe.useState(!0),v=l?.id,_=new URLSearchParams(window.location.search).get("name");return oe.useEffect(()=>{(async()=>{if(!(!v||!n?.instagramToken)){g(!0);try{const I=await kC(v);f(I)}catch(I){console.error("Failed to load hashtag media:",I)}finally{g(!1)}}})()},[v,n?.instagramToken]),T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3",children:[T.jsx("button",{onClick:()=>a("/search"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsxs("h1",{className:"text-lg font-semibold",children:["#",_]})]})}),T.jsx("main",{className:"max-w-2xl mx-auto",children:p?T.jsx("div",{className:"flex justify-center items-center h-96",children:T.jsx(Tr,{className:"w-8 h-8 animate-spin text-gray-400"})}):u.length===0?T.jsx("div",{className:"flex justify-center items-center h-96 text-gray-400",children:T.jsx("p",{children:"No posts found"})}):T.jsx("div",{className:"space-y-6 p-4",children:u.map(w=>{const I=e.includes(w.id);return T.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow","data-testid":`post-${w.id}`,children:[w.media_url&&T.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:w.media_type==="VIDEO"?T.jsx("video",{src:w.media_url,className:"w-full h-full object-cover",controls:!0}):T.jsx("img",{src:w.media_url,alt:w.caption,className:"w-full h-full object-cover"})}),T.jsxs("div",{className:"p-4 space-y-3",children:[w.caption&&T.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:w.caption}),T.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx(Gy,{className:"w-4 h-4"}),T.jsx("span",{children:w.like_count||0})]}),T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx($y,{className:"w-4 h-4"}),T.jsx("span",{children:w.comments_count||0})]})]}),T.jsx("button",{onClick:()=>I?i(w.id):t(w.id),className:`w-full py-2 rounded-lg font-medium transition-colors ${I?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,"data-testid":`button-bookmark-${w.id}`,children:I?"Saved":"Save"})]})]},w.id)})})})]})}function $U(){const{currentUser:n,bookmarkedPosts:e,removeBookmark:t}=ei(),[,i]=Zs(),[a,l]=oe.useState([]),[u,f]=oe.useState(!0);return oe.useEffect(()=>{(async()=>{if(n?.instagramToken){f(!0);try{const v=(await nm(void 0,n.instagramToken)).filter(_=>e.includes(_.id));l(v)}catch(g){console.error("Failed to load bookmarks:",g)}finally{f(!1)}}})()},[n?.instagramToken,e]),T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3",children:[T.jsx("button",{onClick:()=>i("/profile"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Saved Posts"})]})}),T.jsx("main",{className:"max-w-2xl mx-auto",children:u?T.jsx("div",{className:"flex justify-center items-center h-96",children:T.jsx("p",{className:"text-gray-400",children:"Loading..."})}):a.length===0?T.jsx("div",{className:"flex justify-center items-center h-96 text-gray-400",children:T.jsx("p",{children:"No saved posts yet"})}):T.jsx("div",{className:"grid grid-cols-3 gap-1 p-1",children:a.map(p=>T.jsxs("div",{className:"aspect-square bg-gray-100 overflow-hidden cursor-pointer group relative",onClick:()=>i(`/post/${p.id}`),"data-testid":`bookmark-${p.id}`,children:[p.media_type==="VIDEO"?T.jsx("video",{src:p.media_url,className:"w-full h-full object-cover group-hover:opacity-75 transition-opacity"}):T.jsx("img",{src:p.media_url,alt:p.caption,className:"w-full h-full object-cover group-hover:opacity-75 transition-opacity"}),T.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all flex items-center justify-center gap-4 opacity-0 group-hover:opacity-100",children:[T.jsxs("div",{className:"flex items-center gap-1 text-white",children:[T.jsx(Gy,{className:"w-5 h-5"}),T.jsx("span",{children:p.like_count||0})]}),T.jsxs("div",{className:"flex items-center gap-1 text-white",children:[T.jsx($y,{className:"w-5 h-5"}),T.jsx("span",{children:p.comments_count||0})]})]})]},p.id))})})]})}function KU(){const{currentUser:n}=ei(),[,e]=Zs(),[t,i]=oe.useState([]),[a,l]=oe.useState(0),[u,f]=oe.useState(!0);if(oe.useEffect(()=>{(async()=>{if(!n?.instagramAccounts?.length){f(!1);return}try{if(n.instagramAccounts[n.activeInstagramAccountId??0]?.token){const I=await Yy("me");i(I)}}catch(w){console.error("Error loading stories:",w)}finally{f(!1)}})()},[n]),!n?.instagramAccounts?.length)return T.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-gray-600",children:"Connect your Instagram account to view stories."}),T.jsx("button",{onClick:()=>e("/profile/connect-instagram"),className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:"Connect Instagram"})]})});if(u)return T.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:T.jsx(Tr,{className:"w-8 h-8 animate-spin text-white"})});if(t.length===0)return T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3",children:[T.jsx("button",{onClick:()=>e("/"),className:"text-gray-600 hover:text-black","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Stories"})]})}),T.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-60px)]",children:T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-gray-600",children:"No stories yet"}),T.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Post a story on Instagram to see it here"})]})})]});const p=t[a],g=a<t.length-1,v=a>0;return T.jsx("div",{className:"fixed inset-0 bg-black flex items-center justify-center z-50",children:T.jsxs("div",{className:"relative w-full h-full max-w-md mx-auto flex flex-col bg-black",children:[T.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gray-800 z-10",children:T.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${(a+1)/t.length*100}%`}})}),T.jsx("div",{className:"flex-1 relative flex items-center justify-center overflow-hidden",children:p?.media_url?p.media_type==="VIDEO"?T.jsx("video",{src:p.media_url,className:"w-full h-full object-cover",autoPlay:!0,"data-testid":"story-video"}):T.jsx("img",{src:p.media_url,alt:"Story",className:"w-full h-full object-cover","data-testid":"story-image"}):null}),T.jsxs("div",{className:"absolute inset-y-0 left-0 right-0 flex items-center justify-between px-4 pointer-events-none",children:[v&&T.jsx("button",{onClick:()=>l(a-1),className:"pointer-events-auto w-12 h-12 flex items-center justify-center text-white hover:bg-black/30 rounded-full transition-colors","data-testid":"button-prev-story",children:""}),!v&&T.jsx("div",{className:"w-12"}),g&&T.jsx("button",{onClick:()=>l(a+1),className:"pointer-events-auto w-12 h-12 flex items-center justify-center text-white hover:bg-black/30 rounded-full transition-colors","data-testid":"button-next-story",children:""}),!g&&T.jsx("div",{className:"w-12"})]}),T.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 right-4 z-20 text-white hover:bg-white/20 rounded-full p-2 transition-colors","data-testid":"button-close-stories",children:""}),T.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex items-center justify-between z-10 text-white text-sm",children:[T.jsxs("span",{children:[a+1," of ",t.length]}),p?.timestamp&&T.jsx("span",{className:"text-xs text-gray-300",children:new Date(p.timestamp).toLocaleDateString()})]})]})})}function YU(){const{isAuthenticated:n,initializeAuth:e}=ei();return oe.useEffect(()=>{e()},[]),n?T.jsxs(T.Fragment,{children:[T.jsxs(bS,{base:"/",children:[T.jsx(wi,{path:"/login",component:lS}),T.jsx(wi,{path:"/",component:jU}),T.jsx(wi,{path:"/profile",component:zU}),T.jsx(wi,{path:"/profile/edit",component:BU}),T.jsx(wi,{path:"/profile/connect-instagram",component:qU}),T.jsx(wi,{path:"/following",component:FU}),T.jsx(wi,{path:"/search",component:HU}),T.jsx(wi,{path:"/hashtag/:id",component:GU}),T.jsx(wi,{path:"/bookmarks",component:$U}),T.jsx(wi,{path:"/stories",component:KU})]}),T.jsx(s3,{})]}):T.jsx(lS,{})}_R.createRoot(document.getElementById("root")).render(T.jsx(YU,{}));
