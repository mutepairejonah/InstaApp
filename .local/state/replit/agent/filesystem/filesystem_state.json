{"file_contents":{"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4419},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/pages/Messages.tsx":{"content":"import { BottomNav } from \"@/components/BottomNav\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { ArrowLeft, Send, Search, Loader2, MoreVertical, Phone, Video, X } from \"lucide-react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation, Link } from \"wouter\";\nimport { useState, useEffect } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { initializeSocket, emitMessage, onMessageReceived, onMessagesLoaded, offAllEvents } from \"@/lib/socket\";\n\ninterface Message {\n  id: string;\n  conversationId: string;\n  senderId: string;\n  recipientId: string;\n  message: string;\n  timestamp?: string | { toDate: () => Date } | null;\n  read: boolean;\n}\n\ninterface User {\n  id: string;\n  username: string;\n  fullName: string;\n  avatar: string;\n  isOnline?: boolean;\n}\n\ninterface Conversation {\n  userId: string;\n  username: string;\n  fullName: string;\n  avatar: string;\n  lastMessage: string;\n  lastMessageTime: string;\n  isOnline: boolean;\n  unread: number;\n}\n\nexport default function Messages() {\n  const { currentUser, getMessages, logout } = useStore();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  // State\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [selectedUserId, setSelectedUserId] = useState<string | null>(null);\n  const [messageInput, setMessageInput] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [isTyping, setIsTyping] = useState(false);\n  const [onlineUsers, setOnlineUsers] = useState<Set<string>>(new Set());\n\n  const selectedConversation = conversations.find(c => c.userId === selectedUserId);\n\n  useEffect(() => {\n    if (!currentUser) return;\n    initializeSocket(currentUser.id);\n\n    // Simulate online status - in production use heartbeat\n    const interval = setInterval(() => {\n      setOnlineUsers(prev => new Set(Array.from(prev)));\n    }, 30000);\n\n    return () => clearInterval(interval);\n  }, [currentUser]);\n\n  useEffect(() => {\n    const loadConversations = async () => {\n      if (!currentUser) return;\n      try {\n        // Load all users for messaging\n        const res = await fetch(`/api/search/users?q=`);\n        const data = await res.json();\n        \n        const convoList: Conversation[] = data\n          .filter((user: any) => user.id !== currentUser.id) // Exclude current user\n          .map((user: any) => ({\n            userId: user.id,\n            username: user.username,\n            fullName: user.fullName,\n            avatar: user.avatar,\n            lastMessage: \"No messages yet\",\n            lastMessageTime: \"\",\n            isOnline: Math.random() > 0.5,\n            unread: 0\n          }));\n\n        setConversations(convoList.sort((a, b) => b.lastMessageTime.localeCompare(a.lastMessageTime)));\n      } catch (error) {\n        console.error(\"Error loading conversations:\", error);\n      }\n    };\n\n    loadConversations();\n  }, [currentUser]);\n\n  useEffect(() => {\n    if (selectedUserId && currentUser) {\n      loadMessages();\n      \n      const handleNewMessage = (message: any) => {\n        setMessages(prev => [...prev, message]);\n        // Update conversation list\n        setConversations(prev => prev.map(c => \n          c.userId === selectedUserId \n            ? { ...c, lastMessage: message.message, lastMessageTime: new Date().toISOString() }\n            : c\n        ).sort((a, b) => b.lastMessageTime.localeCompare(a.lastMessageTime)));\n      };\n      \n      onMessageReceived(handleNewMessage);\n      onMessagesLoaded((loadedMessages: any[]) => setMessages(loadedMessages));\n      \n      return () => offAllEvents();\n    }\n  }, [selectedUserId, currentUser]);\n\n  const loadMessages = async () => {\n    if (!selectedUserId) return;\n    setLoading(true);\n    try {\n      const msgs = await getMessages(selectedUserId);\n      setMessages(msgs as Message[]);\n    } catch (error) {\n      console.error('Error loading messages:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSendMessage = () => {\n    if (!messageInput.trim() || !selectedUserId || !currentUser) return;\n\n    const messageText = messageInput.trim();\n    setMessageInput(\"\");\n\n    try {\n      const conversationId = [currentUser.id, selectedUserId].sort().join(\"_\");\n      emitMessage(currentUser.id, selectedUserId, messageText);\n      \n      setMessages(prev => [...prev, {\n        id: Date.now().toString(),\n        conversationId,\n        senderId: currentUser.id,\n        recipientId: selectedUserId,\n        message: messageText,\n        timestamp: new Date().toLocaleTimeString(),\n        read: false\n      }]);\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: error?.message || \"Failed to send message\"\n      });\n    }\n  };\n\n  const handleLogout = async () => {\n    await logout();\n  };\n\n  if (!currentUser) {\n    setLocation(\"/login\");\n    return null;\n  }\n\n  // Filtered conversations\n  const filteredConversations = conversations.filter(c =>\n    c.username.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    c.fullName.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className=\"pb-20 max-w-4xl mx-auto min-h-screen bg-white flex flex-col\">\n      {/* Header */}\n      <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Messages</h1>\n        <button\n          onClick={handleLogout}\n          className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n          data-testid=\"button-logout\"\n        >\n          <X className=\"w-5 h-5 text-gray-700\" />\n        </button>\n      </header>\n\n      <div className=\"flex flex-1 overflow-hidden\">\n        {/* Conversations List */}\n        <div className={`w-full md:w-80 border-r border-gray-200 flex flex-col ${selectedUserId ? 'hidden md:flex' : ''}`}>\n          {/* Search */}\n          <div className=\"p-4 border-b border-gray-200\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n              <Input\n                placeholder=\"Search conversations...\"\n                className=\"pl-9 bg-gray-100 border-0 h-10 rounded-full focus-visible:ring-0\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                data-testid=\"input-search-conversations\"\n              />\n            </div>\n          </div>\n\n          {/* Conversations */}\n          <div className=\"flex-1 overflow-y-auto\">\n            {filteredConversations.length > 0 ? (\n              filteredConversations.map(conversation => (\n                <div\n                  key={conversation.userId}\n                  onClick={() => setSelectedUserId(conversation.userId)}\n                  className={`px-4 py-3 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${\n                    selectedUserId === conversation.userId ? 'bg-blue-50' : ''\n                  }`}\n                  data-testid={`conversation-${conversation.userId}`}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"relative flex-shrink-0\">\n                      <Avatar className=\"w-12 h-12\">\n                        <AvatarImage src={conversation.avatar} />\n                        <AvatarFallback>{conversation.username[0].toUpperCase()}</AvatarFallback>\n                      </Avatar>\n                      {conversation.isOnline && (\n                        <div className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white\"></div>\n                      )}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-semibold text-sm text-gray-900\">{conversation.username}</p>\n                      <p className=\"text-xs text-gray-500 truncate\">{conversation.lastMessage}</p>\n                    </div>\n                    <div className=\"text-right flex-shrink-0\">\n                      <p className=\"text-xs text-gray-400\">{conversation.lastMessageTime}</p>\n                      {conversation.unread > 0 && (\n                        <span className=\"inline-block bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center mt-1\">\n                          {conversation.unread}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <div className=\"p-8 text-center text-gray-500\">\n                <p className=\"text-sm\">No conversations yet</p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Chat Area */}\n        {selectedConversation ? (\n          <div className=\"flex-1 flex flex-col\">\n            {/* Chat Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-white\">\n              <div className=\"flex items-center gap-3\">\n                <button\n                  onClick={() => setSelectedUserId(null)}\n                  className=\"md:hidden p-2 hover:bg-gray-100 rounded-lg\"\n                >\n                  <ArrowLeft className=\"w-5 h-5\" />\n                </button>\n                <div className=\"relative\">\n                  <Avatar className=\"w-10 h-10\">\n                    <AvatarImage src={selectedConversation.avatar} />\n                    <AvatarFallback>{selectedConversation.username[0].toUpperCase()}</AvatarFallback>\n                  </Avatar>\n                  {selectedConversation.isOnline && (\n                    <div className=\"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white\"></div>\n                  )}\n                </div>\n                <div>\n                  <p className=\"font-semibold text-gray-900\">{selectedConversation.username}</p>\n                  <p className=\"text-xs text-gray-500\">{selectedConversation.isOnline ? 'Active now' : 'Offline'}</p>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <button className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\">\n                  <Phone className=\"w-5 h-5 text-blue-500\" />\n                </button>\n                <button className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\">\n                  <Video className=\"w-5 h-5 text-blue-500\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Messages */}\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50\">\n              {loading ? (\n                <div className=\"flex items-center justify-center h-full\">\n                  <Loader2 className=\"w-6 h-6 animate-spin text-gray-400\" />\n                </div>\n              ) : messages.length > 0 ? (\n                messages.map((msg) => (\n                  <div\n                    key={msg.id}\n                    className={`flex ${msg.senderId === currentUser.id ? 'justify-end' : 'justify-start'}`}\n                    data-testid={`message-${msg.id}`}\n                  >\n                    <div\n                      className={`max-w-xs px-4 py-2 rounded-lg ${\n                        msg.senderId === currentUser.id\n                          ? 'bg-blue-500 text-white rounded-br-none'\n                          : 'bg-white text-gray-900 border border-gray-200 rounded-bl-none'\n                      }`}\n                    >\n                      <p className=\"break-words\">{msg.message}</p>\n                      <p className={`text-xs mt-1 ${msg.senderId === currentUser.id ? 'text-blue-100' : 'text-gray-500'}`}>\n                        {typeof msg.timestamp === 'string' ? msg.timestamp : 'Just now'}\n                      </p>\n                    </div>\n                  </div>\n                ))\n              ) : (\n                <div className=\"flex items-center justify-center h-full text-gray-500\">\n                  <p className=\"text-sm\">No messages yet. Start the conversation!</p>\n                </div>\n              )}\n              {isTyping && (\n                <div className=\"flex justify-start\">\n                  <div className=\"bg-white border border-gray-200 px-4 py-2 rounded-lg\">\n                    <p className=\"text-xs text-gray-500\">\n                      {selectedConversation.username} is typing<span className=\"animate-pulse\">...</span>\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Input */}\n            <div className=\"p-4 bg-white border-t border-gray-200\">\n              <div className=\"flex gap-2\">\n                <Input\n                  placeholder=\"Type a message...\"\n                  className=\"flex-1 border-gray-300 rounded-full h-10\"\n                  value={messageInput}\n                  onChange={(e) => setMessageInput(e.target.value)}\n                  onKeyDown={(e) => e.key === 'Enter' && handleSendMessage()}\n                  data-testid=\"input-message\"\n                />\n                <button\n                  onClick={handleSendMessage}\n                  className=\"p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors\"\n                  data-testid=\"button-send-message\"\n                >\n                  <Send className=\"w-5 h-5\" />\n                </button>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"hidden md:flex flex-1 items-center justify-center bg-gray-50\">\n            <div className=\"text-center text-gray-500\">\n              <p className=\"text-lg font-semibold\">Select a conversation to start</p>\n              <p className=\"text-sm\">Choose a user to begin messaging</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <BottomNav />\n    </div>\n  );\n}\n","size_bytes":14205},"client/src/components/ui/drawer.tsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3007},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1037},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/field.tsx":{"content":"\"use client\"\n\nimport { useMemo } from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction FieldSet({ className, ...props }: React.ComponentProps<\"fieldset\">) {\n  return (\n    <fieldset\n      data-slot=\"field-set\"\n      className={cn(\n        \"flex flex-col gap-6\",\n        \"has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLegend({\n  className,\n  variant = \"legend\",\n  ...props\n}: React.ComponentProps<\"legend\"> & { variant?: \"legend\" | \"label\" }) {\n  return (\n    <legend\n      data-slot=\"field-legend\"\n      data-variant={variant}\n      className={cn(\n        \"mb-3 font-medium\",\n        \"data-[variant=legend]:text-base\",\n        \"data-[variant=label]:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-group\"\n      className={cn(\n        \"group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst fieldVariants = cva(\n  \"group/field data-[invalid=true]:text-destructive flex w-full gap-3\",\n  {\n    variants: {\n      orientation: {\n        vertical: [\"flex-col [&>*]:w-full [&>.sr-only]:w-auto\"],\n        horizontal: [\n          \"flex-row items-center\",\n          \"[&>[data-slot=field-label]]:flex-auto\",\n          \"has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px has-[>[data-slot=field-content]]:items-start\",\n        ],\n        responsive: [\n          \"@md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto flex-col [&>*]:w-full [&>.sr-only]:w-auto\",\n          \"@md/field-group:[&>[data-slot=field-label]]:flex-auto\",\n          \"@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\n        ],\n      },\n    },\n    defaultVariants: {\n      orientation: \"vertical\",\n    },\n  }\n)\n\nfunction Field({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof fieldVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"field\"\n      data-orientation={orientation}\n      className={cn(fieldVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction FieldContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-content\"\n      className={cn(\n        \"group/field-content flex flex-1 flex-col gap-1.5 leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  return (\n    <Label\n      data-slot=\"field-label\"\n      className={cn(\n        \"group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50\",\n        \"has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>[data-slot=field]]:p-4\",\n        \"has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-label\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug group-data-[disabled=true]/field:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"field-description\"\n      className={cn(\n        \"text-muted-foreground text-sm font-normal leading-normal group-has-[[data-orientation=horizontal]]/field:text-balance\",\n        \"nth-last-2:-mt-1 last:mt-0 [[data-variant=legend]+&]:-mt-1.5\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  children?: React.ReactNode\n}) {\n  return (\n    <div\n      data-slot=\"field-separator\"\n      data-content={!!children}\n      className={cn(\n        \"relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2\",\n        className\n      )}\n      {...props}\n    >\n      <Separator className=\"absolute inset-0 top-1/2\" />\n      {children && (\n        <span\n          className=\"bg-background text-muted-foreground relative mx-auto block w-fit px-2\"\n          data-slot=\"field-separator-content\"\n        >\n          {children}\n        </span>\n      )}\n    </div>\n  )\n}\n\nfunction FieldError({\n  className,\n  children,\n  errors,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  errors?: Array<{ message?: string } | undefined>\n}) {\n  const content = useMemo(() => {\n    if (children) {\n      return children\n    }\n\n    if (!errors) {\n      return null\n    }\n\n    if (errors?.length === 1 && errors[0]?.message) {\n      return errors[0].message\n    }\n\n    return (\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n        {errors.map(\n          (error, index) =>\n            error?.message && <li key={index}>{error.message}</li>\n        )}\n      </ul>\n    )\n  }, [children, errors])\n\n  if (!content) {\n    return null\n  }\n\n  return (\n    <div\n      role=\"alert\"\n      data-slot=\"field-error\"\n      className={cn(\"text-destructive text-sm font-normal\", className)}\n      {...props}\n    >\n      {content}\n    </div>\n  )\n}\n\nexport {\n  Field,\n  FieldLabel,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLegend,\n  FieldSeparator,\n  FieldSet,\n  FieldContent,\n  FieldTitle,\n}\n","size_bytes":6044},"client/src/pages/SetupProfile.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { useState, useEffect } from \"react\";\nimport { Loader2, CheckCircle, AlertCircle } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function SetupProfile() {\n  const { pendingGoogleUser, completeGoogleSignup, checkUsernameAvailable } = useStore();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [username, setUsername] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [checking, setChecking] = useState(false);\n  const [isAvailable, setIsAvailable] = useState<boolean | null>(null);\n\n  // Redirect if no pending user\n  useEffect(() => {\n    if (!pendingGoogleUser) {\n      setLocation(\"/login\");\n    }\n  }, [pendingGoogleUser, setLocation]);\n\n  const handleCheckUsername = async (value: string) => {\n    setUsername(value);\n    \n    if (value.length < 3) {\n      setIsAvailable(null);\n      return;\n    }\n\n    setChecking(true);\n    try {\n      const available = await checkUsernameAvailable(value);\n      setIsAvailable(available);\n    } catch (error) {\n      setIsAvailable(false);\n    } finally {\n      setChecking(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!username || username.length < 3) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"Username must be at least 3 characters\"\n      });\n      return;\n    }\n\n    if (!isAvailable) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"Username is not available\"\n      });\n      return;\n    }\n\n    setLoading(true);\n    try {\n      await completeGoogleSignup(username);\n      setLocation(\"/\");\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: error?.message || \"Failed to complete signup\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!pendingGoogleUser) {\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-4 max-w-md mx-auto bg-background\">\n      <div className=\"w-full max-w-xs space-y-6\">\n        <div className=\"text-center\">\n          <h1 className=\"font-logo text-5xl mb-2\">InstaClone</h1>\n          <h2 className=\"font-bold text-xl mb-2\">Complete Your Profile</h2>\n          <p className=\"text-muted-foreground text-sm\">\n            Choose a unique username so others can find and follow you\n          </p>\n        </div>\n\n        {/* Profile Preview */}\n        <div className=\"flex flex-col items-center gap-3 p-4 bg-muted/30 rounded-lg\">\n          {pendingGoogleUser.photoURL && (\n            <img \n              src={pendingGoogleUser.photoURL} \n              alt=\"Profile\" \n              className=\"w-16 h-16 rounded-full object-cover border-2 border-border\"\n            />\n          )}\n          <div className=\"text-center\">\n            <p className=\"font-semibold\">{pendingGoogleUser.displayName}</p>\n            <p className=\"text-xs text-muted-foreground\">{pendingGoogleUser.email}</p>\n          </div>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-3\">\n          <div className=\"space-y-2\">\n            <label htmlFor=\"setup-username\" className=\"text-sm font-semibold\">Username</label>\n            <div className=\"relative\">\n              <Input \n                id=\"setup-username\"\n                name=\"username\"\n                placeholder=\"username\" \n                className=\"bg-muted/50 border-0 focus-visible:ring-0 h-11 px-3\"\n                value={username}\n                onChange={(e) => handleCheckUsername(e.target.value)}\n                disabled={loading}\n                autoFocus\n                minLength={3}\n                required\n              />\n              {username && (\n                <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n                  {checking ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin text-muted-foreground\" />\n                  ) : isAvailable ? (\n                    <CheckCircle className=\"w-5 h-5 text-green-500\" />\n                  ) : (\n                    <AlertCircle className=\"w-5 h-5 text-red-500\" />\n                  )}\n                </div>\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              3-30 characters, letters, numbers, and underscores only\n            </p>\n            {username && isAvailable === false && (\n              <p className=\"text-xs text-red-500\">\n                This username is already taken\n              </p>\n            )}\n            {username && isAvailable === true && (\n              <p className=\"text-xs text-green-500\">\n                This username is available\n              </p>\n            )}\n          </div>\n\n          <Button \n            type=\"submit\" \n            className=\"w-full font-semibold mt-4\" \n            disabled={loading || !isAvailable || !username}\n          >\n            {loading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : \"Create Account\"}\n          </Button>\n        </form>\n\n        <div className=\"text-center text-xs text-muted-foreground\">\n          <p>You can change your username anytime in settings</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5457},"client/src/components/ui/form.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  if (!itemContext) {\n    throw new Error(\"useFormField should be used within <FormItem>\")\n  }\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4175},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4280},"client/src/components/ui/label.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":724},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5124},"replit.md":{"content":"# Instagram Clone - Social Media Application\n\n## Overview\n\nThis is a full-stack Instagram clone built with React, TypeScript, and Firebase. The application provides core social media functionality including user authentication, profile management, post creation and sharing, real-time messaging, and audio/video calling capabilities. The frontend uses React with Vite for fast development, styled with Tailwind CSS and shadcn/ui components. Firebase handles all backend services including authentication, Firestore for data storage, Firebase Storage for media files, and Realtime Database for live features.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework**: React with TypeScript running on Vite for fast development and hot module replacement. The application uses a client-side rendering approach with wouter for lightweight routing.\n\n**State Management**: Zustand is used for global state management, primarily handling authentication state, user data, posts, notifications, and social interactions. The store (`client/src/lib/store.ts`) centralizes all Firebase interactions and manages the application's data flow.\n\n**UI Components**: The application leverages shadcn/ui, a collection of Radix UI primitives styled with Tailwind CSS. This provides accessible, customizable components following the \"new-york\" style variant. Components are organized in `client/src/components/ui/`.\n\n**Styling**: Tailwind CSS v4 with custom theme configuration defined inline in `client/src/index.css`. The theme supports both light and dark modes with custom color tokens for background, foreground, primary, secondary, muted, accent, destructive, border, and input states.\n\n**Mobile-First Design**: The application is optimized for mobile with a bottom navigation bar (`BottomNav.tsx`), touch-friendly interactions, and responsive layouts constrained to a maximum width of `max-w-md` (448px) centered on screen.\n\n### Authentication System\n\n**Firebase Authentication**: Supports two authentication methods:\n- Google OAuth sign-in with popup flow\n- Email/password authentication (both signup and login)\n\n**Username Management**: Unique username system enforced at the database level. New Google users are directed to a setup flow (`SetupProfile.tsx`) to select a unique username before accessing the application. Username availability is checked in real-time against Firestore.\n\n**Session Management**: Firebase Auth handles session persistence automatically. The auth state is initialized on app load via `onAuthStateChanged` listener, which updates Zustand store and redirects unauthenticated users to the login page.\n\n### Data Storage\n\n**Firestore Database**: Primary data store organized into collections:\n- `users`: User profiles with username, fullName, email, avatar, bio, website, followers/following counts\n- `posts`: Post content with userId, imageUrl, caption, location, likes, comments counts\n- `follows`: Follow relationships between users\n- `messages`: Real-time messaging between users\n- `notifications`: Activity feed for likes, comments, follows\n- `calls`: Call initiation and status tracking\n\n**Firebase Storage**: Stores user-uploaded media in organized paths:\n- `avatars/{userId}`: Profile pictures\n- `posts/{postId}`: Post images and videos (max 100MB)\n\n**Realtime Database**: Used for real-time features like messaging and call signaling (`rtdb` instance in `firebase.ts`).\n\n**Security Rules**: Critical security configuration in `firestore.rules` and `storage.rules` files that must be deployed to Firebase Console. Rules enforce:\n- Authenticated users can read all user profiles\n- Users can only update their own profiles\n- Public read access to avatars and posts\n- Protected write access for user-specific data\n\n### Social Features\n\n**Posts**: Users can create posts with images/videos, captions, and location tags. Posts support likes and saves, with state managed both locally (for instant feedback) and in Firestore (for persistence).\n\n**Follow System**: Follow/unfollow functionality with bidirectional relationship tracking. Following users determines feed content and messaging availability.\n\n**Search**: Real-time user search by username or full name in the Explore page. Search queries Firestore with case-insensitive matching.\n\n**Notifications**: Activity tracking for social interactions (likes, comments, follows) with read/unread states.\n\n**Messaging**: Real-time messaging between users who follow each other. Messages are stored in Firestore with sender/recipient IDs and timestamps.\n\n**Calling**: Audio and video call initiation (UI present, full WebRTC implementation may require additional setup).\n\n### Build and Deployment\n\n**Development**: Vite dev server runs on port 5000 with HMR, serving the client application while the Express server handles API routes (though most logic is client-side Firebase calls).\n\n**Production Build**: \n- Client: Vite bundles React app to `dist/public`\n- Server: esbuild bundles Express server to `dist/index.js`\n- Static files served by Express in production\n\n**Environment**: The application expects Firebase configuration hardcoded in `client/src/lib/firebase.ts` for the `chatapp-d92e7` project.\n\n## External Dependencies\n\n### Firebase Services\n\n**Project**: chatapp-d92e7\n- **Firebase Auth**: Google OAuth and Email/Password authentication\n- **Firestore**: NoSQL document database for users, posts, follows, messages, notifications\n- **Firebase Storage**: Object storage for avatars and post media\n- **Realtime Database**: Real-time sync for messaging and calls\n- **Hosting Domain**: chatapp-d92e7.firebaseapp.com\n\n**Critical Setup Required**: Firebase security rules must be manually deployed via Firebase Console for both Firestore and Storage, otherwise permission-denied errors will occur. Rules files are included in repository (`firestore.rules`, `storage.rules`).\n\n### Third-Party APIs and Services\n\n**Google Fonts**: Inter (sans-serif, weights 300-700) and Grand Hotel (cursive) loaded from Google Fonts CDN for typography.\n\n**Dicebear API**: Used for generating avatar placeholders (`https://api.dicebear.com/7.x/avataaars/svg?seed={id}`).\n\n**Unsplash**: Stock images used for avatar selection options in EditProfile component.\n\n### UI Component Libraries\n\n**Radix UI**: Accessible component primitives for accordion, alert-dialog, avatar, checkbox, dialog, dropdown-menu, popover, select, tabs, toast, tooltip, and more.\n\n**Lucide React**: Icon library for UI icons throughout the application.\n\n**Embla Carousel**: Carousel component for potential gallery/story features.\n\n**React Hook Form**: Form state management with Zod schema validation.\n\n**Sonner**: Toast notification system for user feedback.\n\n### Development Tools\n\n**Replit-Specific Plugins**: \n- `@replit/vite-plugin-runtime-error-modal`: Runtime error overlay\n- `@replit/vite-plugin-cartographer`: Development mapping tool\n- `@replit/vite-plugin-dev-banner`: Development environment banner\n\n**Meta Images Plugin**: Custom Vite plugin (`vite-plugin-meta-images.ts`) that updates OpenGraph and Twitter card meta tags with the correct Replit deployment URL.\n\n### Database Consideration\n\nThe project includes Drizzle ORM configuration (`drizzle.config.ts`) and references to PostgreSQL in package dependencies, but these are currently unused. Firebase serves as the primary database. If PostgreSQL is added later, migration from Firebase to a hybrid architecture would be required.","size_bytes":7514},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  const httpServer = createServer(app);\n\n  // User sync endpoint\n  app.post(\"/api/users\", async (req, res) => {\n    try {\n      const { id, username, email, fullName, avatar } = req.body;\n      if (!id || !username || !email) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      const existingUser = await storage.getUser(id);\n      let user;\n      \n      if (existingUser) {\n        user = await storage.updateUser(id, {\n          username: username.toLowerCase(),\n          email,\n          fullName: fullName || existingUser.fullName,\n          avatar: avatar || existingUser.avatar,\n        });\n      } else {\n        user = await storage.createUser({\n          id,\n          username: username.toLowerCase(),\n          email,\n          fullName: fullName || \"\",\n          avatar: avatar || \"\",\n        });\n      }\n      \n      res.json(user);\n    } catch (error) {\n      console.error(\"Error syncing user:\", error);\n      res.status(500).json({ error: \"Failed to sync user\" });\n    }\n  });\n\n  app.get(\"/api/users/:id\", async (req, res) => {\n    try {\n      const user = await storage.getUser(req.params.id);\n      if (!user) return res.status(404).json({ error: \"User not found\" });\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ error: \"Failed to fetch user\" });\n    }\n  });\n\n  app.put(\"/api/users/:id\", async (req, res) => {\n    try {\n      const { fullName, bio, website, avatar } = req.body;\n      const user = await storage.updateUser(req.params.id, {\n        fullName,\n        bio,\n        website,\n        avatar,\n      });\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error updating user:\", error);\n      res.status(500).json({ error: \"Failed to update user\" });\n    }\n  });\n\n  // Instagram accounts endpoints\n  app.post(\"/api/instagram-accounts\", async (req, res) => {\n    try {\n      const { userId, token, accountName, instagramUsername, instagramEmail, instagramPhone } = req.body;\n      if (!userId || !token) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n      res.json({ success: true, message: \"Account added\" });\n    } catch (error) {\n      console.error(\"Error adding Instagram account:\", error);\n      res.status(500).json({ error: \"Failed to add account\" });\n    }\n  });\n\n  app.get(\"/api/instagram-accounts/recommendations\", async (req, res) => {\n    try {\n      const { email, phone } = req.query;\n      // This is a stub - real data is in Firestore\n      res.json({ recommendations: [] });\n    } catch (error) {\n      console.error(\"Error fetching recommendations:\", error);\n      res.status(500).json({ error: \"Failed to fetch recommendations\" });\n    }\n  });\n\n  app.delete(\"/api/instagram-accounts/:id\", async (req, res) => {\n    try {\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error removing Instagram account:\", error);\n      res.status(500).json({ error: \"Failed to remove account\" });\n    }\n  });\n\n  return httpServer;\n}\n","size_bytes":3264},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // @replit\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \",\n  {\n    variants: {\n      variant: {\n        default:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary:\n          // @replit no hover because we use hover-elevate\n          \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n          // @replit shadow-xs\" - use badge outline variable\n        outline: \"text-foreground border [border-color:var(--badge-outline)]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1522},"client/src/components/ui/input-group.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\n\nfunction InputGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"input-group\"\n      role=\"group\"\n      className={cn(\n        \"group/input-group border-input dark:bg-input/30 shadow-xs relative flex w-full items-center rounded-md border outline-none transition-[color,box-shadow]\",\n        \"h-9 has-[>textarea]:h-auto\",\n\n        // Variants based on alignment.\n        \"has-[>[data-align=inline-start]]:[&>input]:pl-2\",\n        \"has-[>[data-align=inline-end]]:[&>input]:pr-2\",\n        \"has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3\",\n        \"has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3\",\n\n        // Focus state.\n        \"has-[[data-slot=input-group-control]:focus-visible]:ring-ring has-[[data-slot=input-group-control]:focus-visible]:ring-1\",\n\n        // Error state.\n        \"has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40\",\n\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupAddonVariants = cva(\n  \"text-muted-foreground flex h-auto cursor-text select-none items-center justify-center gap-2 py-1.5 text-sm font-medium group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      align: {\n        \"inline-start\":\n          \"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]\",\n        \"inline-end\":\n          \"order-last pr-3 has-[>button]:mr-[-0.4rem] has-[>kbd]:mr-[-0.35rem]\",\n        \"block-start\":\n          \"[.border-b]:pb-3 order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5\",\n        \"block-end\":\n          \"[.border-t]:pt-3 order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5\",\n      },\n    },\n    defaultVariants: {\n      align: \"inline-start\",\n    },\n  }\n)\n\nfunction InputGroupAddon({\n  className,\n  align = \"inline-start\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputGroupAddonVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"input-group-addon\"\n      data-align={align}\n      className={cn(inputGroupAddonVariants({ align }), className)}\n      onClick={(e) => {\n        if ((e.target as HTMLElement).closest(\"button\")) {\n          return\n        }\n        e.currentTarget.parentElement?.querySelector(\"input\")?.focus()\n      }}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupButtonVariants = cva(\n  \"flex items-center gap-2 text-sm shadow-none\",\n  {\n    variants: {\n      size: {\n        xs: \"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>svg]:px-2 [&>svg:not([class*='size-'])]:size-3.5\",\n        sm: \"h-8 gap-1.5 rounded-md px-2.5 has-[>svg]:px-2.5\",\n        \"icon-xs\":\n          \"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0\",\n        \"icon-sm\": \"size-8 p-0 has-[>svg]:p-0\",\n      },\n    },\n    defaultVariants: {\n      size: \"xs\",\n    },\n  }\n)\n\nfunction InputGroupButton({\n  className,\n  type = \"button\",\n  variant = \"ghost\",\n  size = \"xs\",\n  ...props\n}: Omit<React.ComponentProps<typeof Button>, \"size\"> &\n  VariantProps<typeof inputGroupButtonVariants>) {\n  return (\n    <Button\n      type={type}\n      data-size={size}\n      variant={variant}\n      className={cn(inputGroupButtonVariants({ size }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupText({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      className={cn(\n        \"text-muted-foreground flex items-center gap-2 text-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupInput({\n  className,\n  ...props\n}: React.ComponentProps<\"input\">) {\n  return (\n    <Input\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupTextarea({\n  className,\n  ...props\n}: React.ComponentProps<\"textarea\">) {\n  return (\n    <Textarea\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButton,\n  InputGroupText,\n  InputGroupInput,\n  InputGroupTextarea,\n}\n","size_bytes":4971},"client/src/index.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@theme inline {\n  --color-background: 210 40% 96%;\n  --color-foreground: 210 11% 15%;\n  \n  --color-card: 0 0% 100%;\n  --color-card-foreground: 210 11% 15%;\n  \n  --color-popover: 0 0% 100%;\n  --color-popover-foreground: 210 11% 15%;\n  \n  --color-primary: 206 100% 50%;\n  --color-primary-foreground: 0 0% 100%;\n  \n  --color-secondary: 210 89% 61%;\n  --color-secondary-foreground: 0 0% 100%;\n  \n  --color-muted: 210 14% 90%;\n  --color-muted-foreground: 210 8% 50%;\n  \n  --color-accent: 210 100% 50%;\n  --color-accent-foreground: 0 0% 100%;\n  \n  --color-destructive: 0 84% 60%;\n  --color-destructive-foreground: 0 0% 100%;\n  \n  --color-border: 210 14% 90%;\n  --color-input: 210 14% 90%;\n  --color-ring: 210 100% 50%;\n  \n  --radius-sm: 0.5rem;\n  --radius-md: 0.75rem;\n  --radius-lg: 1rem;\n\n  --font-sans: \"Inter\", sans-serif;\n  --font-logo: \"Inter\", sans-serif;\n}\n\n@media (prefers-color-scheme: dark) {\n  @theme inline {\n    --color-background: 217 32.6% 12%;\n    --color-foreground: 50 7.7% 97%;\n    \n    --color-card: 217 32.6% 18%;\n    --color-card-foreground: 50 7.7% 97%;\n    \n    --color-popover: 217 32.6% 18%;\n    --color-popover-foreground: 50 7.7% 97%;\n    \n    --color-primary: 262 100% 59%;\n    --color-primary-foreground: 217 32.6% 12%;\n    \n    --color-secondary: 0 84% 60%;\n    --color-secondary-foreground: 217 32.6% 12%;\n    \n    --color-muted: 217 32.6% 25%;\n    --color-muted-foreground: 50 7.7% 75%;\n    \n    --color-accent: 160 84% 43%;\n    --color-accent-foreground: 217 32.6% 12%;\n    \n    --color-destructive: 0 84% 60%;\n    --color-destructive-foreground: 217 32.6% 12%;\n    \n    --color-border: 217 32.6% 22%;\n    --color-input: 217 32.6% 22%;\n    --color-ring: 262 100% 59%;\n  }\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/* Mobile-first utilities */\n@layer utilities {\n  .no-scrollbar::-webkit-scrollbar {\n    display: none;\n  }\n  .no-scrollbar {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n}","size_bytes":2072},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":768},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5745},"client/src/pages/UserProfile.tsx":{"content":"import { ArrowLeft, MessageCircle, Grid, Menu } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation, useRoute } from \"wouter\";\nimport { BottomNav } from \"@/components/BottomNav\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { motion } from \"framer-motion\";\nimport { useState, useEffect } from \"react\";\nimport { User } from \"@/lib/store\";\n\nexport default function UserProfile() {\n  const [, params] = useRoute(\"/user/:id\");\n  const { allUsers, currentUser, logout } = useStore();\n  const [, setLocation] = useLocation();\n  const [user, setUser] = useState<User | null>(null);\n  const [showMenu, setShowMenu] = useState(false);\n\n  const handleLogout = async () => {\n    await logout();\n  };\n\n  // API key owner's user ID\n  const API_KEY_OWNER_ID = 'dbcMML2G74Rl4YKhT8VupNOSlDo1';\n\n  useEffect(() => {\n    const loadUser = async () => {\n      if (params?.id && allUsers.length > 0) {\n        const foundUser = allUsers.find(u => u.id === params.id);\n        if (foundUser) {\n          setUser(foundUser);\n        }\n      }\n    };\n    loadUser();\n  }, [params?.id, allUsers]);\n\n  // Block access to API key owner's profile\n  if (params?.id === API_KEY_OWNER_ID) {\n    return (\n      <div className=\"max-w-md mx-auto min-h-screen bg-background flex flex-col items-center justify-center px-4\">\n        <div className=\"text-center space-y-4\">\n          <h2 className=\"text-xl font-bold\">Profile Restricted</h2>\n          <p className=\"text-muted-foreground\">This profile is not available for viewing.</p>\n          <Button onClick={() => setLocation(\"/\")} className=\"mt-4\">\n            Go Back Home\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"max-w-md mx-auto min-h-screen bg-background flex items-center justify-center\">\n        <p className=\"text-muted-foreground\">User not found</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"pb-20 max-w-md mx-auto min-h-screen bg-white\">\n      {/* Telegram-style Header */}\n      <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between\">\n        <Button \n          variant=\"ghost\" \n          size=\"icon\" \n          onClick={() => setLocation(\"/\")}\n          className=\"hover:bg-gray-100\"\n        >\n          <ArrowLeft className=\"w-5 h-5 text-gray-700\" />\n        </Button>\n        <h1 className=\"font-semibold text-gray-900\">{user.username}</h1>\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowMenu(!showMenu)}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n            data-testid=\"button-user-menu\"\n          >\n            <Menu className=\"w-5 h-5 text-gray-700\" />\n          </button>\n          {showMenu && (\n            <div className=\"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50\">\n              <button className=\"w-full text-left px-4 py-2 hover:bg-gray-50 border-b border-gray-100 text-sm\">\n                Report User\n              </button>\n              <button className=\"w-full text-left px-4 py-2 hover:bg-gray-50 text-sm\" onClick={() => setShowMenu(false)}>\n                Block User\n              </button>\n            </div>\n          )}\n        </div>\n      </header>\n\n      <main>\n        {/* Profile Info */}\n        <div className=\"px-4 pt-6 pb-4\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div className=\"relative\">\n              <Avatar className=\"h-24 w-24 border-4 border-border\">\n                <AvatarImage src={user.avatar} />\n                <AvatarFallback>{user.username[0].toUpperCase()}</AvatarFallback>\n              </Avatar>\n            </div>\n            <div className=\"flex-1 flex justify-around text-center ml-4\">\n              <div>\n                <div className=\"font-bold text-lg leading-tight\">0</div>\n                <div className=\"text-sm text-foreground\">Posts</div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-1 mb-5\">\n            <h2 className=\"font-bold text-sm\">{user.fullName}</h2>\n            <p className=\"text-sm whitespace-pre-line leading-snug\">{user.bio}</p>\n            {user.website && (\n              <a href=\"#\" className=\"text-xs text-primary hover:underline\">{user.website}</a>\n            )}\n          </div>\n\n          <div className=\"flex gap-2\">\n            <Button \n              className=\"flex-1 font-semibold h-10 text-sm bg-blue-500 text-white hover:bg-blue-600\"\n              onClick={() => setLocation(\"/messages\")}\n              data-testid=\"button-message\"\n            >\n              <MessageCircle className=\"w-4 h-4 mr-1\" />\n              Message\n            </Button>\n          </div>\n        </div>\n\n        {/* Posts Grid */}\n        <div className=\"border-t border-border mt-2\" />\n        <div className=\"grid grid-cols-3 gap-0.5 pb-4\">\n          <div className=\"col-span-3 py-20 flex flex-col items-center text-muted-foreground\">\n            <Grid className=\"w-16 h-16 stroke-1 mb-4\" />\n            <h3 className=\"text-xl font-bold text-foreground\">No Posts</h3>\n            <p className=\"text-sm\">This user hasn't posted yet</p>\n          </div>\n        </div>\n      </main>\n\n      <BottomNav />\n    </div>\n  );\n}\n","size_bytes":5387},"INSTAGRAM_SETUP.md":{"content":"# Instagram API Integration\n\nYour app now uses **Instagram API exclusively for posts**. Here's how to set it up:\n\n## Step 1: Get Instagram Graph API Credentials\n\n1. Go to [Meta Developers](https://developers.facebook.com/)\n2. Create an app or select existing one\n3. Add Instagram Graph API product\n4. Generate an access token with these permissions:\n   - `instagram_business_content_read`\n   - `instagram_basic`\n\n## Step 2: Find Your Business Account ID\n\n1. In Meta Developers, go to your Instagram app\n2. Navigate to Tools > Graph Explorer\n3. Run: `GET /me/instagram_business_accounts`\n4. Copy the `id` from the response\n\n## Step 3: Set Environment Variables\n\nProvide these credentials:\n\n- **VITE_INSTAGRAM_ACCESS_TOKEN**: Your Graph API access token\n- **VITE_INSTAGRAM_BUSINESS_ACCOUNT_ID**: Your business account ID\n\n## Step 4: Features Available\n\nThe app will now:\n-  Fetch your Instagram posts automatically\n-  Display posts with images/videos\n-  Show post captions\n-  Display post timestamps\n-  Support likes and saves locally\n\n## Features Using Instagram API\n\n**In `client/src/lib/instagram.ts`:**\n- `getUserMedia()` - Fetch all your Instagram posts\n- `getUserInsights()` - Get post insights (impressions, reach)\n- `makeInstagramRequest()` - Make custom API calls\n\n## Usage in Your App\n\nPosts are loaded automatically when you open the Home page. The feed will show your Instagram media with captions and details.\n\n**Note**: Likes and saves are tracked locally for now. To sync with Instagram, you'd need to implement additional API calls.\n\n---\n\n**Ready to connect?** Provide your credentials and the app will pull your Instagram posts directly!\n","size_bytes":1668},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1486},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/menubar.tsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8608},"client/src/App.tsx":{"content":"import { Router, Route } from \"wouter\";\nimport { useEffect } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { Toaster } from \"sonner\";\n\nimport Login from \"./pages/Login\";\nimport Home from \"./pages/Home\";\nimport Profile from \"./pages/Profile\";\nimport EditProfile from \"./pages/EditProfile\";\nimport Following from \"./pages/Following\";\nimport ConnectInstagram from \"./pages/ConnectInstagram\";\nimport Search from \"./pages/Search\";\nimport HashtagFeed from \"./pages/HashtagFeed\";\nimport Bookmarks from \"./pages/Bookmarks\";\n\nfunction App() {\n  const { isAuthenticated, initializeAuth } = useStore();\n\n  useEffect(() => {\n    initializeAuth();\n  }, []);\n\n  if (!isAuthenticated) {\n    return <Login />;\n  }\n\n  return (\n    <>\n      <Router base=\"/\">\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/\" component={Home} />\n        <Route path=\"/profile\" component={Profile} />\n        <Route path=\"/profile/edit\" component={EditProfile} />\n        <Route path=\"/profile/connect-instagram\" component={ConnectInstagram} />\n        <Route path=\"/following\" component={Following} />\n        <Route path=\"/search\" component={Search} />\n        <Route path=\"/hashtag/:id\" component={HashtagFeed} />\n        <Route path=\"/bookmarks\" component={Bookmarks} />\n      </Router>\n      <Toaster />\n    </>\n  );\n}\n\nexport default App;\n","size_bytes":1348},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","size_bytes":2751},"client/src/components/ui/hover-card.tsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1237},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":2001},"vite-plugin-meta-images.ts":{"content":"import type { Plugin } from 'vite';\nimport fs from 'fs';\nimport path from 'path';\n\n/**\n * Vite plugin that updates og:image and twitter:image meta tags\n * to point to the app's opengraph image with the correct Replit domain.\n */\nexport function metaImagesPlugin(): Plugin {\n  return {\n    name: 'vite-plugin-meta-images',\n    transformIndexHtml(html) {\n      const baseUrl = getDeploymentUrl();\n      if (!baseUrl) {\n        log('[meta-images] no Replit deployment domain found, skipping meta tag updates');\n        return html;\n      }\n\n      // Check if opengraph image exists in public directory\n      const publicDir = path.resolve(process.cwd(), 'client', 'public');\n      const opengraphPngPath = path.join(publicDir, 'opengraph.png');\n      const opengraphJpgPath = path.join(publicDir, 'opengraph.jpg');\n      const opengraphJpegPath = path.join(publicDir, 'opengraph.jpeg');\n\n      let imageExt: string | null = null;\n      if (fs.existsSync(opengraphPngPath)) {\n        imageExt = 'png';\n      } else if (fs.existsSync(opengraphJpgPath)) {\n        imageExt = 'jpg';\n      } else if (fs.existsSync(opengraphJpegPath)) {\n        imageExt = 'jpeg';\n      }\n\n      if (!imageExt) {\n        log('[meta-images] OpenGraph image not found, skipping meta tag updates');\n        return html;\n      }\n\n      const imageUrl = `${baseUrl}/opengraph.${imageExt}`;\n\n      log('[meta-images] updating meta image tags to:', imageUrl);\n\n      html = html.replace(\n        /<meta\\s+property=\"og:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta property=\"og:image\" content=\"${imageUrl}\" />`\n      );\n\n      html = html.replace(\n        /<meta\\s+name=\"twitter:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta name=\"twitter:image\" content=\"${imageUrl}\" />`\n      );\n\n      return html;\n    },\n  };\n}\n\nfunction getDeploymentUrl(): string | null {\n  if (process.env.REPLIT_INTERNAL_APP_DOMAIN) {\n    const url = `https://${process.env.REPLIT_INTERNAL_APP_DOMAIN}`;\n    log('[meta-images] using internal app domain:', url);\n    return url;\n  }\n\n  if (process.env.REPLIT_DEV_DOMAIN) {\n    const url = `https://${process.env.REPLIT_DEV_DOMAIN}`;\n    log('[meta-images] using dev domain:', url);\n    return url;\n  }\n\n  return null;\n}\n\nfunction log(...args: any[]): void {\n  if (process.env.NODE_ENV === 'production') {\n    console.log(...args);\n  }\n}\n","size_bytes":2333},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/item.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction ItemGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      role=\"list\"\n      data-slot=\"item-group\"\n      className={cn(\"group/item-group flex flex-col\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"item-separator\"\n      orientation=\"horizontal\"\n      className={cn(\"my-0\", className)}\n      {...props}\n    />\n  )\n}\n\nconst itemVariants = cva(\n  \"group/item [a]:hover:bg-accent/50 focus-visible:border-ring focus-visible:ring-ring/50 [a]:transition-colors flex flex-wrap items-center rounded-md border border-transparent text-sm outline-none transition-colors duration-100 focus-visible:ring-[3px]\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border-border\",\n        muted: \"bg-muted/50\",\n      },\n      size: {\n        default: \"gap-4 p-4 \",\n        sm: \"gap-2.5 px-4 py-3\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Item({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> &\n  VariantProps<typeof itemVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n  return (\n    <Comp\n      data-slot=\"item\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(itemVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nconst itemMediaVariants = cva(\n  \"flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:translate-y-0.5 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted size-8 rounded-sm border [&_svg:not([class*='size-'])]:size-4\",\n        image:\n          \"size-10 overflow-hidden rounded-sm [&_img]:size-full [&_img]:object-cover\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction ItemMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof itemMediaVariants>) {\n  return (\n    <div\n      data-slot=\"item-media\"\n      data-variant={variant}\n      className={cn(itemMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction ItemContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-content\"\n      className={cn(\n        \"flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-title\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"item-description\"\n      className={cn(\n        \"text-muted-foreground line-clamp-2 text-balance text-sm font-normal leading-normal\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemActions({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-actions\"\n      className={cn(\"flex items-center gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-header\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-footer\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Item,\n  ItemMedia,\n  ItemContent,\n  ItemActions,\n  ItemGroup,\n  ItemSeparator,\n  ItemTitle,\n  ItemDescription,\n  ItemHeader,\n  ItemFooter,\n}\n","size_bytes":4494},"server/app.ts":{"content":"import { type Server } from \"node:http\";\n\nimport express, { type Express, type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport const app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  },\n  limit: '50mb'\n}));\napp.use(express.urlencoded({ extended: false, limit: '50mb' }));\n\n// Disable restrictive CSP to allow all resources\napp.use((req, res, next) => {\n  res.setHeader(\n    'Content-Security-Policy-Report-Only',\n    \"default-src *; script-src * 'unsafe-inline' 'unsafe-eval'; style-src * 'unsafe-inline'; img-src * data: blob:; font-src * data:; connect-src * 'unsafe-inline'; media-src *; object-src 'none'\"\n  );\n  next();\n});\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\nexport default async function runApp(\n  setup: (app: Express, server: Server) => Promise<void>,\n) {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly run the final setup after setting up all the other routes so\n  // the catch-all route doesn't interfere with the other routes\n  await setup(app, server);\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n}\n","size_bytes":2861},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":266},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"grid place-content-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1031},"client/src/components/BottomNav.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { House, Compass, PlusSquare, Heart, MessageCircle } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useStore } from \"@/lib/store\";\n\nexport function BottomNav() {\n  const [location] = useLocation();\n  const currentUser = useStore((state) => state.currentUser);\n\n  const navItems = [\n    { icon: House, label: \"Home\", path: \"/\" },\n    { icon: Compass, label: \"Explore\", path: \"/explore\" },\n    { icon: PlusSquare, label: \"Create\", path: \"/create\" },\n    { icon: Heart, label: \"Activity\", path: \"/activity\" },\n    { icon: MessageCircle, label: \"Messages\", path: \"/messages\" },\n  ];\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 pb-safe\">\n      <div className=\"flex justify-around items-center h-[56px] px-2 max-w-md mx-auto\">\n        {navItems.map((item) => {\n          const isActive = location === item.path;\n          const Icon = item.icon;\n          \n          return (\n            <Link key={item.path} href={item.path}>\n              <div className=\"p-2 cursor-pointer flex items-center justify-center w-10 h-10 transition-colors rounded-lg hover:bg-gray-100\">\n                <Icon \n                  size={24} \n                  className={cn(\n                    \"transition-colors\",\n                    isActive ? \"text-[#0088cc] stroke-[2.5px]\" : \"text-gray-600 stroke-[2px]\"\n                  )}\n                  fill={isActive ? \"#0088cc\" : \"none\"} \n                />\n              </div>\n            </Link>\n          );\n        })}\n        \n        {/* Profile Icon */}\n        <Link href=\"/profile\">\n          <div className=\"p-2 cursor-pointer transition-colors rounded-lg hover:bg-gray-100\">\n            <div className={cn(\n              \"w-7 h-7 rounded-full overflow-hidden border-2 transition-all\",\n              location === '/profile' ? \"border-[#0088cc]\" : \"border-gray-400\"\n            )}>\n              <img \n                src={currentUser?.avatar || \"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=100\"} \n                className=\"w-full h-full rounded-full object-cover bg-gray-200\"\n              />\n            </div>\n          </div>\n        </Link>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2253},"README.md":{"content":"# Personal Instagram Clone\n\nA minimal, personal Instagram clone that displays your Instagram media feed with real engagement metrics. Built with React, TypeScript, Firebase Auth, and Instagram Graph API.\n\n##  What This Does\n\n- **Login**: Firebase authentication (email/password or Google)\n- **Home Feed**: Display your Instagram media with real engagement metrics\n- **Profile**: View your Instagram profile data (followers, following, bio, website)\n- **API-Only**: Only features supported by the Instagram Graph API\n\n##  What This Doesn't Do\n\n-  Create posts (API read-only)\n-  Messaging or real-time chat\n-  Stories\n-  Follow/unfollow system\n-  Comments or likes (read-only)\n-  User search\n\n##  Tech Stack\n\n- **Frontend**: React + TypeScript + Vite\n- **Styling**: Tailwind CSS\n- **Authentication**: Firebase Auth\n- **API**: Instagram Graph API\n- **Backend**: Node.js + Express (minimal - auth sync only)\n- **Database**: PostgreSQL (minimal - users sync only)\n\n##  Getting Started\n\n### Prerequisites\n\n1. **Instagram Business Account** - Required for Graph API access\n2. **Instagram Access Token** - Create via Meta Developer Portal\n3. **Firebase Project** - For authentication\n\n### Installation\n\n```bash\n# 1. Clone repository\ngit clone https://github.com/mutepairejonah/instaclone.git\ncd instaclone\n\n# 2. Install dependencies\nnpm install\n\n# 3. Set up environment variables\n# Create .env file and add:\nVITE_INSTAGRAM_ACCESS_TOKEN=your_instagram_token_here\nVITE_INSTAGRAM_BUSINESS_ACCOUNT_ID=your_business_account_id\n\n# 4. Sync database schema\nnpm run db:push\n\n# 5. Start development server\nnpm run dev\n```\n\nOpen [http://localhost:5000](http://localhost:5000)\n\n##  Features\n\n### Home Feed\n- Display all your Instagram media (photos & videos)\n- Real-time engagement metrics (likes, comments)\n- Timestamps and captions from Instagram\n\n### Profile Page\n- View your Instagram profile info\n- Follower/following counts\n- Bio and website link\n- Media count\n\n### Authentication\n- Sign up with email/password\n- Log in with Google\n- Firebase session management\n\n##  Environment Variables\n\n```\nVITE_INSTAGRAM_ACCESS_TOKEN      # Your Instagram Graph API token\nVITE_INSTAGRAM_BUSINESS_ACCOUNT_ID # Your business account ID (optional)\n```\n\n##  Project Structure\n\n```\n client/\n    src/\n        pages/\n           Login.tsx          # Authentication\n           Home.tsx           # Instagram feed\n           Profile.tsx        # Profile page\n        lib/\n           firebase.ts        # Firebase config\n           instagram.ts       # Instagram API\n           store.ts           # State management\n        App.tsx                # Main routing\n server/\n    routes.ts                  # API routes\n    storage.ts                 # Database operations\n shared/\n    schema.ts                  # Database schema\n package.json\n```\n\n##  Instagram API Endpoints Used\n\n- `GET /me/media` - Fetch user media\n- `GET /me` - Fetch user profile\n- Media fields: `id, caption, media_type, media_url, thumbnail_url, timestamp, like_count, comments_count`\n\n##  How It Works\n\n1. **Login**  Firebase Auth creates user session\n2. **Home**  Fetch Instagram media via Graph API\n3. **Profile**  Display Instagram profile data\n4. **Logout**  Clear Firebase session\n\n##  Deployment\n\n### Deploy on Render\n\n1. Push code to GitHub\n2. Create Render account\n3. Connect GitHub repository\n4. Set environment variables in Render dashboard\n5. Deploy!\n\nSee `RENDER_DEPLOYMENT.md` for detailed steps.\n\n##  Troubleshooting\n\n**Instagram videos not loading?**\n- Verify `VITE_INSTAGRAM_ACCESS_TOKEN` is set\n- Check token has `instagram_graph_user_media` permission\n- Ensure token is valid and not expired\n\n**Can't log in?**\n- Check Firebase configuration in `client/src/lib/firebase.ts`\n- Verify email/password is correct\n- Try Google sign-in instead\n\n**Profile showing no data?**\n- Ensure Instagram token has `instagram_graph_user_profile` permission\n- Check that your Instagram account is a Business Account\n\n##  Notes\n\n- This app displays your personal Instagram data only\n- No public user discovery or search\n- No data collection or sharing\n- Read-only access to Instagram media\n\n##  License\n\nBuilt for personal use. Open source and available for educational purposes.\n\n---\n\n**Built with React, Firebase, and Instagram Graph API**\n\nGitHub: [https://github.com/mutepairejonah/Connect](https://github.com/mutepairejonah/Connect)\n","size_bytes":4668},"client/src/pages/Activity.tsx":{"content":"import { BottomNav } from \"@/components/BottomNav\";\nimport { useStore } from \"@/lib/store\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { useLocation, Link } from \"wouter\";\nimport { LogOut, Settings, Heart, Send } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\nexport default function Activity() {\n  const { notifications, currentUser, logout } = useStore();\n  const [, setLocation] = useLocation();\n\n  const handleLogout = async () => {\n    await logout();\n  };\n\n  // Group by timeframe (mock logic)\n  const newNotifs = notifications.filter(n => !n.read);\n  const oldNotifs = notifications.filter(n => n.read);\n\n  return (\n    <div className=\"pb-20 min-h-screen bg-[#f0f2f5]\">\n      {/* Compact Header */}\n      <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm\">\n        <div className=\"w-full px-2 sm:px-4 py-1.5 flex items-center justify-between\">\n          {/* Logo */}\n          <div className=\"text-lg font-bold text-[#1877F2] whitespace-nowrap\">Authentic</div>\n\n          {/* Right Icons */}\n          <div className=\"flex items-center gap-1\">\n            {/* Logout Button */}\n            <button\n              onClick={handleLogout}\n              className=\"p-1.5 hover:bg-gray-100 rounded-full transition-colors\"\n              data-testid=\"button-logout\"\n              title=\"Logout\"\n            >\n              <LogOut className=\"w-4 h-4 text-gray-700\" />\n            </button>\n\n            {/* Settings Button */}\n            <button\n              onClick={() => setLocation(\"/profile\")}\n              className=\"p-1.5 hover:bg-gray-100 rounded-full transition-colors\"\n              data-testid=\"button-settings\"\n              title=\"Settings\"\n            >\n              <Settings className=\"w-4 h-4 text-gray-700\" />\n            </button>\n\n            {/* Notifications */}\n            <Link href=\"/activity\">\n              <button className=\"p-1.5 hover:bg-gray-100 rounded-full transition-colors\" data-testid=\"button-notifications\">\n                <Heart className=\"w-4 h-4 text-gray-700\" />\n              </button>\n            </Link>\n\n            {/* Messages */}\n            <Link href=\"/messages\">\n              <button className=\"p-1.5 hover:bg-gray-100 rounded-full transition-colors relative\" data-testid=\"button-messages\">\n                <Send className=\"w-4 h-4 text-gray-700 -rotate-[15deg]\" />\n              </button>\n            </Link>\n\n            {/* Profile Avatar */}\n            <Link href=\"/profile\">\n              <div className=\"w-8 h-8 rounded-full overflow-hidden border-2 border-[#1877F2] cursor-pointer hover:opacity-80 transition-opacity\">\n                <img\n                  src={currentUser?.avatar || \"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=100\"}\n                  className=\"w-full h-full object-cover\"\n                  alt=\"Profile\"\n                />\n              </div>\n            </Link>\n          </div>\n        </div>\n      </header>\n\n      {/* Activity Title */}\n      <div className=\"max-w-2xl mx-auto px-2 sm:px-4 py-3 border-b border-gray-200 bg-white\">\n        <h1 className=\"font-bold text-lg\">Activity</h1>\n      </div>\n\n      <main className=\"max-w-2xl mx-auto divide-y divide-gray-200 bg-white\">\n        {newNotifs.length > 0 && (\n          <div className=\"pt-4 pb-2\">\n            <h2 className=\"font-bold px-4 mb-3 text-base\">New</h2>\n            {newNotifs.map((notif) => (\n              <NotificationItem key={notif.id} notification={notif} />\n            ))}\n          </div>\n        )}\n        \n        <div className=\"pt-4 pb-2\">\n           <h2 className=\"font-bold px-4 mb-3 text-base\">This Week</h2>\n           {oldNotifs.length > 0 ? (\n            oldNotifs.map((notif) => (\n              <NotificationItem key={notif.id} notification={notif} />\n            ))\n           ) : (\n            <div className=\"py-6 px-4 text-center text-gray-500 text-sm\">\n              No activity yet\n            </div>\n           )}\n        </div>\n      </main>\n\n      <BottomNav />\n    </div>\n  );\n}\n\nfunction NotificationItem({ notification }: { notification: any }) {\n  const { allUsers } = useStore();\n  const fromUser = allUsers.find(u => u.id === notification.fromUserId);\n  \n  return (\n    <div className=\"flex items-center justify-between py-3 px-4 hover:bg-muted/50 transition-colors cursor-pointer border-b border-border last:border-b-0\">\n      <div className=\"flex items-center gap-3 flex-1\">\n        <Avatar className=\"h-11 w-11 border border-border\">\n          <AvatarImage src={fromUser?.avatar || notification.userAvatar} />\n          <AvatarFallback>U</AvatarFallback>\n        </Avatar>\n        <div className=\"text-sm leading-snug pr-2 flex-1\">\n          <span className=\"font-semibold mr-1\">{fromUser?.username || notification.fromUserId || 'User'}</span>\n          {notification.type === 'like' && <span className=\"text-foreground\">liked your photo.</span>}\n          {notification.type === 'comment' && <span className=\"text-foreground\">commented on your post.</span>}\n          {notification.type === 'message' && <span className=\"text-foreground\">sent you a message.</span>}\n          <span className=\"text-muted-foreground ml-1 text-xs\">{notification.timestamp}</span>\n        </div>\n      </div>\n      \n      {notification.type === 'message' ? (\n         <div className=\"w-11 h-11 bg-muted rounded-lg overflow-hidden border border-border flex items-center justify-center text-foreground font-bold\">\n            \n         </div>\n      ) : (\n         <div className=\"w-11 h-11 bg-muted rounded-lg overflow-hidden border border-border flex items-center justify-center text-foreground font-bold\">\n            \n         </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":5749},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7406},"client/src/components/ui/spinner.tsx":{"content":"import { Loader2Icon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Spinner({ className, ...props }: React.ComponentProps<\"svg\">) {\n  return (\n    <Loader2Icon\n      role=\"status\"\n      aria-label=\"Loading\"\n      className={cn(\"size-4 animate-spin\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Spinner }\n","size_bytes":331},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1148},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1828},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/kbd.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Kbd({ className, ...props }: React.ComponentProps<\"kbd\">) {\n  return (\n    <kbd\n      data-slot=\"kbd\"\n      className={cn(\n        \"bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 select-none items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium\",\n        \"[&_svg:not([class*='size-'])]:size-3\",\n        \"[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction KbdGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <kbd\n      data-slot=\"kbd-group\"\n      className={cn(\"inline-flex items-center gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Kbd, KbdGroup }\n","size_bytes":862},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/pages/Home.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { LogOut, Heart, MessageCircle, Share2, Loader2, User, Users, Search as SearchIcon, Moon, Sun, RefreshCw, Bookmark } from \"lucide-react\";\nimport { getUserMedia } from \"@/lib/instagram\";\n\nexport default function Home() {\n  const { currentUser, logout, darkMode, toggleDarkMode, bookmarkedPosts, bookmarkPost, removeBookmark, getActiveInstagramToken } = useStore();\n  const [, setLocation] = useLocation();\n  const [media, setMedia] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const activeToken = getActiveInstagramToken();\n\n  useEffect(() => {\n    const loadMedia = async () => {\n      setLoading(true);\n      try {\n        const instagramMedia = await getUserMedia(undefined, activeToken);\n        setMedia(instagramMedia);\n      } catch (error) {\n        console.error(\"Failed to load media:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadMedia();\n  }, [activeToken]);\n\n  const handleLogout = async () => {\n    await logout();\n    setLocation(\"/login\");\n  };\n\n  const refreshMedia = async () => {\n    setLoading(true);\n    try {\n      const instagramMedia = await getUserMedia(undefined, activeToken);\n      setMedia(instagramMedia);\n    } catch (error) {\n      console.error(\"Failed to load media:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-white'}`}>\n      {/* Header */}\n      <header className={`sticky top-0 z-50 ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-gray-200'} border-b`}>\n        <div className=\"max-w-2xl mx-auto px-4 py-3 flex items-center justify-between\">\n          <h1 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-black'}`}>instagram</h1>\n          <div className=\"flex items-center gap-4\">\n            {activeToken && (\n              <>\n                <button\n                  onClick={() => setLocation(\"/search\")}\n                  className={`${darkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-black'} transition-colors`}\n                  data-testid=\"button-search\"\n                  title=\"Search\"\n                >\n                  <SearchIcon className=\"w-5 h-5\" />\n                </button>\n                <button\n                  onClick={() => setLocation(\"/bookmarks\")}\n                  className={`${darkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-black'} transition-colors`}\n                  data-testid=\"button-bookmarks\"\n                  title=\"Saved posts\"\n                >\n                  <Bookmark className=\"w-5 h-5\" />\n                </button>\n                <button\n                  onClick={toggleDarkMode}\n                  className={`${darkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-black'} transition-colors`}\n                  data-testid=\"button-dark-mode\"\n                >\n                  {darkMode ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n                </button>\n                <button\n                  onClick={() => setLocation(\"/following\")}\n                  className={`${darkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-black'} transition-colors`}\n                  data-testid=\"button-following\"\n                  title=\"View people you follow\"\n                >\n                  <Users className=\"w-5 h-5\" />\n                </button>\n              </>\n            )}\n            <button\n              onClick={() => setLocation(\"/profile\")}\n              className={`${darkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-black'} transition-colors`}\n              data-testid=\"button-profile\"\n              title=\"Go to profile\"\n            >\n              <User className=\"w-5 h-5\" />\n            </button>\n            <button\n              onClick={handleLogout}\n              className={`${darkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-black'} transition-colors`}\n              data-testid=\"button-logout\"\n            >\n              <LogOut className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Feed */}\n      <main className=\"max-w-2xl mx-auto\">\n        {loading ? (\n          <div className=\"flex justify-center items-center h-96\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n          </div>\n        ) : !activeToken ? (\n          <div className=\"flex flex-col justify-center items-center h-96 text-center px-4\">\n            <p className={`font-semibold mb-4 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>Instagram Account Not Connected</p>\n            <p className={`text-sm mb-6 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Connect your Instagram account to see your feed and posts.</p>\n            <button\n              onClick={() => setLocation(\"/profile/connect-instagram\")}\n              className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-lg font-medium transition-colors\"\n              data-testid=\"button-connect-instagram-home\"\n            >\n              Connect Instagram\n            </button>\n          </div>\n        ) : media.length === 0 ? (\n          <div className=\"flex justify-center items-center h-96 text-gray-400\">\n            <p>No media found</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {media.map((item) => (\n              <article key={item.id} className=\"bg-white\" data-testid={`post-${item.id}`}>\n                {/* Post Header */}\n                <div className=\"px-4 py-3 flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-8 h-8 bg-gray-300 rounded-full\" />\n                    <span className=\"text-sm font-semibold\">{currentUser?.username}</span>\n                  </div>\n                  <button className=\"text-gray-600 hover:text-black\" data-testid={`button-more-${item.id}`}>\n                    \n                  </button>\n                </div>\n\n                {/* Media */}\n                <div className=\"bg-black w-full aspect-square overflow-hidden\">\n                  {item.media_type === \"VIDEO\" ? (\n                    <video\n                      src={item.media_url}\n                      className=\"w-full h-full object-cover\"\n                      controls\n                      data-testid={`video-${item.id}`}\n                    />\n                  ) : (\n                    <img\n                      src={item.media_url}\n                      alt={item.caption || \"Instagram post\"}\n                      className=\"w-full h-full object-cover\"\n                      data-testid={`image-${item.id}`}\n                    />\n                  )}\n                </div>\n\n                {/* Actions */}\n                <div className=\"px-4 py-3 flex gap-4\">\n                  <button className=\"text-gray-600 hover:text-black transition-colors\" data-testid={`button-like-${item.id}`}>\n                    <Heart className=\"w-6 h-6\" />\n                  </button>\n                  <button className=\"text-gray-600 hover:text-black transition-colors\" data-testid={`button-comment-${item.id}`}>\n                    <MessageCircle className=\"w-6 h-6\" />\n                  </button>\n                  <button className=\"text-gray-600 hover:text-black transition-colors\" data-testid={`button-share-${item.id}`}>\n                    <Share2 className=\"w-6 h-6\" />\n                  </button>\n                </div>\n\n                {/* Engagement Stats */}\n                <div className=\"px-4 py-2 border-t border-gray-200\">\n                  <p className=\"text-sm font-semibold\" data-testid={`likes-${item.id}`}>\n                    {item.like_count || 0} likes\n                  </p>\n                </div>\n\n                {/* Caption */}\n                {item.caption && (\n                  <div className=\"px-4 py-2\">\n                    <p className=\"text-sm\">\n                      <span className=\"font-semibold\">{currentUser?.username}</span>{\" \"}\n                      <span data-testid={`caption-${item.id}`}>{item.caption}</span>\n                    </p>\n                  </div>\n                )}\n\n                {/* Comments */}\n                {item.comments_count > 0 && (\n                  <div className=\"px-4 py-2\">\n                    <p className=\"text-sm text-gray-600 cursor-pointer hover:text-black\" data-testid={`comments-${item.id}`}>\n                      View all {item.comments_count} comments\n                    </p>\n                  </div>\n                )}\n\n                {/* Timestamp */}\n                {item.timestamp && (\n                  <div className=\"px-4 pb-3\">\n                    <p className=\"text-xs text-gray-400\">\n                      {new Date(item.timestamp).toLocaleDateString()}\n                    </p>\n                  </div>\n                )}\n              </article>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n","size_bytes":9250},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport tailwindcss from \"@tailwindcss/vite\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\nimport { metaImagesPlugin } from \"./vite-plugin-meta-images\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    tailwindcss(),\n    metaImagesPlugin(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  css: {\n    postcss: {\n      plugins: [],\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    allowedHosts: true,\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1330},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2859},"client/src/components/ui/dialog.tsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3835},"client/src/components/ui/calendar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"lucide-react\"\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button, buttonVariants } from \"@/components/ui/button\"\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = \"label\",\n  buttonVariant = \"ghost\",\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"]\n}) {\n  const defaultClassNames = getDefaultClassNames()\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        \"bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString(\"default\", { month: \"short\" }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn(\"w-fit\", defaultClassNames.root),\n        months: cn(\n          \"relative flex flex-col gap-4 md:flex-row\",\n          defaultClassNames.months\n        ),\n        month: cn(\"flex w-full flex-col gap-4\", defaultClassNames.month),\n        nav: cn(\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\n          defaultClassNames.nav\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_previous\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_next\n        ),\n        month_caption: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]\",\n          defaultClassNames.month_caption\n        ),\n        dropdowns: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium\",\n          defaultClassNames.dropdowns\n        ),\n        dropdown_root: cn(\n          \"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border\",\n          defaultClassNames.dropdown_root\n        ),\n        dropdown: cn(\n          \"bg-popover absolute inset-0 opacity-0\",\n          defaultClassNames.dropdown\n        ),\n        caption_label: cn(\n          \"select-none font-medium\",\n          captionLayout === \"label\"\n            ? \"text-sm\"\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5\",\n          defaultClassNames.caption_label\n        ),\n        table: \"w-full border-collapse\",\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\n        weekday: cn(\n          \"text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal\",\n          defaultClassNames.weekday\n        ),\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\n        week_number_header: cn(\n          \"w-[--cell-size] select-none\",\n          defaultClassNames.week_number_header\n        ),\n        week_number: cn(\n          \"text-muted-foreground select-none text-[0.8rem]\",\n          defaultClassNames.week_number\n        ),\n        day: cn(\n          \"group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md\",\n          defaultClassNames.day\n        ),\n        range_start: cn(\n          \"bg-accent rounded-l-md\",\n          defaultClassNames.range_start\n        ),\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\n        today: cn(\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\n          defaultClassNames.today\n        ),\n        outside: cn(\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\n          defaultClassNames.outside\n        ),\n        disabled: cn(\n          \"text-muted-foreground opacity-50\",\n          defaultClassNames.disabled\n        ),\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          )\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === \"left\") {\n            return (\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\n            )\n          }\n\n          if (orientation === \"right\") {\n            return (\n              <ChevronRightIcon\n                className={cn(\"size-4\", className)}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\n          )\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-[--cell-size] items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          )\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames()\n\n  const ref = React.useRef<HTMLButtonElement>(null)\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus()\n  }, [modifiers.focused])\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70\",\n        defaultClassNames.day,\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Calendar, CalendarDayButton }\n","size_bytes":7569},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1267},"shared/schema.ts":{"content":"import { pgTable, varchar, text, timestamp, integer, serial, boolean } from \"drizzle-orm/pg-core\";\nimport { z } from \"zod\";\n\n// ========== USERS TABLE (Firebase auth sync only) ==========\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey(),\n  username: varchar(\"username\", { length: 30 }).notNull().unique(),\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\n  fullName: varchar(\"full_name\", { length: 100 }),\n  avatar: text(\"avatar\"),\n  bio: text(\"bio\"),\n  website: varchar(\"website\", { length: 500 }),\n  activeInstagramAccountId: integer(\"active_instagram_account_id\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport type User = typeof users.$inferSelect;\n\nexport const insertUserSchema = z.object({\n  id: z.string(),\n  username: z.string().min(3).max(30),\n  email: z.string().email(),\n  fullName: z.string().max(100).optional(),\n  avatar: z.string().optional(),\n  bio: z.string().max(500).optional(),\n  website: z.string().max(500).optional(),\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\n// ========== INSTAGRAM ACCOUNTS TABLE ==========\nexport const instagramAccounts = pgTable(\"instagram_accounts\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull(),\n  token: text(\"token\").notNull(),\n  accountName: varchar(\"account_name\", { length: 100 }),\n  instagramUsername: varchar(\"instagram_username\", { length: 100 }),\n  instagramEmail: varchar(\"instagram_email\", { length: 255 }),\n  instagramPhone: varchar(\"instagram_phone\", { length: 20 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport type InstagramAccount = typeof instagramAccounts.$inferSelect;\n\nexport const insertInstagramAccountSchema = z.object({\n  userId: z.string(),\n  token: z.string(),\n  accountName: z.string().max(100).optional(),\n  instagramUsername: z.string().max(100).optional(),\n  instagramEmail: z.string().email().optional(),\n  instagramPhone: z.string().max(20).optional(),\n});\n\nexport type InsertInstagramAccount = z.infer<typeof insertInstagramAccountSchema>;\n","size_bytes":2046},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-3.5 w-3.5 fill-primary\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1410},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1598},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":649},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":792},"server/index-prod.ts":{"content":"import fs from \"node:fs\";\nimport { type Server } from \"node:http\";\nimport path from \"node:path\";\n\nimport express, { type Express, type Request } from \"express\";\n\nimport runApp from \"./app\";\n\nexport async function serveStatic(app: Express, server: Server) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n\n(async () => {\n  await runApp(serveStatic);\n})();\n","size_bytes":726},"server/storage.ts":{"content":"import { db } from \"../shared/db\";\nimport { users } from \"../shared/schema\";\nimport { eq } from \"drizzle-orm\";\nimport type { InsertUser, User } from \"../shared/schema\";\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUser(id: string, updates: Partial<User>): Promise<User>;\n}\n\nexport class PostgresStorage implements IStorage {\n  async getUser(id: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id));\n    return result[0];\n  }\n\n  async createUser(user: InsertUser): Promise<User> {\n    const result = await db.insert(users).values(user).returning();\n    return result[0];\n  }\n\n  async updateUser(id: string, updates: Partial<User>): Promise<User> {\n    const result = await db.update(users).set(updates).where(eq(users.id, id)).returning();\n    return result[0];\n  }\n}\n\nexport const storage = new PostgresStorage();\n","size_bytes":960},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4887},"server/index-dev.ts":{"content":"import fs from \"node:fs\";\nimport { type Server } from \"node:http\";\nimport path from \"node:path\";\n\nimport type { Express } from \"express\";\nimport { nanoid } from \"nanoid\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\n\nimport runApp from \"./app\";\n\nimport viteConfig from \"../vite.config\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\n(async () => {\n  await runApp(setupVite);\n})();\n","size_bytes":1609},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/pages/EditProfile.tsx":{"content":"import { useState } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { ArrowLeft, Loader2 } from \"lucide-react\";\n\nexport default function EditProfile() {\n  const { currentUser, updateProfile } = useStore();\n  const [, setLocation] = useLocation();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    fullName: currentUser?.fullName || \"\",\n    bio: currentUser?.bio || \"\",\n    website: currentUser?.website || \"\",\n  });\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    setError(\"\");\n    setSuccess(false);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n    setSuccess(false);\n\n    try {\n      await updateProfile({\n        fullName: formData.fullName || undefined,\n        bio: formData.bio || undefined,\n        website: formData.website || undefined,\n      });\n      setSuccess(true);\n      setTimeout(() => setLocation(\"/profile\"), 1500);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to update profile\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      {/* Header */}\n      <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200\">\n        <div className=\"max-w-2xl mx-auto px-4 py-3 flex items-center justify-between\">\n          <button\n            onClick={() => setLocation(\"/profile\")}\n            className=\"text-gray-600 hover:text-black transition-colors\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"w-6 h-6\" />\n          </button>\n          <h1 className=\"text-lg font-semibold\">Edit Profile</h1>\n          <div className=\"w-6\" />\n        </div>\n      </header>\n\n      {/* Form */}\n      <main className=\"max-w-2xl mx-auto px-4 py-8\">\n        <form onSubmit={handleSubmit} className=\"space-y-6 max-w-md\">\n          {/* Full Name */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Full Name\n            </label>\n            <input\n              type=\"text\"\n              name=\"fullName\"\n              value={formData.fullName}\n              onChange={handleChange}\n              placeholder=\"Your full name\"\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              data-testid=\"input-fullname\"\n            />\n          </div>\n\n          {/* Bio */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Bio\n            </label>\n            <textarea\n              name=\"bio\"\n              value={formData.bio}\n              onChange={handleChange}\n              placeholder=\"Tell us about yourself\"\n              maxLength={500}\n              rows={4}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n              data-testid=\"textarea-bio\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              {formData.bio.length}/500\n            </p>\n          </div>\n\n          {/* Website */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Website\n            </label>\n            <input\n              type=\"url\"\n              name=\"website\"\n              value={formData.website}\n              onChange={handleChange}\n              placeholder=\"https://example.com\"\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              data-testid=\"input-website\"\n            />\n          </div>\n\n          {/* Error Message */}\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n              <p className=\"text-sm text-red-600\" data-testid=\"error-message\">{error}</p>\n            </div>\n          )}\n\n          {/* Success Message */}\n          {success && (\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-3\">\n              <p className=\"text-sm text-green-600\" data-testid=\"success-message\">Profile updated successfully!</p>\n            </div>\n          )}\n\n          {/* Submit Button */}\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white font-medium py-2 rounded-lg transition-colors flex items-center justify-center gap-2\"\n            data-testid=\"button-save\"\n          >\n            {loading ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              \"Save Changes\"\n            )}\n          </button>\n\n          {/* Cancel Button */}\n          <button\n            type=\"button\"\n            onClick={() => setLocation(\"/profile\")}\n            className=\"w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 rounded-lg transition-colors\"\n            data-testid=\"button-cancel\"\n          >\n            Cancel\n          </button>\n        </form>\n      </main>\n    </div>\n  );\n}\n","size_bytes":5510},"client/src/pages/Login.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { useState } from \"react\";\nimport { Loader2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Login() {\n  const { loginWithGoogle, loginWithEmail, signupWithEmail, pendingGoogleUser } = useStore();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [loading, setLoading] = useState(false);\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [fullName, setFullName] = useState(\"\");\n\n  const handleGoogleLogin = async () => {\n    setLoading(true);\n    try {\n      await loginWithGoogle();\n      setLocation(\"/\");\n    } catch (error: any) {\n      if (error.message === 'USERNAME_SETUP_REQUIRED') {\n        // Redirect to setup page for new users\n        setLocation(\"/setup\");\n      } else {\n        toast({\n          variant: \"destructive\",\n          title: \"Error\",\n          description: error.message || \"Login failed\"\n        });\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEmailAuth = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email || !password) return;\n    if (isSignUp && !fullName) return;\n\n    setLoading(true);\n    try {\n      if (isSignUp) {\n        await signupWithEmail(email, password, fullName);\n      } else {\n        await loginWithEmail(email, password);\n      }\n      setLocation(\"/\");\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: error.message\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-4 max-w-md mx-auto bg-background\">\n      <div className=\"w-full max-w-xs space-y-6\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"font-bold text-5xl mb-4 text-primary\">Authentic</h1>\n          <p className=\"text-muted-foreground\">\n            {isSignUp ? \"Connect authentically with people you care about.\" : \"Log in to connect authentically.\"}\n          </p>\n        </div>\n\n        <form onSubmit={handleEmailAuth} className=\"space-y-3\">\n          {isSignUp && (\n            <Input \n              placeholder=\"Full Name\" \n              className=\"bg-muted/50\" \n              type=\"text\"\n              value={fullName}\n              onChange={(e) => setFullName(e.target.value)}\n            />\n          )}\n          <Input \n            placeholder=\"Email\" \n            className=\"bg-muted/50\" \n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <Input \n            type=\"password\" \n            placeholder=\"Password\" \n            className=\"bg-muted/50\" \n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <Button type=\"submit\" className=\"w-full font-semibold mt-2 bg-primary hover:bg-primary/90 text-white\" disabled={loading}>\n            {loading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : (isSignUp ? \"Sign Up\" : \"Log In\")}\n          </Button>\n        </form>\n\n        <div className=\"relative my-6\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <span className=\"w-full border-t border-border\" />\n          </div>\n          <div className=\"relative flex justify-center text-xs uppercase\">\n            <span className=\"bg-background px-2 text-muted-foreground\">Or</span>\n          </div>\n        </div>\n\n        <Button \n          className=\"w-full bg-white hover:bg-gray-50 text-black border border-border font-semibold flex items-center gap-2\" \n          onClick={handleGoogleLogin}\n          disabled={loading}\n        >\n           <img src=\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\" className=\"w-5 h-5\" />\n           Log in with Google\n        </Button>\n\n        {!isSignUp && (\n          <div className=\"text-center mt-4\">\n            <a href=\"#\" className=\"text-xs text-blue-900 dark:text-blue-400\">Forgot password?</a>\n          </div>\n        )}\n      </div>\n\n      <div className=\"mt-auto py-6 w-full border-t border-border text-center\">\n        <p className=\"text-sm\">\n          {isSignUp ? \"Have an account?\" : \"Don't have an account?\"} \n          <span className=\"font-semibold text-blue-600 cursor-pointer ml-1\" onClick={() => setIsSignUp(!isSignUp)}>\n            {isSignUp ? \"Log in\" : \"Sign up\"}\n          </span>\n        </p>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4693},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/button-group.tsx":{"content":"import { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nconst buttonGroupVariants = cva(\n  \"flex w-fit items-stretch has-[>[data-slot=button-group]]:gap-2 [&>*]:focus-visible:relative [&>*]:focus-visible:z-10 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1\",\n  {\n    variants: {\n      orientation: {\n        horizontal:\n          \"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none\",\n        vertical:\n          \"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none\",\n      },\n    },\n    defaultVariants: {\n      orientation: \"horizontal\",\n    },\n  }\n)\n\nfunction ButtonGroup({\n  className,\n  orientation,\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof buttonGroupVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"button-group\"\n      data-orientation={orientation}\n      className={cn(buttonGroupVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupText({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  asChild?: boolean\n}) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      className={cn(\n        \"bg-muted shadow-xs flex items-center gap-2 rounded-md border px-4 text-sm font-medium [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupSeparator({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"button-group-separator\"\n      orientation={orientation}\n      className={cn(\n        \"bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  ButtonGroup,\n  ButtonGroupSeparator,\n  ButtonGroupText,\n  buttonGroupVariants,\n}\n","size_bytes":2209},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","size_bytes":1342},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/PostCard.tsx":{"content":"import { Heart, MessageCircle, Send, Bookmark, MoreHorizontal, X, Volume2, VolumeX, MessageSquare, Share } from \"lucide-react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Post, useStore } from \"@/lib/store\";\nimport { cn } from \"@/lib/utils\";\nimport { motion } from \"framer-motion\";\nimport { useState, useRef } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { toast } from \"sonner\";\n\ninterface PostCardProps {\n  post: Post;\n}\n\nexport function PostCard({ post }: PostCardProps) {\n  const { toggleLike, toggleSave } = useStore();\n  const [, setLocation] = useLocation();\n  const [isLikedAnim, setIsLikedAnim] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const [showComments, setShowComments] = useState(false);\n  const [commentText, setCommentText] = useState(\"\");\n  const fullscreenVideoRef = useRef<HTMLVideoElement>(null);\n  const inFeedVideoRef = useRef<HTMLVideoElement>(null);\n\n  const handleLike = () => {\n    toggleLike(post.id);\n    if (!post.isLiked) {\n      setIsLikedAnim(true);\n      setTimeout(() => setIsLikedAnim(false), 1000);\n    }\n  };\n\n  const handleVideoClick = () => {\n    if (post.mediaType === 'VIDEO' && post.videoUrl) {\n      setIsFullscreen(true);\n      setIsMuted(false);\n    }\n  };\n\n  const handleToggleMute = () => {\n    setIsMuted(!isMuted);\n  };\n\n  const handleComment = () => {\n    setShowComments(!showComments);\n  };\n\n  const handleSendComment = () => {\n    if (commentText.trim()) {\n      toast.success(\"Comment added!\");\n      setCommentText(\"\");\n    }\n  };\n\n  const handleShare = () => {\n    // Navigate to messages with this user\n    if (post.userId) {\n      setLocation(`/messages?user=${post.userId}`);\n      toast.success(`Opening messages with ${post.username}`);\n    }\n  };\n\n  return (\n    <div className=\"bg-card rounded-xl border border-border overflow-hidden shadow-sm hover:shadow-md transition-shadow\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-3\">\n        <div className=\"flex items-center gap-2 min-w-0\">\n          <Avatar className=\"h-8 w-8 border-2 border-primary/20 flex-shrink-0\">\n            <AvatarImage src={post.userAvatar || `https://api.dicebear.com/7.x/avataaars/svg?seed=${post.userId}`} />\n            <AvatarFallback>{post.username?.charAt(0) || 'U'}</AvatarFallback>\n          </Avatar>\n          <div className=\"flex flex-col min-w-0\">\n            <span className=\"text-xs sm:text-sm font-semibold leading-none cursor-pointer hover:text-primary transition-colors truncate\">{post.username || post.userId}</span>\n            {post.location && (\n              <span className=\"text-[10px] sm:text-xs text-muted-foreground cursor-pointer hover:text-foreground transition-colors truncate\">{post.location}</span>\n            )}\n          </div>\n        </div>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground hover:text-foreground flex-shrink-0\">\n          <MoreHorizontal className=\"h-4 w-4 sm:h-5 sm:w-5\" />\n        </Button>\n      </div>\n\n      {/* Media - Image or Video */}\n      <div className=\"relative aspect-square bg-muted overflow-hidden group cursor-pointer\" onDoubleClick={handleLike} onClick={handleVideoClick} style={{borderRadius: '0'}}>\n        {post.mediaType === 'VIDEO' && post.videoUrl ? (\n          <>\n            <video \n              ref={inFeedVideoRef}\n              src={post.videoUrl}\n              autoPlay\n              loop\n              muted\n              playsInline\n              className=\"w-full h-full object-cover bg-black\"\n              style={{ WebkitBackfaceVisibility: 'hidden', backfaceVisibility: 'hidden' }}\n            />\n            {/* Video overlay hint */}\n            <div className=\"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center\">\n              <div className=\"bg-white/30 hover:bg-white/50 backdrop-blur-sm rounded-full p-4\">\n                <svg className=\"w-8 h-8 text-white fill-white\" viewBox=\"0 0 24 24\">\n                  <polygon points=\"5 3 19 12 5 21 5 3\"></polygon>\n                </svg>\n              </div>\n            </div>\n            {/* Video badge */}\n            <div className=\"absolute top-3 left-3 bg-black/60 backdrop-blur-sm text-white text-xs font-semibold px-2 py-1 rounded pointer-events-none\">\n              VIDEO\n            </div>\n          </>\n        ) : (\n          <img \n            src={post.imageUrl} \n            alt=\"Post\" \n            className=\"w-full h-full object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        {isLikedAnim && (\n          <div className=\"absolute inset-0 flex items-center justify-center z-20 pointer-events-none\">\n             <motion.div\n                initial={{ scale: 0, opacity: 0 }}\n                animate={{ scale: 1.2, opacity: 1 }}\n                exit={{ scale: 0, opacity: 0 }}\n                transition={{ duration: 0.2 }}\n             >\n               <Heart className=\"w-28 h-28 text-white fill-white drop-shadow-2xl\" strokeWidth={0} />\n             </motion.div>\n          </div>\n        )}\n      </div>\n\n      {/* Fullscreen Video Modal */}\n      {isFullscreen && post.mediaType === 'VIDEO' && post.videoUrl && (\n        <div className=\"fixed inset-0 z-50 bg-black flex items-center justify-center\" onClick={() => setIsFullscreen(false)}>\n          <div className=\"w-full h-full flex flex-col items-center justify-center relative\" onClick={(e) => e.stopPropagation()}>\n            <video \n              ref={fullscreenVideoRef}\n              src={post.videoUrl}\n              autoPlay\n              controls={false}\n              muted={isMuted}\n              playsInline\n              className=\"w-full h-full object-contain bg-black\"\n              style={{ WebkitBackfaceVisibility: 'hidden', backfaceVisibility: 'hidden', maxHeight: '100vh' }}\n            />\n            \n            {/* Fullscreen Controls */}\n            <div className=\"absolute bottom-6 left-0 right-0 flex items-center justify-center gap-4\">\n              <button \n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleToggleMute();\n                }}\n                className=\"bg-white/30 hover:bg-white/50 backdrop-blur-sm rounded-full p-3 transition-all\"\n                aria-label={isMuted ? \"Unmute\" : \"Mute\"}\n              >\n                {isMuted ? (\n                  <VolumeX className=\"w-6 h-6 text-white\" />\n                ) : (\n                  <Volume2 className=\"w-6 h-6 text-white\" />\n                )}\n              </button>\n            </div>\n\n            {/* Close button */}\n            <button \n              onClick={() => setIsFullscreen(false)}\n              className=\"absolute top-4 right-4 bg-white/30 hover:bg-white/50 backdrop-blur-sm rounded-full p-2 transition-all\"\n              aria-label=\"Close\"\n            >\n              <X className=\"w-6 h-6 text-white\" />\n            </button>\n\n            {/* Tap to close hint */}\n            <div className=\"absolute top-4 left-4 text-white/60 text-sm\">\n              Click to close\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Actions */}\n      <div className=\"px-4 py-3 border-t border-border flex gap-1 justify-end items-center\">\n        <button \n          onClick={handleComment}\n          className=\"p-1.5 rounded-lg hover:bg-muted transition-colors\"\n          title=\"Comments\"\n          data-testid=\"button-comment\"\n        >\n          <MessageCircle size={18} />\n        </button>\n        <button \n          onClick={handleShare}\n          className=\"p-1.5 rounded-lg hover:bg-muted transition-colors\"\n          title=\"Share\"\n          data-testid=\"button-share\"\n        >\n          <Send size={18} className=\"-rotate-[15deg]\" />\n        </button>\n        <button \n          onClick={() => toggleSave(post.id)}\n          className={cn(\"p-1.5 rounded-lg hover:bg-muted transition-colors\", post.isSaved && \"text-primary\")}\n          title=\"Save\"\n          data-testid=\"button-save\"\n        >\n          <Bookmark size={18} fill={post.isSaved ? \"currentColor\" : \"none\"} />\n        </button>\n      </div>\n\n      {/* Likes & Caption */}\n      <div className=\"px-4 py-3 space-y-1.5 border-t border-border\">\n        <div className=\"text-sm font-semibold\">{post.likes.toLocaleString()} {post.likes === 1 ? 'like' : 'likes'}</div>\n        <div className=\"text-sm leading-snug\">\n          <span className=\"font-semibold mr-2\">{post.username || post.userId}</span>\n          {post.caption}\n        </div>\n        {post.comments > 0 && (\n          <button \n            onClick={handleComment}\n            data-testid=\"button-view-comments\"\n            className=\"text-muted-foreground text-sm cursor-pointer mt-1 hover:text-foreground transition-colors\"\n          >\n            View all {post.comments} comments\n          </button>\n        )}\n        <div className=\"text-[10px] text-muted-foreground uppercase tracking-wide mt-1\">{post.timestamp}</div>\n      </div>\n\n      {/* Comments Section */}\n      {showComments && (\n        <div className=\"px-4 py-3 border-t border-border space-y-3\">\n          <div className=\"max-h-40 overflow-y-auto space-y-2\">\n            <div className=\"text-sm\">\n              <span className=\"font-semibold text-xs text-muted-foreground\">2 comments</span>\n              <div className=\"mt-2 space-y-2\">\n                <div className=\"text-xs\">\n                  <span className=\"font-semibold\">user_123:</span> Amazing post! \n                </div>\n                <div className=\"text-xs\">\n                  <span className=\"font-semibold\">user_456:</span> Love this content\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"flex gap-2 items-center\">\n            <Input\n              placeholder=\"Add a comment...\"\n              value={commentText}\n              onChange={(e) => setCommentText(e.target.value)}\n              onKeyPress={(e) => {\n                if (e.key === 'Enter' && !e.shiftKey) {\n                  e.preventDefault();\n                  handleSendComment();\n                }\n              }}\n              className=\"h-8 text-sm\"\n              data-testid=\"input-comment\"\n            />\n            <Button\n              size=\"sm\"\n              onClick={handleSendComment}\n              disabled={!commentText.trim()}\n              className=\"h-8\"\n              data-testid=\"button-post-comment\"\n            >\n              Post\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":10812},"client/src/components/ui/sonner.tsx":{"content":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","size_bytes":894},"client/src/components/ui/empty.tsx":{"content":"import { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Empty({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty\"\n      className={cn(\n        \"flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-dashed p-6 text-center md:p-12\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-header\"\n      className={cn(\n        \"flex max-w-sm flex-col items-center gap-2 text-center\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst emptyMediaVariants = cva(\n  \"mb-2 flex shrink-0 items-center justify-center [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction EmptyMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof emptyMediaVariants>) {\n  return (\n    <div\n      data-slot=\"empty-icon\"\n      data-variant={variant}\n      className={cn(emptyMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-title\"\n      className={cn(\"text-lg font-medium tracking-tight\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <div\n      data-slot=\"empty-description\"\n      className={cn(\n        \"text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-content\"\n      className={cn(\n        \"flex w-full min-w-0 max-w-sm flex-col items-center gap-4 text-balance text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Empty,\n  EmptyHeader,\n  EmptyTitle,\n  EmptyDescription,\n  EmptyContent,\n  EmptyMedia,\n}\n","size_bytes":2396},"client/src/components/ui/chart.tsx":{"content":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload\n            .filter((item) => item.type !== \"none\")\n            .map((item, index) => {\n              const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n              const itemConfig = getPayloadConfigFromPayload(config, item, key)\n              const indicatorColor = color || item.payload.fill || item.color\n\n              return (\n                <div\n                  key={item.dataKey}\n                  className={cn(\n                    \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                    indicator === \"dot\" && \"items-center\"\n                  )}\n                >\n                  {formatter && item?.value !== undefined && item.name ? (\n                    formatter(item.value, item.name, item, index, item.payload)\n                  ) : (\n                    <>\n                      {itemConfig?.icon ? (\n                        <itemConfig.icon />\n                      ) : (\n                        !hideIndicator && (\n                          <div\n                            className={cn(\n                              \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                              {\n                                \"h-2.5 w-2.5\": indicator === \"dot\",\n                                \"w-1\": indicator === \"line\",\n                                \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                  indicator === \"dashed\",\n                                \"my-0.5\": nestLabel && indicator === \"dashed\",\n                              }\n                            )}\n                            style={\n                              {\n                                \"--color-bg\": indicatorColor,\n                                \"--color-border\": indicatorColor,\n                              } as React.CSSProperties\n                            }\n                          />\n                        )\n                      )}\n                      <div\n                        className={cn(\n                          \"flex flex-1 justify-between leading-none\",\n                          nestLabel ? \"items-end\" : \"items-center\"\n                        )}\n                      >\n                        <div className=\"grid gap-1.5\">\n                          {nestLabel ? tooltipLabel : null}\n                          <span className=\"text-muted-foreground\">\n                            {itemConfig?.label || item.name}\n                          </span>\n                        </div>\n                        {item.value && (\n                          <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                            {item.value.toLocaleString()}\n                          </span>\n                        )}\n                      </div>\n                    </>\n                  )}\n                </div>\n              )\n            })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload\n          .filter((item) => item.type !== \"none\")\n          .map((item) => {\n            const key = `${nameKey || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n            return (\n              <div\n                key={item.value}\n                className={cn(\n                  \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n                )}\n              >\n                {itemConfig?.icon && !hideIcon ? (\n                  <itemConfig.icon />\n                ) : (\n                  <div\n                    className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                    style={{\n                      backgroundColor: item.color,\n                    }}\n                  />\n                )}\n                {itemConfig?.label}\n              </div>\n            )\n          })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10763},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1877},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/dropdown-menu.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7606},"FIREBASE_SETUP.md":{"content":"# Firebase Setup Guide for Instagram Clone\n\n##  Critical: You Must Update Firebase Rules\n\nYour app is currently getting **permission-denied** errors because Firebase security rules need to be updated. Follow these steps:\n\n---\n\n## Step 1: Update Firestore Database Rules\n\n1. Go to [Firebase Console](https://console.firebase.google.com/)\n2. Select **chatapp-d92e7** project\n3. Click **Firestore Database** in the left sidebar\n4. Click the **Rules** tab\n5. Copy and paste the contents from `firestore.rules` file in this project\n6. Click **Publish**\n\n** This is REQUIRED or your app won't work!**\n\n---\n\n## Step 2: Update Firebase Storage Rules\n\n1. In the same Firebase Console\n2. Click **Storage** in the left sidebar\n3. Click the **Rules** tab\n4. Copy and paste the contents from `storage.rules` file in this project\n5. Click **Publish**\n\n** This fixes avatar upload errors!**\n\n---\n\n## What These Rules Do\n\n### Firestore Rules\n-  Allow authenticated users to read all user profiles\n-  Allow users to update their own profiles\n-  Allow authenticated users to create posts, messages, and calls\n-  Protect private data (users can only see messages sent to them)\n-  Enable follow/unfollow functionality\n\n### Storage Rules\n-  Allow anyone to view avatars and posts (public content)\n-  Allow users to upload their own avatar\n-  Allow authenticated users to upload post images/videos\n-  Protect against unauthorized uploads\n\n---\n\n## Verification\n\nAfter updating the rules:\n\n1. Refresh your app\n2. Try logging in with Google or Email\n3. Search for users in the Explore tab\n4. Upload an avatar in Edit Profile\n5. Send messages to followers\n\nAll features should work without permission errors!\n\n---\n\n## Current Features\n\n **Authentication**\n- Google Sign-in with unique username selection\n- Email/Password signup with auto-generated unique usernames\n- Secure session management\n\n **User Profiles**\n- Unique usernames (enforced in database)\n- Editable profile info (name, bio, website)\n- Avatar uploads to Firebase Storage\n- Follower/Following counts\n\n **Posts**\n- Image and video uploads (max 100MB)\n- Captions and location tags\n- Like and save functionality\n\n **Social Features**\n- Follow/Unfollow system\n- Real-time user search by username or name\n- Messaging between followers (Firestore)\n- Audio and video call initiation (Firestore)\n\n **Search**\n- Find users by typing username or full name\n- See follow status for each user\n- Follow/unfollow directly from search results\n\n---\n\n## Troubleshooting\n\n**Still seeing permission errors?**\n1. Make sure you clicked **Publish** in both Firestore and Storage\n2. Wait 30 seconds for rules to propagate\n3. Hard refresh your browser (Ctrl+Shift+R or Cmd+Shift+R)\n4. Check browser console for specific error messages\n\n**Avatar uploads not working?**\n1. Verify Storage rules are published\n2. Check that the file is under 100MB\n3. Make sure you're signed in\n\n**Can't find users in search?**\n1. Make sure at least one other user exists\n2. Try searching by exact username\n3. Check that you're logged in\n\n---\n\n## Firebase Configuration\n\nYour app is connected to:\n- **Project ID**: chatapp-d92e7\n- **Auth Domain**: chatapp-d92e7.firebaseapp.com\n- **Storage**: chatapp-d92e7.firebasestorage.app\n\nAll configuration is already set up in `client/src/lib/firebase.ts`\n","size_bytes":3347},"client/src/lib/firebase.ts":{"content":"import { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\nimport { getDatabase } from \"firebase/database\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAYc4hqiWsrzIYvoybXUK_2HglHj_Ut1Mo\",\n  authDomain: \"chatapp-d92e7.firebaseapp.com\",\n  projectId: \"chatapp-d92e7\",\n  storageBucket: \"chatapp-d92e7.firebasestorage.app\",\n  messagingSenderId: \"312092844552\",\n  appId: \"1:312092844552:web:c916c4839833d6c0e867bd\",\n  databaseURL: \"https://chatapp-d92e7-default-rtdb.firebaseio.com\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport const rtdb = getDatabase(app);\nexport const storage = getStorage(app);\n\nexport default app;\n","size_bytes":842},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/lib/instagram.ts":{"content":"/**\n * Instagram API Configuration\n * \n * SECURITY NOTE: API keys are stored in environment variables, not in code.\n * Never hardcode secrets in JavaScript files.\n */\n\nconst INSTAGRAM_API_CONFIG = {\n  accessToken: import.meta.env.VITE_INSTAGRAM_ACCESS_TOKEN || '',\n  businessAccountId: import.meta.env.VITE_INSTAGRAM_BUSINESS_ACCOUNT_ID || '',\n  apiVersion: 'v18.0',\n  apiBaseUrl: 'https://graph.instagram.com'\n};\n\n/**\n * Get Instagram API access token\n */\nexport function getInstagramAccessToken(): string {\n  if (!INSTAGRAM_API_CONFIG.accessToken) {\n    console.warn('Instagram API token not configured');\n    return '';\n  }\n  return INSTAGRAM_API_CONFIG.accessToken;\n}\n\n/**\n * Get Instagram business account ID\n */\nexport function getInstagramBusinessAccountId(): string {\n  if (!INSTAGRAM_API_CONFIG.businessAccountId) {\n    console.warn('Instagram business account ID not configured');\n    return '';\n  }\n  return INSTAGRAM_API_CONFIG.businessAccountId;\n}\n\n/**\n * Make authenticated request to Instagram API\n */\nexport async function makeInstagramRequest(\n  endpoint: string,\n  method: 'GET' | 'POST' | 'PUT' = 'GET',\n  data?: Record<string, any>,\n  userToken?: string\n): Promise<any> {\n  const accessToken = userToken || getInstagramAccessToken();\n  \n  if (!accessToken) {\n    throw new Error('Instagram API token not configured. Please connect your Instagram account.');\n  }\n\n  const url = new URL(`${INSTAGRAM_API_CONFIG.apiBaseUrl}/${INSTAGRAM_API_CONFIG.apiVersion}/${endpoint}`);\n  url.searchParams.append('access_token', accessToken);\n\n  const options: RequestInit = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n    }\n  };\n\n  if (data && (method === 'POST' || method === 'PUT')) {\n    options.body = JSON.stringify(data);\n  }\n\n  try {\n    const response = await fetch(url.toString(), options);\n    \n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(`Instagram API Error: ${errorData.error?.message || response.statusText}`);\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('Instagram API request failed:', error);\n    throw error;\n  }\n}\n\n/**\n * Get user media from Instagram with engagement metrics\n */\nexport async function getUserMedia(userId?: string, userToken?: string): Promise<any> {\n  try {\n    // Use business account ID if available, otherwise use 'me'\n    const accountId = userId || INSTAGRAM_API_CONFIG.businessAccountId || 'me';\n    console.log('Fetching media for account:', accountId);\n    \n    // Fetch media with engagement metrics using the correct endpoint format\n    const response = await makeInstagramRequest(\n      `${accountId}/media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count`,\n      'GET',\n      undefined,\n      userToken\n    );\n    console.log('Instagram API response:', response);\n    \n    // Handle response format: response.data contains the media array\n    if (response.data && Array.isArray(response.data)) {\n      console.log('Extracted media array:', response.data);\n      return response.data;\n    }\n    if (Array.isArray(response)) {\n      return response;\n    }\n    console.warn('Could not extract media from response:', response);\n    return [];\n  } catch (error) {\n    console.error('Error fetching user media:', error);\n    return [];\n  }\n}\n\n/**\n * Get media insights for engagement data\n */\nexport async function getMediaInsights(mediaId: string): Promise<any> {\n  try {\n    const response = await makeInstagramRequest(\n      `${mediaId}?fields=like_count,comments_count,engagement,impressions,reach`\n    );\n    return response;\n  } catch (error) {\n    console.error('Error fetching media insights:', error);\n    return null;\n  }\n}\n\n/**\n * Get user insights\n */\nexport async function getUserInsights(userId: string = 'me'): Promise<any> {\n  try {\n    const response = await makeInstagramRequest(`${userId}/insights?metric=impressions,reach,profile_views`);\n    return response.data || [];\n  } catch (error) {\n    console.error('Error fetching user insights:', error);\n    return [];\n  }\n}\n\n/**\n * Get user profile data\n */\nexport async function getUserProfile(userId: string = 'me', userToken?: string): Promise<any> {\n  try {\n    const response = await makeInstagramRequest(\n      `${userId}?fields=id,name,biography,website,profile_picture_url,followers_count,follows_count,media_count,username`,\n      'GET',\n      undefined,\n      userToken\n    );\n    console.log('Profile response:', response);\n    return response;\n  } catch (error) {\n    console.error('Error fetching user profile:', error);\n    return null;\n  }\n}\n\n/**\n * Get users that you follow - tries multiple endpoints\n */\nexport async function getUserFollowing(userId: string = 'me'): Promise<any[]> {\n  try {\n    console.log('Attempting to fetch following list for:', userId);\n    \n    // Try the standard endpoint first\n    const response = await makeInstagramRequest(\n      `${userId}/ig_followed_users?fields=id,name,username,profile_picture_url,biography,website`\n    );\n    \n    console.log('Following response:', response);\n    \n    if (response.data && Array.isArray(response.data)) {\n      return response.data;\n    }\n    if (response.error) {\n      console.error('Instagram API error:', response.error);\n      throw new Error(response.error.message || 'Failed to fetch following list');\n    }\n    return [];\n  } catch (error) {\n    console.error('Error fetching following list:', error);\n    // Return empty array but log the error for debugging\n    throw error;\n  }\n}\n\n/**\n * Get media for a specific user\n */\nexport async function getUserMediaById(userId: string): Promise<any[]> {\n  try {\n    const response = await makeInstagramRequest(\n      `${userId}/media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count`\n    );\n    \n    if (response.data && Array.isArray(response.data)) {\n      return response.data;\n    }\n    return [];\n  } catch (error) {\n    console.error(`Error fetching media for user ${userId}:`, error);\n    return [];\n  }\n}\n\n/**\n * Get comments on a specific media post\n */\nexport async function getMediaComments(mediaId: string): Promise<any[]> {\n  try {\n    const response = await makeInstagramRequest(\n      `${mediaId}/comments?fields=id,text,timestamp,username,from{id,username}`\n    );\n    \n    if (response.data && Array.isArray(response.data)) {\n      return response.data;\n    }\n    return [];\n  } catch (error) {\n    console.error(`Error fetching comments for media ${mediaId}:`, error);\n    return [];\n  }\n}\n\n/**\n * Search for hashtags\n */\nexport async function searchHashtags(hashtagName: string): Promise<any[]> {\n  try {\n    const businessAccountId = getInstagramBusinessAccountId();\n    if (!businessAccountId) {\n      console.warn('Business account ID not configured for hashtag search');\n      return [];\n    }\n    \n    const response = await makeInstagramRequest(\n      `ig_hashtag_search?user_id=${businessAccountId}&fields=id,name&search_string=${encodeURIComponent(hashtagName)}`\n    );\n    \n    if (response.data && Array.isArray(response.data)) {\n      return response.data;\n    }\n    return [];\n  } catch (error) {\n    console.error(`Error searching hashtags:`, error);\n    return [];\n  }\n}\n\n/**\n * Get recent media posts by hashtag\n */\nexport async function getHashtagMedia(hashtagId: string): Promise<any[]> {\n  try {\n    const response = await makeInstagramRequest(\n      `${hashtagId}/recent_media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count,username`\n    );\n    \n    if (response.data && Array.isArray(response.data)) {\n      return response.data;\n    }\n    return [];\n  } catch (error) {\n    console.error(`Error fetching hashtag media:`, error);\n    return [];\n  }\n}\n\n/**\n * Get top posts by hashtag\n */\nexport async function getHashtagTopPosts(hashtagId: string): Promise<any[]> {\n  try {\n    const response = await makeInstagramRequest(\n      `${hashtagId}/top_media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count`\n    );\n    \n    if (response.data && Array.isArray(response.data)) {\n      return response.data;\n    }\n    return [];\n  } catch (error) {\n    console.error(`Error fetching top hashtag posts:`, error);\n    return [];\n  }\n}\n\n/**\n * Get media details (caption, type, engagement, etc.)\n */\nexport async function getMediaDetails(mediaId: string): Promise<any> {\n  try {\n    const response = await makeInstagramRequest(\n      `${mediaId}?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count,username,owner`\n    );\n    return response;\n  } catch (error) {\n    console.error(`Error fetching media details:`, error);\n    return null;\n  }\n}\n\n/**\n * Get account information\n */\nexport async function getAccountInfo(userId: string = 'me'): Promise<any> {\n  try {\n    const response = await makeInstagramRequest(\n      `${userId}?fields=id,name,username,biography,website,profile_picture_url,followers_count,follows_count,media_count,ig_id`\n    );\n    return response;\n  } catch (error) {\n    console.error(`Error fetching account info:`, error);\n    return null;\n  }\n}\n\n/**\n * Get account analytics/insights\n */\nexport async function getAccountAnalytics(userId: string = 'me'): Promise<any> {\n  try {\n    const response = await makeInstagramRequest(\n      `${userId}/insights?metric=impressions,reach,profile_views,website_clicks,email_contacts`\n    );\n    \n    return response.data || [];\n  } catch (error) {\n    console.error(`Error fetching account analytics:`, error);\n    return [];\n  }\n}\n\n/**\n * Get media analytics\n */\nexport async function getMediaAnalytics(mediaId: string): Promise<any> {\n  try {\n    const response = await makeInstagramRequest(\n      `${mediaId}/insights?metric=engagement,impressions,reach,saved,video_views`\n    );\n    \n    return response.data || [];\n  } catch (error) {\n    console.error(`Error fetching media analytics:`, error);\n    return [];\n  }\n}\n\n/**\n * Get recently used hashtags\n */\nexport async function getRecentlyUsedHashtags(): Promise<any[]> {\n  try {\n    const businessAccountId = getInstagramBusinessAccountId();\n    if (!businessAccountId) {\n      console.warn('Business account ID not configured');\n      return [];\n    }\n    \n    const response = await makeInstagramRequest(\n      `${businessAccountId}/ig_hashtag_search?fields=id,name`\n    );\n    \n    if (response.data && Array.isArray(response.data)) {\n      return response.data;\n    }\n    return [];\n  } catch (error) {\n    console.error(`Error fetching recently used hashtags:`, error);\n    return [];\n  }\n}\n\n/**\n * Get media by specific ID with all available fields\n */\nexport async function getFullMediaDetails(mediaId: string): Promise<any> {\n  try {\n    const response = await makeInstagramRequest(\n      `${mediaId}?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count,username,from{id,username},ig_id,permalink`\n    );\n    return response;\n  } catch (error) {\n    console.error(`Error fetching full media details:`, error);\n    return null;\n  }\n}\n\n/**\n * Get user stories\n */\nexport async function getUserStories(userId: string = 'me'): Promise<any[]> {\n  try {\n    const response = await makeInstagramRequest(\n      `${userId}/stories?fields=id,media_type,media_url,timestamp,like_count`\n    );\n    \n    if (response.data && Array.isArray(response.data)) {\n      return response.data;\n    }\n    return [];\n  } catch (error) {\n    console.error(`Error fetching user stories:`, error);\n    return [];\n  }\n}\n\n/**\n * Get all account media with advanced fields\n */\nexport async function getAllAccountMedia(userId: string = 'me'): Promise<any[]> {\n  try {\n    const response = await makeInstagramRequest(\n      `${userId}/media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count,permalink,ig_id,owner{id,username}`\n    );\n    \n    if (response.data && Array.isArray(response.data)) {\n      return response.data;\n    }\n    return [];\n  } catch (error) {\n    console.error(`Error fetching all account media:`, error);\n    return [];\n  }\n}\n\n/**\n * Search for Instagram users\n */\nexport async function searchInstagramUsers(username: string): Promise<any[]> {\n  try {\n    // Note: This endpoint may not be available for all tokens\n    const response = await makeInstagramRequest(\n      `ig_search_user?user_id=${getInstagramBusinessAccountId()}&fields=id,username,name,profile_picture_url&search_string=${encodeURIComponent(username)}`\n    );\n    \n    if (response.data && Array.isArray(response.data)) {\n      return response.data;\n    }\n    return [];\n  } catch (error) {\n    console.error(`Error searching for users:`, error);\n    return [];\n  }\n}\n\nexport default INSTAGRAM_API_CONFIG;\n","size_bytes":12759},"client/src/pages/Explore.tsx":{"content":"import { BottomNav } from \"@/components/BottomNav\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Search as SearchIcon, Loader2, UserPlus, UserCheck, LogOut, Settings, Heart, Send } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation, Link } from \"wouter\";\n\nexport default function Explore() {\n  const { searchUsers, toggleFollow, currentUser, logout } = useStore();\n  const [, setLocation] = useLocation();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchResults, setSearchResults] = useState<any[]>([]);\n  const [searching, setSearching] = useState(false);\n  const [activeCategory, setActiveCategory] = useState(\"IGTV\");\n\n  const handleLogout = async () => {\n    await logout();\n  };\n\n  const handleSearch = async (value: string) => {\n    setSearchTerm(value);\n    \n    if (!value || value.trim().length === 0) {\n      setSearchResults([]);\n      return;\n    }\n\n    setSearching(true);\n    try {\n      const results = await searchUsers(value);\n      setSearchResults(results);\n    } catch (error) {\n      console.error('Search error:', error);\n      setSearchResults([]);\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  const handleFollowToggle = async (userId: string) => {\n    await toggleFollow(userId);\n    // Update local search results\n    setSearchResults(prev => prev.map(user => \n      user.id === userId ? { ...user, isFollowing: !user.isFollowing } : user\n    ));\n  };\n\n  return (\n    <div className=\"pb-20 min-h-screen bg-[#f0f2f5]\">\n      {/* Compact Header */}\n      <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm\">\n        <div className=\"w-full px-2 sm:px-4 py-1.5 flex items-center justify-between\">\n          {/* Logo */}\n          <div className=\"text-lg font-bold text-[#1877F2] whitespace-nowrap\">Authentic</div>\n\n          {/* Right Icons */}\n          <div className=\"flex items-center gap-1\">\n            {/* Logout Button */}\n            <button\n              onClick={handleLogout}\n              className=\"p-1.5 hover:bg-gray-100 rounded-full transition-colors\"\n              data-testid=\"button-logout\"\n              title=\"Logout\"\n            >\n              <LogOut className=\"w-4 h-4 text-gray-700\" />\n            </button>\n\n            {/* Settings Button */}\n            <button\n              onClick={() => setLocation(\"/profile\")}\n              className=\"p-1.5 hover:bg-gray-100 rounded-full transition-colors\"\n              data-testid=\"button-settings\"\n              title=\"Settings\"\n            >\n              <Settings className=\"w-4 h-4 text-gray-700\" />\n            </button>\n\n            {/* Notifications */}\n            <Link href=\"/activity\">\n              <button className=\"p-1.5 hover:bg-gray-100 rounded-full transition-colors\" data-testid=\"button-notifications\">\n                <Heart className=\"w-4 h-4 text-gray-700\" />\n              </button>\n            </Link>\n\n            {/* Messages */}\n            <Link href=\"/messages\">\n              <button className=\"p-1.5 hover:bg-gray-100 rounded-full transition-colors relative\" data-testid=\"button-messages\">\n                <Send className=\"w-4 h-4 text-gray-700 -rotate-[15deg]\" />\n              </button>\n            </Link>\n\n            {/* Profile Avatar */}\n            <Link href=\"/profile\">\n              <div className=\"w-8 h-8 rounded-full overflow-hidden border-2 border-[#1877F2] cursor-pointer hover:opacity-80 transition-opacity\">\n                <img\n                  src={currentUser?.avatar || \"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=100\"}\n                  className=\"w-full h-full object-cover\"\n                  alt=\"Profile\"\n                />\n              </div>\n            </Link>\n          </div>\n        </div>\n      </header>\n\n      {/* Search Header */}\n      <div className=\"sticky top-12 z-40 bg-white border-b border-gray-200 px-2 sm:px-4 py-3\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"relative group\">\n            <SearchIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-4 h-4\" />\n            <Input \n              placeholder=\"Search users...\" \n              className=\"pl-9 bg-gray-100 border-0 h-9 rounded-xl focus-visible:ring-0 focus-visible:bg-gray-100\" \n              value={searchTerm}\n              onChange={(e) => handleSearch(e.target.value)}\n            />\n            {searching && (\n              <Loader2 className=\"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-gray-500\" />\n            )}\n          </div>\n          \n          {/* Category Chips */}\n          <div className=\"flex gap-2 overflow-x-auto no-scrollbar mt-3 pb-1\">\n            {[\"IGTV\", \"Shop\", \"Style\", \"Sports\", \"Auto\", \"Decor\", \"Art\", \"DIY\"].map((cat) => (\n              <div \n                key={cat} \n                className={`flex-shrink-0 px-5 py-1.5 rounded-lg font-semibold text-sm whitespace-nowrap border cursor-pointer transition-colors ${\n                  activeCategory === cat \n                    ? 'border-[#1877F2] bg-[#1877F2] text-white' \n                    : 'border-gray-300 hover:bg-gray-100'\n                }`}\n                onClick={() => setActiveCategory(cat)}\n              >\n                {cat}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      <main className=\"max-w-2xl mx-auto pt-1\">\n        {/* Search Results */}\n        {searchTerm && searchResults.length > 0 && (\n          <div className=\"bg-white\">\n            {searchResults.map(user => (\n              <div key={user.id} className=\"flex items-center gap-3 px-4 py-3 hover:bg-muted/50 transition-colors\">\n                <div className=\"w-12 h-12 rounded-full overflow-hidden bg-muted border border-border\">\n                  {user.avatar && (\n                    <img src={user.avatar} alt={user.username} className=\"w-full h-full object-cover\" />\n                  )}\n                </div>\n                <div \n                  className=\"flex-1 min-w-0 cursor-pointer\"\n                  onClick={() => setLocation(`/user/${user.id}`)}\n                >\n                  <p className=\"font-semibold truncate\">{user.username}</p>\n                  <p className=\"text-sm text-muted-foreground truncate\">{user.fullName}</p>\n                  {user.bio && (\n                    <p className=\"text-xs text-muted-foreground truncate mt-0.5\">{user.bio}</p>\n                  )}\n                </div>\n                <Button\n                  size=\"sm\"\n                  className={`flex-shrink-0 h-8 font-semibold ${user.isFollowing ? 'bg-muted text-foreground hover:bg-muted/80' : 'bg-primary text-white hover:bg-primary/90'}`}\n                  onClick={() => handleFollowToggle(user.id)}\n                >\n                  {user.isFollowing ? (\n                    <>\n                      <UserCheck className=\"w-4 h-4 mr-1\" />\n                      Following\n                    </>\n                  ) : (\n                    <>\n                      <UserPlus className=\"w-4 h-4 mr-1\" />\n                      Follow\n                    </>\n                  )}\n                </Button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* No Results */}\n        {searchTerm && !searching && searchResults.length === 0 && (\n          <div className=\"flex flex-col items-center justify-center py-20 text-muted-foreground\">\n            <SearchIcon className=\"w-16 h-16 mb-4 opacity-50\" />\n            <p className=\"font-semibold\">No users found</p>\n            <p className=\"text-sm\">Try searching with a different name</p>\n          </div>\n        )}\n\n        {/* Masonry Grid (shown when no search) */}\n        {!searchTerm && (\n          <div className=\"grid grid-cols-3 gap-0.5\">\n            {[...Array(30)].map((_, i) => {\n              const isLarge = i % 10 === 2 || i % 10 === 5;\n              \n              return (\n                <div \n                  key={i} \n                  className={`bg-muted relative group cursor-pointer overflow-hidden ${isLarge ? \"row-span-2 col-span-2\" : \"aspect-square\"}`}\n                >\n                  <img \n                    src={`https://images.unsplash.com/photo-${1600000000000 + i}?w=500&auto=format&fit=crop&q=60`} \n                    className=\"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105\"\n                    loading=\"lazy\"\n                    alt=\"Explore\"\n                  />\n                  <div className=\"absolute inset-0 bg-black/10 opacity-0 group-active:opacity-100 transition-opacity\" />\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </main>\n\n      <BottomNav />\n    </div>\n  );\n}\n","size_bytes":8812},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/pages/Following.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { ArrowLeft, Loader2 } from \"lucide-react\";\nimport { getUserFollowing, getUserMediaById } from \"@/lib/instagram\";\n\nexport default function Following() {\n  const { currentUser } = useStore();\n  const [, setLocation] = useLocation();\n  const [following, setFollowing] = useState<any[]>([]);\n  const [followingMedia, setFollowingMedia] = useState<Record<string, any[]>>({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    const loadFollowing = async () => {\n      setLoading(true);\n      setError(\"\");\n      try {\n        console.log(\"Starting to load following list...\");\n        const followingList = await getUserFollowing();\n        console.log(\"Following list loaded:\", followingList);\n        setFollowing(followingList);\n\n        // Load media for each person they follow (limit to first 5 for performance)\n        const mediaMap: Record<string, any[]> = {};\n        for (const user of followingList.slice(0, 5)) {\n          const media = await getUserMediaById(user.id);\n          mediaMap[user.id] = media.slice(0, 6); // Get first 6 posts per user\n        }\n        setFollowingMedia(mediaMap);\n      } catch (error: any) {\n        console.error(\"Failed to load following:\", error);\n        setError(\n          error?.message || \n          \"Instagram Graph API doesn't support listing followed users with your current token. This is a limitation of Instagram's API - only certain account types and permissions can access this feature.\"\n        );\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadFollowing();\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      {/* Header */}\n      <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200\">\n        <div className=\"max-w-2xl mx-auto px-4 py-3 flex items-center gap-4\">\n          <button\n            onClick={() => setLocation(\"/\")}\n            className=\"text-gray-600 hover:text-black transition-colors\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"w-6 h-6\" />\n          </button>\n          <h1 className=\"text-lg font-semibold\">Following</h1>\n        </div>\n      </header>\n\n      {/* Content */}\n      <main className=\"max-w-2xl mx-auto px-4 py-6\">\n        {loading ? (\n          <div className=\"flex justify-center items-center h-96\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n          </div>\n        ) : error ? (\n          <div className=\"flex flex-col justify-center items-center h-96 text-center px-4\">\n            <p className=\"text-red-600 font-semibold mb-2\">API Limitation</p>\n            <p className=\"text-gray-600 text-sm\">{error}</p>\n            {currentUser && (\n              <p className=\"text-gray-500 text-xs mt-4\">\n                The API doesn't support listing who you follow. Go to Instagram to see your following list.\n              </p>\n            )}\n          </div>\n        ) : following.length === 0 ? (\n          <div className=\"flex justify-center items-center h-96 text-gray-400\">\n            <p>You're not following anyone yet</p>\n          </div>\n        ) : (\n          <div className=\"space-y-12\">\n            {following.map((user) => (\n              <div key={user.id} className=\"border-b border-gray-200 pb-8 last:border-b-0\">\n                {/* User Header */}\n                <div className=\"flex items-center gap-4 mb-6\">\n                  <div className=\"w-16 h-16 bg-gray-300 rounded-full overflow-hidden flex-shrink-0\">\n                    {user.profile_picture_url && (\n                      <img\n                        src={user.profile_picture_url}\n                        alt={user.name}\n                        className=\"w-full h-full object-cover\"\n                        data-testid={`avatar-${user.id}`}\n                      />\n                    )}\n                  </div>\n                  <div className=\"flex-1\">\n                    <h2 className=\"font-semibold text-lg\" data-testid={`name-${user.id}`}>\n                      {user.name || user.username}\n                    </h2>\n                    <p className=\"text-sm text-gray-600\" data-testid={`username-${user.id}`}>\n                      @{user.username}\n                    </p>\n                    {user.biography && (\n                      <p className=\"text-sm text-gray-700 mt-1 line-clamp-2\">{user.biography}</p>\n                    )}\n                  </div>\n                </div>\n\n                {/* User's Media Grid */}\n                {followingMedia[user.id] && followingMedia[user.id].length > 0 ? (\n                  <div className=\"grid grid-cols-3 gap-2 md:gap-3\">\n                    {followingMedia[user.id].map((media) => (\n                      <div\n                        key={media.id}\n                        className=\"aspect-square bg-gray-100 overflow-hidden rounded-lg hover:opacity-80 transition-opacity cursor-pointer group relative\"\n                        data-testid={`media-${media.id}`}\n                      >\n                        {media.media_type === \"VIDEO\" ? (\n                          <video\n                            src={media.media_url}\n                            className=\"w-full h-full object-cover\"\n                            data-testid={`video-${media.id}`}\n                          />\n                        ) : (\n                          <img\n                            src={media.media_url}\n                            alt={media.caption || \"Post\"}\n                            className=\"w-full h-full object-cover\"\n                            data-testid={`image-${media.id}`}\n                          />\n                        )}\n                        <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n                          <div className=\"flex items-center gap-4 text-white\">\n                            <div className=\"flex items-center gap-1\">\n                              <span className=\"text-sm font-semibold\">{media.like_count || 0}</span>\n                              <span className=\"text-xs\"></span>\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <span className=\"text-sm font-semibold\">{media.comments_count || 0}</span>\n                              <span className=\"text-xs\"></span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"text-sm text-gray-400\">No posts yet</p>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n","size_bytes":6986},"client/src/pages/Create.tsx":{"content":"import { BottomNav } from \"@/components/BottomNav\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useStore } from \"@/lib/store\";\nimport { ArrowLeft, MapPin, Image as ImageIcon, X, ChevronRight, Film, Loader2, LogOut, Settings, Heart, Send } from \"lucide-react\";\nimport { useLocation, Link } from \"wouter\";\nimport { useState, useRef } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Create() {\n  const [, setLocation] = useLocation();\n  const addPost = useStore((state) => state.addPost);\n  const addStory = useStore((state) => state.addStory);\n  const currentUser = useStore((state) => state.currentUser);\n  const { toast } = useToast();\n  const [caption, setCaption] = useState(\"\");\n  const [locationTag, setLocationTag] = useState(\"\");\n  const [step, setStep] = useState<'picker' | 'details' | 'type'>('type');\n  const [creationType, setCreationType] = useState<'post' | 'story' | null>(null);\n  const [selectedMedia, setSelectedMedia] = useState<string | null>(null);\n  const [mediaType, setMediaType] = useState<'image' | 'video'>('image');\n  const [uploading, setUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [recentMedia, setRecentMedia] = useState<{url: string, type: 'image' | 'video'}[]>([]);\n\n  const handleMediaSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    const isImage = file.type.startsWith('image/');\n    const isVideo = file.type.startsWith('video/');\n\n    if (!isImage && !isVideo) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"Please select an image or video file\"\n      });\n      return;\n    }\n\n    if (file.size > 100 * 1024 * 1024) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"File size must be less than 100MB\"\n      });\n      return;\n    }\n\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      const mediaData = event.target?.result as string;\n      setSelectedMedia(mediaData);\n      setMediaType(isImage ? 'image' : 'video');\n      setRecentMedia([{url: mediaData, type: isImage ? 'image' : 'video'}, ...recentMedia.slice(0, 19)]);\n      setStep('details');\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handlePost = async () => {\n    console.log('handlePost called, currentUser:', currentUser, 'selectedMedia:', selectedMedia ? 'yes' : 'no', 'creationType:', creationType);\n    if (!currentUser || !selectedMedia) {\n      console.error('Missing currentUser or selectedMedia');\n      return;\n    }\n\n    setUploading(true);\n    try {\n      if (creationType === 'story') {\n        console.log('Creating story...');\n        await addStory(selectedMedia);\n        toast({\n          title: \"Success\",\n          description: \"Story created successfully\"\n        });\n      } else {\n        console.log('Creating post with data:', {\n          userId: currentUser.id,\n          caption,\n          location: locationTag,\n          mediaType: mediaType === 'image' ? 'IMAGE' : 'VIDEO',\n        });\n        await addPost({\n          userId: currentUser.id,\n          imageUrl: mediaType === 'image' ? selectedMedia : '',\n          videoUrl: mediaType === 'video' ? selectedMedia : '',\n          mediaType: (mediaType === 'image' ? 'IMAGE' : 'VIDEO') as any,\n          caption,\n          location: locationTag || undefined,\n        });\n        console.log('Post created successfully');\n        toast({\n          title: \"Success\",\n          description: \"Post uploaded successfully\"\n        });\n      }\n      \n      setLocation(\"/\");\n    } catch (error: any) {\n      console.error('Error in handlePost:', error);\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: error?.message || \"Failed to upload\"\n      });\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Type selection flow\n  if (step === 'type') {\n    return (\n      <div className=\"max-w-md mx-auto min-h-screen bg-background flex flex-col pb-20\">\n        <header className=\"h-12 flex items-center justify-between px-4 border-b border-border\">\n          <X className=\"w-7 h-7 cursor-pointer hover:opacity-70\" onClick={() => setLocation(\"/\")} />\n          <h1 className=\"font-bold text-lg\">Create</h1>\n          <div className=\"w-7\"></div>\n        </header>\n\n        <div className=\"flex-1 flex flex-col items-center justify-center gap-6 p-6\">\n          <Button\n            className=\"w-full h-20 text-lg font-bold bg-primary hover:bg-primary/90 text-white\"\n            onClick={() => {\n              setCreationType('story');\n              setStep('picker');\n            }}\n          >\n             Create Story\n          </Button>\n          <Button\n            className=\"w-full h-20 text-lg font-bold bg-primary hover:bg-primary/90 text-white\"\n            onClick={() => {\n              setCreationType('post');\n              setStep('picker');\n            }}\n          >\n             Create Post\n          </Button>\n        </div>\n        <BottomNav />\n      </div>\n    );\n  }\n\n  // Media picker flow\n  if (step === 'picker') {\n    return (\n      <div className=\"max-w-md mx-auto min-h-screen bg-background flex flex-col pb-20\">\n        <header className=\"h-12 flex items-center justify-between px-4 border-b border-border\">\n          <button onClick={() => setStep('type')} className=\"text-primary font-bold hover:opacity-70\"> Back</button>\n          <h1 className=\"font-bold text-lg\">New {creationType === 'story' ? 'Story' : 'Post'}</h1>\n          <Button \n            className=\"text-primary font-bold hover:text-primary/80\" \n            variant=\"ghost\"\n            disabled={!selectedMedia}\n            onClick={() => creationType === 'story' ? handlePost() : setStep('details')}\n          >\n            {creationType === 'story' ? 'Share' : 'Next'}\n          </Button>\n        </header>\n        \n        {/* Preview Area */}\n        <motion.div \n          className=\"aspect-square bg-muted relative flex items-center justify-center overflow-hidden\"\n          layoutId=\"mediaPreview\"\n        >\n          {selectedMedia ? (\n            mediaType === 'image' ? (\n              <img src={selectedMedia} className=\"w-full h-full object-cover\" alt=\"Selected\" />\n            ) : (\n              <video src={selectedMedia} className=\"w-full h-full object-cover\" controls />\n            )\n          ) : (\n            <div className=\"text-muted-foreground flex flex-col items-center\">\n              <ImageIcon className=\"w-16 h-16 mb-2 opacity-50\" />\n              <span>Select a photo or video</span>\n            </div>\n          )}\n        </motion.div>\n\n        {/* Gallery and Upload */}\n        <div className=\"flex-1 overflow-y-auto bg-background\">\n          <div className=\"p-3 border-b border-border space-y-3\">\n            <input \n              ref={fileInputRef}\n              type=\"file\" \n              accept=\"image/*,video/*\" \n              onChange={handleMediaSelect}\n              className=\"hidden\"\n            />\n            <button\n              onClick={() => fileInputRef.current?.click()}\n              className=\"w-full flex items-center justify-center gap-2 py-2.5 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 transition-colors\"\n            >\n              <ImageIcon className=\"w-5 h-5\" />\n              Upload from Device\n            </button>\n          </div>\n\n          {/* Recent/Suggested */}\n          {recentMedia.length > 0 && (\n            <div className=\"p-3 border-b border-border\">\n              <h4 className=\"text-sm font-semibold mb-2\">Recent</h4>\n              <div className=\"grid grid-cols-4 gap-1\">\n                {recentMedia.map((media, i) => (\n                  <button\n                    key={i}\n                    className={`aspect-square rounded-sm overflow-hidden border-2 transition-all relative ${\n                      selectedMedia === media.url ? 'border-blue-500' : 'border-border'\n                    }`}\n                    onClick={() => {\n                      setSelectedMedia(media.url);\n                      setMediaType(media.type);\n                    }}\n                  >\n                    {media.type === 'image' ? (\n                      <img src={media.url} className=\"w-full h-full object-cover\" loading=\"lazy\" alt=\"Recent\" />\n                    ) : (\n                      <>\n                        <video src={media.url} className=\"w-full h-full object-cover\" />\n                        <div className=\"absolute inset-0 flex items-center justify-center bg-black/20\">\n                          <Film className=\"w-4 h-4 text-white\" />\n                        </div>\n                      </>\n                    )}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Suggested Gallery */}\n          <div className=\"p-3\">\n            <h4 className=\"text-sm font-semibold mb-2\">Suggestions</h4>\n            <div className=\"grid grid-cols-4 gap-1\">\n              {[...Array(20)].map((_, i) => {\n                const imgUrl = `https://images.unsplash.com/photo-${1500000000000 + (i * 10)}?w=800&auto=format&fit=crop&q=60`;\n                return (\n                  <button \n                    key={i} \n                    className={`aspect-square bg-muted rounded-sm overflow-hidden border-2 transition-all ${\n                      selectedMedia === imgUrl ? 'border-blue-500' : 'border-border'\n                    }`}\n                    onClick={() => {\n                      setSelectedMedia(imgUrl);\n                      setMediaType('image');\n                      setStep('details');\n                    }}\n                  >\n                    <img src={imgUrl} className=\"w-full h-full object-cover\" loading=\"lazy\" alt=\"Suggestion\" />\n                  </button>\n                )\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Details form\n  return (\n    <div className=\"max-w-md mx-auto min-h-screen bg-background pb-20 flex flex-col\">\n      <header className=\"sticky top-0 z-50 bg-background border-b border-border px-4 h-14 flex items-center justify-between\">\n        <Button variant=\"ghost\" size=\"icon\" onClick={() => setStep('picker')} disabled={uploading}>\n          <ArrowLeft className=\"w-6 h-6\" />\n        </Button>\n        <h1 className=\"font-bold text-lg\">New Post</h1>\n        <Button \n          variant=\"ghost\" \n          className=\"text-blue-500 font-bold hover:text-blue-600 disabled:opacity-50\" \n          onClick={handlePost}\n          disabled={uploading}\n        >\n          {uploading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : \"Share\"}\n        </Button>\n      </header>\n\n      <main className=\"p-4 space-y-6\">\n        <div className=\"flex gap-4 items-start\">\n          <motion.div \n            className=\"w-16 h-16 bg-muted rounded-sm flex-shrink-0 overflow-hidden\"\n            layoutId=\"mediaPreview\"\n          >\n            {selectedMedia && mediaType === 'image' ? (\n              <img src={selectedMedia} className=\"w-full h-full object-cover\" alt=\"Preview\" />\n            ) : selectedMedia ? (\n              <>\n                <video src={selectedMedia} className=\"w-full h-full object-cover\" />\n                <div className=\"absolute inset-0 flex items-center justify-center bg-black/20\">\n                  <Film className=\"w-4 h-4 text-white\" />\n                </div>\n              </>\n            ) : null}\n          </motion.div>\n          <Textarea \n            placeholder=\"Write a caption...\" \n            className=\"flex-1 border-0 resize-none focus-visible:ring-0 p-0 h-20 text-base disabled:opacity-50\"\n            value={caption}\n            onChange={(e) => setCaption(e.target.value)}\n            disabled={uploading}\n            autoFocus\n          />\n        </div>\n\n        <div className=\"divide-y divide-border border-t border-b border-border -mx-4 px-4\">\n          <div className=\"flex items-center justify-between py-3.5 cursor-pointer opacity-50\">\n            <span className=\"text-base\">Tag People</span>\n            <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\n          </div>\n          <div className=\"py-3.5\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-base\">Add Location</span>\n              <MapPin className=\"w-5 h-5 text-muted-foreground\" />\n            </div>\n            <div className=\"flex gap-2 overflow-x-auto no-scrollbar\">\n              {[\"San Francisco\", \"Union Square\", \"Golden Gate Bridge\", \"Sausalito\"].map(loc => (\n                <button \n                  key={loc} \n                  className={`px-3 py-1.5 rounded-full text-sm border whitespace-nowrap transition-colors disabled:opacity-50 ${locationTag === loc ? 'bg-blue-500 text-white border-transparent' : 'border-border text-foreground bg-muted/30'}`}\n                  onClick={() => setLocationTag(loc)}\n                  disabled={uploading}\n                >\n                  {loc}\n                </button>\n              ))}\n            </div>\n          </div>\n          <div className=\"flex items-center justify-between py-3.5 cursor-pointer opacity-50\">\n            <span className=\"text-base\">Add Music</span>\n            <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\n          </div>\n        </div>\n      </main>\n\n      <BottomNav />\n    </div>\n  );\n}\n","size_bytes":13588},"client/src/pages/Profile.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { ArrowLeft, LogOut, Loader2, Edit2, Grid3X3, Bookmark, Link2, Plus, Trash2, Check } from \"lucide-react\";\nimport { getUserProfile, getUserMedia } from \"@/lib/instagram\";\n\nexport default function Profile() {\n  const { currentUser, logout, darkMode, getActiveInstagramToken, switchInstagramAccount, removeInstagramAccount } = useStore();\n  const [, setLocation] = useLocation();\n  const [profile, setProfile] = useState<any>(null);\n  const [media, setMedia] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState(\"posts\");\n  const [showAccountMenu, setShowAccountMenu] = useState(false);\n  const activeToken = getActiveInstagramToken();\n\n  useEffect(() => {\n    const loadProfile = async () => {\n      setLoading(true);\n      try {\n        const instagramProfile = await getUserProfile('me', activeToken);\n        setProfile(instagramProfile);\n        \n        const instagramMedia = await getUserMedia(undefined, activeToken);\n        setMedia(instagramMedia);\n      } catch (error) {\n        console.error(\"Failed to load profile:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadProfile();\n  }, [activeToken]);\n\n  const handleLogout = async () => {\n    await logout();\n    setLocation(\"/login\");\n  };\n\n  return (\n    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-white'}`}>\n      {/* Header */}\n      <header className={`sticky top-0 z-50 ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-gray-200'} border-b`}>\n        <div className=\"max-w-2xl mx-auto px-4 py-3 flex items-center justify-between\">\n          <button\n            onClick={() => setLocation(\"/\")}\n            className={`${darkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-black'} transition-colors`}\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"w-6 h-6\" />\n          </button>\n          <h1 className={`text-lg font-semibold ${darkMode ? 'text-white' : 'text-black'}`}>{currentUser?.username}</h1>\n          <button\n            onClick={handleLogout}\n            className={`${darkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-black'} transition-colors`}\n            data-testid=\"button-logout\"\n          >\n            <LogOut className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </header>\n\n      {/* Profile Content */}\n      <main className=\"max-w-2xl mx-auto px-4 py-8\">\n        {loading ? (\n          <div className=\"flex justify-center items-center h-96\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n          </div>\n        ) : !activeToken ? (\n          <div className=\"flex flex-col justify-center items-center h-96 text-center px-4\">\n            <p className={`font-semibold mb-4 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>Instagram Account Not Connected</p>\n            <p className={`text-sm mb-6 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Connect your Instagram account to view your profile and manage accounts.</p>\n            <button\n              onClick={() => setLocation(\"/profile/connect-instagram\")}\n              className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-lg font-medium transition-colors\"\n              data-testid=\"button-connect-instagram-profile\"\n            >\n              Connect Instagram\n            </button>\n          </div>\n        ) : profile ? (\n          <div className=\"space-y-6\">\n            {/* Profile Header */}\n            <div className=\"flex gap-8 items-start\">\n              {/* Avatar */}\n              <div className=\"w-24 h-24 bg-gray-300 rounded-full overflow-hidden flex-shrink-0\">\n                {profile.profile_picture_url && (\n                  <img\n                    src={profile.profile_picture_url}\n                    alt={profile.name}\n                    className=\"w-full h-full object-cover\"\n                    data-testid=\"img-avatar\"\n                  />\n                )}\n              </div>\n\n              {/* Info */}\n              <div className=\"flex-1 space-y-4\">\n                <div className=\"flex flex-col gap-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <h2 className={`text-2xl font-semibold ${darkMode ? 'text-white' : 'text-black'}`} data-testid=\"text-username\">\n                      {profile.name || currentUser?.username}\n                    </h2>\n                    <button\n                      onClick={() => setLocation(\"/profile/edit\")}\n                      className=\"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors\"\n                      data-testid=\"button-edit-profile\"\n                    >\n                      <Edit2 className=\"w-4 h-4\" />\n                      Edit\n                    </button>\n                  </div>\n                  <div className=\"flex flex-col gap-2\">\n                    <button\n                      onClick={() => setShowAccountMenu(!showAccountMenu)}\n                      className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors w-fit text-sm\"\n                      data-testid=\"button-accounts-menu\"\n                    >\n                      <Plus className=\"w-4 h-4\" />\n                      {currentUser?.instagramAccounts?.length ? 'Manage Accounts' : 'Connect Instagram'}\n                    </button>\n                    \n                    {showAccountMenu && currentUser?.instagramAccounts && currentUser.instagramAccounts.length > 0 && (\n                      <div className={`border rounded-lg p-3 space-y-2 ${darkMode ? 'border-gray-600 bg-gray-800' : 'border-gray-200 bg-gray-50'}`}>\n                        {currentUser.instagramAccounts.map((acc, idx) => (\n                          <div key={idx} className={`flex items-center justify-between p-2 rounded ${idx === (currentUser.activeInstagramAccountId || 0) ? (darkMode ? 'bg-gray-700' : 'bg-blue-100') : ''}`}>\n                            <button\n                              onClick={() => switchInstagramAccount(idx)}\n                              className={`flex-1 text-left flex items-center gap-2 text-sm ${idx === (currentUser.activeInstagramAccountId || 0) ? 'font-semibold' : ''}`}\n                              data-testid={`button-account-${idx}`}\n                            >\n                              {idx === (currentUser.activeInstagramAccountId || 0) && <Check className=\"w-4 h-4 text-blue-500\" />}\n                              {acc.accountName}\n                            </button>\n                            <button\n                              onClick={() => removeInstagramAccount(idx)}\n                              className={`text-red-500 hover:text-red-700 p-1 ${currentUser.instagramAccounts.length === 1 ? 'opacity-50 cursor-not-allowed' : ''}`}\n                              disabled={currentUser.instagramAccounts.length === 1}\n                              data-testid={`button-delete-account-${idx}`}\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        ))}\n                        <button\n                          onClick={() => setLocation(\"/profile/connect-instagram\")}\n                          className=\"w-full text-blue-600 hover:text-blue-700 text-sm font-medium mt-2 py-1\"\n                          data-testid=\"button-add-another-account\"\n                        >\n                          + Add Another Account\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Stats */}\n                <div className=\"flex gap-8 text-sm\">\n                  <div data-testid=\"stat-posts\">\n                    <span className={`font-semibold ${darkMode ? 'text-white' : 'text-black'}`}>{profile.media_count || 0}</span>\n                    <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>posts</p>\n                  </div>\n                  <div data-testid=\"stat-followers\">\n                    <span className={`font-semibold ${darkMode ? 'text-white' : 'text-black'}`}>{profile.followers_count || 0}</span>\n                    <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>followers</p>\n                  </div>\n                  <div data-testid=\"stat-following\">\n                    <span className={`font-semibold ${darkMode ? 'text-white' : 'text-black'}`}>{profile.follows_count || 0}</span>\n                    <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>following</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Bio Section */}\n            <div className={`border-t ${darkMode ? 'border-gray-700' : 'border-gray-200'} pt-6 space-y-3`}>\n              {profile.biography && (\n                <div data-testid=\"text-bio\">\n                  <p className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-1`}>Bio</p>\n                  <p className={`text-sm whitespace-pre-wrap ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{profile.biography}</p>\n                </div>\n              )}\n\n              {currentUser?.bio && (\n                <div data-testid=\"text-user-bio\">\n                  <p className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-1`}>Personal Bio</p>\n                  <p className={`text-sm whitespace-pre-wrap ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{currentUser.bio}</p>\n                </div>\n              )}\n            </div>\n\n            {/* Website Section */}\n            <div className=\"space-y-3\">\n              {profile.website && (\n                <div>\n                  <p className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Website</p>\n                  <a\n                    href={profile.website}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-blue-500 hover:underline text-sm break-all\"\n                    data-testid=\"link-instagram-website\"\n                  >\n                    {profile.website}\n                  </a>\n                </div>\n              )}\n\n              {currentUser?.website && (\n                <div>\n                  <p className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Personal Website</p>\n                  <a\n                    href={currentUser.website}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-blue-500 hover:underline text-sm break-all\"\n                    data-testid=\"link-personal-website\"\n                  >\n                    {currentUser.website}\n                  </a>\n                </div>\n              )}\n            </div>\n\n            {/* Tabs Section */}\n            <div className={`border-t ${darkMode ? 'border-gray-700' : 'border-gray-200'} mt-8`}>\n              <div className=\"flex items-center justify-center gap-8\">\n                <button\n                  onClick={() => setActiveTab(\"posts\")}\n                  className={`py-4 px-4 flex items-center gap-2 transition-colors border-t-2 ${\n                    activeTab === \"posts\"\n                      ? darkMode ? \"border-white text-white\" : \"border-gray-900 text-gray-900\"\n                      : darkMode ? \"border-transparent text-gray-400 hover:text-white\" : \"border-transparent text-gray-600 hover:text-gray-800\"\n                  }`}\n                  data-testid=\"tab-posts\"\n                >\n                  <Grid3X3 className=\"w-4 h-4\" />\n                  <span className=\"text-sm font-medium\">Posts</span>\n                </button>\n                <button\n                  onClick={() => setActiveTab(\"saved\")}\n                  className={`py-4 px-4 flex items-center gap-2 transition-colors border-t-2 ${\n                    activeTab === \"saved\"\n                      ? darkMode ? \"border-white text-white\" : \"border-gray-900 text-gray-900\"\n                      : darkMode ? \"border-transparent text-gray-400 hover:text-white\" : \"border-transparent text-gray-600 hover:text-gray-800\"\n                  }`}\n                  data-testid=\"tab-saved\"\n                >\n                  <Bookmark className=\"w-4 h-4\" />\n                  <span className=\"text-sm font-medium\">Saved</span>\n                </button>\n              </div>\n            </div>\n\n            {/* Posts Grid Tab */}\n            {activeTab === \"posts\" && (\n              <div className=\"mt-6\">\n                {media.length === 0 ? (\n                  <div className={`flex justify-center items-center h-96 ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>\n                    <p>No posts yet</p>\n                  </div>\n                ) : (\n                  <div className=\"grid grid-cols-3 gap-1 md:gap-2\">\n                    {media.map((item) => (\n                      <div\n                        key={item.id}\n                        className={`aspect-square ${darkMode ? 'bg-gray-800' : 'bg-gray-100'} overflow-hidden hover:opacity-80 transition-opacity cursor-pointer group relative`}\n                        data-testid={`media-grid-${item.id}`}\n                      >\n                        {item.media_type === \"VIDEO\" ? (\n                          <video\n                            src={item.media_url}\n                            className=\"w-full h-full object-cover\"\n                            data-testid={`grid-video-${item.id}`}\n                          />\n                        ) : (\n                          <img\n                            src={item.media_url}\n                            alt={item.caption || \"Instagram post\"}\n                            className=\"w-full h-full object-cover\"\n                            data-testid={`grid-image-${item.id}`}\n                          />\n                        )}\n                        <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n                          <div className=\"flex items-center gap-4 text-white\">\n                            <div className=\"flex items-center gap-1\">\n                              <span className=\"text-sm font-semibold\">{item.like_count || 0}</span>\n                              <span className=\"text-xs\"></span>\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <span className=\"text-sm font-semibold\">{item.comments_count || 0}</span>\n                              <span className=\"text-xs\"></span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Saved Tab */}\n            {activeTab === \"saved\" && (\n              <div className=\"mt-6\">\n                <div className={`flex justify-center items-center h-96 ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>\n                  <p>No saved posts yet</p>\n                </div>\n              </div>\n            )}\n          </div>\n        ) : profile ? null : (\n          <div className={`flex justify-center items-center h-96 ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>\n            <p>Failed to load profile</p>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n","size_bytes":15973},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n\" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n           // @replit: no hover, and add primary border\n           \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm border-destructive-border\",\n        outline:\n          // @replit Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color. Uses shadow-xs. no shadow on active\n          // No hover state\n          \" border [border-color:var(--button-outline)] shadow-xs active:shadow-none \",\n        secondary:\n          // @replit border, no hover, no shadow, secondary border.\n          \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // @replit no hover, transparent border\n        ghost: \"border border-transparent\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // @replit changed sizes\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2356},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Minus } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-1 ring-ring\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Minus />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2143},"client/src/lib/store.ts":{"content":"import { create } from 'zustand';\nimport { auth, db } from './firebase';\nimport { \n  signInWithPopup, GoogleAuthProvider, signInWithEmailAndPassword, \n  createUserWithEmailAndPassword, signOut, onAuthStateChanged \n} from 'firebase/auth';\nimport { doc, getDoc, setDoc, collection, query, where, getDocs, updateDoc, Timestamp } from 'firebase/firestore';\n\nexport interface InstagramAccount {\n  id: number;\n  accountName?: string;\n  token: string;\n  instagramUsername?: string;\n  instagramEmail?: string;\n  instagramPhone?: string;\n  createdAt?: string | any;\n}\n\nexport interface User {\n  id: string;\n  username: string;\n  fullName: string;\n  email: string;\n  avatar: string;\n  bio?: string;\n  website?: string;\n  instagramAccounts?: InstagramAccount[];\n  activeInstagramAccountId?: number;\n}\n\ninterface StoreState {\n  currentUser: User | null;\n  pendingGoogleUser: {uid: string, displayName: string, email: string, photoURL: string} | null;\n  isAuthenticated: boolean;\n  darkMode: boolean;\n  bookmarkedPosts: string[];\n  loginWithGoogle: () => Promise<void>;\n  loginWithEmail: (email: string, pass: string) => Promise<void>;\n  signupWithEmail: (email: string, pass: string, fullName: string) => Promise<void>;\n  logout: () => Promise<void>;\n  updateProfile: (updates: {fullName?: string, bio?: string, website?: string, avatar?: string}) => Promise<void>;\n  initializeAuth: () => void;\n  checkUsernameAvailable: (username: string) => Promise<boolean>;\n  completeGoogleSignup: (username: string) => Promise<void>;\n  addInstagramAccount: (token: string, accountName?: string) => Promise<void>;\n  switchInstagramAccount: (accountId: number) => Promise<void>;\n  removeInstagramAccount: (accountId: number) => Promise<void>;\n  getActiveInstagramToken: () => string | undefined;\n  toggleDarkMode: () => void;\n  bookmarkPost: (postId: string) => void;\n  removeBookmark: (postId: string) => void;\n}\n\nexport const useStore = create<StoreState>((set, get) => ({\n  currentUser: null,\n  pendingGoogleUser: null,\n  isAuthenticated: false,\n  darkMode: false,\n  bookmarkedPosts: [],\n\n  initializeAuth: () => {\n    onAuthStateChanged(auth, async (firebaseUser) => {\n      if (firebaseUser) {\n        try {\n          const userDoc = await getDoc(doc(db, 'users', firebaseUser.uid));\n          if (userDoc.exists()) {\n            const userData = userDoc.data();\n            \n            // Sync to PostgreSQL database\n            try {\n              await fetch('/api/users', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                  id: firebaseUser.uid,\n                  username: userData.username || firebaseUser.displayName?.split(' ')[0].toLowerCase() || 'user',\n                  email: firebaseUser.email || userData.email,\n                  fullName: userData.fullName || firebaseUser.displayName,\n                  avatar: userData.avatar || firebaseUser.photoURL || '',\n                })\n              });\n            } catch (err) {\n              console.warn('Database sync failed:', err);\n            }\n            \n            set({\n              currentUser: {\n                id: firebaseUser.uid,\n                ...userData\n              } as User,\n              isAuthenticated: true\n            });\n          } else {\n            set({ currentUser: null, isAuthenticated: false, pendingGoogleUser: null });\n          }\n        } catch (error) {\n          console.error('Error loading user data:', error);\n          set({ currentUser: null, isAuthenticated: false, pendingGoogleUser: null });\n        }\n      } else {\n        set({ currentUser: null, isAuthenticated: false, pendingGoogleUser: null });\n      }\n    });\n  },\n\n  loginWithGoogle: async () => {\n    const provider = new GoogleAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n    \n    const userRef = doc(db, 'users', user.uid);\n    const userDoc = await getDoc(userRef);\n    \n    if (!userDoc.exists()) {\n      set({\n        pendingGoogleUser: {\n          uid: user.uid,\n          displayName: user.displayName || 'User',\n          email: user.email || '',\n          photoURL: user.photoURL || ''\n        }\n      });\n      throw new Error('USERNAME_SETUP_REQUIRED');\n    } else {\n      const userData = userDoc.data();\n      set({\n        currentUser: {\n          id: user.uid,\n          ...userData\n        } as User,\n        isAuthenticated: true,\n        pendingGoogleUser: null\n      });\n    }\n  },\n\n  checkUsernameAvailable: async (username: string) => {\n    try {\n      const usersQuery = query(\n        collection(db, 'users'),\n        where('username', '==', username.toLowerCase())\n      );\n      const snapshot = await getDocs(usersQuery);\n      return snapshot.empty;\n    } catch (error) {\n      console.error('Error checking username:', error);\n      return false;\n    }\n  },\n\n  completeGoogleSignup: async (username: string) => {\n    const pending = get().pendingGoogleUser;\n    if (!pending) throw new Error('No pending user');\n\n    const available = await get().checkUsernameAvailable(username);\n    if (!available) {\n      throw new Error('Username already taken');\n    }\n\n    const newUser = {\n      username: username.toLowerCase(),\n      fullName: pending.displayName,\n      email: pending.email,\n      avatar: pending.photoURL,\n      createdAt: Timestamp.now()\n    };\n\n    await setDoc(doc(db, 'users', pending.uid), newUser);\n    \n    try {\n      await fetch('/api/users', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          id: pending.uid,\n          username: username.toLowerCase(),\n          email: pending.email,\n          fullName: pending.displayName,\n          avatar: pending.photoURL,\n        })\n      });\n    } catch (err) {\n      console.warn('Database sync failed:', err);\n    }\n    \n    set({\n      currentUser: {\n        id: pending.uid,\n        ...newUser\n      } as User,\n      isAuthenticated: true,\n      pendingGoogleUser: null\n    });\n  },\n\n  loginWithEmail: async (email, pass) => {\n    const result = await signInWithEmailAndPassword(auth, email, pass);\n    const user = result.user;\n    const userDoc = await getDoc(doc(db, 'users', user.uid));\n    if (userDoc.exists()) {\n      const userData = userDoc.data();\n      set({\n        currentUser: {\n          id: user.uid,\n          ...userData\n        } as User,\n        isAuthenticated: true\n      });\n    }\n  },\n\n  signupWithEmail: async (email, pass, fullName) => {\n    const result = await createUserWithEmailAndPassword(auth, email, pass);\n    const user = result.user;\n    \n    let baseUsername = email.split('@')[0].toLowerCase();\n    let username = baseUsername;\n    let counter = 1;\n    \n    while (!(await get().checkUsernameAvailable(username))) {\n      username = `${baseUsername}${counter}`;\n      counter++;\n    }\n    \n    const newUser = {\n      username,\n      fullName,\n      email,\n      avatar: '',\n      createdAt: Timestamp.now()\n    };\n    await setDoc(doc(db, 'users', user.uid), newUser);\n    \n    try {\n      await fetch('/api/users', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          id: user.uid,\n          username,\n          email,\n          fullName,\n          avatar: '',\n        })\n      });\n    } catch (err) {\n      console.warn('Database sync failed:', err);\n    }\n    \n    set({\n      currentUser: {\n        id: user.uid,\n        ...newUser\n      } as User,\n      isAuthenticated: true\n    });\n  },\n\n  logout: async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n    set({ \n      currentUser: null, \n      isAuthenticated: false, \n      pendingGoogleUser: null\n    });\n  },\n\n  updateProfile: async (updates) => {\n    const currentUser = get().currentUser;\n    if (!currentUser) throw new Error('No current user');\n\n    try {\n      const response = await fetch(`/api/users/${currentUser.id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(updates)\n      });\n\n      if (!response.ok) throw new Error('Failed to update profile');\n      \n      const updatedUser = await response.json();\n      set({ currentUser: { ...currentUser, ...updatedUser } });\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      throw error;\n    }\n  },\n\n  addInstagramAccount: async (token: string, accountName?: string) => {\n    const currentUser = get().currentUser;\n    if (!currentUser) throw new Error('No current user');\n\n    try {\n      // Fetch Instagram profile to get email/phone for recommendations\n      const { getUserProfile } = await import('./instagram');\n      const profileData = await getUserProfile('me', token);\n      \n      // Add to Firestore\n      const newAccount = {\n        token,\n        accountName: accountName || `Account ${(currentUser.instagramAccounts?.length || 0) + 1}`,\n        instagramUsername: profileData?.username,\n        instagramEmail: profileData?.email,\n        instagramPhone: profileData?.phone_number,\n        createdAt: Timestamp.now()\n      };\n\n      const userRef = doc(db, 'users', currentUser.id);\n      const accounts = currentUser.instagramAccounts || [];\n      const isFirst = accounts.length === 0;\n      const accountToStore = { ...newAccount, id: accounts.length };\n      \n      await updateDoc(userRef, {\n        instagramAccounts: [...accounts, accountToStore],\n        ...(isFirst && { activeInstagramAccountId: 0 })\n      });\n\n      // Sync to PostgreSQL\n      try {\n        await fetch('/api/instagram-accounts', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            userId: currentUser.id,\n            token,\n            accountName: accountName || `Account ${accounts.length + 1}`,\n            instagramUsername: profileData?.username,\n            instagramEmail: profileData?.email,\n            instagramPhone: profileData?.phone_number\n          })\n        });\n      } catch (err) {\n        console.warn('Database sync failed:', err);\n      }\n\n      const updatedAccounts = [...accounts, accountToStore] as InstagramAccount[];\n      set(state => ({\n        currentUser: state.currentUser ? { \n          ...state.currentUser, \n          instagramAccounts: updatedAccounts,\n          activeInstagramAccountId: isFirst ? 0 : state.currentUser.activeInstagramAccountId\n        } : null\n      }));\n    } catch (error) {\n      console.error('Error adding Instagram account:', error);\n      throw error;\n    }\n  },\n\n  switchInstagramAccount: async (accountId: number) => {\n    const currentUser = get().currentUser;\n    if (!currentUser) throw new Error('No current user');\n\n    try {\n      const userRef = doc(db, 'users', currentUser.id);\n      await updateDoc(userRef, { activeInstagramAccountId: accountId });\n\n      set(state => ({\n        currentUser: state.currentUser ? { \n          ...state.currentUser, \n          activeInstagramAccountId: accountId\n        } : null\n      }));\n    } catch (error) {\n      console.error('Error switching Instagram account:', error);\n      throw error;\n    }\n  },\n\n  removeInstagramAccount: async (accountId: number) => {\n    const currentUser = get().currentUser;\n    if (!currentUser) throw new Error('No current user');\n\n    try {\n      const userRef = doc(db, 'users', currentUser.id);\n      const updatedAccounts = (currentUser.instagramAccounts || []).filter((_, idx) => idx !== accountId);\n      \n      await updateDoc(userRef, { \n        instagramAccounts: updatedAccounts,\n        activeInstagramAccountId: currentUser.activeInstagramAccountId === accountId ? (updatedAccounts.length > 0 ? 0 : undefined) : currentUser.activeInstagramAccountId\n      });\n\n      // Sync to PostgreSQL\n      try {\n        await fetch(`/api/instagram-accounts/${accountId}`, { method: 'DELETE' });\n      } catch (err) {\n        console.warn('Database sync failed:', err);\n      }\n\n      set(state => ({\n        currentUser: state.currentUser ? { \n          ...state.currentUser, \n          instagramAccounts: updatedAccounts,\n          activeInstagramAccountId: state.currentUser.activeInstagramAccountId === accountId ? 0 : state.currentUser.activeInstagramAccountId\n        } : null\n      }));\n    } catch (error) {\n      console.error('Error removing Instagram account:', error);\n      throw error;\n    }\n  },\n\n  getActiveInstagramToken: () => {\n    const currentUser = get().currentUser;\n    if (!currentUser || !currentUser.instagramAccounts || currentUser.instagramAccounts.length === 0) return undefined;\n    const activeIdx = currentUser.activeInstagramAccountId || 0;\n    return currentUser.instagramAccounts[activeIdx]?.token;\n  },\n\n  toggleDarkMode: () => {\n    set(state => ({ darkMode: !state.darkMode }));\n  },\n\n  bookmarkPost: (postId: string) => {\n    set(state => ({\n      bookmarkedPosts: [...state.bookmarkedPosts, postId]\n    }));\n  },\n\n  removeBookmark: (postId: string) => {\n    set(state => ({\n      bookmarkedPosts: state.bookmarkedPosts.filter(id => id !== postId)\n    }));\n  },\n}));\n","size_bytes":13218},"server/db.ts":{"content":"import { drizzle } from 'drizzle-orm/node-postgres';\nimport { Pool } from 'pg';\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nexport const db = drizzle(pool);\n","size_bytes":189},"client/src/pages/Stories.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useStore } from \"@/lib/store\";\nimport { X, ChevronRight, ChevronLeft } from \"lucide-react\";\n\nexport default function Stories() {\n  const { stories, currentUser, allUsers } = useStore();\n  const [, setLocation] = useLocation();\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(0);\n\n  // Filter stories to show: user's own story + stories from followed users\n  const followedStories = stories.filter(story => {\n    // Always show user's own story\n    if (story.userId === (currentUser?.username || currentUser?.id)) {\n      return true;\n    }\n    // Show stories from followed users\n    const storyUser = allUsers.find(u => u.username === story.userId || u.id === story.userId);\n    return storyUser && storyUser.isFollowing;\n  });\n\n  useEffect(() => {\n    if (followedStories.length === 0) {\n      setLocation(\"/\");\n    }\n  }, [followedStories.length]);\n\n  if (followedStories.length === 0) return null;\n\n  const story = followedStories[currentStoryIndex];\n  const hasNext = currentStoryIndex < followedStories.length - 1;\n  const hasPrev = currentStoryIndex > 0;\n\n  const handleNext = () => {\n    if (hasNext) {\n      setCurrentStoryIndex(currentStoryIndex + 1);\n    } else {\n      setLocation(\"/\");\n    }\n  };\n\n  const handlePrev = () => {\n    if (hasPrev) {\n      setCurrentStoryIndex(currentStoryIndex - 1);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black z-50 flex items-center justify-center\">\n      {/* Story Media */}\n      <div className=\"relative w-full h-full flex items-center justify-center\">\n        {story.imageUrl?.includes('.mp4') || story.imageUrl?.startsWith('data:video') ? (\n          <video \n            src={story.imageUrl} \n            autoPlay\n            controls\n            className=\"w-full h-full object-contain\"\n          />\n        ) : (\n          <img \n            src={story.imageUrl} \n            alt=\"Story\" \n            className=\"w-full h-full object-contain\"\n          />\n        )}\n\n        {/* Progress Bar */}\n        <div className=\"absolute top-0 left-0 right-0 h-1 bg-gray-800\">\n          <div \n            className=\"h-full bg-white transition-all duration-5000\"\n            style={{ width: `${((currentStoryIndex + 1) / followedStories.length) * 100}%` }}\n          />\n        </div>\n\n        {/* Story Info */}\n        <div className=\"absolute top-4 left-4 flex items-center gap-3\">\n          <div className=\"w-10 h-10 rounded-full overflow-hidden border-2 border-white\">\n            {(() => {\n              const storyUser = allUsers.find(u => u.username === story.userId || u.id === story.userId);\n              return (\n                <img \n                  src={storyUser?.avatar || `https://api.dicebear.com/7.x/avataaars/svg?seed=${story.userId}`}\n                  alt={story.userId}\n                  className=\"w-full h-full object-cover\"\n                />\n              );\n            })()}\n          </div>\n          <div className=\"text-white\">\n            <p className=\"text-sm font-semibold\">\n              {(() => {\n                const storyUser = allUsers.find(u => u.username === story.userId || u.id === story.userId);\n                return storyUser?.username || story.userId;\n              })()}\n            </p>\n            <p className=\"text-xs opacity-70\">2 min ago</p>\n          </div>\n        </div>\n\n        {/* Close Button */}\n        <button\n          onClick={() => setLocation(\"/\")}\n          className=\"absolute top-4 right-4 text-white hover:scale-110 transition-transform\"\n        >\n          <X className=\"w-6 h-6\" />\n        </button>\n\n        {/* Navigation */}\n        {hasPrev && (\n          <button\n            onClick={handlePrev}\n            className=\"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:scale-110 transition-transform\"\n          >\n            <ChevronLeft className=\"w-8 h-8\" />\n          </button>\n        )}\n\n        {hasNext && (\n          <button\n            onClick={handleNext}\n            className=\"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:scale-110 transition-transform\"\n          >\n            <ChevronRight className=\"w-8 h-8\" />\n          </button>\n        )}\n\n        {/* Tap zones */}\n        <div \n          onClick={handlePrev}\n          className=\"absolute left-0 top-0 w-1/3 h-full cursor-pointer\"\n        />\n        <div \n          onClick={handleNext}\n          className=\"absolute right-0 top-0 w-1/3 h-full cursor-pointer\"\n        />\n\n        {/* Story Counter */}\n        <div className=\"absolute bottom-4 left-4 right-4 flex justify-between items-center text-white\">\n          <p className=\"text-sm\">{currentStoryIndex + 1} / {stories.length}</p>\n          <button\n            onClick={() => setLocation(\"/\")}\n            className=\"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-full text-sm transition-all\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4989},"client/src/pages/CreateStory.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useStore } from \"@/lib/store\";\nimport { Button } from \"@/components/ui/button\";\nimport { X, Upload, ChevronDown, Play } from \"lucide-react\";\nimport { toast } from \"sonner\";\n\nexport default function CreateStory() {\n  const { currentUser, addStory } = useStore();\n  const [, setLocation] = useLocation();\n  const [mediaUrl, setMediaUrl] = useState(\"\");\n  const [mediaType, setMediaType] = useState<'image' | 'video'>('image');\n  const [loading, setLoading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  if (!currentUser) {\n    setLocation(\"/login\");\n    return null;\n  }\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const isVideo = file.type.startsWith('video/');\n      setMediaType(isVideo ? 'video' : 'image');\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        setMediaUrl(event.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handlePostStory = async () => {\n    if (!mediaUrl) {\n      toast.error(`Please select a ${mediaType} for your story`);\n      return;\n    }\n\n    setLoading(true);\n    try {\n      await addStory(mediaUrl);\n      toast.success(`Story shared! ${mediaType === 'video' ? '' : ''}`);\n      setTimeout(() => {\n        setLocation(\"/\");\n      }, 300);\n    } catch (error) {\n      toast.error(\"Failed to post story\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"pb-20 max-w-md mx-auto min-h-screen bg-background\">\n      <header className=\"sticky top-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border px-4 h-14 flex items-center justify-between\">\n        <h1 className=\"font-bold text-lg\">Your Story</h1>\n        <button onClick={() => setLocation(\"/\")} className=\"text-muted-foreground hover:text-foreground transition-colors\">\n          <X className=\"w-6 h-6\" />\n        </button>\n      </header>\n\n      <main className=\"p-4 space-y-3\">\n        {/* Story Preview */}\n        <div className=\"aspect-[9/16] bg-muted rounded-lg overflow-hidden flex items-center justify-center border border-border shadow-sm relative\">\n          {mediaUrl ? (\n            <>\n              {mediaType === 'video' ? (\n                <video src={mediaUrl} className=\"w-full h-full object-cover\" controls />\n              ) : (\n                <img src={mediaUrl} alt=\"Story preview\" className=\"w-full h-full object-cover\" />\n              )}\n              {mediaType === 'video' && (\n                <div className=\"absolute top-3 right-3 bg-black/60 px-2 py-1 rounded-full flex items-center gap-1\">\n                  <Play className=\"w-3 h-3 text-white\" />\n                  <span className=\"text-xs text-white font-semibold\">Video</span>\n                </div>\n              )}\n            </>\n          ) : (\n            <div className=\"flex flex-col items-center gap-4 text-muted-foreground\">\n              <div className=\"bg-muted-foreground/10 p-6 rounded-full\">\n                <Upload className=\"w-10 h-10 opacity-50\" />\n              </div>\n              <p className=\"text-sm font-medium\">Tap to add photo or video</p>\n            </div>\n          )}\n        </div>\n\n        {/* Select Image Button */}\n        <button\n          onClick={() => fileInputRef.current?.click()}\n          className=\"w-full py-3 px-4 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors active:scale-95\"\n          data-testid=\"button-select-image\"\n        >\n          <Upload className=\"w-4 h-4 inline mr-2\" />\n          Choose from library\n        </button>\n\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\"image/*,video/*\"\n          onChange={handleFileSelect}\n          className=\"hidden\"\n        />\n\n        {/* Story Details */}\n        {mediaUrl && (\n          <div className=\"bg-muted/50 rounded-xl p-4 space-y-3 border border-border/50\">\n            <div className=\"flex items-center gap-3\">\n              <img src={currentUser.avatar || `https://api.dicebear.com/7.x/avataaars/svg?seed=${currentUser.id}`} alt={currentUser.username} className=\"w-12 h-12 rounded-full object-cover\" />\n              <div>\n                <p className=\"font-semibold text-sm\">{currentUser.username}</p>\n                <p className=\"text-xs text-muted-foreground\">Expires in 24h  {mediaType === 'video' ? ' Video Story' : ' Photo Story'}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Action Buttons */}\n        <div className=\"space-y-2 pt-2\">\n          <Button\n            onClick={handlePostStory}\n            disabled={!mediaUrl || loading}\n            className=\"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold h-12 rounded-lg\"\n            data-testid=\"button-post-story\"\n          >\n            {loading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\" />\n                Sharing...\n              </>\n            ) : (\n              <>\n                <ChevronDown className=\"w-4 h-4 mr-2\" />\n                Share to Story\n              </>\n            )}\n          </Button>\n          <Button\n            onClick={() => setLocation(\"/\")}\n            variant=\"ghost\"\n            className=\"w-full h-10\"\n            data-testid=\"button-cancel-story\"\n          >\n            Cancel\n          </Button>\n        </div>\n      </main>\n    </div>\n  );\n}\n","size_bytes":5591},"server/schema.ts":{"content":"import { pgTable, serial, varchar, text, integer, boolean, timestamp } from 'drizzle-orm/pg-core';\n\nexport const users = pgTable('users', {\n  id: varchar('id').primaryKey(),\n  username: varchar('username').notNull().unique(),\n  fullName: varchar('full_name').notNull(),\n  email: varchar('email').notNull().unique(),\n  avatar: varchar('avatar'),\n  bio: text('bio'),\n  website: varchar('website'),\n  followers: integer('followers').default(0),\n  following: integer('following').default(0),\n  createdAt: timestamp('created_at').defaultNow(),\n});\n\nexport const demoAccounts = [\n  {\n    id: 'demo_alex_photo',\n    username: 'alex_photo',\n    fullName: 'Alex Johnson',\n    email: 'alex@demo.com',\n    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=alex123',\n    bio: 'Travel photographer',\n    website: '',\n    followers: 2456,\n    following: 342\n  },\n  {\n    id: 'demo_sophia_art',\n    username: 'sophia_art',\n    fullName: 'Sophia Martinez',\n    email: 'sophia@demo.com',\n    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=sophia456',\n    bio: 'Digital artist & designer',\n    website: '',\n    followers: 3891,\n    following: 567\n  },\n  {\n    id: 'demo_mike_tech',\n    username: 'mike_tech',\n    fullName: 'Mike Chen',\n    email: 'mike@demo.com',\n    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=mike789',\n    bio: 'Tech enthusiast & coder',\n    website: '',\n    followers: 1823,\n    following: 234\n  },\n  {\n    id: 'demo_emma_fitness',\n    username: 'emma_fitness',\n    fullName: 'Emma Wilson',\n    email: 'emma@demo.com',\n    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=emma101',\n    bio: 'Fitness coach & wellness',\n    website: '',\n    followers: 5123,\n    following: 445\n  },\n  {\n    id: 'demo_ryan_music',\n    username: 'ryan_music',\n    fullName: 'Ryan Blake',\n    email: 'ryan@demo.com',\n    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=ryan202',\n    bio: 'Musician & producer',\n    website: '',\n    followers: 4567,\n    following: 389\n  }\n];\n","size_bytes":2004},"client/src/lib/socket.ts":{"content":"import { io, Socket } from \"socket.io-client\";\n\nlet socket: Socket | null = null;\n\nexport function initializeSocket(userId: string) {\n  if (socket) return socket;\n\n  const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n  const socketUrl = `${protocol}//${window.location.host}`;\n\n  socket = io(socketUrl, {\n    reconnection: true,\n    reconnectionDelay: 1000,\n    reconnectionDelayMax: 5000,\n    reconnectionAttempts: 5\n  });\n\n  socket.on(\"connect\", () => {\n    console.log(\"Socket connected:\", socket?.id);\n    socket?.emit(\"user:join\", userId);\n  });\n\n  socket.on(\"connect_error\", (error) => {\n    console.error(\"Socket connection error:\", error);\n  });\n\n  return socket;\n}\n\nexport function getSocket(): Socket | null {\n  return socket;\n}\n\nexport function disconnectSocket() {\n  if (socket) {\n    socket.disconnect();\n    socket = null;\n  }\n}\n\n// Message events\nexport function emitMessage(senderId: string, recipientId: string, message: string) {\n  if (!socket) return;\n  const conversationId = [senderId, recipientId].sort().join(\"_\");\n  socket.emit(\"message:send\", {\n    senderId,\n    recipientId,\n    message,\n    conversationId,\n    timestamp: new Date().toLocaleTimeString()\n  });\n}\n\nexport function loadMessages(senderId: string, recipientId: string) {\n  if (!socket) return;\n  socket.emit(\"messages:load\", { senderId, recipientId });\n}\n\nexport function onMessageReceived(callback: (message: any) => void) {\n  if (!socket) return;\n  socket.on(\"message:receive\", callback);\n}\n\nexport function onMessageSent(callback: (data: any) => void) {\n  if (!socket) return;\n  socket.on(\"message:sent\", callback);\n}\n\nexport function onMessagesLoaded(callback: (messages: any[]) => void) {\n  if (!socket) return;\n  socket.on(\"messages:loaded\", callback);\n}\n\nexport function onNotification(callback: (notification: any) => void) {\n  if (!socket) return;\n  socket.on(\"notification:new\", callback);\n}\n\nexport function offAllEvents() {\n  if (!socket) return;\n  socket.off(\"message:receive\");\n  socket.off(\"message:sent\");\n  socket.off(\"messages:loaded\");\n  socket.off(\"notification:new\");\n}\n","size_bytes":2102},"client/src/lib/api.ts":{"content":"// API calls for database operations\n\nexport async function fetchPosts() {\n  const res = await fetch(\"/api/posts\");\n  return res.json();\n}\n\nexport async function fetchUserPosts(userId: string) {\n  const res = await fetch(`/api/posts/user/${userId}`);\n  return res.json();\n}\n\nexport async function fetchFollowingPosts(userId: string) {\n  const res = await fetch(`/api/posts/following/${userId}`);\n  return res.json();\n}\n\nexport async function createPost(post: any) {\n  const res = await fetch(\"/api/posts\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(post),\n  });\n  return res.json();\n}\n\nexport async function fetchStories() {\n  const res = await fetch(\"/api/stories\");\n  return res.json();\n}\n\nexport async function fetchFollowingStories(userId: string) {\n  const res = await fetch(`/api/stories/following/${userId}`);\n  return res.json();\n}\n\nexport async function createStory(story: any) {\n  const res = await fetch(\"/api/stories\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(story),\n  });\n  return res.json();\n}\n\nexport async function searchPosts(query: string) {\n  const res = await fetch(`/api/search/posts?q=${encodeURIComponent(query)}`);\n  return res.json();\n}\n","size_bytes":1279},"client/src/pages/HashtagFeed.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { useRoute } from \"wouter\";\nimport { ArrowLeft, Loader2, Heart, MessageCircle } from \"lucide-react\";\nimport { getHashtagMedia } from \"@/lib/instagram\";\n\nexport default function HashtagFeed() {\n  const { currentUser, bookmarkedPosts, bookmarkPost, removeBookmark } = useStore();\n  const [, setLocation] = useLocation();\n  const [, params] = useRoute(\"/hashtag/:id\");\n  const [media, setMedia] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const hashtag = params?.id;\n  const name = new URLSearchParams(window.location.search).get(\"name\");\n\n  useEffect(() => {\n    const loadMedia = async () => {\n      if (!hashtag || !currentUser?.instagramToken) return;\n      setLoading(true);\n      try {\n        const instagramMedia = await getHashtagMedia(hashtag);\n        setMedia(instagramMedia);\n      } catch (error) {\n        console.error(\"Failed to load hashtag media:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadMedia();\n  }, [hashtag, currentUser?.instagramToken]);\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200\">\n        <div className=\"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3\">\n          <button\n            onClick={() => setLocation(\"/search\")}\n            className=\"text-gray-600 hover:text-black transition-colors\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"w-6 h-6\" />\n          </button>\n          <h1 className=\"text-lg font-semibold\">#{name}</h1>\n        </div>\n      </header>\n\n      <main className=\"max-w-2xl mx-auto\">\n        {loading ? (\n          <div className=\"flex justify-center items-center h-96\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n          </div>\n        ) : media.length === 0 ? (\n          <div className=\"flex justify-center items-center h-96 text-gray-400\">\n            <p>No posts found</p>\n          </div>\n        ) : (\n          <div className=\"space-y-6 p-4\">\n            {media.map((post) => {\n              const isBookmarked = bookmarkedPosts.includes(post.id);\n              return (\n                <div\n                  key={post.id}\n                  className=\"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow\"\n                  data-testid={`post-${post.id}`}\n                >\n                  {post.media_url && (\n                    <div className=\"aspect-square bg-gray-100 overflow-hidden\">\n                      {post.media_type === \"VIDEO\" ? (\n                        <video\n                          src={post.media_url}\n                          className=\"w-full h-full object-cover\"\n                          controls\n                        />\n                      ) : (\n                        <img\n                          src={post.media_url}\n                          alt={post.caption}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      )}\n                    </div>\n                  )}\n\n                  <div className=\"p-4 space-y-3\">\n                    {post.caption && (\n                      <p className=\"text-sm text-gray-700 line-clamp-2\">{post.caption}</p>\n                    )}\n\n                    <div className=\"flex items-center gap-6 text-sm text-gray-600\">\n                      <div className=\"flex items-center gap-1\">\n                        <Heart className=\"w-4 h-4\" />\n                        <span>{post.like_count || 0}</span>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <MessageCircle className=\"w-4 h-4\" />\n                        <span>{post.comments_count || 0}</span>\n                      </div>\n                    </div>\n\n                    <button\n                      onClick={() =>\n                        isBookmarked ? removeBookmark(post.id) : bookmarkPost(post.id)\n                      }\n                      className={`w-full py-2 rounded-lg font-medium transition-colors ${\n                        isBookmarked\n                          ? \"bg-blue-500 text-white hover:bg-blue-600\"\n                          : \"bg-gray-100 text-gray-900 hover:bg-gray-200\"\n                      }`}\n                      data-testid={`button-bookmark-${post.id}`}\n                    >\n                      {isBookmarked ? \"Saved\" : \"Save\"}\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n","size_bytes":4747},"render.yaml":{"content":"services:\n  - type: web\n    name: authentic-app\n    runtime: node\n    region: us-east1\n    plan: free\n    buildCommand: npm run build\n    startCommand: npm start\n    envVars:\n      - key: NODE_ENV\n        value: production\n      - key: DATABASE_URL\n        fromDatabase:\n          name: authentic-db\n          property: connectionString\n      - key: VITE_INSTAGRAM_ACCESS_TOKEN\n        sync: false\n      - key: VITE_INSTAGRAM_BUSINESS_ACCOUNT_ID\n        sync: false\n\n  - type: pserv\n    name: authentic-db\n    plan: free\n    region: us-east1\n    ipAllowList: []\n    postgreSQLVersion: \"15\"\n","size_bytes":590},"client/src/pages/ConnectInstagram.tsx":{"content":"import { useState } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { ArrowLeft, Loader2 } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { getUserProfile } from \"@/lib/instagram\";\nimport { AccountRecommendations } from \"./AccountRecommendations\";\n\nexport default function ConnectInstagram() {\n  const { currentUser, addInstagramAccount } = useStore();\n  const [, setLocation] = useLocation();\n  const [token, setToken] = useState(\"\");\n  const [accountName, setAccountName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [previewData, setPreviewData] = useState<any>(null);\n\n  const handleTokenChange = async (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const newToken = e.target.value;\n    setToken(newToken);\n\n    if (newToken.trim() && newToken.length > 50) {\n      try {\n        const profile = await getUserProfile('me', newToken);\n        setPreviewData(profile);\n      } catch (error) {\n        setPreviewData(null);\n      }\n    } else {\n      setPreviewData(null);\n    }\n  };\n\n  const handleConnect = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!token.trim()) {\n      toast.error(\"Please enter your Instagram access token\");\n      return;\n    }\n\n    setLoading(true);\n    try {\n      await addInstagramAccount(token, accountName || undefined);\n      toast.success(\"Instagram account connected!\");\n      setLocation(\"/profile\");\n    } catch (error) {\n      console.error(\"Failed to connect Instagram:\", error);\n      toast.error(\"Failed to connect Instagram account\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      {/* Header */}\n      <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200\">\n        <div className=\"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3\">\n          <button\n            onClick={() => setLocation(\"/profile\")}\n            className=\"text-gray-600 hover:text-black transition-colors\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"w-6 h-6\" />\n          </button>\n          <h1 className=\"text-lg font-semibold\">Connect Instagram</h1>\n        </div>\n      </header>\n\n      {/* Content */}\n      <main className=\"max-w-2xl mx-auto px-4 py-8\">\n        <div className=\"space-y-6 max-w-md\">\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800\">\n            <p className=\"font-semibold mb-2\">How to get your Instagram access token:</p>\n            <ol className=\"list-decimal list-inside space-y-1 text-xs\">\n              <li>Go to <a href=\"https://developers.instagram.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"underline font-semibold\">Instagram for Developers</a></li>\n              <li>Create an app or use existing one</li>\n              <li>Go to Roles  Testers and add your account</li>\n              <li>Generate an access token with instagram_basic, instagram_graph_user_media permissions</li>\n              <li>Copy and paste the token below</li>\n            </ol>\n          </div>\n\n          <form onSubmit={handleConnect} className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"accountName\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Account Name (Optional)\n              </label>\n              <input\n                id=\"accountName\"\n                type=\"text\"\n                value={accountName}\n                onChange={(e) => setAccountName(e.target.value)}\n                placeholder=\"e.g., My Main Account, Business Account...\"\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                disabled={loading}\n                data-testid=\"input-account-name\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"token\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Instagram Access Token\n              </label>\n              <textarea\n                id=\"token\"\n                value={token}\n                onChange={handleTokenChange}\n                placeholder=\"Paste your Instagram access token here...\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                rows={4}\n                disabled={loading}\n                data-testid=\"input-token\"\n              />\n            </div>\n\n            {previewData && (\n              <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-3\">\n                <p className=\"text-sm font-semibold text-gray-700 mb-2\"> Account Preview:</p>\n                <div className=\"text-sm space-y-1 text-gray-600\">\n                  {previewData.username && <p> Username: <strong>@{previewData.username}</strong></p>}\n                  {previewData.name && <p> Name: <strong>{previewData.name}</strong></p>}\n                  {previewData.email && <p> Email: <strong>{previewData.email}</strong></p>}\n                  {previewData.phone_number && <p> Phone: <strong>{previewData.phone_number}</strong></p>}\n                </div>\n              </div>\n            )}\n\n            <AccountRecommendations \n              newEmail={previewData?.email}\n              newPhone={previewData?.phone_number}\n              newUsername={previewData?.username}\n            />\n\n            <button\n              type=\"submit\"\n              disabled={loading || !token.trim()}\n              className=\"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2\"\n              data-testid=\"button-connect\"\n            >\n              {loading && <Loader2 className=\"w-4 h-4 animate-spin\" />}\n              {loading ? \"Connecting...\" : \"Connect Instagram\"}\n            </button>\n          </form>\n\n          {currentUser?.instagramAccounts && currentUser.instagramAccounts.length > 0 && (\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 text-sm text-green-800\">\n              <p className=\"font-semibold\"> {currentUser.instagramAccounts.length} account(s) connected</p>\n              <p className=\"text-xs mt-1\">You can manage all your accounts from your profile.</p>\n            </div>\n          )}\n\n          <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4 text-xs text-gray-600 space-y-2\">\n            <p className=\"font-semibold text-gray-700\">Why do we need this?</p>\n            <p>Each user needs to connect their own Instagram account to see their personal Instagram profile, posts, followers, and engagement metrics.</p>\n            <p>Your token is securely stored and only used to fetch YOUR Instagram data.</p>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n","size_bytes":6990},"shared/db.ts":{"content":"import { drizzle } from \"drizzle-orm/postgres-js\";\nimport postgres from \"postgres\";\nimport * as schema from \"./schema\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL is not set\");\n}\n\nconst client = postgres(process.env.DATABASE_URL);\nexport const db = drizzle(client, { schema });\n","size_bytes":301},"client/src/pages/Search.tsx":{"content":"import { useState } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { ArrowLeft, Search as SearchIcon, Loader2, Hash } from \"lucide-react\";\nimport { searchHashtags } from \"@/lib/instagram\";\nimport { toast } from \"sonner\";\n\nexport default function Search() {\n  const { currentUser } = useStore();\n  const [, setLocation] = useLocation();\n  const [query, setQuery] = useState(\"\");\n  const [results, setResults] = useState<any[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const handleSearch = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!query.trim()) return;\n\n    setLoading(true);\n    try {\n      const hashtags = await searchHashtags(query);\n      setResults(hashtags);\n      if (hashtags.length === 0) {\n        toast.info(\"No hashtags found\");\n      }\n    } catch (error) {\n      console.error(\"Search failed:\", error);\n      toast.error(\"Search failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200\">\n        <div className=\"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3\">\n          <button\n            onClick={() => setLocation(\"/\")}\n            className=\"text-gray-600 hover:text-black transition-colors\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"w-6 h-6\" />\n          </button>\n          <h1 className=\"text-lg font-semibold\">Search</h1>\n        </div>\n      </header>\n\n      <main className=\"max-w-2xl mx-auto px-4 py-6 space-y-6\">\n        <form onSubmit={handleSearch} className=\"relative\">\n          <div className=\"relative\">\n            <SearchIcon className=\"absolute left-3 top-3 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n              placeholder=\"Search hashtags...\"\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              data-testid=\"input-search\"\n            />\n          </div>\n        </form>\n\n        {loading && (\n          <div className=\"flex justify-center\">\n            <Loader2 className=\"w-6 h-6 animate-spin text-gray-400\" />\n          </div>\n        )}\n\n        <div className=\"space-y-2\">\n          {results.map((hashtag) => (\n            <button\n              key={hashtag.id}\n              onClick={() => setLocation(`/hashtag/${hashtag.id}?name=${hashtag.name}`)}\n              className=\"w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors text-left border border-gray-200\"\n              data-testid={`hashtag-${hashtag.name}`}\n            >\n              <Hash className=\"w-5 h-5 text-blue-500 flex-shrink-0\" />\n              <div>\n                <p className=\"font-semibold text-gray-900\">#{hashtag.name}</p>\n              </div>\n            </button>\n          ))}\n        </div>\n\n        {query && !loading && results.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            <p>No hashtags found for \"{query}\"</p>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n","size_bytes":3261},"client/src/pages/AccountRecommendations.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { AlertCircle, Mail, Phone, User } from \"lucide-react\";\n\ninterface Recommendation {\n  id: number;\n  accountName: string;\n  instagramUsername: string;\n  matchType: 'email' | 'phone';\n  matchValue: string;\n}\n\ninterface AccountRecommendationsProps {\n  newEmail?: string;\n  newPhone?: string;\n  newUsername?: string;\n}\n\nexport function AccountRecommendations({ newEmail, newPhone, newUsername }: AccountRecommendationsProps) {\n  const { currentUser } = useStore();\n  const [recommendations, setRecommendations] = useState<Recommendation[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const findRecommendations = async () => {\n      if (!newEmail && !newPhone) return;\n      \n      setLoading(true);\n      try {\n        const matchingAccounts = (currentUser?.instagramAccounts || [])\n          .map((acc, idx) => {\n            const matches: Recommendation[] = [];\n            \n            if (newEmail && acc.instagramEmail === newEmail && acc.instagramEmail) {\n              matches.push({\n                id: idx,\n                accountName: acc.accountName || `Account ${idx + 1}`,\n                instagramUsername: acc.instagramUsername || '',\n                matchType: 'email',\n                matchValue: newEmail\n              });\n            }\n            \n            if (newPhone && acc.instagramPhone === newPhone && acc.instagramPhone) {\n              matches.push({\n                id: idx,\n                accountName: acc.accountName || `Account ${idx + 1}`,\n                instagramUsername: acc.instagramUsername || '',\n                matchType: 'phone',\n                matchValue: newPhone\n              });\n            }\n            \n            return matches;\n          })\n          .flat();\n        \n        setRecommendations(matchingAccounts);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    findRecommendations();\n  }, [newEmail, newPhone, currentUser?.instagramAccounts]);\n\n  if (loading || recommendations.length === 0) return null;\n\n  return (\n    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n      <div className=\"flex items-start gap-3\">\n        <AlertCircle className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n        <div className=\"flex-1\">\n          <h3 className=\"font-semibold text-blue-900 mb-2\"> Related Accounts Found!</h3>\n          <p className=\"text-sm text-blue-800 mb-3\">\n            We found {recommendations.length} existing account(s) created with the same contact information:\n          </p>\n          <div className=\"space-y-2\">\n            {recommendations.map((rec) => (\n              <div key={`${rec.id}-${rec.matchType}`} className=\"bg-white rounded p-2 text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  {rec.matchType === 'email' ? (\n                    <Mail className=\"w-4 h-4 text-blue-600\" />\n                  ) : (\n                    <Phone className=\"w-4 h-4 text-green-600\" />\n                  )}\n                  <span className=\"font-medium\">{rec.accountName}</span>\n                  <span className=\"text-gray-500\">(@{rec.instagramUsername})</span>\n                </div>\n                <div className=\"text-xs text-gray-600 ml-6\">\n                  Matched by {rec.matchType}: {rec.matchValue}\n                </div>\n              </div>\n            ))}\n          </div>\n          <p className=\"text-xs text-blue-700 mt-2\">\n             Tip: You can manage all your accounts from your profile!\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3645},"RENDER_DEPLOYMENT.md":{"content":"# Deployment to Render\n\nThis guide explains how to deploy \"Authentic\" to Render.\n\n## Prerequisites\n\n1. GitHub account (repository already created)\n2. Render account (free tier available at https://render.com)\n3. Instagram Graph API access token\n4. Instagram Business Account ID (optional)\n\n## Step-by-Step Deployment\n\n### 1. Push Latest Changes to GitHub\n\nYour code is already pushed, but ensure all latest changes are committed:\n\n```bash\ngit add .\ngit commit -m \"Ready for Render deployment\"\ngit push origin main\n```\n\n### 2. Create Render Account\n\n1. Go to [https://render.com](https://render.com)\n2. Sign up with GitHub (recommended - automatic authentication)\n3. Authorize Render to access your GitHub account\n\n### 3. Create Web Service\n\n1. In Render dashboard, click **\"+ New\"** button\n2. Select **\"Web Service\"**\n3. Connect your GitHub repository `mutepairejonah/Connect`\n4. Select repository and authorize if prompted\n5. Configure the service:\n   - **Name**: `authentic-app` (or any preferred name)\n   - **Environment**: `Node`\n   - **Build Command**: `npm run build`\n   - **Start Command**: `npm start`\n   - **Plan**: Free or Starter (whatever suits your needs)\n\n### 4. Create PostgreSQL Database\n\n1. In Render dashboard, click **\"+ New\"** button\n2. Select **\"PostgreSQL\"**\n3. Configure:\n   - **Name**: `authentic-db`\n   - **Database**: `authenticdb`\n   - **User**: (auto-generated)\n   - **Region**: Same as web service\n   - **Plan**: Free\n\n### 5. Configure Environment Variables\n\nIn the Web Service settings, add these environment variables:\n\n#### Required:\n- **DATABASE_URL**: Copy from the PostgreSQL service (automatic link)\n- **NODE_ENV**: `production`\n- **VITE_INSTAGRAM_ACCESS_TOKEN**: Your Instagram Graph API token\n\n#### Optional:\n- **VITE_INSTAGRAM_BUSINESS_ACCOUNT_ID**: Your Instagram Business Account ID\n\n### 6. Deploy\n\n1. Return to Web Service dashboard\n2. Click **\"Deploy latest commit\"** or wait for automatic deployment (triggered by GitHub push)\n3. View deployment logs in the **\"Events\"** tab\n4. Once deployment shows \"Live\", your app is running!\n\n## Getting Your App URL\n\nAfter successful deployment, you'll see a URL like:\n```\nhttps://authentic-app.onrender.com\n```\n\nUse this URL to access your application.\n\n## Troubleshooting\n\n### Database Connection Failed\n- Ensure DATABASE_URL is correctly linked from PostgreSQL service\n- Wait 30 seconds after creating database for connection to be ready\n- Check that Web Service has access to the database\n\n### Instagram API Not Loading Videos\n- Verify VITE_INSTAGRAM_ACCESS_TOKEN is correctly set\n- Ensure the token has media read permissions\n- Check Instagram Graph API is enabled in your developer account\n\n### Build Failed\n- Check deployment logs for specific errors\n- Ensure all dependencies are in package.json\n- Verify npm run build works locally: `npm run build`\n\n### App Crashes on Deploy\n- Check logs in Events tab for error messages\n- Ensure environment variables are set correctly\n- Verify database migrations ran: Look for database schema creation\n\n### Messages Not Working\n- Verify Socket.io is properly configured for production\n- Check browser console for WebSocket connection errors\n- Ensure backend server is running (check Render logs)\n\n## Database Migrations on Render\n\nAfter first deployment, you may need to push database schema:\n\n1. SSH into Render shell (if available) or use Render CLI\n2. Run: `npm run db:push`\n3. Or connect to PostgreSQL and verify tables are created\n\n## Monitoring\n\n### View Logs\n- Go to Web Service  Events tab to see deployment logs\n- Go to Web Service  Logs tab to see runtime logs\n\n### Monitor Performance\n- Render dashboard shows CPU, memory, and request metrics\n- Free tier has limitations - upgrade if needed\n\n## Redeployment\n\nTo redeploy after code changes:\n\n1. Push changes to GitHub main branch\n2. Render automatically redeploys on push\n3. Or manually trigger in dashboard: **\"Manual Deploy\"**  **\"Deploy latest commit\"**\n\n## Free Tier Limitations\n\n- Apps auto-sleep after 15 minutes of inactivity (paid tiers don't sleep)\n- Limited to 1 free PostgreSQL instance\n- 750 hours/month of free Web Service hours\n- Cold starts may take 30-50 seconds\n\n## Upgrading to Paid Tiers\n\n1. Go to Web Service settings\n2. Under Plan, select **\"Starter\"** or higher\n3. Benefits: Always on, faster cold starts, more compute power\n\n## Need Help?\n\n- Render Docs: https://render.com/docs\n- Render Support: support@render.com\n- Check deployment logs for specific errors\n\n---\n\n**Your live app will be accessible at**: `https://yourdomain.onrender.com`\n","size_bytes":4562},"client/src/pages/Bookmarks.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useStore } from \"@/lib/store\";\nimport { useLocation } from \"wouter\";\nimport { ArrowLeft, Heart, MessageCircle } from \"lucide-react\";\nimport { getUserMedia } from \"@/lib/instagram\";\n\nexport default function Bookmarks() {\n  const { currentUser, bookmarkedPosts, removeBookmark } = useStore();\n  const [, setLocation] = useLocation();\n  const [allMedia, setAllMedia] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const loadMedia = async () => {\n      if (!currentUser?.instagramToken) return;\n      setLoading(true);\n      try {\n        const media = await getUserMedia(undefined, currentUser.instagramToken);\n        const bookmarked = media.filter((m: any) => bookmarkedPosts.includes(m.id));\n        setAllMedia(bookmarked);\n      } catch (error) {\n        console.error(\"Failed to load bookmarks:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadMedia();\n  }, [currentUser?.instagramToken, bookmarkedPosts]);\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200\">\n        <div className=\"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3\">\n          <button\n            onClick={() => setLocation(\"/profile\")}\n            className=\"text-gray-600 hover:text-black transition-colors\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"w-6 h-6\" />\n          </button>\n          <h1 className=\"text-lg font-semibold\">Saved Posts</h1>\n        </div>\n      </header>\n\n      <main className=\"max-w-2xl mx-auto\">\n        {loading ? (\n          <div className=\"flex justify-center items-center h-96\">\n            <p className=\"text-gray-400\">Loading...</p>\n          </div>\n        ) : allMedia.length === 0 ? (\n          <div className=\"flex justify-center items-center h-96 text-gray-400\">\n            <p>No saved posts yet</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-3 gap-1 p-1\">\n            {allMedia.map((post) => (\n              <div\n                key={post.id}\n                className=\"aspect-square bg-gray-100 overflow-hidden cursor-pointer group relative\"\n                onClick={() => setLocation(`/post/${post.id}`)}\n                data-testid={`bookmark-${post.id}`}\n              >\n                {post.media_type === \"VIDEO\" ? (\n                  <video\n                    src={post.media_url}\n                    className=\"w-full h-full object-cover group-hover:opacity-75 transition-opacity\"\n                  />\n                ) : (\n                  <img\n                    src={post.media_url}\n                    alt={post.caption}\n                    className=\"w-full h-full object-cover group-hover:opacity-75 transition-opacity\"\n                  />\n                )}\n\n                <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all flex items-center justify-center gap-4 opacity-0 group-hover:opacity-100\">\n                  <div className=\"flex items-center gap-1 text-white\">\n                    <Heart className=\"w-5 h-5\" />\n                    <span>{post.like_count || 0}</span>\n                  </div>\n                  <div className=\"flex items-center gap-1 text-white\">\n                    <MessageCircle className=\"w-5 h-5\" />\n                    <span>{post.comments_count || 0}</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n","size_bytes":3604},"client/src/components/SearchModal.tsx":{"content":"import { useState } from \"react\";\nimport { Search, X } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface SearchModalProps {\n  onClose: () => void;\n}\n\nexport function SearchModal({ onClose }: SearchModalProps) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchResults, setSearchResults] = useState<any[]>([]);\n  const [searching, setSearching] = useState(false);\n\n  const handleSearch = async (value: string) => {\n    setSearchTerm(value);\n    \n    if (!value || value.trim().length === 0) {\n      setSearchResults([]);\n      return;\n    }\n\n    setSearching(true);\n    try {\n      const res = await fetch(`/api/search/posts?q=${encodeURIComponent(value)}`);\n      const data = await res.json();\n      setSearchResults(data.results || []);\n    } catch (error) {\n      console.error('Search error:', error);\n      setSearchResults([]);\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  return (\n    <div className=\"p-3\">\n      <div className=\"flex items-center gap-2 mb-3\">\n        <div className=\"flex-1 relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground w-4 h-4\" />\n          <Input \n            placeholder=\"Search posts...\" \n            className=\"pl-9 bg-muted/80 border-0 h-9 rounded-full focus-visible:ring-0 focus-visible:bg-muted\" \n            value={searchTerm}\n            onChange={(e) => handleSearch(e.target.value)}\n            autoFocus\n          />\n        </div>\n        <button \n          onClick={onClose}\n          className=\"p-2 hover:bg-muted rounded-full transition-colors\"\n        >\n          <X className=\"w-5 h-5\" />\n        </button>\n      </div>\n\n      {/* Search Results */}\n      <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n        {searchResults.map(post => (\n          <div key={post.id} className=\"p-2 hover:bg-muted/50 rounded-lg transition-colors border border-border\">\n            <p className=\"font-semibold text-sm truncate\">{post.caption || \"Untitled Post\"}</p>\n            <p className=\"text-xs text-muted-foreground truncate\">by {post.username || \"User\"}</p>\n            {post.imageUrl && (\n              <img src={post.imageUrl} alt=\"Post\" className=\"w-full h-20 object-cover rounded mt-2\" />\n            )}\n          </div>\n        ))}\n        {searchTerm && searchResults.length === 0 && !searching && (\n          <p className=\"text-center text-muted-foreground text-sm py-4\">No posts found</p>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":2544}},"version":2}